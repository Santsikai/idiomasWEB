"use strict";(self.webpackChunkidiomasWEB=self.webpackChunkidiomasWEB||[]).push([[179],{6217:(gn,at,j)=>{j.d(at,{nm:()=>Ts});var _=j(4976);j(4650),j(259);var qe=j(5861),Se=j(6881),ze=j(4859),Bt=j(2090),Ot=j(1877);const nt=new Map,Ye={activated:!1,tokenObservers:[]},zt={initialized:!1,enabled:!1};function xt(Qe){return nt.get(Qe)||Object.assign({},Ye)}function nn(){return zt}const Mr="https://content-firebaseappcheck.googleapis.com/v1",Qn="exchangeDebugToken",Ze={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class st{constructor(We,ft,Ct,Wt,Xn){if(this.operation=We,this.retryPolicy=ft,this.getWaitDuration=Ct,this.lowerBound=Wt,this.upperBound=Xn,this.pending=null,this.nextErrorWaitInterval=Wt,Wt>Xn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(We){var ft=this;return(0,qe.Z)(function*(){ft.stop();try{ft.pending=new Bt.BH,yield function tt(Qe){return new Promise(We=>{setTimeout(We,Qe)})}(ft.getNextRun(We)),ft.pending.resolve(),yield ft.pending.promise,ft.pending=new Bt.BH,yield ft.operation(),ft.pending.resolve(),yield ft.pending.promise,ft.process(!0).catch(()=>{})}catch(Ct){ft.retryPolicy(Ct)?ft.process(!1).catch(()=>{}):ft.stop()}})()}getNextRun(We){if(We)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const ft=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),ft}}}const it=new Bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $t(Qe){if(!xt(Qe).activated)throw it.create("use-before-activation",{appName:Qe.name})}function zn(Qe,We){return cr.apply(this,arguments)}function cr(){return(cr=(0,qe.Z)(function*({url:Qe,body:We},ft){const Ct={"Content-Type":"application/json"},Wt=ft.getImmediate({optional:!0});if(Wt){const gi=yield Wt.getHeartbeatsHeader();gi&&(Ct["X-Firebase-Client"]=gi)}const Xn={method:"POST",body:JSON.stringify(We),headers:Ct};let lr,fr;try{lr=yield fetch(Qe,Xn)}catch(gi){throw it.create("fetch-network-error",{originalErrorMessage:gi?.message})}if(200!==lr.status)throw it.create("fetch-status-error",{httpStatus:lr.status});try{fr=yield lr.json()}catch(gi){throw it.create("fetch-parse-error",{originalErrorMessage:gi?.message})}const kr=fr.ttl.match(/^([\d.]+)(s)$/);if(!kr||!kr[2]||isNaN(Number(kr[1])))throw it.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${fr.ttl}`});const Ui=1e3*Number(kr[1]),$i=Date.now();return{token:fr.token,expireTimeMillis:$i+Ui,issuedAtTimeMillis:$i}})).apply(this,arguments)}function ur(Qe,We){const{projectId:ft,appId:Ct,apiKey:Wt}=Qe.options;return{url:`${Mr}/projects/${ft}/apps/${Ct}:${Qn}?key=${Wt}`,body:{debug_token:We}}}const qn="firebase-app-check-database",or=1,Dr="firebase-app-check-store";let on=null;function er(Qe,We){return ir.apply(this,arguments)}function ir(){return(ir=(0,qe.Z)(function*(Qe,We){const Ct=(yield function Cr(){return on||(on=new Promise((Qe,We)=>{try{const ft=indexedDB.open(qn,or);ft.onsuccess=Ct=>{Qe(Ct.target.result)},ft.onerror=Ct=>{var Wt;We(it.create("storage-open",{originalErrorMessage:null===(Wt=Ct.target.error)||void 0===Wt?void 0:Wt.message}))},ft.onupgradeneeded=Ct=>{0===Ct.oldVersion&&Ct.target.result.createObjectStore(Dr,{keyPath:"compositeKey"})}}catch(ft){We(it.create("storage-open",{originalErrorMessage:ft?.message}))}}),on)}()).transaction(Dr,"readwrite"),Xn=Ct.objectStore(Dr).put({compositeKey:Qe,value:We});return new Promise((lr,fr)=>{Xn.onsuccess=kr=>{lr()},Ct.onerror=kr=>{var Ui;fr(it.create("storage-set",{originalErrorMessage:null===(Ui=kr.target.error)||void 0===Ui?void 0:Ui.message}))}})})).apply(this,arguments)}const Kr=new Ot.Yd("@firebase/app-check");function Hr(Qe,We){return(0,Bt.hl)()?function jr(Qe,We){return er(function Ar(Qe){return`${Qe.options.appId}-${Qe.name}`}(Qe),We)}(Qe,We).catch(ft=>{Kr.warn(`Failed to write token to IndexedDB. Error: ${ft}`)}):Promise.resolve()}function _n(){return nn().enabled}function je(){return At.apply(this,arguments)}function At(){return(At=(0,qe.Z)(function*(){const Qe=nn();if(Qe.enabled&&Qe.token)return Qe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const xn={error:"UNKNOWN_ERROR"};function Et(Qe){return Bt.US.encodeString(JSON.stringify(Qe),!1)}function de(Qe){return te.apply(this,arguments)}function te(){return(te=(0,qe.Z)(function*(Qe,We=!1){const ft=Qe.app;$t(ft);const Ct=xt(ft);let Xn,Wt=Ct.token;if(Wt&&!re(Wt)&&(Ct.token=void 0,Wt=void 0),!Wt){const kr=yield Ct.cachedTokenPromise;kr&&(re(kr)?Wt=kr:yield Hr(ft,void 0))}if(!We&&Wt&&re(Wt))return{token:Wt.token};let fr,lr=!1;if(_n()){Ct.exchangeTokenPromise||(Ct.exchangeTokenPromise=zn(ur(ft,yield je()),Qe.heartbeatServiceProvider).finally(()=>{Ct.exchangeTokenPromise=void 0}),lr=!0);const kr=yield Ct.exchangeTokenPromise;return yield Hr(ft,kr),Ct.token=kr,{token:kr.token}}try{Ct.exchangeTokenPromise||(Ct.exchangeTokenPromise=Ct.provider.getToken().finally(()=>{Ct.exchangeTokenPromise=void 0}),lr=!0),Wt=yield xt(ft).exchangeTokenPromise}catch(kr){"appCheck/throttled"===kr.code?Kr.warn(kr.message):Kr.error(kr),Xn=kr}return Wt?Xn?fr=re(Wt)?{token:Wt.token,internalError:Xn}:ye(Xn):(fr={token:Wt.token},Ct.token=Wt,yield Hr(ft,Wt)):fr=ye(Xn),lr&&function we(Qe,We){const ft=xt(Qe).tokenObservers;for(const Ct of ft)try{"EXTERNAL"===Ct.type&&null!=We.error?Ct.error(We.error):Ct.next(We)}catch{}}(ft,fr),fr})).apply(this,arguments)}function le(Qe){return ct.apply(this,arguments)}function ct(){return(ct=(0,qe.Z)(function*(Qe){const We=Qe.app;$t(We);const{provider:ft}=xt(We);if(_n()){const Ct=yield je(),{token:Wt}=yield zn(ur(We,Ct),Qe.heartbeatServiceProvider);return{token:Wt}}{const{token:Ct}=yield ft.getToken();return{token:Ct}}})).apply(this,arguments)}function ve(Qe,We){const ft=xt(Qe),Ct=ft.tokenObservers.filter(Wt=>Wt.next!==We);0===Ct.length&&ft.tokenRefresher&&ft.tokenRefresher.isRunning()&&ft.tokenRefresher.stop(),ft.tokenObservers=Ct}function be(Qe){const{app:We}=Qe,ft=xt(We);let Ct=ft.tokenRefresher;Ct||(Ct=function He(Qe){const{app:We}=Qe;return new st((0,qe.Z)(function*(){let Ct;if(Ct=xt(We).token?yield de(Qe,!0):yield de(Qe),Ct.error)throw Ct.error;if(Ct.internalError)throw Ct.internalError}),()=>!0,()=>{const ft=xt(We);if(ft.token){let Ct=ft.token.issuedAtTimeMillis+.5*(ft.token.expireTimeMillis-ft.token.issuedAtTimeMillis)+3e5;return Ct=Math.min(Ct,ft.token.expireTimeMillis-3e5),Math.max(0,Ct-Date.now())}return 0},Ze.RETRIAL_MIN_WAIT,Ze.RETRIAL_MAX_WAIT)}(Qe),ft.tokenRefresher=Ct),!Ct.isRunning()&&ft.isTokenAutoRefreshEnabled&&Ct.start()}function re(Qe){return Qe.expireTimeMillis-Date.now()>0}function ye(Qe){return{token:Et(xn),error:Qe}}class pe{constructor(We,ft){this.app=We,this.heartbeatServiceProvider=ft}_delete(){const{tokenObservers:We}=xt(this.app);for(const ft of We)ve(this.app,ft.next);return Promise.resolve()}}const gr="app-check-internal";!function Lr(){(0,Se._registerComponent)(new ze.wA("app-check",Qe=>function he(Qe,We){return new pe(Qe,We)}(Qe.getProvider("app").getImmediate(),Qe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Qe,We,ft)=>{Qe.getProvider(gr).initialize()})),(0,Se._registerComponent)(new ze.wA(gr,Qe=>function oe(Qe){return{getToken:We=>de(Qe,We),getLimitedUseToken:()=>le(Qe),addTokenListener:We=>function vt(Qe,We,ft,Ct){const{app:Wt}=Qe,Xn=xt(Wt);if(Xn.tokenObservers=[...Xn.tokenObservers,{next:ft,error:Ct,type:We}],Xn.token&&re(Xn.token)){const fr=Xn.token;Promise.resolve().then(()=>{ft({token:fr.token}),be(Qe)}).catch(()=>{})}Xn.cachedTokenPromise.then(()=>be(Qe))}(Qe,"INTERNAL",We),removeTokenListener:We=>ve(Qe.app,We)}}(Qe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Se.registerVersion)("@firebase/app-check","0.8.0")}();class Ts{constructor(){return(0,_.vb)("app-check")}}typeof window<"u"&&window},1205:(gn,at,j)=>{j.d(at,{zQ:()=>Mr,ww:()=>_e,rT:()=>zt,f7:()=>kn,L6:()=>nt,_Q:()=>Ye,lh:()=>xt,Qv:()=>Ot,nw:()=>nn});var _=j(4650),L=j(7579),W=j(9646),Fe=j(9751),Ne=j(8996),Ae=j(6451),$e=j(5363),Ge=j(3900),Ve=j(4004),Ie=j(6063);class De extends L.x{constructor(Qn=1/0,Ze=1/0,lt=Ie.l){super(),this._bufferSize=Qn,this._windowTime=Ze,this._timestampProvider=lt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ze===1/0,this._bufferSize=Math.max(1,Qn),this._windowTime=Math.max(1,Ze)}next(Qn){const{isStopped:Ze,_buffer:lt,_infiniteTimeWindow:st,_timestampProvider:tt,_windowTime:dt}=this;Ze||(lt.push(Qn),!st&&lt.push(tt.now()+dt)),this._trimBuffer(),super.next(Qn)}_subscribe(Qn){this._throwIfClosed(),this._trimBuffer();const Ze=this._innerSubscribe(Qn),{_infiniteTimeWindow:lt,_buffer:st}=this,tt=st.slice();for(let dt=0;dt<tt.length&&!Qn.closed;dt+=lt?1:2)Qn.next(tt[dt]);return this._checkFinalizedStatuses(Qn),Ze}_trimBuffer(){const{_bufferSize:Qn,_timestampProvider:Ze,_buffer:lt,_infiniteTimeWindow:st}=this,tt=(st?1:2)*Qn;if(Qn<1/0&&tt<lt.length&&lt.splice(0,lt.length-tt),!st){const dt=Ze.now();let it=0;for(let ln=1;ln<lt.length&&lt[ln]<=dt;ln+=2)it=ln;it&&lt.splice(0,it+1)}}}var ke=j(3099);function Tt(Kn,Qn,Ze){let lt,st=!1;return Kn&&"object"==typeof Kn?({bufferSize:lt=1/0,windowTime:Qn=1/0,refCount:st=!1,scheduler:Ze}=Kn):lt=Kn??1/0,(0,ke.B)({connector:()=>new De(lt,Qn,Ze),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:st})}var ut=j(590),Ht=j(576);function Kt(Kn,Qn){return(0,Ht.m)(Qn)?(0,Ge.w)(()=>Kn,Qn):(0,Ge.w)(()=>Kn)}var pt=j(9468),It=j(9300),Oe=j(4976),Ft=j(2011),qe=j(6895),Se=j(6217),ze=j(9260);const Ot=new _.OlP("angularfire2.auth.use-emulator"),nt=new _.OlP("angularfire2.auth.settings"),Ye=new _.OlP("angularfire2.auth.tenant-id"),zt=new _.OlP("angularfire2.auth.langugage-code"),xt=new _.OlP("angularfire2.auth.use-device-language"),kn=new _.OlP("angularfire.auth.persistence"),nn=(Kn,Qn,Ze,lt,st,tt,dt,it)=>(0,Ft.cc)(`${Kn.name}.auth`,"AngularFireAuth",Kn.name,()=>{const ln=Qn.runOutsideAngular(()=>Kn.auth());if(Ze&&ln.useEmulator(...Ze),lt&&(ln.tenantId=lt),ln.languageCode=st,tt&&ln.useDeviceLanguage(),dt)for(const[$t,Ln]of Object.entries(dt))ln.settings[$t]=Ln;return it&&ln.setPersistence(it),ln},[Ze,lt,st,tt,dt,it]);let Mr=(()=>{class Kn{constructor(Ze,lt,st,tt,dt,it,ln,$t,Ln,Cn,zn,cr){const sr=new L.x,Dn=(0,W.of)(void 0).pipe((0,$e.Q)(dt.outsideAngular),(0,Ge.w)(()=>tt.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,2644)))),(0,Ve.U)(()=>(0,Ft.on)(Ze,tt,lt)),(0,Ve.U)(ur=>nn(ur,tt,it,$t,Ln,Cn,ln,zn)),Tt({bufferSize:1,refCount:!1}));if((0,qe.PM)(st))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,W.of)(null);else{Dn.pipe((0,ut.P)()).subscribe();const qn=Dn.pipe((0,Ge.w)(Tn=>Tn.getRedirectResult().then(on=>on,()=>null)),Oe.iC,Tt({bufferSize:1,refCount:!1})),or=Dn.pipe((0,Ge.w)(Tn=>new Fe.y(on=>({unsubscribe:tt.runOutsideAngular(()=>Tn.onAuthStateChanged(Cr=>on.next(Cr),Cr=>on.error(Cr),()=>on.complete()))})))),Dr=Dn.pipe((0,Ge.w)(Tn=>new Fe.y(on=>({unsubscribe:tt.runOutsideAngular(()=>Tn.onIdTokenChanged(Cr=>on.next(Cr),Cr=>on.error(Cr),()=>on.complete()))}))));this.authState=qn.pipe(Kt(or),(0,pt.R)(dt.outsideAngular),(0,$e.Q)(dt.insideAngular)),this.user=qn.pipe(Kt(Dr),(0,pt.R)(dt.outsideAngular),(0,$e.Q)(dt.insideAngular)),this.idToken=this.user.pipe((0,Ge.w)(Tn=>Tn?(0,Ne.D)(Tn.getIdToken()):(0,W.of)(null))),this.idTokenResult=this.user.pipe((0,Ge.w)(Tn=>Tn?(0,Ne.D)(Tn.getIdTokenResult()):(0,W.of)(null))),this.credential=(0,Ae.T)(qn,sr,this.authState.pipe((0,It.h)(Tn=>!Tn))).pipe((0,Ve.U)(Tn=>Tn?.user?Tn:null),(0,pt.R)(dt.outsideAngular),(0,$e.Q)(dt.insideAngular))}return(0,Ft.pX)(this,Dn,tt,{spy:{apply:(ur,qn,or)=>{(ur.startsWith("signIn")||ur.startsWith("createUser"))&&or.then(Dr=>sr.next(Dr))}}})}}return Kn.\u0275fac=function(Ze){return new(Ze||Kn)(_.LFG(Ft.Dh),_.LFG(Ft.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Oe.HU),_.LFG(Ot,8),_.LFG(nt,8),_.LFG(Ye,8),_.LFG(zt,8),_.LFG(xt,8),_.LFG(kn,8),_.LFG(Se.nm,8))},Kn.\u0275prov=_.Yz7({token:Kn,factory:Kn.\u0275fac,providedIn:"any"}),Kn})(),_e=(()=>{class Kn{constructor(){ze.Z.registerVersion("angularfire",Oe.q4.full,"auth-compat")}}return Kn.\u0275fac=function(Ze){return new(Ze||Kn)},Kn.\u0275mod=_.oAB({type:Kn}),Kn.\u0275inj=_.cJS({providers:[Mr]}),Kn})()},1762:(gn,at,j)=>{j.d(at,{ST:()=>y0,yb:()=>lh});var _=j(4650),L=j(4986),W=j(9751),Fe=j(8996),Ne=j(9646),Ae=j(4976),$e=j(8675),Ge=j(4482),Ve=j(5403);function Ie(){return(0,Ge.e)((i,e)=>{let t,l=!1;i.subscribe((0,Ve.x)(e,d=>{const m=t;t=d,l&&e.next([m,d]),l=!0}))})}var nt,De=j(4004),ke=j(5026),Tt=j(1884),ut=j(9300),Ht=j(2011),Kt=j(6895),It=(j(2644),j(3942)),Oe=j(5861),Ft=j(6881),qe=j(4859),Se=j(1877),ze=j(2090),Bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ot={},Ye=Ye||{},zt=Bt||self;function xt(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function kn(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Mr="closure_uid_"+(1e9*Math.random()>>>0),_e=0;function Kn(i,e,t){return i.call.apply(i.bind,arguments)}function Qn(i,e,t){if(!i)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,l),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function Ze(i,e,t){return(Ze=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kn:Qn).apply(null,arguments)}function lt(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var l=t.slice();return l.push.apply(l,arguments),i.apply(this,l)}}function st(i,e){function t(){}t.prototype=e.prototype,i.$=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.ac=function(l,d,m){for(var w=Array(arguments.length-2),O=2;O<arguments.length;O++)w[O-2]=arguments[O];return e.prototype[d].apply(l,w)}}function tt(){this.s=this.s,this.o=this.o}tt.prototype.s=!1,tt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function nn(i){Object.prototype.hasOwnProperty.call(i,Mr)&&i[Mr]||(i[Mr]=++_e)}(this)},tt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const it=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function ln(i){const e=i.length;if(0<e){const t=Array(e);for(let l=0;l<e;l++)t[l]=i[l];return t}return[]}function $t(i,e){for(let t=1;t<arguments.length;t++){const l=arguments[t];if(xt(l)){const d=i.length||0,m=l.length||0;i.length=d+m;for(let w=0;w<m;w++)i[d+w]=l[w]}else i.push(l)}}function Ln(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Ln.prototype.h=function(){this.defaultPrevented=!0};var Cn=function(){if(!zt.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{zt.addEventListener("test",()=>{},e),zt.removeEventListener("test",()=>{},e)}catch{}return i}();function zn(i){return/^[\s\xa0]*$/.test(i)}function cr(){var i=zt.navigator;return i&&(i=i.userAgent)?i:""}function sr(i){return-1!=cr().indexOf(i)}function Dn(i){return Dn[" "](i),i}Dn[" "]=function(){};var jr,i,qn=sr("Opera"),or=sr("Trident")||sr("MSIE"),Dr=sr("Edge"),Tn=Dr||or,on=sr("Gecko")&&!(-1!=cr().toLowerCase().indexOf("webkit")&&!sr("Edge"))&&!(sr("Trident")||sr("MSIE"))&&!sr("Edge"),Cr=-1!=cr().toLowerCase().indexOf("webkit")&&!sr("Edge");function Li(){var i=zt.document;return i?i.documentMode:void 0}e:{var ci="",Ri=(i=cr(),on?/rv:([^\);]+)(\)|;)/.exec(i):Dr?/Edge\/([\d\.]+)/.exec(i):or?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Cr?/WebKit\/(\S+)/.exec(i):qn?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Ri&&(ci=Ri?Ri[1]:""),or){var er=Li();if(null!=er&&er>parseFloat(ci)){jr=String(er);break e}}jr=ci}var un=zt.document&&or&&(Li()||parseInt(jr,10))||void 0;function Ar(i,e){if(Ln.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,l=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(on){e:{try{Dn(e.nodeName);var d=!0;break e}catch{}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,l?(this.clientX=void 0!==l.clientX?l.clientX:l.pageX,this.clientY=void 0!==l.clientY?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Kr[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ar.$.h.call(this)}}st(Ar,Ln);var Kr={2:"touch",3:"pen",4:"mouse"};Ar.prototype.h=function(){Ar.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),Fr=0;function Hr(i,e,t,l,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!l,this.la=d,this.key=++Fr,this.fa=this.ia=!1}function zr(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function gt(i,e,t){for(const l in i)e.call(t,i[l],l,i)}function je(i){const e={};for(const t in i)e[t]=i[t];return e}const At="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function an(i,e){let t,l;for(let d=1;d<arguments.length;d++){for(t in l=arguments[d],l)i[t]=l[t];for(let m=0;m<At.length;m++)t=At[m],Object.prototype.hasOwnProperty.call(l,t)&&(i[t]=l[t])}}function xn(i){this.src=i,this.g={},this.h=0}function Et(i,e){var t=e.type;if(t in i.g){var m,l=i.g[t],d=it(l,e);(m=0<=d)&&Array.prototype.splice.call(l,d,1),m&&(zr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function de(i,e,t,l){for(var d=0;d<i.length;++d){var m=i[d];if(!m.fa&&m.listener==e&&m.capture==!!t&&m.la==l)return d}return-1}xn.prototype.add=function(i,e,t,l,d){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var w=de(i,e,l,d);return-1<w?(e=i[w],t||(e.ia=!1)):((e=new Hr(e,this.src,m,!!l,d)).ia=t,i.push(e)),e};var te="closure_lm_"+(1e6*Math.random()|0),le={};function ct(i,e,t,l,d){if(l&&l.once)return be(i,e,t,l,d);if(Array.isArray(e)){for(var m=0;m<e.length;m++)ct(i,e[m],t,l,d);return null}return t=oe(t),i&&i[An]?i.O(e,t,kn(l)?!!l.capture:!!l,d):vt(i,e,t,!1,l,d)}function vt(i,e,t,l,d,m){if(!e)throw Error("Invalid event type");var w=kn(d)?!!d.capture:!!d,O=pe(i);if(O||(i[te]=O=new xn(i)),(t=O.add(e,t,l,w,m)).proxy)return t;if(l=function ve(){const e=ye;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=l,l.src=i,l.listener=t,i.addEventListener)Cn||(d=w),void 0===d&&(d=!1),i.addEventListener(e.toString(),l,d);else if(i.attachEvent)i.attachEvent(re(e.toString()),l);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(l)}return t}function be(i,e,t,l,d){if(Array.isArray(e)){for(var m=0;m<e.length;m++)be(i,e[m],t,l,d);return null}return t=oe(t),i&&i[An]?i.P(e,t,kn(l)?!!l.capture:!!l,d):vt(i,e,t,!0,l,d)}function He(i,e,t,l,d){if(Array.isArray(e))for(var m=0;m<e.length;m++)He(i,e[m],t,l,d);else l=kn(l)?!!l.capture:!!l,t=oe(t),i&&i[An]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=de(m=i.g[e],t,l,d))&&(zr(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=pe(i))&&(e=i.g[e.toString()],i=-1,e&&(i=de(e,t,l,d)),(t=-1<i?e[i]:null)&&we(t))}function we(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[An])Et(e.i,i);else{var t=i.type,l=i.proxy;e.removeEventListener?e.removeEventListener(t,l,i.capture):e.detachEvent?e.detachEvent(re(t),l):e.addListener&&e.removeListener&&e.removeListener(l),(t=pe(e))?(Et(t,i),0==t.h&&(t.src=null,e[te]=null)):zr(i)}}}function re(i){return i in le?le[i]:le[i]="on"+i}function ye(i,e){if(i.fa)i=!0;else{e=new Ar(e,this);var t=i.listener,l=i.la||i.src;i.ia&&we(i),i=t.call(l,e)}return i}function pe(i){return(i=i[te])instanceof xn?i:null}var he="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(i){return"function"==typeof i?i:(i[he]||(i[he]=function(e){return i.handleEvent(e)}),i[he])}function Re(){tt.call(this),this.i=new xn(this),this.S=this,this.J=null}function rt(i,e){var t,l=i.J;if(l)for(t=[];l;l=l.J)t.push(l);if(i=i.S,l=e.type||e,"string"==typeof e)e=new Ln(e,i);else if(e instanceof Ln)e.target=e.target||i;else{var d=e;an(e=new Ln(l,i),d)}if(d=!0,t)for(var m=t.length-1;0<=m;m--){var w=e.g=t[m];d=Ut(w,l,!0,e)&&d}if(d=Ut(w=e.g=i,l,!0,e)&&d,d=Ut(w,l,!1,e)&&d,t)for(m=0;m<t.length;m++)d=Ut(w=e.g=t[m],l,!1,e)&&d}function Ut(i,e,t,l){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,m=0;m<e.length;++m){var w=e[m];if(w&&!w.fa&&w.capture==t){var O=w.listener,G=w.la||w.src;w.ia&&Et(i.i,w),d=!1!==O.call(G,l)&&d}}return d&&!l.defaultPrevented}st(Re,tt),Re.prototype[An]=!0,Re.prototype.removeEventListener=function(i,e,t,l){He(this,i,e,t,l)},Re.prototype.N=function(){if(Re.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],l=0;l<t.length;l++)zr(t[l]);delete i.g[e],i.h--}}this.J=null},Re.prototype.O=function(i,e,t,l){return this.i.add(String(i),e,!1,t,l)},Re.prototype.P=function(i,e,t,l){return this.i.add(String(i),e,!0,t,l)};var vn=zt.JSON.stringify;function ii(){var i=En;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var ht=new class _r{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new mt,i=>i.reset());class mt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qt(i){var e=1;i=i.split(":");const t=[];for(;0<e&&i.length;)t.push(i.shift()),e--;return i.length&&t.push(i.join(":")),t}function Nn(i){zt.setTimeout(()=>{throw i},0)}let Bn,tr=!1,En=new class Wi{constructor(){this.h=this.g=null}add(e,t){const l=ht.get();l.set(e,t),this.h?this.h.next=l:this.g=l,this.h=l}},Sr=()=>{const i=zt.Promise.resolve(void 0);Bn=()=>{i.then(Rr)}};var Rr=()=>{for(var i;i=ii();){try{i.h.call(i.g)}catch(t){Nn(t)}var e=ht;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}tr=!1};function $r(i,e){Re.call(this),this.h=i||1,this.g=e||zt,this.j=Ze(this.qb,this),this.l=Date.now()}function Ti(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function aa(i,e,t){if("function"==typeof i)t&&(i=Ze(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ze(i.handleEvent,i)}return 2147483647<Number(e)?-1:zt.setTimeout(i,e||0)}function Ao(i){i.g=aa(()=>{i.g=null,i.i&&(i.i=!1,Ao(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}st($r,Re),(nt=$r.prototype).ga=!1,nt.T=null,nt.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),rt(this,"tick"),this.ga&&(Ti(this),this.start()))}},nt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.N=function(){$r.$.N.call(this),Ti(this),delete this.g};class xo extends tt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ao(this)}N(){super.N(),this.g&&(zt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bi(i){tt.call(this),this.h=i,this.g={}}st(Bi,tt);var hn=[];function dr(i,e,t,l){Array.isArray(t)||(t&&(hn[0]=t.toString()),t=hn);for(var d=0;d<t.length;d++){var m=ct(e,t[d],l||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function mi(i){gt(i.g,function(e,t){this.g.hasOwnProperty(t)&&we(e)},i),i.g={}}function is(){this.g=!0}function Ai(i,e,t,l){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ts(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var l=t[i];if(!(2>l.length)){var d=l[1];if(Array.isArray(d)&&!(1>d.length)){var m=d[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var w=1;w<d.length;w++)d[w]=""}}}return vn(t)}catch{return e}}(i,t)+(l?" "+l:"")})}Bi.prototype.N=function(){Bi.$.N.call(this),mi(this)},Bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},is.prototype.Ea=function(){this.g=!1},is.prototype.info=function(){};var Xr={},nr=null;function bs(){return nr=nr||new Re}function lo(i){Ln.call(this,Xr.Ta,i)}function As(i){const e=bs();rt(e,new lo(e))}function Zs(i,e){Ln.call(this,Xr.STAT_EVENT,i),this.stat=e}function Vr(i){const e=bs();rt(e,new Zs(e,i))}function Mo(i,e){Ln.call(this,Xr.Ua,i),this.size=e}function Cs(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return zt.setTimeout(function(){i()},e)}Xr.Ta="serverreachability",st(lo,Ln),Xr.STAT_EVENT="statevent",st(Zs,Ln),Xr.Ua="timingevent",st(Mo,Ln);var Ki={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Qs={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ei(){}function ms(){}Ei.prototype.h=null;var ft,Xs={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Qe(){Ln.call(this,"d")}function We(){Ln.call(this,"c")}function Ct(){}function Wt(i,e,t,l){this.l=i,this.j=e,this.m=t,this.W=l||1,this.U=new Bi(this),this.P=lr,this.V=new $r(i=Tn?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}st(Qe,Ln),st(We,Ln),st(Ct,Ei),Ct.prototype.g=function(){return new XMLHttpRequest},Ct.prototype.i=function(){return{}},ft=new Ct;var lr=45e3,fr={},kr={};function Ui(i,e,t){i.L=1,i.v=la(qi(e)),i.s=t,i.S=!0,$i(i,null)}function $i(i,e){i.G=Date.now(),Js(i),i.A=qi(i.v);var t=i.A,l=i.W;Array.isArray(l)||(l=[String(l)]),os(t.i,"t",l),i.C=0,t=i.l.J,i.h=new Xn,i.g=ql(i.l,t?e:null,!i.s),0<i.O&&(i.M=new xo(Ze(i.Pa,i,i.g),i.O)),dr(i.U,i.g,"readystatechange",i.nb),e=i.I?je(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),As(),function gr(i,e,t,l,d,m){i.info(function(){if(i.g)if(m)for(var w="",O=m.split("&"),G=0;G<O.length;G++){var Q=O[G].split("=");if(1<Q.length){var ce=Q[0];Q=Q[1];var Ue=ce.split("_");w=2<=Ue.length&&"type"==Ue[1]?w+(ce+"=")+Q+"&":w+(ce+"=redacted&")}}else w=null;else w=m;return"XMLHTTP REQ ("+l+") [attempt "+d+"]: "+e+"\n"+t+"\n"+w})}(i.j,i.u,i.A,i.m,i.W,i.s)}function gi(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function Sa(i,e,t){let d,l=!0;for(;!i.J&&i.C<t.length;){if(d=Bs(i,t),d==kr){4==e&&(i.o=4,Vr(14),l=!1),Ai(i.j,i.m,null,"[Incomplete Response]");break}if(d==fr){i.o=4,Vr(15),Ai(i.j,i.m,t,"[Invalid Chunk]"),l=!1;break}Ai(i.j,i.m,d,null),Ta(i,d)}gi(i)&&d!=kr&&d!=fr&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Vr(16),l=!1),i.i=i.i&&l,l?0<t.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),fl(e),e.M=!0,Vr(11))):(Ai(i.j,i.m,t,"[Invalid Chunked Response]"),Us(i),Ro(i))}function Bs(i,e){var t=i.C,l=e.indexOf("\n",t);return-1==l?kr:(t=Number(e.substring(t,l)),isNaN(t)?fr:(l+=1)+t>e.length?kr:(e=e.slice(l,l+t),i.C=l+t,e))}function Js(i){i.Y=Date.now()+i.P,Eo(i,i.P)}function Eo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Cs(Ze(i.lb,i),e)}function es(i){i.B&&(zt.clearTimeout(i.B),i.B=null)}function Ro(i){0==i.l.H||i.J||Ra(i.l,i)}function Us(i){es(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,Ti(i.V),mi(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function Ta(i,e){try{var t=i.l;if(0!=t.H&&(t.g==i||Mt(t.i,i)))if(!i.K&&Mt(t.i,i)&&3==t.H){try{var l=t.Ja.g.parse(e)}catch{l=null}if(Array.isArray(l)&&3==l.length){var d=l;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<i.G))break e;Lo(t),Co(t)}qa(t),Vr(18)}}else t.Fa=d[1],0<t.Fa-t.V&&37500>d[2]&&t.G&&0==t.A&&!t.v&&(t.v=Cs(Ze(t.ib,t),6e3));if(1>=Be(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else no(t,11)}else if((i.K||t.g==i)&&Lo(t),!zn(e))for(d=t.Ja.g.parse(e),e=0;e<d.length;e++){let Q=d[e];if(t.V=Q[0],Q=Q[1],2==t.H)if("c"==Q[0]){t.K=Q[1],t.pa=Q[2];const ce=Q[3];null!=ce&&(t.ra=ce,t.l.info("VER="+t.ra));const Ue=Q[4];null!=Ue&&(t.Ga=Ue,t.l.info("SVER="+t.Ga));const bt=Q[5];null!=bt&&"number"==typeof bt&&0<bt&&(t.L=l=1.5*bt,t.l.info("backChannelRequestTimeoutMs_="+l)),l=t;const jt=i.g;if(jt){const mn=jt.g?jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mn){var m=l.i;m.g||-1==mn.indexOf("spdy")&&-1==mn.indexOf("quic")&&-1==mn.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(Xt(m,m.h),m.h=null))}if(l.F){const Mn=jt.g?jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Mn&&(l.Da=Mn,Ii(l.I,l.F,Mn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-i.G,t.l.info("Handshake RTT: "+t.S+"ms"));var w=i;if((l=t).wa=Gc(l,l.J?l.pa:null,l.Y),w.K){Jt(l.i,w);var O=w,G=l.L;G&&O.setTimeout(G),O.B&&(es(O),Js(O)),l.g=w}else hl(l);0<t.j.length&&Ka(t)}else"stop"!=Q[0]&&"close"!=Q[0]||no(t,7);else 3==t.H&&("stop"==Q[0]||"close"==Q[0]?"stop"==Q[0]?no(t,7):Fo(t):"noop"!=Q[0]&&t.h&&t.h.Aa(Q),t.A=0)}As()}catch{}}function co(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(xt(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function Cl(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(xt(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const l in i)e[t++]=l;return e}}}(i),l=function gs(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(xt(i)){for(var e=[],t=i.length,l=0;l<t;l++)e.push(i[l]);return e}for(l in e=[],t=0,i)e[t++]=i[l];return e}(i),d=l.length,m=0;m<d;m++)e.call(void 0,l[m],t&&t[m],i)}(nt=Wt.prototype).setTimeout=function(i){this.P=i},nt.nb=function(i){i=i.target;const e=this.M;e&&3==Zo(i)?e.l():this.Pa(i)},nt.Pa=function(i){try{if(i==this.g)e:{const ce=Zo(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ce)&&(3!=ce||Tn||this.g&&(this.h.h||this.g.ja()||vc(this.g)))){this.J||4!=ce||7==e||As(),es(this);var t=this.g.da();this.ca=t;t:if(gi(this)){var l=vc(this.g);i="";var d=l.length,m=4==Zo(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Us(this),Ro(this);var w="";break t}this.h.i=new zt.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(l[e],{stream:m&&e==d-1});l.splice(0,d),this.h.g+=i,this.C=0,w=this.h.g}else w=this.g.ja();if(this.i=200==t,function Lr(i,e,t,l,d,m,w){i.info(function(){return"XMLHTTP RESP ("+l+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+m+" "+w})}(this.j,this.u,this.A,this.m,this.W,ce,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var O,G=this.g;if((O=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zn(O)){var Q=O;break t}}Q=null}if(!(t=Q)){this.i=!1,this.o=3,Vr(12),Us(this),Ro(this);break e}Ai(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ta(this,t)}this.S?(Sa(this,ce,w),Tn&&this.i&&3==ce&&(dr(this.U,this.V,"tick",this.mb),this.V.start())):(Ai(this.j,this.m,w,null),Ta(this,w)),4==ce&&Us(this),this.i&&!this.J&&(4==ce?Ra(this.l,this):(this.i=!1,Js(this)))}else(function Cd(i){const e={};i=(i.g&&2<=Zo(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let l=0;l<i.length;l++){if(zn(i[l]))continue;var t=Qt(i[l]);const d=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const m=e[d]||[];e[d]=m,m.push(t)}!function _n(i,e){for(const t in i)e.call(void 0,i[t],t,i)}(e,function(l){return l.join(", ")})})(this.g),400==t&&0<w.indexOf("Unknown SID")?(this.o=3,Vr(12)):(this.o=0,Vr(13)),Us(this),Ro(this)}}}catch{}},nt.mb=function(){if(this.g){var i=Zo(this.g),e=this.g.ja();this.C<e.length&&(es(this),Sa(this,i,e),this.i&&4!=i&&Js(this))}},nt.cancel=function(){this.J=!0,Us(this)},nt.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Tr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(As(),Vr(17)),Us(this),this.o=2,Ro(this)):Eo(this,this.Y-i)};var Aa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function js(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof js){this.h=i.h,Ma(this,i.j),this.s=i.s,this.g=i.g,Oo(this,i.m),this.l=i.l;var e=i.i,t=new da;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),wo(this,t),this.o=i.o}else i&&(e=String(i).match(Aa))?(this.h=!1,Ma(this,e[1]||"",!0),this.s=cs(e[2]||""),this.g=cs(e[3]||"",!0),Oo(this,e[4]),this.l=cs(e[5]||"",!0),wo(this,e[6]||"",!0),this.o=cs(e[7]||"")):(this.h=!1,this.i=new da(null,this.h))}function qi(i){return new js(i)}function Ma(i,e,t){i.j=t?cs(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Oo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function wo(i,e,t){e instanceof da?(i.i=e,function Ee(i,e){e&&!i.j&&(bo(i),i.i=null,i.g.forEach(function(t,l){var d=l.toLowerCase();l!=d&&(Ga(this,l),os(this,d,t))},i)),i.j=e}(i.i,i.h)):(t||(e=ss(e,ua)),i.i=new da(e,i.h))}function Ii(i,e,t){i.i.set(e,t)}function la(i){return Ii(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function cs(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ss(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Hs),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Hs(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}js.prototype.toString=function(){var i=[],e=this.j;e&&i.push(ss(e,Po,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(ss(e,Po,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(ss(t,"/"==t.charAt(0)?$a:ca,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",ss(t,zs)),i.join("")};var Po=/[#\/\?@]/g,ca=/[#\?:]/g,$a=/[#\?]/g,ua=/[#\?@]/g,zs=/#/g;function da(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function bo(i){i.g||(i.g=new Map,i.h=0,i.i&&function xa(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var l=i[t].indexOf("="),d=null;if(0<=l){var m=i[t].substring(0,l);d=i[t].substring(l+1)}else m=i[t];e(m,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ga(i,e){bo(i),e=Yi(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ha(i,e){return bo(i),e=Yi(i,e),i.g.has(e)}function os(i,e,t){Ga(i,e),0<t.length&&(i.i=null,i.g.set(Yi(i,e),ln(t)),i.h+=t.length)}function Yi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function R(i){this.l=i||Y,i=zt.PerformanceNavigationTiming?0<(i=zt.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(zt.g&&zt.g.Ka&&zt.g.Ka()&&zt.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=da.prototype).add=function(i,e){bo(this),this.i=null,i=Yi(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(i,e){bo(this),this.g.forEach(function(t,l){t.forEach(function(d){i.call(e,d,l,this)},this)},this)},nt.ta=function(){bo(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let l=0;l<e.length;l++){const d=i[l];for(let m=0;m<d.length;m++)t.push(e[l])}return t},nt.Z=function(i){bo(this);let e=[];if("string"==typeof i)ha(this,i)&&(e=e.concat(this.g.get(Yi(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},nt.set=function(i,e){return bo(this),this.i=null,ha(this,i=Yi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},nt.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var l=e[t];const m=encodeURIComponent(String(l)),w=this.Z(l);for(l=0;l<w.length;l++){var d=m;""!==w[l]&&(d+="="+encodeURIComponent(String(w[l]))),i.push(d)}}return this.i=i.join("&")};var Y=10;function me(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Be(i){return i.h?1:i.g?i.g.size:0}function Mt(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Xt(i,e){i.g?i.g.add(e):i.h=e}function Jt(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Fn(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.F);return e}return ln(i.i)}R.prototype.cancel=function(){if(this.i=Fn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var Un=class{stringify(i){return zt.JSON.stringify(i,void 0)}parse(i){return zt.JSON.parse(i,void 0)}};function Pr(){this.g=new Un}function ji(i,e,t){const l=t||"";try{co(i,function(d,m){let w=d;kn(d)&&(w=vn(d)),e.push(l+m+"="+encodeURIComponent(w))})}catch(d){throw e.push(l+"type="+encodeURIComponent("_badmap")),d}}function Hi(i,e,t,l,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(l)}catch{}}function Vn(i){this.l=i.fc||null,this.j=i.ob||!1}function ui(i,e){Re.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=q,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}st(Vn,Ei),Vn.prototype.g=function(){return new ui(this.l,this.j)},Vn.prototype.i=function(i){return function(){return i}}({}),st(ui,Re);var q=0;function z(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function H(i){i.readyState=4,i.l=null,i.j=null,i.A=null,fe(i)}function fe(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(nt=ui.prototype).open=function(i,e){if(this.readyState!=q)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,fe(this)},nt.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||zt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,H(this)),this.readyState=q},nt.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,fe(this)),this.g&&(this.readyState=3,fe(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof zt.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;z(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},nt.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?H(this):fe(this),3==this.readyState&&z(this)}},nt.Za=function(i){this.g&&(this.response=this.responseText=i,H(this))},nt.Ya=function(i){this.g&&(this.response=i,H(this))},nt.ka=function(){this.g&&H(this)},nt.setRequestHeader=function(i,e){this.v.append(i,e)},nt.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(ui.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Lt=zt.JSON.parse;function On(i){Re.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=as,this.L=this.M=!1}st(On,Re);var as="",Pt=/^https?$/i,Er=["POST","PUT"];function No(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Zi(i),ul(i)}function Zi(i){i.F||(i.F=!0,rt(i,"complete"),rt(i,"error"))}function Wa(i){if(i.h&&typeof Ye<"u"&&(!i.C[1]||4!=Zo(i)||2!=i.da()))if(i.v&&4==Zo(i))aa(i.La,0,i);else if(rt(i,"readystatechange"),4==Zo(i)){i.h=!1;try{const w=i.da();e:switch(w){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var l;if(l=0===w){var d=String(i.I).match(Aa)[1]||null;!d&&zt.self&&zt.self.location&&(d=zt.self.location.protocol.slice(0,-1)),l=!Pt.test(d?d.toLowerCase():"")}t=l}if(t)rt(i,"complete"),rt(i,"success");else{i.m=6;try{var m=2<Zo(i)?i.g.statusText:""}catch{m=""}i.j=m+" ["+i.da()+"]",Zi(i)}}finally{ul(i)}}}function ul(i,e){if(i.g){eo(i);const t=i.g,l=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||rt(i,"ready");try{t.onreadystatechange=l}catch{}}}function eo(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(zt.clearTimeout(i.A),i.A=null)}function Zo(i){return i.g?i.g.readyState:0}function vc(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case as:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function fa(i){let e="";return gt(i,function(t,l){e+=l,e+=":",e+=t,e+="\r\n"}),e}function dl(i,e,t){e:{for(l in t){var l=!1;break e}l=!0}l||(t=fa(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):Ii(i,e,t))}function ts(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function to(i){this.Ga=0,this.j=[],this.l=new is,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ts("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ts("baseRetryDelayMs",5e3,i),this.hb=ts("retryDelaySeedMs",1e4,i),this.eb=ts("forwardChannelMaxRetries",2,i),this.xa=ts("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new R(i&&i.concurrentRequestLimit),this.Ja=new Pr,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Fo(i){if(uo(i),3==i.H){var e=i.W++,t=qi(i.I);if(Ii(t,"SID",i.K),Ii(t,"RID",e),Ii(t,"TYPE","terminate"),Ec(i,t),(e=new Wt(i,i.l,e)).L=2,e.v=la(qi(t)),t=!1,zt.navigator&&zt.navigator.sendBeacon)try{t=zt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&zt.Image&&((new Image).src=e.v,t=!0),t||(e.g=ql(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Js(e)}Za(i)}function Co(i){i.g&&(fl(i),i.g.cancel(),i.g=null)}function uo(i){Co(i),i.u&&(zt.clearTimeout(i.u),i.u=null),Lo(i),i.i.cancel(),i.m&&("number"==typeof i.m&&zt.clearTimeout(i.m),i.m=null)}function Ka(i){if(!me(i.i)&&!i.m){i.m=!0;var e=i.Na;Bn||Sr(),tr||(Bn(),tr=!0),En.add(e,i),i.C=0}}function Kl(i,e){var t;t=e?e.m:i.W++;const l=qi(i.I);Ii(l,"SID",i.K),Ii(l,"RID",t),Ii(l,"AID",i.V),Ec(i,l),i.o&&i.s&&dl(l,i.o,i.s),t=new Wt(i,i.l,t,i.C+1),null===i.o&&(t.I=i.s),e&&(i.j=e.F.concat(i.j)),e=_s(i,t,1e3),t.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Xt(i.i,t),Ui(t,l,e)}function Ec(i,e){i.na&&gt(i.na,function(t,l){Ii(e,l,t)}),i.h&&co({},function(t,l){Ii(e,l,t)})}function _s(i,e,t){t=Math.min(i.j.length,t);var l=i.h?Ze(i.h.Va,i.h,i):null;e:{var d=i.j;let m=-1;for(;;){const w=["count="+t];-1==m?0<t?(m=d[0].g,w.push("ofs="+m)):m=0:w.push("ofs="+m);let O=!0;for(let G=0;G<t;G++){let Q=d[G].g;const ce=d[G].map;if(Q-=m,0>Q)m=Math.max(0,d[G].g-100),O=!1;else try{ji(ce,w,"req"+Q+"_")}catch{l&&l(ce)}}if(O){l=w.join("&");break e}}}return i=i.j.splice(0,t),e.F=i,l}function hl(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;Bn||Sr(),tr||(Bn(),tr=!0),En.add(e,i),i.A=0}}function qa(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=Cs(Ze(i.Ma,i),Ya(i,i.A)),i.A++,0))}function fl(i){null!=i.B&&(zt.clearTimeout(i.B),i.B=null)}function $c(i){i.g=new Wt(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=qi(i.wa);Ii(e,"RID","rpc"),Ii(e,"SID",i.K),Ii(e,"AID",i.V),Ii(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Ii(e,"TO",i.qa),Ii(e,"TYPE","xmlhttp"),Ec(i,e),i.o&&i.s&&dl(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var t=i.g;i=i.pa,t.L=1,t.v=la(qi(e)),t.s=null,t.S=!0,$i(t,i)}function Lo(i){null!=i.v&&(zt.clearTimeout(i.v),i.v=null)}function Ra(i,e){var t=null;if(i.g==e){Lo(i),fl(i),i.g=null;var l=2}else{if(!Mt(i.i,e))return;t=e.F,Jt(i.i,e),l=1}if(0!=i.H)if(e.i)if(1==l){t=e.s?e.s.length:0,e=Date.now()-e.G;var d=i.C;rt(l=bs(),new Mo(l,t)),Ka(i)}else hl(i);else if(3==(d=e.o)||0==d&&0<e.ca||!(1==l&&function pa(i,e){return!(Be(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=Cs(Ze(i.Na,i,e),Ya(i,i.C)),i.C++,0)))}(i,e)||2==l&&qa(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:no(i,5);break;case 4:no(i,10);break;case 3:no(i,6);break;default:no(i,2)}}function Ya(i,e){let t=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(t*=2),t*e}function no(i,e){if(i.l.info("Error code "+e),2==e){var t=null;i.h&&(t=null);var l=Ze(i.pb,i);t||(t=new js("//www.google.com/images/cleardot.gif"),zt.location&&"http"==zt.location.protocol||Ma(t,"https"),la(t)),function wi(i,e){const t=new is;if(zt.Image){const l=new Image;l.onload=lt(Hi,t,l,"TestLoadImage: loaded",!0,e),l.onerror=lt(Hi,t,l,"TestLoadImage: error",!1,e),l.onabort=lt(Hi,t,l,"TestLoadImage: abort",!1,e),l.ontimeout=lt(Hi,t,l,"TestLoadImage: timeout",!1,e),zt.setTimeout(function(){l.ontimeout&&l.ontimeout()},1e4),l.src=i}else e(!1)}(t.toString(),l)}else Vr(2);i.H=0,i.h&&i.h.za(e),Za(i),uo(i)}function Za(i){if(i.H=0,i.ma=[],i.h){const e=Fn(i.i);(0!=e.length||0!=i.j.length)&&($t(i.ma,e),$t(i.ma,i.j),i.i.i.length=0,ln(i.j),i.j.length=0),i.h.ya()}}function Gc(i,e,t){var l=t instanceof js?qi(t):new js(t);if(""!=l.g)e&&(l.g=e+"."+l.g),Oo(l,l.m);else{var d=zt.location;l=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var m=new js(null);l&&Ma(m,l),e&&(m.g=e),d&&Oo(m,d),t&&(m.l=t),l=m}return e=i.Da,(t=i.F)&&e&&Ii(l,t,e),Ii(l,"VER",i.ra),Ec(i,l),l}function ql(i,e,t){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new On(t&&i.Ha&&!i.va?new Vn({ob:!0}):i.va)).Oa(i.J),e}function Wc(){}function Io(){if(or&&!(10<=Number(un)))throw Error("Environmental error: no available transport.")}function Di(i,e){Re.call(this),this.g=new to(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!zn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zn(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Qo(this)}function $s(i){Qe.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Gi(){We.call(this),this.status=1}function Qo(i){this.g=i}function Qi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function wc(i,e,t){t||(t=0);var l=Array(16);if("string"==typeof e)for(var d=0;16>d;++d)l[d]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(d=0;16>d;++d)l[d]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var m=i.g[3],w=(e=i.g[0])+(m^(t=i.g[1])&((d=i.g[2])^m))+l[0]+3614090360&4294967295;w=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=(t=(d=(m=(e=t+(w<<7&4294967295|w>>>25))+((w=m+(d^e&(t^d))+l[1]+3905402710&4294967295)<<12&4294967295|w>>>20))+((w=d+(t^m&(e^t))+l[2]+606105819&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^d&(m^e))+l[3]+3250441966&4294967295)<<22&4294967295|w>>>10))+((w=e+(m^t&(d^m))+l[4]+4118548399&4294967295)<<7&4294967295|w>>>25))+((w=m+(d^e&(t^d))+l[5]+1200080426&4294967295)<<12&4294967295|w>>>20))+((w=d+(t^m&(e^t))+l[6]+2821735955&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^d&(m^e))+l[7]+4249261313&4294967295)<<22&4294967295|w>>>10))+((w=e+(m^t&(d^m))+l[8]+1770035416&4294967295)<<7&4294967295|w>>>25))+((w=m+(d^e&(t^d))+l[9]+2336552879&4294967295)<<12&4294967295|w>>>20))+((w=d+(t^m&(e^t))+l[10]+4294925233&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^d&(m^e))+l[11]+2304563134&4294967295)<<22&4294967295|w>>>10))+((w=e+(m^t&(d^m))+l[12]+1804603682&4294967295)<<7&4294967295|w>>>25))+((w=m+(d^e&(t^d))+l[13]+4254626195&4294967295)<<12&4294967295|w>>>20))+((w=d+(t^m&(e^t))+l[14]+2792965006&4294967295)<<17&4294967295|w>>>15))+((w=t+(e^d&(m^e))+l[15]+1236535329&4294967295)<<22&4294967295|w>>>10))+((w=e+(d^m&(t^d))+l[1]+4129170786&4294967295)<<5&4294967295|w>>>27))+((w=m+(t^d&(e^t))+l[6]+3225465664&4294967295)<<9&4294967295|w>>>23))+((w=d+(e^t&(m^e))+l[11]+643717713&4294967295)<<14&4294967295|w>>>18))+((w=t+(m^e&(d^m))+l[0]+3921069994&4294967295)<<20&4294967295|w>>>12))+((w=e+(d^m&(t^d))+l[5]+3593408605&4294967295)<<5&4294967295|w>>>27))+((w=m+(t^d&(e^t))+l[10]+38016083&4294967295)<<9&4294967295|w>>>23))+((w=d+(e^t&(m^e))+l[15]+3634488961&4294967295)<<14&4294967295|w>>>18))+((w=t+(m^e&(d^m))+l[4]+3889429448&4294967295)<<20&4294967295|w>>>12))+((w=e+(d^m&(t^d))+l[9]+568446438&4294967295)<<5&4294967295|w>>>27))+((w=m+(t^d&(e^t))+l[14]+3275163606&4294967295)<<9&4294967295|w>>>23))+((w=d+(e^t&(m^e))+l[3]+4107603335&4294967295)<<14&4294967295|w>>>18))+((w=t+(m^e&(d^m))+l[8]+1163531501&4294967295)<<20&4294967295|w>>>12))+((w=e+(d^m&(t^d))+l[13]+2850285829&4294967295)<<5&4294967295|w>>>27))+((w=m+(t^d&(e^t))+l[2]+4243563512&4294967295)<<9&4294967295|w>>>23))+((w=d+(e^t&(m^e))+l[7]+1735328473&4294967295)<<14&4294967295|w>>>18))+((w=t+(m^e&(d^m))+l[12]+2368359562&4294967295)<<20&4294967295|w>>>12))+((w=e+(t^d^m)+l[5]+4294588738&4294967295)<<4&4294967295|w>>>28))+((w=m+(e^t^d)+l[8]+2272392833&4294967295)<<11&4294967295|w>>>21))+((w=d+(m^e^t)+l[11]+1839030562&4294967295)<<16&4294967295|w>>>16))+((w=t+(d^m^e)+l[14]+4259657740&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^d^m)+l[1]+2763975236&4294967295)<<4&4294967295|w>>>28))+((w=m+(e^t^d)+l[4]+1272893353&4294967295)<<11&4294967295|w>>>21))+((w=d+(m^e^t)+l[7]+4139469664&4294967295)<<16&4294967295|w>>>16))+((w=t+(d^m^e)+l[10]+3200236656&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^d^m)+l[13]+681279174&4294967295)<<4&4294967295|w>>>28))+((w=m+(e^t^d)+l[0]+3936430074&4294967295)<<11&4294967295|w>>>21))+((w=d+(m^e^t)+l[3]+3572445317&4294967295)<<16&4294967295|w>>>16))+((w=t+(d^m^e)+l[6]+76029189&4294967295)<<23&4294967295|w>>>9))+((w=e+(t^d^m)+l[9]+3654602809&4294967295)<<4&4294967295|w>>>28))+((w=m+(e^t^d)+l[12]+3873151461&4294967295)<<11&4294967295|w>>>21))+((w=d+(m^e^t)+l[15]+530742520&4294967295)<<16&4294967295|w>>>16))+((w=t+(d^m^e)+l[2]+3299628645&4294967295)<<23&4294967295|w>>>9))+((w=e+(d^(t|~m))+l[0]+4096336452&4294967295)<<6&4294967295|w>>>26))+((w=m+(t^(e|~d))+l[7]+1126891415&4294967295)<<10&4294967295|w>>>22))+((w=d+(e^(m|~t))+l[14]+2878612391&4294967295)<<15&4294967295|w>>>17))+((w=t+(m^(d|~e))+l[5]+4237533241&4294967295)<<21&4294967295|w>>>11))+((w=e+(d^(t|~m))+l[12]+1700485571&4294967295)<<6&4294967295|w>>>26))+((w=m+(t^(e|~d))+l[3]+2399980690&4294967295)<<10&4294967295|w>>>22))+((w=d+(e^(m|~t))+l[10]+4293915773&4294967295)<<15&4294967295|w>>>17))+((w=t+(m^(d|~e))+l[1]+2240044497&4294967295)<<21&4294967295|w>>>11))+((w=e+(d^(t|~m))+l[8]+1873313359&4294967295)<<6&4294967295|w>>>26))+((w=m+(t^(e|~d))+l[15]+4264355552&4294967295)<<10&4294967295|w>>>22))+((w=d+(e^(m|~t))+l[6]+2734768916&4294967295)<<15&4294967295|w>>>17))+((w=t+(m^(d|~e))+l[13]+1309151649&4294967295)<<21&4294967295|w>>>11))+((m=(e=t+((w=e+(d^(t|~m))+l[4]+4149444226&4294967295)<<6&4294967295|w>>>26))+((w=m+(t^(e|~d))+l[11]+3174756917&4294967295)<<10&4294967295|w>>>22))^((d=m+((w=d+(e^(m|~t))+l[2]+718787259&4294967295)<<15&4294967295|w>>>17))|~e))+l[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(d+(w<<21&4294967295|w>>>11))&4294967295,i.g[2]=i.g[2]+d&4294967295,i.g[3]=i.g[3]+m&4294967295}function bi(i,e){this.h=e;for(var t=[],l=!0,d=i.length-1;0<=d;d--){var m=0|i[d];l&&m==e||(t[d]=m,l=!1)}this.g=t}(nt=On.prototype).Oa=function(i){this.M=i},nt.ha=function(i,e,t,l){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ft.g(),this.C=function si(i){return i.h||(i.h=i.i())}(this.u?this.u:ft),this.g.onreadystatechange=Ze(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(m){return void No(this,m)}if(i=t||"",t=new Map(this.headers),l)if(Object.getPrototypeOf(l)===Object.prototype)for(var d in l)t.set(d,l[d]);else{if("function"!=typeof l.keys||"function"!=typeof l.get)throw Error("Unknown input type for opt_headers: "+String(l));for(const m of l.keys())t.set(m,l.get(m))}l=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),d=zt.FormData&&i instanceof zt.FormData,!(0<=it(Er,e))||l||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,w]of t)this.g.setRequestHeader(m,w);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{eo(this),0<this.B&&((this.L=function ko(i){return or&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ze(this.ua,this)):this.A=aa(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){No(this,m)}},nt.ua=function(){typeof Ye<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rt(this,"timeout"),this.abort(8))},nt.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,rt(this,"complete"),rt(this,"abort"),ul(this))},nt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ul(this,!0)),On.$.N.call(this)},nt.La=function(){this.s||(this.G||this.v||this.l?Wa(this):this.kb())},nt.kb=function(){Wa(this)},nt.isActive=function(){return!!this.g},nt.da=function(){try{return 2<Zo(this)?this.g.status:-1}catch{return-1}},nt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Lt(e)}},nt.Ia=function(){return this.m},nt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=to.prototype).ra=8,nt.H=1,nt.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const d=new Wt(this,this.l,i);let m=this.s;if(this.U&&(m?(m=je(m),an(m,this.U)):m=this.U),null!==this.o||this.O||(d.I=m,m=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var l=this.j[t];if(void 0===(l="__data__"in l.map&&"string"==typeof(l=l.map.__data__)?l.length:void 0))break;if(4096<(e+=l)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_s(this,d,e),Ii(t=qi(this.I),"RID",i),Ii(t,"CVER",22),this.F&&Ii(t,"X-HTTP-Session-Id",this.F),Ec(this,t),m&&(this.O?e="headers="+encodeURIComponent(String(fa(m)))+"&"+e:this.o&&dl(t,this.o,m)),Xt(this.i,d),this.bb&&Ii(t,"TYPE","init"),this.P?(Ii(t,"$req",e),Ii(t,"SID","null"),d.aa=!0,Ui(d,t,null)):Ui(d,t,e),this.H=2}}else 3==this.H&&(i?Kl(this,i):0==this.j.length||me(this.i)||Kl(this))},nt.Ma=function(){if(this.u=null,$c(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Cs(Ze(this.jb,this),i)}},nt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Vr(10),Co(this),$c(this))},nt.ib=function(){null!=this.v&&(this.v=null,Co(this),qa(this),Vr(19))},nt.pb=function(i){i?(this.l.info("Successfully pinged google.com"),Vr(2)):(this.l.info("Failed to ping google.com"),Vr(1))},nt.isActive=function(){return!!this.h&&this.h.isActive(this)},(nt=Wc.prototype).Ba=function(){},nt.Aa=function(){},nt.za=function(){},nt.ya=function(){},nt.isActive=function(){return!0},nt.Va=function(){},Io.prototype.g=function(i,e){return new Di(i,e)},st(Di,Re),Di.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,t=this.h||void 0;Vr(0),i.Y=e,i.na=t||{},i.G=i.aa,i.I=Gc(i,null,i.Y),Ka(i)},Di.prototype.close=function(){Fo(this.g)},Di.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=vn(i),i=t);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&Ka(e)},Di.prototype.N=function(){this.g.h=null,delete this.j,Fo(this.g),delete this.g,Di.$.N.call(this)},st($s,Qe),st(Gi,We),st(Qo,Wc),Qo.prototype.Ba=function(){rt(this.g,"a")},Qo.prototype.Aa=function(i){rt(this.g,new $s(i))},Qo.prototype.za=function(i){rt(this.g,new Gi)},Qo.prototype.ya=function(){rt(this.g,"b")},st(Qi,function Yl(){this.blockSize=-1}),Qi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Qi.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var t=e-this.blockSize,l=this.m,d=this.h,m=0;m<e;){if(0==d)for(;m<=t;)wc(this,i,m),m+=this.blockSize;if("string"==typeof i){for(;m<e;)if(l[d++]=i.charCodeAt(m++),d==this.blockSize){wc(this,l),d=0;break}}else for(;m<e;)if(l[d++]=i[m++],d==this.blockSize){wc(this,l),d=0;break}}this.h=d,this.i+=e},Qi.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var t=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&t,t/=256;for(this.j(i),i=Array(16),e=t=0;4>e;++e)for(var l=0;32>l;l+=8)i[t++]=this.g[e]>>>l&255;return i};var Ps={};function Xo(i){return-128<=i&&128>i?function ur(i,e){var t=Ps;return Object.prototype.hasOwnProperty.call(t,i)?t[i]:t[i]=e(i)}(i,function(e){return new bi([0|e],0>e?-1:0)}):new bi([0|i],0>i?-1:0)}function ho(i){if(isNaN(i)||!isFinite(i))return J;if(0>i)return kt(ho(-i));for(var e=[],t=1,l=0;i>=t;l++)e[l]=i/t|0,t*=k;return new bi(e,0)}var k=4294967296,J=Xo(0),U=Xo(1),ae=Xo(16777216);function xe(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function wt(i){return-1==i.h}function kt(i){for(var e=i.g.length,t=[],l=0;l<e;l++)t[l]=~i.g[l];return new bi(t,~i.h).add(U)}function jn(i,e){return i.add(kt(e))}function _i(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function Jr(i,e){this.g=i,this.h=e}function Nr(i,e){if(xe(e))throw Error("division by zero");if(xe(i))return new Jr(J,J);if(wt(i))return e=Nr(kt(i),e),new Jr(kt(e.g),kt(e.h));if(wt(e))return e=Nr(i,kt(e)),new Jr(kt(e.g),e.h);if(30<i.g.length){if(wt(i)||wt(e))throw Error("slowDivide_ only works with positive integers.");for(var t=U,l=e;0>=l.X(i);)t=Yn(t),l=Yn(l);var d=Oi(t,1),m=Oi(l,1);for(l=Oi(l,2),t=Oi(t,2);!xe(l);){var w=m.add(l);0>=w.X(i)&&(d=d.add(t),m=w),l=Oi(l,1),t=Oi(t,1)}return e=jn(i,d.R(e)),new Jr(d,e)}for(d=J;0<=i.X(e);){for(t=Math.max(1,Math.floor(i.ea()/e.ea())),l=48>=(l=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,l-48),w=(m=ho(t)).R(e);wt(w)||0<w.X(i);)w=(m=ho(t-=l)).R(e);xe(m)&&(m=U),d=d.add(m),i=jn(i,w)}return new Jr(d,i)}function Yn(i){for(var e=i.g.length+1,t=[],l=0;l<e;l++)t[l]=i.D(l)<<1|i.D(l-1)>>>31;return new bi(t,i.h)}function Oi(i,e){var t=e>>5;e%=32;for(var l=i.g.length-t,d=[],m=0;m<l;m++)d[m]=0<e?i.D(m+t)>>>e|i.D(m+t+1)<<32-e:i.D(m+t);return new bi(d,i.h)}(nt=bi.prototype).ea=function(){if(wt(this))return-kt(this).ea();for(var i=0,e=1,t=0;t<this.g.length;t++){var l=this.D(t);i+=(0<=l?l:k+l)*e,e*=k}return i},nt.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(xe(this))return"0";if(wt(this))return"-"+kt(this).toString(i);for(var e=ho(Math.pow(i,6)),t=this,l="";;){var d=Nr(t,e).g,m=((0<(t=jn(t,d.R(e))).g.length?t.g[0]:t.h)>>>0).toString(i);if(xe(t=d))return m+l;for(;6>m.length;)m="0"+m;l=m+l}},nt.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},nt.X=function(i){return wt(i=jn(this,i))?-1:xe(i)?0:1},nt.abs=function(){return wt(this)?kt(this):this},nt.add=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],l=0,d=0;d<=e;d++){var m=l+(65535&this.D(d))+(65535&i.D(d)),w=(m>>>16)+(this.D(d)>>>16)+(i.D(d)>>>16);l=w>>>16,t[d]=(w&=65535)<<16|(m&=65535)}return new bi(t,-2147483648&t[t.length-1]?-1:0)},nt.R=function(i){if(xe(this)||xe(i))return J;if(wt(this))return wt(i)?kt(this).R(kt(i)):kt(kt(this).R(i));if(wt(i))return kt(this.R(kt(i)));if(0>this.X(ae)&&0>i.X(ae))return ho(this.ea()*i.ea());for(var e=this.g.length+i.g.length,t=[],l=0;l<2*e;l++)t[l]=0;for(l=0;l<this.g.length;l++)for(var d=0;d<i.g.length;d++){var m=this.D(l)>>>16,w=65535&this.D(l),O=i.D(d)>>>16,G=65535&i.D(d);t[2*l+2*d]+=w*G,_i(t,2*l+2*d),t[2*l+2*d+1]+=m*G,_i(t,2*l+2*d+1),t[2*l+2*d+1]+=w*O,_i(t,2*l+2*d+1),t[2*l+2*d+2]+=m*O,_i(t,2*l+2*d+2)}for(l=0;l<e;l++)t[l]=t[2*l+1]<<16|t[2*l];for(l=e;l<2*e;l++)t[l]=0;return new bi(t,0)},nt.gb=function(i){return Nr(this,i).h},nt.and=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],l=0;l<e;l++)t[l]=this.D(l)&i.D(l);return new bi(t,this.h&i.h)},nt.or=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],l=0;l<e;l++)t[l]=this.D(l)|i.D(l);return new bi(t,this.h|i.h)},nt.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),t=[],l=0;l<e;l++)t[l]=this.D(l)^i.D(l);return new bi(t,this.h^i.h)},Io.prototype.createWebChannel=Io.prototype.g,Di.prototype.send=Di.prototype.u,Di.prototype.open=Di.prototype.m,Di.prototype.close=Di.prototype.close,Ki.NO_ERROR=0,Ki.TIMEOUT=8,Ki.HTTP_ERROR=6,Qs.COMPLETE="complete",ms.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",Re.prototype.listen=Re.prototype.O,On.prototype.listenOnce=On.prototype.P,On.prototype.getLastError=On.prototype.Sa,On.prototype.getLastErrorCode=On.prototype.Ia,On.prototype.getStatus=On.prototype.da,On.prototype.getResponseJson=On.prototype.Wa,On.prototype.getResponseText=On.prototype.ja,On.prototype.send=On.prototype.ha,On.prototype.setWithCredentials=On.prototype.Oa,Qi.prototype.digest=Qi.prototype.l,Qi.prototype.reset=Qi.prototype.reset,Qi.prototype.update=Qi.prototype.j,bi.prototype.add=bi.prototype.add,bi.prototype.multiply=bi.prototype.R,bi.prototype.modulo=bi.prototype.gb,bi.prototype.compare=bi.prototype.X,bi.prototype.toNumber=bi.prototype.ea,bi.prototype.toString=bi.prototype.toString,bi.prototype.getBits=bi.prototype.D,bi.fromNumber=ho,bi.fromString=function fo(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return kt(fo(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ho(Math.pow(e,8)),l=J,d=0;d<i.length;d+=8){var m=Math.min(8,i.length-d),w=parseInt(i.substring(d,d+m),e);8>m?(m=ho(Math.pow(e,m)),l=l.R(m).add(ho(w))):l=(l=l.R(t)).add(ho(w))}return l};var di=Ot.createWebChannelTransport=function(){return new Io},us=Ot.getStatEventTarget=function(){return bs()},Vo=Ot.ErrorCode=Ki,po=Ot.EventType=Qs,ma=Ot.Event=Xr,ys=Ot.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},ro=Ot.FetchXmlHttpFactory=Vn,ks=Ot.WebChannel=ms,Bo=Ot.XhrIo=On,Il=Ot.Md5=Qi,pl=Ot.Integer=bi;const Id="@firebase/firestore";class ns{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");let ga="9.23.0";const Uo=new Se.Yd("@firebase/firestore");function _a(){return Uo.logLevel}function sn(i,...e){if(Uo.logLevel<=Se.in.DEBUG){const t=e.map(Kc);Uo.debug(`Firestore (${ga}): ${i}`,...t)}}function Xi(i,...e){if(Uo.logLevel<=Se.in.ERROR){const t=e.map(Kc);Uo.error(`Firestore (${ga}): ${i}`,...t)}}function io(i,...e){if(Uo.logLevel<=Se.in.WARN){const t=e.map(Kc);Uo.warn(`Firestore (${ga}): ${i}`,...t)}}function Kc(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function en(i="Unexpected state"){const e=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: `+i;throw Xi(e),new Error(e)}function Jn(i,e){i||en()}function Sn(i,e){return i}const Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qt extends ze.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ds{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ns.UNAUTHENTICATED))}shutdown(){}}class Sl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qc{constructor(e){this.t=e,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var l=this;let d=this.i;const m=Q=>this.i!==d?(d=this.i,t(Q)):Promise.resolve();let w=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),w.resolve(),w=new fi,e.enqueueRetryable(()=>m(this.currentUser))};const O=()=>{const Q=w;e.enqueueRetryable((0,Oe.Z)(function*(){yield Q.promise,yield m(l.currentUser)}))},G=Q=>{sn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Q,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(Q=>G(Q)),setTimeout(()=>{if(!this.auth){const Q=this.t.getImmediate({optional:!0});Q?G(Q):(sn("FirebaseAuthCredentialsProvider","Auth not yet detected"),w.resolve(),w=new fi)}},0),O()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(l=>this.i!==e?(sn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(Jn("string"==typeof l.accessToken),new Zl(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jn(null===e||"string"==typeof e),new ns(e)}}class Gs{constructor(e,t,l){this.h=e,this.l=t,this.m=l,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Xa{constructor(e,t,l){this.h=e,this.l=t,this.m=l}getToken(){return Promise.resolve(new Gs(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ql{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const l=m=>{null!=m.error&&sn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const w=m.token!==this.T;return this.T=m.token,sn("FirebaseAppCheckTokenProvider",`Received ${w?"new":"existing"} token.`),w?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>l(m))};const d=m=>{sn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.I.onInit(m=>d(m)),setTimeout(()=>{if(!this.appCheck){const m=this.I.getImmediate({optional:!0});m?d(m):sn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Jn("string"==typeof t.token),this.T=t.token,new Ql(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Oa(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let l=0;l<i;l++)t[l]=Math.floor(256*Math.random());return t}class Tl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let l="";for(;l.length<20;){const d=Oa(40);for(let m=0;m<d.length;++m)l.length<20&&d[m]<t&&(l+=e.charAt(d[m]%e.length))}return l}}function vr(i,e){return i<e?-1:i>e?1:0}function Pa(i,e,t){return i.length===e.length&&i.every((l,d)=>t(l,e[d]))}function Cc(i){return i+"\0"}class Pi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qt(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qt(Rt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qt(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qt(Rt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pi.fromMillis(Date.now())}static fromDate(e){return Pi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),l=Math.floor(1e6*(e-1e3*t));return new Pi(t,l)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vr(this.nanoseconds,e.nanoseconds):vr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class rr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new rr(e)}static min(){return new rr(new Pi(0,0))}static max(){return new rr(new Pi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class jo{constructor(e,t,l){void 0===t?t=0:t>e.length&&en(),void 0===l?l=e.length-t:l>e.length-t&&en(),this.segments=e,this.offset=t,this.len=l}get length(){return this.len}isEqual(e){return 0===jo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof jo?e.forEach(l=>{t.push(l)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,l=this.limit();t<l;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const l=Math.min(e.length,t.length);for(let d=0;d<l;d++){const m=e.get(d),w=t.get(d);if(m<w)return-1;if(m>w)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Gr extends jo{construct(e,t,l){return new Gr(e,t,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const l of e){if(l.indexOf("//")>=0)throw new qt(Rt.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);t.push(...l.split("/").filter(d=>d.length>0))}return new Gr(t)}static emptyPath(){return new Gr([])}}const uh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vs extends jo{construct(e,t,l){return new vs(e,t,l)}static isValidIdentifier(e){return uh.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vs(["__name__"])}static fromServerFormat(e){const t=[];let l="",d=0;const m=()=>{if(0===l.length)throw new qt(Rt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(l),l=""};let w=!1;for(;d<e.length;){const O=e[d];if("\\"===O){if(d+1===e.length)throw new qt(Rt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[d+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new qt(Rt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);l+=G,d+=2}else"`"===O?(w=!w,d++):"."!==O||w?(l+=O,d++):(m(),d++)}if(m(),w)throw new qt(Rt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vs(t)}static emptyPath(){return new vs([])}}class tn{constructor(e){this.path=e}static fromPath(e){return new tn(Gr.fromString(e))}static fromName(e){return new tn(Gr.fromString(e).popFirst(5))}static empty(){return new tn(Gr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Gr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Gr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tn(new Gr(e.slice()))}}class Uu{constructor(e,t,l,d){this.indexId=e,this.collectionGroup=t,this.fields=l,this.indexState=d}}function Jo(i){return i.fields.find(e=>2===e.kind)}function Al(i){return i.fields.filter(e=>2!==e.kind)}Uu.UNKNOWN_ID=-1;class Xl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ja{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ja(0,Ho.min())}}function ml(i,e){const t=i.toTimestamp().seconds,l=i.toTimestamp().nanoseconds+1,d=rr.fromTimestamp(1e9===l?new Pi(t+1,0):new Pi(t,l));return new Ho(d,tn.empty(),e)}function hh(i){return new Ho(i.readTime,i.key,-1)}class Ho{constructor(e,t,l){this.readTime=e,this.documentKey=t,this.largestBatchId=l}static min(){return new Ho(rr.min(),tn.empty(),-1)}static max(){return new Ho(rr.max(),tn.empty(),-1)}}function Is(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=tn.comparator(i.documentKey,e.documentKey),0!==t?t:vr(i.largestBatchId,e.largestBatchId))}const Jl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xl{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ka(i){return zo.apply(this,arguments)}function zo(){return zo=(0,Oe.Z)(function*(i){if(i.code!==Rt.FAILED_PRECONDITION||i.message!==Jl)throw i;sn("LocalStore","Unexpectedly lost primary lease")}),zo.apply(this,arguments)}class _t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&en(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new _t((l,d)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(l,d)},this.catchCallback=m=>{this.wrapFailure(t,m).next(l,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof _t?t:_t.resolve(t)}catch(t){return _t.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):_t.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):_t.reject(t)}static resolve(e){return new _t((t,l)=>{t(e)})}static reject(e){return new _t((t,l)=>{l(e)})}static waitFor(e){return new _t((t,l)=>{let d=0,m=0,w=!1;e.forEach(O=>{++d,O.next(()=>{++m,w&&m===d&&t()},G=>l(G))}),w=!0,m===d&&t()})}static or(e){let t=_t.resolve(!1);for(const l of e)t=t.next(d=>d?_t.resolve(d):l());return t}static forEach(e,t){const l=[];return e.forEach((d,m)=>{l.push(t.call(this,d,m))}),this.waitFor(l)}static mapArray(e,t){return new _t((l,d)=>{const m=e.length,w=new Array(m);let O=0;for(let G=0;G<m;G++){const Q=G;t(e[Q]).next(ce=>{w[Q]=ce,++O,O===m&&l(w)},ce=>d(ce))}})}static doWhile(e,t){return new _t((l,d)=>{const m=()=>{!0===e()?t().next(()=>{m()},d):l()};m()})}}class Yc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new fi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new A(e,t.error)):this.v.resolve()},this.transaction.onerror=l=>{const d=ge(l.target.error);this.v.reject(new A(e,d))}}static open(e,t,l,d){try{return new Yc(t,e.transaction(d,l))}catch(m){throw new A(t,m)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(sn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new N(t)}}class Ws{constructor(e,t,l){this.name=e,this.version=t,this.V=l,12.2===Ws.S((0,ze.z$)())&&Xi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return sn("SimpleDb","Removing database:",e),K(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ze.hl)())return!1;if(Ws.C())return!0;const e=(0,ze.z$)(),t=Ws.S(e),l=0<t&&t<10,d=Ws.N(e),m=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||l||m)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),l=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(l)}static N(e){const t=e.match(/Android ([\d.]+)/i),l=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(l)}$(e){var t=this;return(0,Oe.Z)(function*(){return t.db||(sn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((l,d)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=w=>{l(w.target.result)},m.onblocked=()=>{d(new A(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=w=>{const O=w.target.error;d("VersionError"===O.name?new qt(Rt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new qt(Rt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new A(e,O))},m.onupgradeneeded=w=>{sn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',w.oldVersion),t.V.O(w.target.result,m.transaction,w.oldVersion,t.version).next(()=>{sn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=l=>t.F(l)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,l,d){var m=this;return(0,Oe.Z)(function*(){const w="readonly"===t;let O=0;for(;;){++O;try{m.db=yield m.$(e);const G=Yc.open(m.db,e,w?"readonly":"readwrite",l),Q=d(G).next(ce=>(G.P(),ce)).catch(ce=>(G.abort(ce),_t.reject(ce))).toPromise();return Q.catch(()=>{}),yield G.R,Q}catch(G){const Q=G,ce="FirebaseError"!==Q.name&&O<3;if(sn("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",ce),m.close(),!ce)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class S{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return K(this.L.delete())}}class A extends qt{constructor(e,t){super(Rt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function b(i){return"IndexedDbTransactionError"===i.name}class N{constructor(e){this.store=e}put(e,t){let l;return void 0!==t?(sn("SimpleDb","PUT",this.store.name,e,t),l=this.store.put(t,e)):(sn("SimpleDb","PUT",this.store.name,"<auto-key>",e),l=this.store.put(e)),K(l)}add(e){return sn("SimpleDb","ADD",this.store.name,e,e),K(this.store.add(e))}get(e){return K(this.store.get(e)).next(t=>(void 0===t&&(t=null),sn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return sn("SimpleDb","DELETE",this.store.name,e),K(this.store.delete(e))}count(){return sn("SimpleDb","COUNT",this.store.name),K(this.store.count())}j(e,t){const l=this.options(e,t);if(l.index||"function"!=typeof this.store.getAll){const d=this.cursor(l),m=[];return this.W(d,(w,O)=>{m.push(O)}).next(()=>m)}{const d=this.store.getAll(l.range);return new _t((m,w)=>{d.onerror=O=>{w(O.target.error)},d.onsuccess=O=>{m(O.target.result)}})}}H(e,t){const l=this.store.getAll(e,null===t?void 0:t);return new _t((d,m)=>{l.onerror=w=>{m(w.target.error)},l.onsuccess=w=>{d(w.target.result)}})}J(e,t){sn("SimpleDb","DELETE ALL",this.store.name);const l=this.options(e,t);l.Y=!1;const d=this.cursor(l);return this.W(d,(m,w,O)=>O.delete())}X(e,t){let l;t?l=e:(l={},t=e);const d=this.cursor(l);return this.W(d,t)}Z(e){const t=this.cursor({});return new _t((l,d)=>{t.onerror=m=>{const w=ge(m.target.error);d(w)},t.onsuccess=m=>{const w=m.target.result;w?e(w.primaryKey,w.value).next(O=>{O?w.continue():l()}):l()}})}W(e,t){const l=[];return new _t((d,m)=>{e.onerror=w=>{m(w.target.error)},e.onsuccess=w=>{const O=w.target.result;if(!O)return void d();const G=new S(O),Q=t(O.primaryKey,O.value,G);if(Q instanceof _t){const ce=Q.catch(Ue=>(G.done(),_t.reject(Ue)));l.push(ce)}G.isDone?d():null===G.K?O.continue():O.continue(G.K)}}).next(()=>_t.waitFor(l))}options(e,t){let l;return void 0!==e&&("string"==typeof e?l=e:t=e),{index:l,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const l=this.store.index(e.index);return e.Y?l.openKeyCursor(e.range,t):l.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function K(i){return new _t((e,t)=>{i.onsuccess=l=>{e(l.target.result)},i.onerror=l=>{const d=ge(l.target.error);t(d)}})}let ie=!1;function ge(i){const e=Ws.S((0,ze.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const l=new qt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ie||(ie=!0,setTimeout(()=>{throw l},0)),l}}return i}class Je{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;sn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Oe.Z)(function*(){t.task=null;try{sn("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(l){b(l)?sn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",l):yield ka(l)}yield t.et(6e4)}))}}class Gt{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Oe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",l=>t.st(l,e))})()}st(e,t){const l=new Set;let d=t,m=!0;return _t.doWhile(()=>!0===m&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(w=>{if(null!==w&&!l.has(w))return sn("IndexBackiller",`Processing collection: ${w}`),this.it(e,w,d).next(O=>{d-=O,l.add(w)});m=!1})).next(()=>t-d)}it(e,t,l){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,l).next(m=>{const w=m.changes;return this.localStore.indexManager.updateIndexEntries(e,w).next(()=>this.rt(d,m)).next(O=>(sn("IndexBackiller",`Updating offset: ${O}`),this.localStore.indexManager.updateCollectionGroup(e,t,O))).next(()=>w.size)}))}rt(e,t){let l=e;return t.changes.forEach((d,m)=>{const w=hh(m);Is(w,l)>0&&(l=w)}),new Ho(l.readTime,l.documentKey,Math.max(t.batchId,e.largestBatchId))}}let pn=(()=>{class i{constructor(t,l){this.previousValue=t,l&&(l.sequenceNumberHandler=d=>this.ot(d),this.ut=d=>l.writeSequenceNumber(d))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return i.ct=-1,i})();function Zt(i){return null==i}function $n(i){return 0===i&&1/i==-1/0}function ar(i){return"number"==typeof i&&Number.isInteger(i)&&!$n(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function Ci(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ya(e)),e=oi(i.get(t),e);return ya(e)}function oi(i,e){let t=e;const l=i.length;for(let d=0;d<l;d++){const m=i.charAt(d);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function ya(i){return i+"\x01\x01"}function xi(i){const e=i.length;if(Jn(e>=2),2===e)return Jn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Gr.emptyPath();const t=e-2,l=[];let d="";for(let m=0;m<e;){const w=i.indexOf("\x01",m);switch((w<0||w>t)&&en(),i.charAt(w+1)){case"\x01":const O=i.substring(m,w);let G;0===d.length?G=O:(d+=O,G=d,d=""),l.push(G);break;case"\x10":d+=i.substring(m,w),d+="\0";break;case"\x11":d+=i.substring(m,w+1);break;default:en()}m=w+2}return new Gr(l)}const el=["userId","batchId"];function Na(i,e){return[i,Ci(e)]}function Vi(i,e,t){return[i,Ci(e),t]}const qr={},mo=["prefixPath","collectionGroup","readTime","documentId"],fh=["prefixPath","collectionGroup","documentId"],mu=["collectionGroup","readTime","prefixPath","documentId"],go=["canonicalId","targetId"],Zc=["targetId","path"],gp=["path","targetId"],ph=["collectionId","parent"],mh=["indexId","uid"],Fa=["uid","sequenceNumber"],Ic=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Dd=["indexId","uid","orderedDocumentKey"],gf=["userId","collectionPath","documentId"],gh=["userId","collectionPath","largestBatchId"],_h=["userId","collectionGroup","largestBatchId"],_f=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_p=[..._f,"documentOverlays"],ju=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Dc=ju,ei=[...Dc,"indexConfiguration","indexState","indexEntries"];class ec extends xl{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ns(i,e){const t=Sn(i);return Ws.M(t.ht,e)}function yh(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function _o(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function gu(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class hi{constructor(e,t){this.comparator=e,this.root=t||ki.EMPTY}insert(e,t){return new hi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ki.BLACK,null,null))}remove(e){return new hi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const l=this.comparator(e,t.key);if(0===l)return t.value;l<0?t=t.left:l>0&&(t=t.right)}return null}indexOf(e){let t=0,l=this.root;for(;!l.isEmpty();){const d=this.comparator(e,l.key);if(0===d)return t+l.left.size;d<0?l=l.left:(t+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,l)=>(e(t,l),!1))}toString(){const e=[];return this.inorderTraversal((t,l)=>(e.push(`${t}:${l}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qc(this.root,e,this.comparator,!0)}}class Qc{constructor(e,t,l,d){this.isReverse=d,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?l(e.key,t):1,t&&d&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ki{constructor(e,t,l,d,m){this.key=e,this.value=t,this.color=l??ki.RED,this.left=d??ki.EMPTY,this.right=m??ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,l,d,m){return new ki(e??this.key,t??this.value,l??this.color,d??this.left,m??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,l){let d=this;const m=l(e,d.key);return d=m<0?d.copy(null,null,null,d.left.insert(e,t,l),null):0===m?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,l)),d.fixUp()}removeMin(){if(this.left.isEmpty())return ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let l,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return ki.EMPTY;l=d.right.min(),d=d.copy(l.key,l.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw en();const e=this.left.check();if(e!==this.right.check())throw en();return e+(this.isRed()?0:1)}}ki.EMPTY=null,ki.RED=!0,ki.BLACK=!1,ki.EMPTY=new class{constructor(){this.size=0}get key(){throw en()}get value(){throw en()}get color(){throw en()}get left(){throw en()}get right(){throw en()}copy(i,e,t,l,d){return this}insert(i,e,t){return new ki(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class zi{constructor(e){this.comparator=e,this.data=new hi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,l)=>(e(t),!1))}forEachInRange(e,t){const l=this.data.getIteratorFrom(e[0]);for(;l.hasNext();){const d=l.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let l;for(l=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();l.hasNext();)if(!e(l.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xc(this.data.getIterator())}getIteratorFrom(e){return new Xc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(l=>{t=t.add(l)}),t}isEqual(e){if(!(e instanceof zi)||this.size!==e.size)return!1;const t=this.data.getIterator(),l=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,m=l.getNext().key;if(0!==this.comparator(d,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new zi(this.comparator);return t.data=e,t}}class Xc{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tc(i){return i.hasNext()?i.getNext():void 0}class so{constructor(e){this.fields=e,e.sort(vs.comparator)}static empty(){return new so([])}unionWith(e){let t=new zi(vs.comparator);for(const l of this.fields)t=t.add(l);for(const l of e)t=t.add(l);return new so(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pa(this.fields,e.fields,(t,l)=>t.isEqual(l))}}class Hu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(l){try{return atob(l)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new Hu("Invalid base64 string: "+d):d}}(e);return new Fs(t)}static fromUint8Array(e){const t=function(l){let d="";for(let m=0;m<l.length;++m)d+=String.fromCharCode(l[m]);return d}(e);return new Fs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let l=0;l<e.length;l++)t[l]=e.charCodeAt(l);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fs.EMPTY_BYTE_STRING=new Fs("");const zu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(i){if(Jn(!!i),"string"==typeof i){let e=0;const t=zu.exec(i);if(Jn(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const l=new Date(i);return{seconds:Math.floor(l.getTime()/1e3),nanos:e}}return{seconds:xs(i.seconds),nanos:xs(i.nanos)}}function xs(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Ml(i){return"string"==typeof i?Fs.fromBase64String(i):Fs.fromUint8Array(i)}function _u(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function tl(i){const e=i.mapValue.fields.__previous_value__;return _u(e)?tl(e):e}function Ni(i){const e=nc(i.mapValue.fields.__local_write_time__.timestampValue);return new Pi(e.seconds,e.nanos)}class yf{constructor(e,t,l,d,m,w,O,G,Q){this.databaseId=e,this.appId=t,this.persistenceKey=l,this.host=d,this.ssl=m,this.forceLongPolling=w,this.autoDetectLongPolling=O,this.longPollingOptions=G,this.useFetchStreams=Q}}class yo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof yo&&e.projectId===this.projectId&&e.database===this.database}}const Do={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},rc={nullValue:"NULL_VALUE"};function oo(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?_u(i)?4:bn(i)?9007199254740991:10:en()}function ao(i,e){if(i===e)return!0;const t=oo(i);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ni(i).isEqual(Ni(e));case 3:return function(l,d){if("string"==typeof l.timestampValue&&"string"==typeof d.timestampValue&&l.timestampValue.length===d.timestampValue.length)return l.timestampValue===d.timestampValue;const m=nc(l.timestampValue),w=nc(d.timestampValue);return m.seconds===w.seconds&&m.nanos===w.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,Ml(i.bytesValue).isEqual(Ml(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(l,d){return xs(l.geoPointValue.latitude)===xs(d.geoPointValue.latitude)&&xs(l.geoPointValue.longitude)===xs(d.geoPointValue.longitude)}(i,e);case 2:return function(l,d){if("integerValue"in l&&"integerValue"in d)return xs(l.integerValue)===xs(d.integerValue);if("doubleValue"in l&&"doubleValue"in d){const m=xs(l.doubleValue),w=xs(d.doubleValue);return m===w?$n(m)===$n(w):isNaN(m)&&isNaN(w)}return!1}(i,e);case 9:return Pa(i.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(l,d){const m=l.mapValue.fields||{},w=d.mapValue.fields||{};if(yh(m)!==yh(w))return!1;for(const O in m)if(m.hasOwnProperty(O)&&(void 0===w[O]||!ao(m[O],w[O])))return!1;return!0}(i,e);default:return en()}var d}function Rl(i,e){return void 0!==(i.values||[]).find(t=>ao(t,e))}function wr(i,e){if(i===e)return 0;const t=oo(i),l=oo(e);if(t!==l)return vr(t,l);switch(t){case 0:case 9007199254740991:return 0;case 1:return vr(i.booleanValue,e.booleanValue);case 2:return function(d,m){const w=xs(d.integerValue||d.doubleValue),O=xs(m.integerValue||m.doubleValue);return w<O?-1:w>O?1:w===O?0:isNaN(w)?isNaN(O)?0:-1:1}(i,e);case 3:return vf(i.timestampValue,e.timestampValue);case 4:return vf(Ni(i),Ni(e));case 5:return vr(i.stringValue,e.stringValue);case 6:return function(d,m){const w=Ml(d),O=Ml(m);return w.compareTo(O)}(i.bytesValue,e.bytesValue);case 7:return function(d,m){const w=d.split("/"),O=m.split("/");for(let G=0;G<w.length&&G<O.length;G++){const Q=vr(w[G],O[G]);if(0!==Q)return Q}return vr(w.length,O.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,m){const w=vr(xs(d.latitude),xs(m.latitude));return 0!==w?w:vr(xs(d.longitude),xs(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,m){const w=d.values||[],O=m.values||[];for(let G=0;G<w.length&&G<O.length;++G){const Q=wr(w[G],O[G]);if(Q)return Q}return vr(w.length,O.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,m){if(d===Do.mapValue&&m===Do.mapValue)return 0;if(d===Do.mapValue)return 1;if(m===Do.mapValue)return-1;const w=d.fields||{},O=Object.keys(w),G=m.fields||{},Q=Object.keys(G);O.sort(),Q.sort();for(let ce=0;ce<O.length&&ce<Q.length;++ce){const Ue=vr(O[ce],Q[ce]);if(0!==Ue)return Ue;const bt=wr(w[O[ce]],G[Q[ce]]);if(0!==bt)return bt}return vr(O.length,Q.length)}(i.mapValue,e.mapValue);default:throw en()}}function vf(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return vr(i,e);const t=nc(i),l=nc(e),d=vr(t.seconds,l.seconds);return 0!==d?d:vr(t.nanos,l.nanos)}function Ol(i){return vh(i)}function vh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(l){const d=nc(l);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Ml(i.bytesValue).toBase64():"referenceValue"in i?tn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(l){let d="[",m=!0;for(const w of l.values||[])m?m=!1:d+=",",d+=vh(w);return d+"]"}(i.arrayValue):"mapValue"in i?function(l){const d=Object.keys(l.fields||{}).sort();let m="{",w=!0;for(const O of d)w?w=!1:m+=",",m+=`${O}:${vh(l.fields[O])}`;return m+"}"}(i.mapValue):en();var e}function F(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function X(i){return!!i&&"integerValue"in i}function Ce(i){return!!i&&"arrayValue"in i}function Ke(i){return!!i&&"nullValue"in i}function ot(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Dt(i){return!!i&&"mapValue"in i}function yn(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return _o(i.mapValue.fields,(t,l)=>e.mapValue.fields[t]=yn(l)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yn(i.arrayValue.values[t]);return e}return Object.assign({},i)}function bn(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Zn(i){return"nullValue"in i?rc:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?F(yo.empty(),tn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:en()}function Ir(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?F(yo.empty(),tn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Do:en()}function Or(i,e){const t=wr(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function $o(i,e){const t=wr(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class yi{constructor(e){this.value=e}static empty(){return new yi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let l=0;l<e.length-1;++l)if(t=(t.mapValue.fields||{})[e.get(l)],!Dt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yn(t)}setAll(e){let t=vs.emptyPath(),l={},d=[];e.forEach((w,O)=>{if(!t.isImmediateParentOf(O)){const G=this.getFieldsMap(t);this.applyChanges(G,l,d),l={},d=[],t=O.popLast()}w?l[O.lastSegment()]=yn(w):d.push(O.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,l,d)}delete(e){const t=this.field(e.popLast());Dt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ao(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let l=0;l<e.length;++l){let d=t.mapValue.fields[e.get(l)];Dt(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(l)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,l){_o(t,(d,m)=>e[d]=m);for(const d of l)delete e[d]}clone(){return new yi(yn(this.value))}}function Jc(i){const e=[];return _o(i.fields,(t,l)=>{const d=new vs([t]);if(Dt(l)){const m=Jc(l.mapValue).fields;if(0===m.length)e.push(d);else for(const w of m)e.push(d.child(w))}else e.push(d)}),new so(e)}class Ji{constructor(e,t,l,d,m,w,O){this.key=e,this.documentType=t,this.version=l,this.readTime=d,this.createTime=m,this.data=w,this.documentState=O}static newInvalidDocument(e){return new Ji(e,0,rr.min(),rr.min(),rr.min(),yi.empty(),0)}static newFoundDocument(e,t,l,d){return new Ji(e,1,t,rr.min(),l,d,0)}static newNoDocument(e,t){return new Ji(e,2,t,rr.min(),rr.min(),yi.empty(),0)}static newUnknownDocument(e,t){return new Ji(e,3,t,rr.min(),rr.min(),yi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(rr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ji&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ji(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Go{constructor(e,t){this.position=e,this.inclusive=t}}function nl(i,e,t){let l=0;for(let d=0;d<i.position.length;d++){const m=e[d],w=i.position[d];if(l=m.field.isKeyField()?tn.comparator(tn.fromName(w.referenceValue),t.key):wr(w,t.data.field(m.field)),"desc"===m.dir&&(l*=-1),0!==l)break}return l}function va(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!ao(i.position[t],e.position[t]))return!1;return!0}class ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function Td(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class $u{}class Si extends $u{constructor(e,t,l){super(),this.field=e,this.op=t,this.value=l}static create(e,t,l){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,l):new t_(e,t,l):"array-contains"===t?new tu(e,l):"in"===t?new Ef(e,l):"not-in"===t?new wf(e,l):"array-contains-any"===t?new yu(e,l):new Si(e,t,l)}static createKeyFieldInFilter(e,t,l){return"in"===t?new Am(e,l):new n_(e,l)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wr(t,this.value)):null!==t&&oo(this.value)===oo(t)&&this.matchesComparison(wr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return en()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fi extends $u{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Fi(e,t)}matches(e){return eu(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function eu(i){return"and"===i.op}function sc(i){return"or"===i.op}function Sc(i){return Tc(i)&&eu(i)}function Tc(i){for(const e of i.filters)if(e instanceof Fi)return!1;return!0}function Gu(i){if(i instanceof Si)return i.field.canonicalString()+i.op.toString()+Ol(i.value);if(Sc(i))return i.filters.map(e=>Gu(e)).join(",");{const e=i.filters.map(t=>Gu(t)).join(",");return`${i.op}(${e})`}}function yp(i,e){return i instanceof Si?(t=i,(l=e)instanceof Si&&t.op===l.op&&t.field.isEqual(l.field)&&ao(t.value,l.value)):i instanceof Fi?function(t,l){return l instanceof Fi&&t.op===l.op&&t.filters.length===l.filters.length&&t.filters.reduce((d,m,w)=>d&&yp(m,l.filters[w]),!0)}(i,e):void en();var t,l}function Tm(i,e){const t=i.filters.concat(e);return Fi.create(t,i.op)}function Eh(i){return i instanceof Si?`${(e=i).field.canonicalString()} ${e.op} ${Ol(e.value)}`:i instanceof Fi?function(e){return e.op.toString()+" {"+e.getFilters().map(Eh).join(" ,")+"}"}(i):"Filter";var e}class t_ extends Si{constructor(e,t,l){super(e,t,l),this.key=tn.fromName(l.referenceValue)}matches(e){const t=tn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Am extends Si{constructor(e,t){super(e,"in",t),this.keys=Pl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class n_ extends Si{constructor(e,t){super(e,"not-in",t),this.keys=Pl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Pl(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(l=>tn.fromName(l.referenceValue))}class tu extends Si{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ce(t)&&Rl(t.arrayValue,this.value)}}class Ef extends Si{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Rl(this.value.arrayValue,t)}}class wf extends Si{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Rl(this.value.arrayValue,t)}}class yu extends Si{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ce(t)||!t.arrayValue.values)&&t.arrayValue.values.some(l=>Rl(this.value.arrayValue,l))}}class Ad{constructor(e,t=null,l=[],d=[],m=null,w=null,O=null){this.path=e,this.collectionGroup=t,this.orderBy=l,this.filters=d,this.limit=m,this.startAt=w,this.endAt=O,this.dt=null}}function gl(i,e=null,t=[],l=[],d=null,m=null,w=null){return new Ad(i,e,t,l,d,m,w)}function kl(i){const e=Sn(i);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(l=>Gu(l)).join(","),t+="|ob:",t+=e.orderBy.map(l=>{return(d=l).field.canonicalString()+d.dir;var d}).join(","),Zt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(l=>Ol(l)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(l=>Ol(l)).join(",")),e.dt=t}return e.dt}function Nl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!Td(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!yp(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!va(i.startAt,e.startAt)&&va(i.endAt,e.endAt)}function Wu(i){return tn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function wh(i,e){return i.filters.filter(t=>t instanceof Si&&t.field.isEqual(e))}function Fl(i,e,t){let l=rc,d=!0;for(const m of wh(i,e)){let w=rc,O=!0;switch(m.op){case"<":case"<=":w=Zn(m.value);break;case"==":case"in":case">=":w=m.value;break;case">":w=m.value,O=!1;break;case"!=":case"not-in":w=rc}Or({value:l,inclusive:d},{value:w,inclusive:O})<0&&(l=w,d=O)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const w=t.position[m];Or({value:l,inclusive:d},{value:w,inclusive:t.inclusive})<0&&(l=w,d=t.inclusive);break}return{value:l,inclusive:d}}function bh(i,e,t){let l=Do,d=!0;for(const m of wh(i,e)){let w=Do,O=!0;switch(m.op){case">=":case">":w=Ir(m.value),O=!1;break;case"==":case"in":case"<=":w=m.value;break;case"<":w=m.value,O=!1;break;case"!=":case"not-in":w=Do}$o({value:l,inclusive:d},{value:w,inclusive:O})>0&&(l=w,d=O)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const w=t.position[m];$o({value:l,inclusive:d},{value:w,inclusive:t.inclusive})>0&&(l=w,d=t.inclusive);break}return{value:l,inclusive:d}}class Ac{constructor(e,t=null,l=[],d=[],m=null,w="F",O=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=l,this.filters=d,this.limit=m,this.limitType=w,this.startAt=O,this.endAt=G,this.wt=null,this._t=null}}function Ch(i,e,t,l,d,m,w,O){return new Ac(i,e,t,l,d,m,w,O)}function nu(i){return new Ac(i)}function xd(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Md(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Ll(i){for(const e of i.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function vu(i){return null!==i.collectionGroup}function Eu(i){const e=Sn(i);if(null===e.wt){e.wt=[];const t=Ll(e),l=Md(e);if(null!==t&&null===l)t.isKeyField()||e.wt.push(new ic(t)),e.wt.push(new ic(vs.keyField(),"asc"));else{let d=!1;for(const m of e.explicitOrderBy)e.wt.push(m),m.field.isKeyField()&&(d=!0);if(!d){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ic(vs.keyField(),m))}}}return e.wt}function ai(i){const e=Sn(i);if(!e._t)if("F"===e.limitType)e._t=gl(e.path,e.collectionGroup,Eu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of Eu(e))t.push(new ic(m.field,"desc"===m.dir?"asc":"desc"));const l=e.endAt?new Go(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Go(e.startAt.position,e.startAt.inclusive):null;e._t=gl(e.path,e.collectionGroup,t,e.filters,e.limit,l,d)}return e._t}function Ea(i,e){e.getFirstInequalityField(),Ll(i);const t=i.filters.concat([e]);return new Ac(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function _l(i,e,t){return new Ac(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function xc(i,e){return Nl(ai(i),ai(e))&&i.limitType===e.limitType}function bf(i){return`${kl(ai(i))}|lt:${i.limitType}`}function Mc(i){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(l=>Eh(l)).join(", ")}]`),Zt(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(l=>{return`${(d=l).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(l=>Ol(l)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(l=>Ol(l)).join(",")),`Target(${t})`}(ai(i))}; limitType=${i.limitType})`}function yl(i,e){return e.isFoundDocument()&&function(t,l){const d=l.key.path;return null!==t.collectionGroup?l.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):tn.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,l){for(const d of Eu(t))if(!d.field.isKeyField()&&null===l.data.field(d.field))return!1;return!0}(i,e)&&function(t,l){for(const d of t.filters)if(!d.matches(l))return!1;return!0}(i,e)&&(l=e,!((t=i).startAt&&!function(d,m,w){const O=nl(d,m,w);return d.inclusive?O<=0:O<0}(t.startAt,Eu(t),l)||t.endAt&&!function(d,m,w){const O=nl(d,m,w);return d.inclusive?O>=0:O>0}(t.endAt,Eu(t),l)));var t,l}function Ih(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function vl(i){return(e,t)=>{let l=!1;for(const d of Eu(i)){const m=Cf(d,e,t);if(0!==m)return m;l=l||d.field.isKeyField()}return 0}}function Cf(i,e,t){const l=i.field.isKeyField()?tn.comparator(e.key,t.key):function(d,m,w){const O=m.data.field(d),G=w.data.field(d);return null!==O&&null!==G?wr(O,G):en()}(i.field,e,t);switch(i.dir){case"asc":return l;case"desc":return-1*l;default:return en()}}class La{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0!==l)for(const[d,m]of l)if(this.equalsFn(d,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const l=this.mapKeyFn(e),d=this.inner[l];if(void 0===d)return this.inner[l]=[[e,t]],void this.innerSize++;for(let m=0;m<d.length;m++)if(this.equalsFn(d[m][0],e))return void(d[m]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),l=this.inner[t];if(void 0===l)return!1;for(let d=0;d<l.length;d++)if(this.equalsFn(l[d][0],e))return 1===l.length?delete this.inner[t]:l.splice(d,1),this.innerSize--,!0;return!1}forEach(e){_o(this.inner,(t,l)=>{for(const[d,m]of l)e(d,m)})}isEmpty(){return gu(this.inner)}size(){return this.innerSize}}const xm=new hi(tn.comparator);function ea(){return xm}const Mm=new hi(tn.comparator);function Rc(...i){let e=Mm;for(const t of i)e=e.insert(t.key,t);return e}function vp(i){let e=Mm;return i.forEach((t,l)=>e=e.insert(t,l.overlayedDocument)),e}function rl(){return Oc()}function If(){return Oc()}function Oc(){return new La(i=>i.toString(),(i,e)=>i.isEqual(e))}const r_=new hi(tn.comparator),Rm=new zi(tn.comparator);function ti(...i){let e=Rm;for(const t of i)e=e.add(t);return e}const Ep=new zi(vr);function Ku(){return Ep}function wp(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$n(e)?"-0":e}}function bp(i){return{integerValue:""+i}}function qu(i,e){return ar(e)?bp(e):wp(i,e)}class Rd{constructor(){this._=void 0}}function ta(i,e,t){return i instanceof Pc?function(l,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return d&&_u(d)&&(d=tl(d)),d&&(m.fields.__previous_value__=d),{mapValue:m}}(t,e):i instanceof ru?Od(i,e):i instanceof bu?Df(i,e):function(l,d){const m=Dh(l,d),w=wa(m)+wa(l.gt);return X(m)&&X(l.gt)?bp(w):wp(l.serializer,w)}(i,e)}function wu(i,e,t){return i instanceof ru?Od(i,e):i instanceof bu?Df(i,e):t}function Dh(i,e){return i instanceof Pd?X(t=e)||(l=t)&&"doubleValue"in l?e:{integerValue:0}:null;var l,t}class Pc extends Rd{}class ru extends Rd{constructor(e){super(),this.elements=e}}function Od(i,e){const t=Cu(e);for(const l of i.elements)t.some(d=>ao(d,l))||t.push(l);return{arrayValue:{values:t}}}class bu extends Rd{constructor(e){super(),this.elements=e}}function Df(i,e){let t=Cu(e);for(const l of i.elements)t=t.filter(d=>!ao(d,l));return{arrayValue:{values:t}}}class Pd extends Rd{constructor(e,t){super(),this.serializer=e,this.gt=t}}function wa(i){return xs(i.integerValue||i.doubleValue)}function Cu(i){return Ce(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Yu{constructor(e,t){this.field=e,this.transform=t}}class Qy{constructor(e,t){this.version=e,this.transformResults=t}}class Ms{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ms}static exists(e){return new Ms(void 0,e)}static updateTime(e){return new Ms(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ba(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class kd{}function Iu(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Zu(i.key,Ms.none()):new oc(i.key,i.data,Ms.none());{const t=i.data,l=yi.empty();let d=new zi(vs.comparator);for(let m of e.fields)if(!d.has(m)){let w=t.field(m);null===w&&m.length>1&&(m=m.popLast(),w=t.field(m)),null===w?l.delete(m):l.set(m,w),d=d.add(m)}return new na(i.key,l,new so(d.toArray()),Ms.none())}}function Cp(i,e,t){i instanceof oc?function(l,d,m){const w=l.value.clone(),O=Ip(l.fieldTransforms,d,m.transformResults);w.setAll(O),d.convertToFoundDocument(m.version,w).setHasCommittedMutations()}(i,e,t):i instanceof na?function(l,d,m){if(!ba(l.precondition,d))return void d.convertToUnknownDocument(m.version);const w=Ip(l.fieldTransforms,d,m.transformResults),O=d.data;O.setAll(Du(l)),O.setAll(w),d.convertToFoundDocument(m.version,O).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function il(i,e,t,l){return i instanceof oc?function(d,m,w,O){if(!ba(d.precondition,m))return w;const G=d.value.clone(),Q=Dp(d.fieldTransforms,O,m);return G.setAll(Q),m.convertToFoundDocument(m.version,G).setHasLocalMutations(),null}(i,e,t,l):i instanceof na?function(d,m,w,O){if(!ba(d.precondition,m))return w;const G=Dp(d.fieldTransforms,O,m),Q=m.data;return Q.setAll(Du(d)),Q.setAll(G),m.convertToFoundDocument(m.version,Q).setHasLocalMutations(),null===w?null:w.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ce=>ce.field))}(i,e,t,l):(w=t,ba(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):w);var m,w}function Sh(i,e){let t=null;for(const l of i.fieldTransforms){const d=e.data.field(l.field),m=Dh(l.transform,d||null);null!=m&&(null===t&&(t=yi.empty()),t.set(l.field,m))}return t||null}function Sf(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(l=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===l||t&&l&&Pa(t,l,(d,m)=>function Zy(i,e){return i.field.isEqual(e.field)&&(l=e.transform,(t=i.transform)instanceof ru&&l instanceof ru||t instanceof bu&&l instanceof bu?Pa(t.elements,l.elements,ao):t instanceof Pd&&l instanceof Pd?ao(t.gt,l.gt):t instanceof Pc&&l instanceof Pc);var t,l}(d,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,l}class oc extends kd{constructor(e,t,l,d=[]){super(),this.key=e,this.value=t,this.precondition=l,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class na extends kd{constructor(e,t,l,d,m=[]){super(),this.key=e,this.data=t,this.fieldMask=l,this.precondition=d,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Du(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const l=i.data.field(t);e.set(t,l)}}),e}function Ip(i,e,t){const l=new Map;Jn(i.length===t.length);for(let d=0;d<t.length;d++){const m=i[d],w=m.transform,O=e.data.field(m.field);l.set(m.field,wu(w,O,t[d]))}return l}function Dp(i,e,t){const l=new Map;for(const d of i){const m=d.transform,w=t.data.field(d.field);l.set(d.field,ta(m,w,e))}return l}class Zu extends kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Om extends kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class C{constructor(e,t,l,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=l,this.mutations=d}applyToRemoteDocument(e,t){const l=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const m=this.mutations[d];m.key.isEqual(e.key)&&Cp(m,e,l[d])}}applyToLocalView(e,t){for(const l of this.baseMutations)l.key.isEqual(e.key)&&(t=il(l,e,t,this.localWriteTime));for(const l of this.mutations)l.key.isEqual(e.key)&&(t=il(l,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const l=If();return this.mutations.forEach(d=>{const m=e.get(d.key),w=m.overlayedDocument;let O=this.applyToLocalView(w,m.mutatedFields);O=t.has(d.key)?null:O;const G=Iu(w,O);null!==G&&l.set(d.key,G),w.isValidDocument()||w.convertToNoDocument(rr.min())}),l}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ti())}isEqual(e){return this.batchId===e.batchId&&Pa(this.mutations,e.mutations,(t,l)=>Sf(t,l))&&Pa(this.baseMutations,e.baseMutations,(t,l)=>Sf(t,l))}}class g{constructor(e,t,l,d){this.batch=e,this.commitVersion=t,this.mutationResults=l,this.docVersions=d}static from(e,t,l){Jn(e.mutations.length===l.length);let d=r_;const m=e.mutations;for(let w=0;w<m.length;w++)d=d.insert(m[w].key,l[w].version);return new g(e,t,l,d)}}class y{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Z{constructor(e,t){this.count=e,this.unchangedNames=t}}var se,Pe;function yt(i){switch(i){default:return en();case Rt.CANCELLED:case Rt.UNKNOWN:case Rt.DEADLINE_EXCEEDED:case Rt.RESOURCE_EXHAUSTED:case Rt.INTERNAL:case Rt.UNAVAILABLE:case Rt.UNAUTHENTICATED:return!1;case Rt.INVALID_ARGUMENT:case Rt.NOT_FOUND:case Rt.ALREADY_EXISTS:case Rt.PERMISSION_DENIED:case Rt.FAILED_PRECONDITION:case Rt.ABORTED:case Rt.OUT_OF_RANGE:case Rt.UNIMPLEMENTED:case Rt.DATA_LOSS:return!0}}function rn(i){if(void 0===i)return Xi("GRPC error has no .code"),Rt.UNKNOWN;switch(i){case se.OK:return Rt.OK;case se.CANCELLED:return Rt.CANCELLED;case se.UNKNOWN:return Rt.UNKNOWN;case se.DEADLINE_EXCEEDED:return Rt.DEADLINE_EXCEEDED;case se.RESOURCE_EXHAUSTED:return Rt.RESOURCE_EXHAUSTED;case se.INTERNAL:return Rt.INTERNAL;case se.UNAVAILABLE:return Rt.UNAVAILABLE;case se.UNAUTHENTICATED:return Rt.UNAUTHENTICATED;case se.INVALID_ARGUMENT:return Rt.INVALID_ARGUMENT;case se.NOT_FOUND:return Rt.NOT_FOUND;case se.ALREADY_EXISTS:return Rt.ALREADY_EXISTS;case se.PERMISSION_DENIED:return Rt.PERMISSION_DENIED;case se.FAILED_PRECONDITION:return Rt.FAILED_PRECONDITION;case se.ABORTED:return Rt.ABORTED;case se.OUT_OF_RANGE:return Rt.OUT_OF_RANGE;case se.UNIMPLEMENTED:return Rt.UNIMPLEMENTED;case se.DATA_LOSS:return Rt.DATA_LOSS;default:return en()}}(Pe=se||(se={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";class wn{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Hn}static getOrCreateInstance(){return null===Hn&&(Hn=new wn),Hn}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Hn=null;function Wn(){return new TextEncoder}const ls=new pl([4294967295,4294967295],0);function El(i){const e=Wn().encode(i),t=new Il;return t.update(e),new Uint8Array(t.digest())}function Qu(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),l=e.getUint32(4,!0),d=e.getUint32(8,!0),m=e.getUint32(12,!0);return[new pl([t,l],0),new pl([d,m],0)]}class Tf{constructor(e,t,l){if(this.bitmap=e,this.padding=t,this.hashCount=l,t<0||t>=8)throw new hs(`Invalid padding: ${t}`);if(l<0)throw new hs(`Invalid hash count: ${l}`);if(e.length>0&&0===this.hashCount)throw new hs(`Invalid hash count: ${l}`);if(0===e.length&&0!==t)throw new hs(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=pl.fromNumber(this.It)}Et(e,t,l){let d=e.add(t.multiply(pl.fromNumber(l)));return 1===d.compare(ls)&&(d=new pl([d.getBits(0),d.getBits(1)],0)),d.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=El(e),[l,d]=Qu(t);for(let m=0;m<this.hashCount;m++){const w=this.Et(l,d,m);if(!this.At(w))return!1}return!0}static create(e,t,l){const d=e%8==0?0:8-e%8,m=new Uint8Array(Math.ceil(e/8)),w=new Tf(m,d,t);return l.forEach(O=>w.insert(O)),w}insert(e){if(0===this.It)return;const t=El(e),[l,d]=Qu(t);for(let m=0;m<this.hashCount;m++){const w=this.Et(l,d,m);this.Rt(w)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class sl{constructor(e,t,l,d,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=l,this.documentUpdates=d,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,l){const d=new Map;return d.set(e,Xu.createSynthesizedTargetChangeForCurrentChange(e,t,l)),new sl(rr.min(),d,new hi(vr),ea(),ti())}}class Xu{constructor(e,t,l,d,m){this.resumeToken=e,this.current=t,this.addedDocuments=l,this.modifiedDocuments=d,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,l){return new Xu(l,t,ti(),ti(),ti())}}class Su{constructor(e,t,l,d){this.Pt=e,this.removedTargetIds=t,this.key=l,this.bt=d}}class ac{constructor(e,t){this.targetId=e,this.Vt=t}}class Nd{constructor(e,t,l=Fs.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=l,this.cause=d}}class Ju{constructor(){this.St=0,this.Dt=Th(),this.Ct=Fs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=ti(),t=ti(),l=ti();return this.Dt.forEach((d,m)=>{switch(m){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:l=l.add(d);break;default:en()}}),new Xu(this.Ct,this.xt,e,t,l)}Ft(){this.Nt=!1,this.Dt=Th()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Pm{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=ea(),this.zt=km(),this.Wt=new hi(vr)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const l=this.Zt(t);switch(e.state){case 0:this.te(t)&&l.$t(e.resumeToken);break;case 1:l.Ut(),l.kt||l.Ft(),l.$t(e.resumeToken);break;case 2:l.Ut(),l.kt||this.removeTarget(t);break;case 3:this.te(t)&&(l.Kt(),l.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),l.$t(e.resumeToken));break;default:en()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((l,d)=>{this.te(d)&&t(d)})}ne(e){var t;const l=e.targetId,d=e.Vt.count,m=this.se(l);if(m){const w=m.target;if(Wu(w))if(0===d){const O=new tn(w.path);this.Yt(l,O,Ji.newNoDocument(O,rr.min()))}else Jn(1===d);else{const O=this.ie(l);if(O!==d){const G=this.re(e,O);0!==G&&(this.ee(l),this.Wt=this.Wt.insert(l,2===G?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=wn.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(Q,ce,Ue){var bt,jt,mn,Mn,Pn,ri;const vi={localCacheCount:ce,existenceFilterCount:Ue.count},Br=Ue.unchangedNames;return Br&&(vi.bloomFilter={applied:0===Q,hashCount:null!==(bt=Br?.hashCount)&&void 0!==bt?bt:0,bitmapLength:null!==(Mn=null===(mn=null===(jt=Br?.bits)||void 0===jt?void 0:jt.bitmap)||void 0===mn?void 0:mn.length)&&void 0!==Mn?Mn:0,padding:null!==(ri=null===(Pn=Br?.bits)||void 0===Pn?void 0:Pn.padding)&&void 0!==ri?ri:0}),vi}(G,O,e.Vt))}}}}re(e,t){const{unchangedNames:l,count:d}=e.Vt;if(!l||!l.bits)return 1;const{bits:{bitmap:m="",padding:w=0},hashCount:O=0}=l;let G,Q;try{G=Ml(m).toUint8Array()}catch(ce){if(ce instanceof Hu)return io("Decoding the base64 bloom filter in existence filter failed ("+ce.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ce}try{Q=new Tf(G,w,O)}catch(ce){return io(ce instanceof hs?"BloomFilter error: ":"Applying bloom filter failed: ",ce),1}return 0===Q.It?1:d!==t-this.oe(e.targetId,Q)?2:0}oe(e,t){const l=this.Gt.getRemoteKeysForTarget(e);let d=0;return l.forEach(m=>{const w=this.Gt.ue(),O=`projects/${w.projectId}/databases/${w.database}/documents/${m.path.canonicalString()}`;t.vt(O)||(this.Yt(e,m,null),d++)}),d}ce(e){const t=new Map;this.Qt.forEach((m,w)=>{const O=this.se(w);if(O){if(m.current&&Wu(O.target)){const G=new tn(O.target.path);null!==this.jt.get(G)||this.ae(w,G)||this.Yt(w,G,Ji.newNoDocument(G,e))}m.Mt&&(t.set(w,m.Ot()),m.Ft())}});let l=ti();this.zt.forEach((m,w)=>{let O=!0;w.forEachWhile(G=>{const Q=this.se(G);return!Q||"TargetPurposeLimboResolution"===Q.purpose||(O=!1,!1)}),O&&(l=l.add(m))}),this.jt.forEach((m,w)=>w.setReadTime(e));const d=new sl(e,t,this.Wt,this.jt,l);return this.jt=ea(),this.zt=km(),this.Wt=new hi(vr),d}Jt(e,t){if(!this.te(e))return;const l=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,l),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,l){if(!this.te(e))return;const d=this.Zt(e);this.ae(e,t)?d.Bt(t,1):d.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),l&&(this.jt=this.jt.insert(t,l))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Ju,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new zi(vr),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||sn("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Ju),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function km(){return new hi(tn.comparator)}function Th(){return new hi(tn.comparator)}const i_={asc:"ASCENDING",desc:"DESCENDING"},Xy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sp={and:"AND",or:"OR"};class Tu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fd(i,e){return i.useProto3Json||Zt(e)?e:{value:e}}function Ah(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function s_(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function O0(i,e){return Ah(i,e.toTimestamp())}function Ks(i){return Jn(!!i),rr.fromTimestamp(function(e){const t=nc(e);return new Pi(t.seconds,t.nanos)}(i))}function Tp(i,e){return(t=i,new Gr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function o_(i){const e=Gr.fromString(i);return Jn(Bm(e)),e}function ed(i,e){return Tp(i.databaseId,e.path)}function kc(i,e){const t=o_(e);if(t.get(1)!==i.databaseId.projectId)throw new qt(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new qt(Rt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new tn(Nm(t))}function Ap(i,e){return Tp(i.databaseId,e)}function xh(i){const e=o_(i);return 4===e.length?Gr.emptyPath():Nm(e)}function Ld(i){return new Gr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Nm(i){return Jn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Fm(i,e,t){return{name:ed(i,e),fields:t.value.mapValue.fields}}function Nc(i,e,t){const l=kc(i,e.name),d=Ks(e.updateTime),m=e.createTime?Ks(e.createTime):rr.min(),w=new yi({mapValue:{fields:e.fields}}),O=Ji.newFoundDocument(l,d,m,w);return t&&O.setHasCommittedMutations(),t?O.setHasCommittedMutations():O}function Au(i,e){let t;if(e instanceof oc)t={update:Fm(i,e.key,e.value)};else if(e instanceof Zu)t={delete:ed(i,e.key)};else if(e instanceof na)t={update:Fm(i,e.key,e.data),updateMask:Rp(e.fieldMask)};else{if(!(e instanceof Om))return en();t={verify:ed(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(l=>function(d,m){const w=m.transform;if(w instanceof Pc)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof ru)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof bu)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof Pd)return{fieldPath:m.field.canonicalString(),increment:w.gt};throw en()}(0,l))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:O0(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:en()),t;var d}function Mp(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?Ms.updateTime(Ks(d.updateTime)):void 0!==d.exists?Ms.exists(d.exists):Ms.none():Ms.none(),l=e.updateTransforms?e.updateTransforms.map(d=>function(m,w){let O=null;"setToServerValue"in w?(Jn("REQUEST_TIME"===w.setToServerValue),O=new Pc):"appendMissingElements"in w?O=new ru(w.appendMissingElements.values||[]):"removeAllFromArray"in w?O=new bu(w.removeAllFromArray.values||[]):"increment"in w?O=new Pd(m,w.increment):en();const G=vs.fromServerFormat(w.fieldPath);return new Yu(G,O)}(i,d)):[];var d;if(e.update){const d=kc(i,e.update.name),m=new yi({mapValue:{fields:e.update.fields}});if(e.updateMask){const w=new so((e.updateMask.fieldPaths||[]).map(Q=>vs.fromServerFormat(Q)));return new na(d,m,w,t,l)}return new oc(d,m,t,l)}if(e.delete){const d=kc(i,e.delete);return new Zu(d,t)}if(e.verify){const d=kc(i,e.verify);return new Om(d,t)}return en()}function td(i,e){return{documents:[Ap(i,e.path)]}}function nd(i,e){const t={structuredQuery:{}},l=e.path;null!==e.collectionGroup?(t.parent=Ap(i,l),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Ap(i,l.popLast()),t.structuredQuery.from=[{collectionId:l.lastSegment()}]);const d=function(G){if(0!==G.length)return d_(Fi.create(G,"and"))}(e.filters);d&&(t.structuredQuery.where=d);const m=function(G){if(0!==G.length)return G.map(Q=>{return{field:Vd((ce=Q).field),direction:u_(ce.dir)};var ce})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const w=Fd(i,e.limit);var O,G;return null!==w&&(t.structuredQuery.limit=w),e.startAt&&(t.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function l_(i){let e=xh(i.parent);const t=i.structuredQuery,l=t.from?t.from.length:0;let d=null;if(l>0){Jn(1===l);const ce=t.from[0];ce.allDescendants?d=ce.collectionId:e=e.child(ce.collectionId)}let m=[];t.where&&(m=function(ce){const Ue=Vm(ce);return Ue instanceof Fi&&Sc(Ue)?Ue.getFilters():[Ue]}(t.where));let w=[];t.orderBy&&(w=t.orderBy.map(ce=>{return new ic(Af((Ue=ce).field),function(bt){switch(bt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ue.direction));var Ue}));let O=null;t.limit&&(O=function(ce){let Ue;return Ue="object"==typeof ce?ce.value:ce,Zt(Ue)?null:Ue}(t.limit));let G=null;var ce;t.startAt&&(G=new Go((ce=t.startAt).values||[],!!ce.before));let Q=null;return t.endAt&&(Q=function(ce){return new Go(ce.values||[],!ce.before)}(t.endAt)),Ch(e,d,w,m,O,"F",G,Q)}function Vm(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Af(e.unaryFilter.field);return Si.create(t,"==",{doubleValue:NaN});case"IS_NULL":const l=Af(e.unaryFilter.field);return Si.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Af(e.unaryFilter.field);return Si.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Af(e.unaryFilter.field);return Si.create(m,"!=",{nullValue:"NULL_VALUE"});default:return en()}}(i):void 0!==i.fieldFilter?Si.create(Af((e=i).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return en()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return Fi.create(e.compositeFilter.filters.map(t=>Vm(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return en()}}(e.compositeFilter.op))}(i):en();var e}function u_(i){return i_[i]}function Jy(i){return Xy[i]}function Mh(i){return Sp[i]}function Vd(i){return{fieldPath:i.canonicalString()}}function Af(i){return vs.fromServerFormat(i.fieldPath)}function d_(i){return i instanceof Si?function(e){if("=="===e.op){if(ot(e.value))return{unaryFilter:{field:Vd(e.field),op:"IS_NAN"}};if(Ke(e.value))return{unaryFilter:{field:Vd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ot(e.value))return{unaryFilter:{field:Vd(e.field),op:"IS_NOT_NAN"}};if(Ke(e.value))return{unaryFilter:{field:Vd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vd(e.field),op:Jy(e.op),value:e.value}}}(i):i instanceof Fi?function(e){const t=e.getFilters().map(l=>d_(l));return 1===t.length?t[0]:{compositeFilter:{op:Mh(e.op),filters:t}}}(i):en()}function Rp(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Bm(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Fc{constructor(e,t,l,d,m=rr.min(),w=rr.min(),O=Fs.EMPTY_BYTE_STRING,G=null){this.target=e,this.targetId=t,this.purpose=l,this.sequenceNumber=d,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=w,this.resumeToken=O,this.expectedCount=G}withSequenceNumber(e){return new Fc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Op{constructor(e){this.fe=e}}function h_(i,e){const t=e.key,l={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())l.document={name:ed(d=i.fe,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Ah(d,m.version.toTimestamp()),createTime:Ah(d,m.createTime.toTimestamp())};else if(e.isNoDocument())l.noDocument={path:t.path.toArray(),readTime:iu(e.version)};else{if(!e.isUnknownDocument())return en();l.unknownDocument={path:t.path.toArray(),version:iu(e.version)}}var d,m;return l}function Pp(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function iu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xu(i){const e=new Pi(i.seconds,i.nanoseconds);return rr.fromTimestamp(e)}function lc(i,e){const t=(e.baseMutations||[]).map(m=>Mp(i.fe,m));for(let m=0;m<e.mutations.length-1;++m)m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(e.mutations[m].updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m);const l=e.mutations.map(m=>Mp(i.fe,m)),d=Pi.fromMillis(e.localWriteTimeMs);return new C(e.batchId,d,t,l)}function rd(i){const e=xu(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?xu(i.lastLimboFreeSnapshotVersion):rr.min();let l;var d;return void 0!==i.query.documents?(Jn(1===(d=i.query).documents.length),l=ai(nu(xh(d.documents[0])))):l=ai(l_(i.query)),new Fc(l,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,Fs.fromBase64String(i.resumeToken))}function xf(i,e){const t=iu(e.snapshotVersion),l=iu(e.lastLimboFreeSnapshotVersion);let d;d=Wu(e.target)?td(i.fe,e.target):nd(i.fe,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:kl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:l,query:d}}function Mf(i){const e=l_({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?_l(e,e.limit,"L"):e}function f_(i,e){return new y(e.largestBatchId,Mp(i.fe,e.overlayMutation))}function ev(i,e){const t=e.path.lastSegment();return[i,Ci(e.path.popLast()),t]}function tv(i,e,t,l){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:iu(l.readTime),documentKey:Ci(l.documentKey.path),largestBatchId:l.largestBatchId}}class Um{getBundleMetadata(e,t){return Rf(e).get(t).next(l=>{if(l)return{id:(d=l).bundleId,createTime:xu(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Rf(e).put({bundleId:(l=t).id,createTime:iu(Ks(l.createTime)),version:l.version});var l}getNamedQuery(e,t){return kp(e).get(t).next(l=>{if(l)return{name:(d=l).name,query:Mf(d.bundledQuery),readTime:xu(d.readTime)};var d})}saveNamedQuery(e,t){return kp(e).put({name:(l=t).name,readTime:iu(Ks(l.readTime)),bundledQuery:l.bundledQuery});var l}}function Rf(i){return Ns(i,"bundles")}function kp(i){return Ns(i,"namedQueries")}class Of{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Of(e,t.uid||"")}getOverlay(e,t){return id(e).get(ev(this.userId,t)).next(l=>l?f_(this.serializer,l):null)}getOverlays(e,t){const l=rl();return _t.forEach(t,d=>this.getOverlay(e,d).next(m=>{null!==m&&l.set(d,m)})).next(()=>l)}saveOverlays(e,t,l){const d=[];return l.forEach((m,w)=>{const O=new y(t,w);d.push(this.we(e,O))}),_t.waitFor(d)}removeOverlaysForBatchId(e,t,l){const d=new Set;t.forEach(w=>d.add(Ci(w.getCollectionPath())));const m=[];return d.forEach(w=>{const O=IDBKeyRange.bound([this.userId,w,l],[this.userId,w,l+1],!1,!0);m.push(id(e).J("collectionPathOverlayIndex",O))}),_t.waitFor(m)}getOverlaysForCollection(e,t,l){const d=rl(),m=Ci(t),w=IDBKeyRange.bound([this.userId,m,l],[this.userId,m,Number.POSITIVE_INFINITY],!0);return id(e).j("collectionPathOverlayIndex",w).next(O=>{for(const G of O){const Q=f_(this.serializer,G);d.set(Q.getKey(),Q)}return d})}getOverlaysForCollectionGroup(e,t,l,d){const m=rl();let w;const O=IDBKeyRange.bound([this.userId,t,l],[this.userId,t,Number.POSITIVE_INFINITY],!0);return id(e).X({index:"collectionGroupOverlayIndex",range:O},(G,Q,ce)=>{const Ue=f_(this.serializer,Q);m.size()<d||Ue.largestBatchId===w?(m.set(Ue.getKey(),Ue),w=Ue.largestBatchId):ce.done()}).next(()=>m)}we(e,t){return id(e).put(function(l,d,m){const[w,O,G]=ev(d,m.mutation.key);return{userId:d,collectionPath:O,documentId:G,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Au(l.fe,m.mutation)}}(this.serializer,this.userId,t))}}function id(i){return Ns(i,"documentOverlays")}class Ca{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(xs(e.integerValue));else if("doubleValue"in e){const l=xs(e.doubleValue);isNaN(l)?this.ye(t,13):(this.ye(t,15),$n(l)?t.pe(0):t.pe(l))}else if("timestampValue"in e){const l=e.timestampValue;this.ye(t,20),"string"==typeof l?t.Ie(l):(t.Ie(`${l.seconds||""}`),t.pe(l.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ml(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const l=e.geoPointValue;this.ye(t,45),t.pe(l.latitude||0),t.pe(l.longitude||0)}else"mapValue"in e?bn(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):en()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const l=e.fields||{};this.ye(t,55);for(const d of Object.keys(l))this.Te(d,t),this.me(l[d],t)}Pe(e,t){const l=e.values||[];this.ye(t,50);for(const d of l)this.me(d,t)}ve(e,t){this.ye(t,37),tn.fromName(e).path.forEach(l=>{this.ye(t,60),this.be(l,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function sd(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function nv(i){const e=64-function(t){let l=0;for(let d=0;d<8;++d){const m=sd(255&t[d]);if(l+=m,8!==m)break}return l}(i);return Math.ceil(e/8)}Ca.Ve=new Ca;class rv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.De(l.value),l=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let l=t.next();for(;!l.done;)this.Ne(l.value),l=t.next();this.ke()}Me(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.De(l);else if(l<2048)this.De(960|l>>>6),this.De(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.De(480|l>>>12),this.De(128|63&l>>>6),this.De(128|63&l);else{const d=t.codePointAt(0);this.De(240|d>>>18),this.De(128|63&d>>>12),this.De(128|63&d>>>6),this.De(128|63&d)}}this.Ce()}$e(e){for(const t of e){const l=t.charCodeAt(0);if(l<128)this.Ne(l);else if(l<2048)this.Ne(960|l>>>6),this.Ne(128|63&l);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|l>>>12),this.Ne(128|63&l>>>6),this.Ne(128|63&l);else{const d=t.codePointAt(0);this.Ne(240|d>>>18),this.Ne(128|63&d>>>12),this.Ne(128|63&d>>>6),this.Ne(128|63&d)}}this.ke()}Oe(e){const t=this.Fe(e),l=nv(t);this.Be(1+l),this.buffer[this.position++]=255&l;for(let d=t.length-l;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Le(e){const t=this.Fe(e),l=nv(t);this.Be(1+l),this.buffer[this.position++]=~(255&l);for(let d=t.length-l;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(e),l=0!=(128&t[0]);t[0]^=l?255:128;for(let d=1;d<t.length;++d)t[d]^=l?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let l=2*this.buffer.length;l<t&&(l=t);const d=new Uint8Array(l);d.set(this.buffer),this.buffer=d}}class p_{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class Np{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class od{constructor(){this.je=new rv,this.ze=new p_(this.je),this.We=new Np(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Rh{constructor(e,t,l,d){this.indexId=e,this.documentKey=t,this.arrayValue=l,this.directionalValue=d}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,l=new Uint8Array(t);return l.set(this.directionalValue,0),t!==e?l.set([0],this.directionalValue.length):++l[l.length-1],new Rh(this.indexId,this.documentKey,this.arrayValue,l)}}function ra(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Ud(i.arrayValue,e.arrayValue),0!==t?t:(t=Ud(i.directionalValue,e.directionalValue),0!==t?t:tn.comparator(i.documentKey,e.documentKey)))}function Ud(i,e){for(let t=0;t<i.length&&t<e.length;++t){const l=i[t]-e[t];if(0!==l)return l}return i.length-e.length}class ad{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const l=t;l.isInequality()?this.Ze=l:this.Xe.push(l)}}tn(e){Jn(e.collectionGroup===this.collectionId);const t=Jo(e);if(void 0!==t&&!this.en(t))return!1;const l=Al(e);let d=new Set,m=0,w=0;for(;m<l.length&&this.en(l[m]);++m)d=d.add(l[m].fieldPath.canonicalString());if(m===l.length)return!0;if(void 0!==this.Ze){if(!d.has(this.Ze.field.canonicalString())){const O=l[m];if(!this.nn(this.Ze,O)||!this.sn(this.Ye[w++],O))return!1}++m}for(;m<l.length;++m)if(w>=this.Ye.length||!this.sn(this.Ye[w++],l[m]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Fp(i){var e,t;if(Jn(i instanceof Si||i instanceof Fi),i instanceof Si){if(i instanceof Ef){const d=(null===(t=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(m=>Si.create(i.field,"==",m)))||[];return Fi.create(d,"or")}return i}const l=i.filters.map(d=>Fp(d));return Fi.create(l,i.op)}function iv(i){if(0===i.getFilters().length)return[];const e=__(Fp(i));return Jn(g_(e)),Vl(e)||m_(e)?[e]:e.getFilters()}function Vl(i){return i instanceof Si}function m_(i){return i instanceof Fi&&Sc(i)}function g_(i){return Vl(i)||m_(i)||function(e){if(e instanceof Fi&&sc(e)){for(const t of e.getFilters())if(!Vl(t)&&!m_(t))return!1;return!0}return!1}(i)}function __(i){if(Jn(i instanceof Si||i instanceof Fi),i instanceof Si)return i;if(1===i.filters.length)return __(i.filters[0]);const e=i.filters.map(l=>__(l));let t=Fi.create(e,i.op);return t=Hm(t),g_(t)?t:(Jn(t instanceof Fi),Jn(eu(t)),Jn(t.filters.length>1),t.filters.reduce((l,d)=>jm(l,d)))}function jm(i,e){let t;return Jn(i instanceof Si||i instanceof Fi),Jn(e instanceof Si||e instanceof Fi),t=i instanceof Si?e instanceof Si?Fi.create([i,e],"and"):y_(i,e):e instanceof Si?y_(e,i):function(l,d){if(Jn(l.filters.length>0&&d.filters.length>0),eu(l)&&eu(d))return Tm(l,d.getFilters());const m=sc(l)?l:d,w=sc(l)?d:l,O=m.filters.map(G=>jm(G,w));return Fi.create(O,"or")}(i,e),Hm(t)}function y_(i,e){if(eu(e))return Tm(e,i.getFilters());{const t=e.filters.map(l=>jm(i,l));return Fi.create(t,"or")}}function Hm(i){if(Jn(i instanceof Si||i instanceof Fi),i instanceof Si)return i;const e=i.getFilters();if(1===e.length)return Hm(e[0]);if(Tc(i))return i;const t=e.map(d=>Hm(d)),l=[];return t.forEach(d=>{d instanceof Si?l.push(d):d instanceof Fi&&(d.op===i.op?l.push(...d.filters):l.push(d))}),1===l.length?l[0]:Fi.create(l,i.op)}class v_{constructor(){this.rn=new Oh}addToCollectionParentIndex(e,t){return this.rn.add(t),_t.resolve()}getCollectionParents(e,t){return _t.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return _t.resolve()}deleteFieldIndex(e,t){return _t.resolve()}getDocumentsMatchingTarget(e,t){return _t.resolve(null)}getIndexType(e,t){return _t.resolve(0)}getFieldIndexes(e,t){return _t.resolve([])}getNextCollectionGroupToUpdate(e){return _t.resolve(null)}getMinOffset(e,t){return _t.resolve(Ho.min())}getMinOffsetFromCollectionGroup(e,t){return _t.resolve(Ho.min())}updateCollectionGroup(e,t,l){return _t.resolve()}updateIndexEntries(e,t){return _t.resolve()}}class Oh{constructor(){this.index={}}add(e){const t=e.lastSegment(),l=e.popLast(),d=this.index[t]||new zi(Gr.comparator),m=!d.has(l);return this.index[t]=d.add(l),m}has(e){const t=e.lastSegment(),l=e.popLast(),d=this.index[t];return d&&d.has(l)}getEntries(e){return(this.index[e]||new zi(Gr.comparator)).toArray()}}const Lp=new Uint8Array(0);class Lc{constructor(e,t){this.user=e,this.databaseId=t,this.on=new Oh,this.un=new La(l=>kl(l),(l,d)=>Nl(l,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const l=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const m={collectionId:l,parent:Ci(d)};return sv(e).put(m)}return _t.resolve()}getCollectionParents(e,t){const l=[],d=IDBKeyRange.bound([t,""],[Cc(t),""],!1,!0);return sv(e).j(d).next(m=>{for(const w of m){if(w.collectionId!==t)break;l.push(xi(w.parent))}return l})}addFieldIndex(e,t){const l=Ph(e),d={indexId:(w=t).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(O=>[O.fieldPath.canonicalString(),O.kind])};var w;delete d.indexId;const m=l.add(d);if(t.indexState){const w=Vp(e);return m.next(O=>{w.put(tv(O,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const l=Ph(e),d=Vp(e),m=jd(e);return l.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const l=jd(e);let d=!0;const m=new Map;return _t.forEach(this.cn(t),w=>this.an(e,w).next(O=>{d&&(d=!!O),m.set(w,O)})).next(()=>{if(d){let w=ti();const O=[];return _t.forEach(m,(G,Q)=>{var ce;sn("IndexedDbIndexManager",`Using index ${ce=G,`id=${ce.indexId}|cg=${ce.collectionGroup}|f=${ce.fields.map(Br=>`${Br.fieldPath}:${Br.kind}`).join(",")}`} to execute ${kl(t)}`);const Ue=function(Br,Vs){const Ss=Jo(Vs);if(void 0===Ss)return null;for(const Es of wh(Br,Ss.fieldPath))switch(Es.op){case"array-contains-any":return Es.value.arrayValue.values||[];case"array-contains":return[Es.value]}return null}(Q,G),bt=function(Br,Vs){const Ss=new Map;for(const Es of Al(Vs))for(const qo of wh(Br,Es.fieldPath))switch(qo.op){case"==":case"in":Ss.set(Es.fieldPath.canonicalString(),qo.value);break;case"not-in":case"!=":return Ss.set(Es.fieldPath.canonicalString(),qo.value),Array.from(Ss.values())}return null}(Q,G),jt=function(Br,Vs){const Ss=[];let Es=!0;for(const qo of Al(Vs)){const Vu=0===qo.kind?Fl(Br,qo.fieldPath,Br.startAt):bh(Br,qo.fieldPath,Br.startAt);Ss.push(Vu.value),Es&&(Es=Vu.inclusive)}return new Go(Ss,Es)}(Q,G),mn=function(Br,Vs){const Ss=[];let Es=!0;for(const qo of Al(Vs)){const Vu=0===qo.kind?bh(Br,qo.fieldPath,Br.endAt):Fl(Br,qo.fieldPath,Br.endAt);Ss.push(Vu.value),Es&&(Es=Vu.inclusive)}return new Go(Ss,Es)}(Q,G),Mn=this.hn(G,Q,jt),Pn=this.hn(G,Q,mn),ri=this.ln(G,Q,bt),vi=this.fn(G.indexId,Ue,Mn,jt.inclusive,Pn,mn.inclusive,ri);return _t.forEach(vi,Br=>l.H(Br,t.limit).next(Vs=>{Vs.forEach(Ss=>{const Es=tn.fromSegments(Ss.documentKey);w.has(Es)||(w=w.add(Es),O.push(Es))})}))}).next(()=>O)}return _t.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:iv(Fi.create(e.filters,"and")).map(l=>gl(e.path,e.collectionGroup,e.orderBy,l.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,l,d,m,w,O){const G=(null!=t?t.length:1)*Math.max(l.length,m.length),Q=G/(null!=t?t.length:1),ce=[];for(let Ue=0;Ue<G;++Ue){const bt=t?this.dn(t[Ue/Q]):Lp,jt=this.wn(e,bt,l[Ue%Q],d),mn=this._n(e,bt,m[Ue%Q],w),Mn=O.map(Pn=>this.wn(e,bt,Pn,!0));ce.push(...this.createRange(jt,mn,Mn))}return ce}wn(e,t,l,d){const m=new Rh(e,tn.empty(),t,l);return d?m:m.Je()}_n(e,t,l,d){const m=new Rh(e,tn.empty(),t,l);return d?m.Je():m}an(e,t){const l=new ad(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(m=>{let w=null;for(const O of m)l.tn(O)&&(!w||O.fields.length>w.fields.length)&&(w=O);return w})}getIndexType(e,t){let l=2;const d=this.cn(t);return _t.forEach(d,m=>this.an(e,m).next(w=>{w?0!==l&&w.fields.length<function(O){let G=new zi(vs.comparator),Q=!1;for(const ce of O.filters)for(const Ue of ce.getFlattenedFilters())Ue.field.isKeyField()||("array-contains"===Ue.op||"array-contains-any"===Ue.op?Q=!0:G=G.add(Ue.field));for(const ce of O.orderBy)ce.field.isKeyField()||(G=G.add(ce.field));return G.size+(Q?1:0)}(m)&&(l=1):l=0})).next(()=>null!==t.limit&&d.length>1&&2===l?1:l)}mn(e,t){const l=new od;for(const d of Al(e)){const m=t.data.field(d.fieldPath);if(null==m)return null;const w=l.He(d.kind);Ca.Ve._e(m,w)}return l.Qe()}dn(e){const t=new od;return Ca.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const l=new od;return Ca.Ve._e(F(this.databaseId,t),l.He(function(d){const m=Al(d);return 0===m.length?0:m[m.length-1].kind}(e))),l.Qe()}ln(e,t,l){if(null===l)return[];let d=[];d.push(new od);let m=0;for(const w of Al(e)){const O=l[m++];for(const G of d)if(this.yn(t,w.fieldPath)&&Ce(O))d=this.pn(d,w,O);else{const Q=G.He(w.kind);Ca.Ve._e(O,Q)}}return this.In(d)}hn(e,t,l){return this.ln(e,t,l.position)}In(e){const t=[];for(let l=0;l<e.length;++l)t[l]=e[l].Qe();return t}pn(e,t,l){const d=[...e],m=[];for(const w of l.arrayValue.values||[])for(const O of d){const G=new od;G.seed(O.Qe()),Ca.Ve._e(w,G.He(t.kind)),m.push(G)}return m}yn(e,t){return!!e.filters.find(l=>l instanceof Si&&l.field.isEqual(t)&&("in"===l.op||"not-in"===l.op))}getFieldIndexes(e,t){const l=Ph(e),d=Vp(e);return(t?l.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):l.j()).next(m=>{const w=[];return _t.forEach(m,O=>d.get([O.indexId,this.uid]).next(G=>{w.push(function(Q,ce){const Ue=ce?new Ja(ce.sequenceNumber,new Ho(xu(ce.readTime),new tn(xi(ce.documentKey)),ce.largestBatchId)):Ja.empty(),bt=Q.fields.map(([jt,mn])=>new Xl(vs.fromServerFormat(jt),mn));return new Uu(Q.indexId,Q.collectionGroup,bt,Ue)}(O,G))})).next(()=>w)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((l,d)=>{const m=l.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==m?m:vr(l.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,l){const d=Ph(e),m=Vp(e);return this.Tn(e).next(w=>d.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(O=>_t.forEach(O,G=>m.put(tv(G.indexId,this.user,w,l)))))}updateIndexEntries(e,t){const l=new Map;return _t.forEach(t,(d,m)=>{const w=l.get(d.collectionGroup);return(w?_t.resolve(w):this.getFieldIndexes(e,d.collectionGroup)).next(O=>(l.set(d.collectionGroup,O),_t.forEach(O,G=>this.En(e,d,G).next(Q=>{const ce=this.An(m,G);return Q.isEqual(ce)?_t.resolve():this.vn(e,m,G,Q,ce)}))))})}Rn(e,t,l,d){return jd(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.gn(l,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,l,d){return jd(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.gn(l,t.key),t.key.path.toArray()])}En(e,t,l){const d=jd(e);let m=new zi(ra);return d.X({index:"documentKeyIndex",range:IDBKeyRange.only([l.indexId,this.uid,this.gn(l,t)])},(w,O)=>{m=m.add(new Rh(l.indexId,t,O.arrayValue,O.directionalValue))}).next(()=>m)}An(e,t){let l=new zi(ra);const d=this.mn(t,e);if(null==d)return l;const m=Jo(t);if(null!=m){const w=e.data.field(m.fieldPath);if(Ce(w))for(const O of w.arrayValue.values||[])l=l.add(new Rh(t.indexId,e.key,this.dn(O),d))}else l=l.add(new Rh(t.indexId,e.key,Lp,d));return l}vn(e,t,l,d,m){sn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const w=[];return function(O,G,Q,ce,Ue){const bt=O.getIterator(),jt=G.getIterator();let mn=tc(bt),Mn=tc(jt);for(;mn||Mn;){let Pn=!1,ri=!1;if(mn&&Mn){const vi=Q(mn,Mn);vi<0?ri=!0:vi>0&&(Pn=!0)}else null!=mn?ri=!0:Pn=!0;Pn?(ce(Mn),Mn=tc(jt)):ri?(Ue(mn),mn=tc(bt)):(mn=tc(bt),Mn=tc(jt))}}(d,m,ra,O=>{w.push(this.Rn(e,t,l,O))},O=>{w.push(this.Pn(e,t,l,O))}),_t.waitFor(w)}Tn(e){let t=1;return Vp(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(l,d,m)=>{m.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,l){l=l.sort((w,O)=>ra(w,O)).filter((w,O,G)=>!O||0!==ra(w,G[O-1]));const d=[];d.push(e);for(const w of l){const O=ra(w,e),G=ra(w,t);if(0===O)d[0]=e.Je();else if(O>0&&G<0)d.push(w),d.push(w.Je());else if(G>0)break}d.push(t);const m=[];for(let w=0;w<d.length;w+=2){if(this.bn(d[w],d[w+1]))return[];m.push(IDBKeyRange.bound([d[w].indexId,this.uid,d[w].arrayValue,d[w].directionalValue,Lp,[]],[d[w+1].indexId,this.uid,d[w+1].arrayValue,d[w+1].directionalValue,Lp,[]]))}return m}bn(e,t){return ra(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zm)}getMinOffset(e,t){return _t.mapArray(this.cn(t),l=>this.an(e,l).next(d=>d||en())).next(zm)}}function sv(i){return Ns(i,"collectionParents")}function jd(i){return Ns(i,"indexEntries")}function Ph(i){return Ns(i,"indexConfiguration")}function Vp(i){return Ns(i,"indexState")}function zm(i){Jn(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let l=1;l<i.length;l++){const d=i[l].indexState.offset;Is(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new Ho(e.readTime,e.documentKey,t)}const ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Va{constructor(e,t,l){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=l}static withCacheSize(e){return new Va(e,Va.DEFAULT_COLLECTION_PERCENTILE,Va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function av(i,e,t){const l=i.store("mutations"),d=i.store("documentMutations"),m=[],w=IDBKeyRange.only(t.batchId);let O=0;const G=l.X({range:w},(ce,Ue,bt)=>(O++,bt.delete()));m.push(G.next(()=>{Jn(1===O)}));const Q=[];for(const ce of t.mutations){const Ue=Vi(e,ce.key.path,t.batchId);m.push(d.delete(Ue)),Q.push(ce.key)}return _t.waitFor(m).next(()=>Q)}function Bp(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw en();e=i.noDocument}return JSON.stringify(e).length}Va.DEFAULT_COLLECTION_PERCENTILE=10,Va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Va.DEFAULT=new Va(41943040,Va.DEFAULT_COLLECTION_PERCENTILE,Va.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Va.DISABLED=new Va(-1,0,0);class $m{constructor(e,t,l,d){this.userId=e,this.serializer=t,this.indexManager=l,this.referenceDelegate=d,this.Vn={}}static de(e,t,l,d){Jn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new $m(m,t,l,d)}checkEmpty(e){let t=!0;const l=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ld(e).X({index:"userMutationsIndex",range:l},(d,m,w)=>{t=!1,w.done()}).next(()=>t)}addMutationBatch(e,t,l,d){const m=cd(e),w=ld(e);return w.add({}).next(O=>{Jn("number"==typeof O);const G=new C(O,t,l,d),Q=function(bt,jt,mn){const Mn=mn.baseMutations.map(ri=>Au(bt.fe,ri)),Pn=mn.mutations.map(ri=>Au(bt.fe,ri));return{userId:jt,batchId:mn.batchId,localWriteTimeMs:mn.localWriteTime.toMillis(),baseMutations:Mn,mutations:Pn}}(this.serializer,this.userId,G),ce=[];let Ue=new zi((bt,jt)=>vr(bt.canonicalString(),jt.canonicalString()));for(const bt of d){const jt=Vi(this.userId,bt.key.path,O);Ue=Ue.add(bt.key.path.popLast()),ce.push(w.put(Q)),ce.push(m.put(jt,qr))}return Ue.forEach(bt=>{ce.push(this.indexManager.addToCollectionParentIndex(e,bt))}),e.addOnCommittedListener(()=>{this.Vn[O]=G.keys()}),_t.waitFor(ce).next(()=>G)})}lookupMutationBatch(e,t){return ld(e).get(t).next(l=>l?(Jn(l.userId===this.userId),lc(this.serializer,l)):null)}Sn(e,t){return this.Vn[t]?_t.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(l=>{if(l){const d=l.keys();return this.Vn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const l=t+1,d=IDBKeyRange.lowerBound([this.userId,l]);let m=null;return ld(e).X({index:"userMutationsIndex",range:d},(w,O,G)=>{O.userId===this.userId&&(Jn(O.batchId>=l),m=lc(this.serializer,O)),G.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let l=-1;return ld(e).X({index:"userMutationsIndex",range:t,reverse:!0},(d,m,w)=>{l=m.batchId,w.done()}).next(()=>l)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ld(e).j("userMutationsIndex",t).next(l=>l.map(d=>lc(this.serializer,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const l=Na(this.userId,t.path),d=IDBKeyRange.lowerBound(l),m=[];return cd(e).X({range:d},(w,O,G)=>{const[Q,ce,Ue]=w,bt=xi(ce);if(Q===this.userId&&t.path.isEqual(bt))return ld(e).get(Ue).next(jt=>{if(!jt)throw en();Jn(jt.userId===this.userId),m.push(lc(this.serializer,jt))});G.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new zi(vr);const d=[];return t.forEach(m=>{const w=Na(this.userId,m.path),O=IDBKeyRange.lowerBound(w),G=cd(e).X({range:O},(Q,ce,Ue)=>{const[bt,jt,mn]=Q,Mn=xi(jt);bt===this.userId&&m.path.isEqual(Mn)?l=l.add(mn):Ue.done()});d.push(G)}),_t.waitFor(d).next(()=>this.Dn(e,l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,d=l.length+1,m=Na(this.userId,l),w=IDBKeyRange.lowerBound(m);let O=new zi(vr);return cd(e).X({range:w},(G,Q,ce)=>{const[Ue,bt,jt]=G,mn=xi(bt);Ue===this.userId&&l.isPrefixOf(mn)?mn.length===d&&(O=O.add(jt)):ce.done()}).next(()=>this.Dn(e,O))}Dn(e,t){const l=[],d=[];return t.forEach(m=>{d.push(ld(e).get(m).next(w=>{if(null===w)throw en();Jn(w.userId===this.userId),l.push(lc(this.serializer,w))}))}),_t.waitFor(d).next(()=>l)}removeMutationBatch(e,t){return av(e.ht,this.userId,t).next(l=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),_t.forEach(l,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return _t.resolve();const l=IDBKeyRange.lowerBound([this.userId]),d=[];return cd(e).X({range:l},(m,w,O)=>{if(m[0]===this.userId){const G=xi(m[1]);d.push(G)}else O.done()}).next(()=>{Jn(0===d.length)})})}containsKey(e,t){return ni(e,this.userId,t)}xn(e){return Gm(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ni(i,e,t){const l=Na(e,t.path),d=l[1],m=IDBKeyRange.lowerBound(l);let w=!1;return cd(i).X({range:m,Y:!0},(O,G,Q)=>{const[ce,Ue,bt]=O;ce===e&&Ue===d&&(w=!0),Q.done()}).next(()=>w)}function ld(i){return Ns(i,"mutations")}function cd(i){return Ns(i,"documentMutations")}function Gm(i){return Ns(i,"mutationQueues")}class kh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new kh(0)}static Mn(){return new kh(-1)}}class Pf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const l=new kh(t.highestTargetId);return t.highestTargetId=l.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>rr.fromTimestamp(new Pi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,l){return this.$n(e).next(d=>(d.highestListenSequenceNumber=t,l&&(d.lastRemoteSnapshotVersion=l.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.On(e,d)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(l=>(l.targetCount+=1,this.Bn(t,l),this.On(e,l))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bl(e).delete(t.targetId)).next(()=>this.$n(e)).next(l=>(Jn(l.targetCount>0),l.targetCount-=1,this.On(e,l)))}removeTargets(e,t,l){let d=0;const m=[];return Bl(e).X((w,O)=>{const G=rd(O);G.sequenceNumber<=t&&null===l.get(G.targetId)&&(d++,m.push(this.removeTargetData(e,G)))}).next(()=>_t.waitFor(m)).next(()=>d)}forEachTarget(e,t){return Bl(e).X((l,d)=>{const m=rd(d);t(m)})}$n(e){return lv(e).get("targetGlobalKey").next(t=>(Jn(null!==t),t))}On(e,t){return lv(e).put("targetGlobalKey",t)}Fn(e,t){return Bl(e).put(xf(this.serializer,t))}Bn(e,t){let l=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,l=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,l=!0),l}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const l=kl(t),d=IDBKeyRange.bound([l,Number.NEGATIVE_INFINITY],[l,Number.POSITIVE_INFINITY]);let m=null;return Bl(e).X({range:d,index:"queryTargetsIndex"},(w,O,G)=>{const Q=rd(O);Nl(t,Q.target)&&(m=Q,G.done())}).next(()=>m)}addMatchingKeys(e,t,l){const d=[],m=su(e);return t.forEach(w=>{const O=Ci(w.path);d.push(m.put({targetId:l,path:O})),d.push(this.referenceDelegate.addReference(e,l,w))}),_t.waitFor(d)}removeMatchingKeys(e,t,l){const d=su(e);return _t.forEach(t,m=>{const w=Ci(m.path);return _t.waitFor([d.delete([l,w]),this.referenceDelegate.removeReference(e,l,m)])})}removeMatchingKeysForTargetId(e,t){const l=su(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return l.delete(d)}getMatchingKeysForTargetId(e,t){const l=IDBKeyRange.bound([t],[t+1],!1,!0),d=su(e);let m=ti();return d.X({range:l,Y:!0},(w,O,G)=>{const Q=xi(w[1]),ce=new tn(Q);m=m.add(ce)}).next(()=>m)}containsKey(e,t){const l=Ci(t.path),d=IDBKeyRange.bound([l],[Cc(l)],!1,!0);let m=0;return su(e).X({index:"documentTargetsIndex",Y:!0,range:d},([w,O],G,Q)=>{0!==w&&(m++,Q.done())}).next(()=>m>0)}le(e,t){return Bl(e).get(t).next(l=>l?rd(l):null)}}function Bl(i){return Ns(i,"targets")}function lv(i){return Ns(i,"targetGlobal")}function su(i){return Ns(i,"targetDocuments")}function Up([i,e],[t,l]){const d=vr(i,t);return 0===d?vr(e,l):d}class P0{constructor(e){this.Ln=e,this.buffer=new zi(Up),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const l=this.buffer.last();Up(t,l)<0&&(this.buffer=this.buffer.delete(l).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kf{constructor(e,t,l){this.garbageCollector=e,this.asyncQueue=t,this.localStore=l,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;sn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Oe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(l){b(l)?sn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield ka(l)}yield t.Qn(3e5)}))}}class cv{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(l=>Math.floor(t/100*l))}nthSequenceNumber(e,t){if(0===t)return _t.resolve(pn.ct);const l=new P0(t);return this.jn.forEachTarget(e,d=>l.Kn(d.sequenceNumber)).next(()=>this.jn.Wn(e,d=>l.Kn(d))).next(()=>l.maxValue)}removeTargets(e,t,l){return this.jn.removeTargets(e,t,l)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector","Garbage collection skipped; disabled"),_t.resolve(ov)):this.getCacheSize(e).next(l=>l<this.params.cacheSizeCollectionThreshold?(sn("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ov):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let l,d,m,w,O,G,Q;const ce=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ue=>(Ue>this.params.maximumSequenceNumbersToCollect?(sn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ue}`),d=this.params.maximumSequenceNumbersToCollect):d=Ue,w=Date.now(),this.nthSequenceNumber(e,d))).next(Ue=>(l=Ue,O=Date.now(),this.removeTargets(e,l,t))).next(Ue=>(m=Ue,G=Date.now(),this.removeOrphanedDocuments(e,l))).next(Ue=>(Q=Date.now(),_a()<=Se.in.DEBUG&&sn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${w-ce}ms\n\tDetermined least recently used ${d} in `+(O-w)+`ms\n\tRemoved ${m} targets in `+(G-O)+`ms\n\tRemoved ${Ue} documents in `+(Q-G)+`ms\nTotal Duration: ${Q-ce}ms`),_t.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:m,documentsRemoved:Ue})))}}class Hd{constructor(e,t){this.db=e,this.garbageCollector=function Wm(i,e){return new cv(i,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(l=>t.next(d=>l+d))}Jn(e){let t=0;return this.Wn(e,l=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(l,d)=>t(d))}addReference(e,t,l){return jp(e,l)}removeReference(e,t,l){return jp(e,l)}removeTargets(e,t,l){return this.db.getTargetCache().removeTargets(e,t,l)}markPotentiallyOrphaned(e,t){return jp(e,t)}Xn(e,t){return function(l,d){let m=!1;return Gm(l).Z(w=>ni(l,w,d).next(O=>(O&&(m=!0),_t.resolve(!O)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const l=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let m=0;return this.Yn(e,(w,O)=>{if(O<=t){const G=this.Xn(e,w).next(Q=>{if(!Q)return m++,l.getEntry(e,w).next(()=>(l.removeEntry(w,rr.min()),su(e).delete([0,Ci(w.path)])))});d.push(G)}}).next(()=>_t.waitFor(d)).next(()=>l.apply(e)).next(()=>m)}removeTarget(e,t){const l=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,l)}updateLimboDocument(e,t){return jp(e,t)}Yn(e,t){const l=su(e);let d,m=pn.ct;return l.X({index:"documentTargetsIndex"},([w,O],{path:G,sequenceNumber:Q})=>{0===w?(m!==pn.ct&&t(new tn(xi(d)),m),m=Q,d=G):m=pn.ct}).next(()=>{m!==pn.ct&&t(new tn(xi(d)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function jp(i,e){return su(i).put((l=i.currentSequenceNumber,{targetId:0,path:Ci(e.path),sequenceNumber:l}));var l}class Nh{constructor(){this.changes=new La(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ji.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const l=this.changes.get(t);return void 0!==l?_t.resolve(l):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hp{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,l){return zd(e).put(l)}removeEntry(e,t,l){return zd(e).delete(function(d,m){const w=d.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],Pp(m),w[w.length-1]]}(t,l))}updateMetadata(e,t){return this.getMetadata(e).next(l=>(l.byteSize+=t,this.Zn(e,l)))}getEntry(e,t){let l=Ji.newInvalidDocument(t);return zd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(zp(t))},(d,m)=>{l=this.ts(t,m)}).next(()=>l)}es(e,t){let l={size:0,document:Ji.newInvalidDocument(t)};return zd(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(zp(t))},(d,m)=>{l={document:this.ts(t,m),size:Bp(m)}}).next(()=>l)}getEntries(e,t){let l=ea();return this.ns(e,t,(d,m)=>{const w=this.ts(d,m);l=l.insert(d,w)}).next(()=>l)}ss(e,t){let l=ea(),d=new hi(tn.comparator);return this.ns(e,t,(m,w)=>{const O=this.ts(m,w);l=l.insert(m,O),d=d.insert(m,Bp(w))}).next(()=>({documents:l,rs:d}))}ns(e,t,l){if(t.isEmpty())return _t.resolve();let d=new zi(N0);t.forEach(G=>d=d.add(G));const m=IDBKeyRange.bound(zp(d.first()),zp(d.last())),w=d.getIterator();let O=w.getNext();return zd(e).X({index:"documentKeyIndex",range:m},(G,Q,ce)=>{const Ue=tn.fromSegments([...Q.prefixPath,Q.collectionGroup,Q.documentId]);for(;O&&N0(O,Ue)<0;)l(O,null),O=w.getNext();O&&O.isEqual(Ue)&&(l(O,Q),O=w.hasNext()?w.getNext():null),O?ce.G(zp(O)):ce.done()}).next(()=>{for(;O;)l(O,null),O=w.hasNext()?w.getNext():null})}getDocumentsMatchingQuery(e,t,l,d){const m=t.path,w=[m.popLast().toArray(),m.lastSegment(),Pp(l.readTime),l.documentKey.path.isEmpty()?"":l.documentKey.path.lastSegment()],O=[m.popLast().toArray(),m.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zd(e).j(IDBKeyRange.bound(w,O,!0)).next(G=>{let Q=ea();for(const ce of G){const Ue=this.ts(tn.fromSegments(ce.prefixPath.concat(ce.collectionGroup,ce.documentId)),ce);Ue.isFoundDocument()&&(yl(t,Ue)||d.has(Ue.key))&&(Q=Q.insert(Ue.key,Ue))}return Q})}getAllFromCollectionGroup(e,t,l,d){let m=ea();const w=qm(t,l),O=qm(t,Ho.max());return zd(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(w,O,!0)},(G,Q,ce)=>{const Ue=this.ts(tn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);m=m.insert(Ue.key,Ue),m.size===d&&ce.done()}).next(()=>m)}newChangeBuffer(e){return new KE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return k0(e).get("remoteDocumentGlobalKey").next(t=>(Jn(!!t),t))}Zn(e,t){return k0(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const l=function Bd(i,e){let t;if(e.document)t=Nc(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const l=tn.fromSegments(e.noDocument.path),d=xu(e.noDocument.readTime);t=Ji.newNoDocument(l,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return en();{const l=tn.fromSegments(e.unknownDocument.path),d=xu(e.unknownDocument.version);t=Ji.newUnknownDocument(l,d)}}return e.readTime&&t.setReadTime(function(l){const d=new Pi(l[0],l[1]);return rr.fromTimestamp(d)}(e.readTime)),t}(this.serializer,t);if(!l.isNoDocument()||!l.version.isEqual(rr.min()))return l}return Ji.newInvalidDocument(e)}}function Km(i){return new Hp(i)}class KE extends Nh{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new La(l=>l.toString(),(l,d)=>l.isEqual(d))}applyChanges(e){const t=[];let l=0,d=new zi((m,w)=>vr(m.canonicalString(),w.canonicalString()));return this.changes.forEach((m,w)=>{const O=this.us.get(m);if(t.push(this.os.removeEntry(e,m,O.readTime)),w.isValidDocument()){const G=h_(this.os.serializer,w);d=d.add(m.path.popLast());const Q=Bp(G);l+=Q-O.size,t.push(this.os.addEntry(e,m,G))}else if(l-=O.size,this.trackRemovals){const G=h_(this.os.serializer,w.convertToNoDocument(rr.min()));t.push(this.os.addEntry(e,m,G))}}),d.forEach(m=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.os.updateMetadata(e,l)),_t.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(l=>(this.us.set(t,{size:l.size,readTime:l.document.readTime}),l.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:l,rs:d})=>(d.forEach((m,w)=>{this.us.set(m,{size:w,readTime:l.get(m).readTime})}),l))}}function k0(i){return Ns(i,"remoteDocumentGlobal")}function zd(i){return Ns(i,"remoteDocumentsV14")}function zp(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qm(i,e){const t=e.documentKey.path.toArray();return[i,Pp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function N0(i,e){const t=i.path.toArray(),l=e.path.toArray();let d=0;for(let m=0;m<t.length-2&&m<l.length-2;++m)if(d=vr(t[m],l[m]),d)return d;return d=vr(t.length,l.length),d||(d=vr(t[t.length-2],l[l.length-2]),d||vr(t[t.length-1],l[l.length-1]))}class uv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class $d{constructor(e,t,l,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=l,this.indexManager=d}getDocument(e,t){let l=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(l=d,this.remoteDocumentCache.getEntry(e,t))).next(d=>(null!==l&&il(l.mutation,d,so.empty(),Pi.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(l=>this.getLocalViewOfDocuments(e,l,ti()).next(()=>l))}getLocalViewOfDocuments(e,t,l=ti()){const d=rl();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,l).next(m=>{let w=Rc();return m.forEach((O,G)=>{w=w.insert(O,G.overlayedDocument)}),w}))}getOverlayedDocuments(e,t){const l=rl();return this.populateOverlays(e,l,t).next(()=>this.computeViews(e,t,l,ti()))}populateOverlays(e,t,l){const d=[];return l.forEach(m=>{t.has(m)||d.push(m)}),this.documentOverlayCache.getOverlays(e,d).next(m=>{m.forEach((w,O)=>{t.set(w,O)})})}computeViews(e,t,l,d){let m=ea();const w=Oc(),O=Oc();return t.forEach((G,Q)=>{const ce=l.get(Q.key);d.has(Q.key)&&(void 0===ce||ce.mutation instanceof na)?m=m.insert(Q.key,Q):void 0!==ce?(w.set(Q.key,ce.mutation.getFieldMask()),il(ce.mutation,Q,ce.mutation.getFieldMask(),Pi.now())):w.set(Q.key,so.empty())}),this.recalculateAndSaveOverlays(e,m).next(G=>(G.forEach((Q,ce)=>w.set(Q,ce)),t.forEach((Q,ce)=>{var Ue;return O.set(Q,new uv(ce,null!==(Ue=w.get(Q))&&void 0!==Ue?Ue:null))}),O))}recalculateAndSaveOverlays(e,t){const l=Oc();let d=new hi((w,O)=>w-O),m=ti();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(w=>{for(const O of w)O.keys().forEach(G=>{const Q=t.get(G);if(null===Q)return;let ce=l.get(G)||so.empty();ce=O.applyToLocalView(Q,ce),l.set(G,ce);const Ue=(d.get(O.batchId)||ti()).add(G);d=d.insert(O.batchId,Ue)})}).next(()=>{const w=[],O=d.getReverseIterator();for(;O.hasNext();){const G=O.getNext(),Q=G.key,ce=G.value,Ue=If();ce.forEach(bt=>{if(!m.has(bt)){const jt=Iu(t.get(bt),l.get(bt));null!==jt&&Ue.set(bt,jt),m=m.add(bt)}}),w.push(this.documentOverlayCache.saveOverlays(e,Q,Ue))}return _t.waitFor(w)}).next(()=>l)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(l=>this.recalculateAndSaveOverlays(e,l))}getDocumentsMatchingQuery(e,t,l){return tn.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):vu(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,l):this.getDocumentsMatchingCollectionQuery(e,t,l);var d}getNextDocuments(e,t,l,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,l,d).next(m=>{const w=d-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,l.largestBatchId,d-m.size):_t.resolve(rl());let O=-1,G=m;return w.next(Q=>_t.forEach(Q,(ce,Ue)=>(O<Ue.largestBatchId&&(O=Ue.largestBatchId),m.get(ce)?_t.resolve():this.remoteDocumentCache.getEntry(e,ce).next(bt=>{G=G.insert(ce,bt)}))).next(()=>this.populateOverlays(e,Q,m)).next(()=>this.computeViews(e,G,Q,ti())).next(ce=>({batchId:O,changes:vp(ce)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tn(t)).next(l=>{let d=Rc();return l.isFoundDocument()&&(d=d.insert(l.key,l)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,l){const d=t.collectionGroup;let m=Rc();return this.indexManager.getCollectionParents(e,d).next(w=>_t.forEach(w,O=>{const G=(Q=t,ce=O.child(d),new Ac(ce,null,Q.explicitOrderBy.slice(),Q.filters.slice(),Q.limit,Q.limitType,Q.startAt,Q.endAt));var Q,ce;return this.getDocumentsMatchingCollectionQuery(e,G,l).next(Q=>{Q.forEach((ce,Ue)=>{m=m.insert(ce,Ue)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,l){let d;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,l.largestBatchId).next(m=>(d=m,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,l,d))).next(m=>{d.forEach((O,G)=>{const Q=G.getKey();null===m.get(Q)&&(m=m.insert(Q,Ji.newInvalidDocument(Q)))});let w=Rc();return m.forEach((O,G)=>{const Q=d.get(O);void 0!==Q&&il(Q.mutation,G,so.empty(),Pi.now()),yl(t,G)&&(w=w.insert(O,G))}),w})}}class E_{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return _t.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var l;return this.cs.set(t.id,{id:(l=t).id,version:l.version,createTime:Ks(l.createTime)}),_t.resolve()}getNamedQuery(e,t){return _t.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(l=t).name,query:Mf(l.bundledQuery),readTime:Ks(l.readTime)}),_t.resolve();var l}}class w_{constructor(){this.overlays=new hi(tn.comparator),this.ls=new Map}getOverlay(e,t){return _t.resolve(this.overlays.get(t))}getOverlays(e,t){const l=rl();return _t.forEach(t,d=>this.getOverlay(e,d).next(m=>{null!==m&&l.set(d,m)})).next(()=>l)}saveOverlays(e,t,l){return l.forEach((d,m)=>{this.we(e,t,m)}),_t.resolve()}removeOverlaysForBatchId(e,t,l){const d=this.ls.get(l);return void 0!==d&&(d.forEach(m=>this.overlays=this.overlays.remove(m)),this.ls.delete(l)),_t.resolve()}getOverlaysForCollection(e,t,l){const d=rl(),m=t.length+1,w=new tn(t.child("")),O=this.overlays.getIteratorFrom(w);for(;O.hasNext();){const G=O.getNext().value,Q=G.getKey();if(!t.isPrefixOf(Q.path))break;Q.path.length===m&&G.largestBatchId>l&&d.set(G.getKey(),G)}return _t.resolve(d)}getOverlaysForCollectionGroup(e,t,l,d){let m=new hi((Q,ce)=>Q-ce);const w=this.overlays.getIterator();for(;w.hasNext();){const Q=w.getNext().value;if(Q.getKey().getCollectionGroup()===t&&Q.largestBatchId>l){let ce=m.get(Q.largestBatchId);null===ce&&(ce=rl(),m=m.insert(Q.largestBatchId,ce)),ce.set(Q.getKey(),Q)}}const O=rl(),G=m.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((Q,ce)=>O.set(Q,ce)),!(O.size()>=d)););return _t.resolve(O)}we(e,t,l){const d=this.overlays.get(l.key);if(null!==d){const w=this.ls.get(d.largestBatchId).delete(l.key);this.ls.set(d.largestBatchId,w)}this.overlays=this.overlays.insert(l.key,new y(t,l));let m=this.ls.get(t);void 0===m&&(m=ti(),this.ls.set(t,m)),this.ls.set(t,m.add(l.key))}}class ia{constructor(){this.fs=new zi(So.ds),this.ws=new zi(So._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const l=new So(e,t);this.fs=this.fs.add(l),this.ws=this.ws.add(l)}gs(e,t){e.forEach(l=>this.addReference(l,t))}removeReference(e,t){this.ys(new So(e,t))}ps(e,t){e.forEach(l=>this.removeReference(l,t))}Is(e){const t=new tn(new Gr([])),l=new So(t,e),d=new So(t,e+1),m=[];return this.ws.forEachInRange([l,d],w=>{this.ys(w),m.push(w.key)}),m}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new tn(new Gr([])),l=new So(t,e),d=new So(t,e+1);let m=ti();return this.ws.forEachInRange([l,d],w=>{m=m.add(w.key)}),m}containsKey(e){const t=new So(e,0),l=this.fs.firstAfterOrEqual(t);return null!==l&&e.isEqual(l.key)}}class So{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return tn.comparator(e.key,t.key)||vr(e.As,t.As)}static _s(e,t){return vr(e.As,t.As)||tn.comparator(e.key,t.key)}}class ud{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new zi(So.ds)}checkEmpty(e){return _t.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,l,d){const m=this.vs;this.vs++;const w=new C(m,t,l,d);this.mutationQueue.push(w);for(const O of d)this.Rs=this.Rs.add(new So(O.key,m)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return _t.resolve(w)}lookupMutationBatch(e,t){return _t.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.bs(t+1),m=d<0?0:d;return _t.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return _t.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return _t.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const l=new So(t,0),d=new So(t,Number.POSITIVE_INFINITY),m=[];return this.Rs.forEachInRange([l,d],w=>{const O=this.Ps(w.As);m.push(O)}),_t.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let l=new zi(vr);return t.forEach(d=>{const m=new So(d,0),w=new So(d,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([m,w],O=>{l=l.add(O.As)})}),_t.resolve(this.Vs(l))}getAllMutationBatchesAffectingQuery(e,t){const l=t.path,d=l.length+1;let m=l;tn.isDocumentKey(m)||(m=m.child(""));const w=new So(new tn(m),0);let O=new zi(vr);return this.Rs.forEachWhile(G=>{const Q=G.key.path;return!!l.isPrefixOf(Q)&&(Q.length===d&&(O=O.add(G.As)),!0)},w),_t.resolve(this.Vs(O))}Vs(e){const t=[];return e.forEach(l=>{const d=this.Ps(l);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){Jn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let l=this.Rs;return _t.forEach(t.mutations,d=>{const m=new So(d.key,t.batchId);return l=l.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Rs=l})}Cn(e){}containsKey(e,t){const l=new So(t,0),d=this.Rs.firstAfterOrEqual(l);return _t.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return _t.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ym{constructor(e){this.Ds=e,this.docs=new hi(tn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const l=t.key,d=this.docs.get(l),m=d?d.size:0,w=this.Ds(t);return this.docs=this.docs.insert(l,{document:t.mutableCopy(),size:w}),this.size+=w-m,this.indexManager.addToCollectionParentIndex(e,l.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const l=this.docs.get(t);return _t.resolve(l?l.document.mutableCopy():Ji.newInvalidDocument(t))}getEntries(e,t){let l=ea();return t.forEach(d=>{const m=this.docs.get(d);l=l.insert(d,m?m.document.mutableCopy():Ji.newInvalidDocument(d))}),_t.resolve(l)}getDocumentsMatchingQuery(e,t,l,d){let m=ea();const w=t.path,O=new tn(w.child("")),G=this.docs.getIteratorFrom(O);for(;G.hasNext();){const{key:Q,value:{document:ce}}=G.getNext();if(!w.isPrefixOf(Q.path))break;Q.path.length>w.length+1||Is(hh(ce),l)<=0||(d.has(ce.key)||yl(t,ce))&&(m=m.insert(ce.key,ce.mutableCopy()))}return _t.resolve(m)}getAllFromCollectionGroup(e,t,l,d){en()}Cs(e,t){return _t.forEach(this.docs,l=>t(l))}newChangeBuffer(e){return new Vc(this)}getSize(e){return _t.resolve(this.size)}}class Vc extends Nh{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((l,d)=>{d.isValidDocument()?t.push(this.os.addEntry(e,d)):this.os.removeEntry(l)}),_t.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Fh{constructor(e){this.persistence=e,this.xs=new La(t=>kl(t),Nl),this.lastRemoteSnapshotVersion=rr.min(),this.highestTargetId=0,this.Ns=0,this.ks=new ia,this.targetCount=0,this.Ms=kh.kn()}forEachTarget(e,t){return this.xs.forEach((l,d)=>t(d)),_t.resolve()}getLastRemoteSnapshotVersion(e){return _t.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return _t.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),_t.resolve(this.highestTargetId)}setTargetsMetadata(e,t,l){return l&&(this.lastRemoteSnapshotVersion=l),t>this.Ns&&(this.Ns=t),_t.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new kh(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,_t.resolve()}updateTargetData(e,t){return this.Fn(t),_t.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,_t.resolve()}removeTargets(e,t,l){let d=0;const m=[];return this.xs.forEach((w,O)=>{O.sequenceNumber<=t&&null===l.get(O.targetId)&&(this.xs.delete(w),m.push(this.removeMatchingKeysForTargetId(e,O.targetId)),d++)}),_t.waitFor(m).next(()=>d)}getTargetCount(e){return _t.resolve(this.targetCount)}getTargetData(e,t){const l=this.xs.get(t)||null;return _t.resolve(l)}addMatchingKeys(e,t,l){return this.ks.gs(t,l),_t.resolve()}removeMatchingKeys(e,t,l){this.ks.ps(t,l);const d=this.persistence.referenceDelegate,m=[];return d&&t.forEach(w=>{m.push(d.markPotentiallyOrphaned(e,w))}),_t.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),_t.resolve()}getMatchingKeysForTargetId(e,t){const l=this.ks.Es(t);return _t.resolve(l)}containsKey(e,t){return _t.resolve(this.ks.containsKey(t))}}class Zm{constructor(e,t){this.$s={},this.overlays={},this.Os=new pn(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Fh(this),this.indexManager=new v_,this.remoteDocumentCache=new Ym(l=>this.referenceDelegate.Ls(l)),this.serializer=new Op(t),this.qs=new E_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new w_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let l=this.$s[e.toKey()];return l||(l=new ud(t,this.referenceDelegate),this.$s[e.toKey()]=l),l}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,l){sn("MemoryPersistence","Starting transaction:",e);const d=new dv(this.Os.next());return this.referenceDelegate.Us(),l(d).next(m=>this.referenceDelegate.Ks(d).next(()=>m)).toPromise().then(m=>(d.raiseOnCommittedEvent(),m))}Gs(e,t){return _t.or(Object.values(this.$s).map(l=>()=>l.containsKey(e,t)))}}class dv extends xl{constructor(e){super(),this.currentSequenceNumber=e}}class ou{constructor(e){this.persistence=e,this.Qs=new ia,this.js=null}static zs(e){return new ou(e)}get Ws(){if(this.js)return this.js;throw en()}addReference(e,t,l){return this.Qs.addReference(l,t),this.Ws.delete(l.toString()),_t.resolve()}removeReference(e,t,l){return this.Qs.removeReference(l,t),this.Ws.add(l.toString()),_t.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),_t.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(d=>this.Ws.add(d.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(m=>this.Ws.add(m.toString()))}).next(()=>l.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _t.forEach(this.Ws,l=>{const d=tn.fromPath(l);return this.Hs(e,d).next(m=>{m||t.removeEntry(d,rr.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(l=>{l?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return _t.or([()=>_t.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class hv{constructor(e){this.serializer=e}O(e,t,l,d){const m=new Yc("createOrUpgrade",t);var O;l<1&&d>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",el,{unique:!0}),O.createObjectStore("documentMutations"),C_(e),function(O){O.createObjectStore("remoteDocuments")}(e));let w=_t.resolve();return l<3&&d>=3&&(0!==l&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),C_(e)),w=w.next(()=>function(O){const G=O.store("targetGlobal"),Q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:rr.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",Q)}(m))),l<4&&d>=4&&(0!==l&&(w=w.next(()=>function(O,G){return G.store("mutations").j().next(Q=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",el,{unique:!0});const ce=G.store("mutations"),Ue=Q.map(bt=>ce.put(bt));return _t.waitFor(Ue)})}(e,m))),w=w.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),l<5&&d>=5&&(w=w.next(()=>this.Ys(m))),l<6&&d>=6&&(w=w.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(m)))),l<7&&d>=7&&(w=w.next(()=>this.Zs(m))),l<8&&d>=8&&(w=w.next(()=>this.ti(e,m))),l<9&&d>=9&&(w=w.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),l<10&&d>=10&&(w=w.next(()=>this.ei(m))),l<11&&d>=11&&(w=w.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),l<12&&d>=12&&(w=w.next(()=>{!function(O){const G=O.createObjectStore("documentOverlays",{keyPath:gf});G.createIndex("collectionPathOverlayIndex",gh,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",_h,{unique:!1})}(e)})),l<13&&d>=13&&(w=w.next(()=>function(O){const G=O.createObjectStore("remoteDocumentsV14",{keyPath:mo});G.createIndex("documentKeyIndex",fh),G.createIndex("collectionGroupIndex",mu)}(e)).next(()=>this.ni(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),l<14&&d>=14&&(w=w.next(()=>this.si(e,m))),l<15&&d>=15&&(w=w.next(()=>function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:mh}).createIndex("sequenceNumberIndex",Fa,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Ic}).createIndex("documentKeyIndex",Dd,{unique:!1})}(e))),w}Xs(e){let t=0;return e.store("remoteDocuments").X((l,d)=>{t+=Bp(d)}).next(()=>{const l={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",l)})}Ys(e){const t=e.store("mutationQueues"),l=e.store("mutations");return t.j().next(d=>_t.forEach(d,m=>{const w=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return l.j("userMutationsIndex",w).next(O=>_t.forEach(O,G=>{Jn(G.userId===m.userId);const Q=lc(this.serializer,G);return av(e,m.userId,Q).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),l=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const m=[];return l.X((w,O)=>{const G=new Gr(w),Q=[0,Ci(G)];m.push(t.get(Q).next(ce=>ce?_t.resolve():t.put({targetId:0,path:Ci(G),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>_t.waitFor(m))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:ph});const l=t.store("collectionParents"),d=new Oh,m=w=>{if(d.add(w)){const O=w.lastSegment(),G=w.popLast();return l.put({collectionId:O,parent:Ci(G)})}};return t.store("remoteDocuments").X({Y:!0},(w,O)=>{const G=new Gr(w);return m(G.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([w,O,G],Q)=>{const ce=xi(O);return m(ce.popLast())}))}ei(e){const t=e.store("targets");return t.X((l,d)=>{const m=rd(d),w=xf(this.serializer,m);return t.put(w)})}ni(e,t){const l=t.store("remoteDocuments"),d=[];return l.X((m,w)=>{const O=t.store("remoteDocumentsV14"),G=(Q=w,Q.document?new tn(Gr.fromString(Q.document.name).popFirst(5)):Q.noDocument?tn.fromSegments(Q.noDocument.path):Q.unknownDocument?tn.fromSegments(Q.unknownDocument.path):en()).path.toArray();var Q;const ce={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:w.readTime||[0,0],unknownDocument:w.unknownDocument,noDocument:w.noDocument,document:w.document,hasCommittedMutations:!!w.hasCommittedMutations};d.push(O.put(ce))}).next(()=>_t.waitFor(d))}si(e,t){const l=t.store("mutations"),d=Km(this.serializer),m=new Zm(ou.zs,this.serializer.fe);return l.j().next(w=>{const O=new Map;return w.forEach(G=>{var Q;let ce=null!==(Q=O.get(G.userId))&&void 0!==Q?Q:ti();lc(this.serializer,G).keys().forEach(Ue=>ce=ce.add(Ue)),O.set(G.userId,ce)}),_t.forEach(O,(G,Q)=>{const ce=new ns(Q),Ue=Of.de(this.serializer,ce),bt=m.getIndexManager(ce),jt=$m.de(ce,this.serializer,bt,m.referenceDelegate);return new $d(d,jt,Ue,bt).recalculateAndSaveOverlaysForDocumentKeys(new ec(t,pn.ct),G).next()})})}}function C_(i){i.createObjectStore("targetDocuments",{keyPath:Zc}).createIndex("documentTargetsIndex",gp,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",go,{unique:!0}),i.createObjectStore("targetGlobal")}const Lh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fv{constructor(e,t,l,d,m,w,O,G,Q,ce,Ue=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=l,this.ii=m,this.window=w,this.document=O,this.ri=Q,this.oi=ce,this.ui=Ue,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=bt=>Promise.resolve(),!fv.D())throw new qt(Rt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Hd(this,d),this.di=t+"main",this.serializer=new Op(G),this.wi=new Ws(this.di,this.ui,new hv(this.serializer)),this.Bs=new Pf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Km(this.serializer),this.qs=new Um,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ce&&Xi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qt(Rt.FAILED_PRECONDITION,Lh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new pn(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var l=(0,Oe.Z)(function*(d){if(t.started)return e(d)});return function(d){return l.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Oe.Z)(function*(l){null===l.newVersion&&(yield e())});return function(l){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Oe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Qm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(b(e))return sn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return sn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return Vh(e).get("owner").next(t=>_t.resolve(this.Ri(t)))}Pi(e){return Qm(e).delete(this.clientId)}bi(){var e=this;return(0,Oe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",l=>{const d=Ns(l,"clientMetadata");return d.j().next(m=>{const w=e.Si(m,18e5),O=m.filter(G=>-1===w.indexOf(G));return _t.forEach(O,G=>d.delete(G.clientId)).next(()=>O)})}).catch(()=>[]);if(e._i)for(const l of t)e._i.removeItem(e.Di(l.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?_t.resolve(!0):Vh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new qt(Rt.FAILED_PRECONDITION,Lh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qm(e).j().next(l=>void 0===this.Si(l,5e3).find(d=>!(this.clientId===d.clientId||!(!this.networkEnabled&&d.networkEnabled||!this.inForeground&&d.inForeground&&this.networkEnabled===d.networkEnabled))))}).next(t=>(this.isPrimary!==t&&sn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Oe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const l=new ec(t,pn.ct);return e.Ai(l).next(()=>e.Pi(l))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(l=>this.Vi(l.updateTimeMs,t)&&!this.Ci(l.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Qm(e).j().next(t=>this.Si(t,18e5).map(l=>l.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return $m.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Lc(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Of.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,l){sn("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",m=15===(w=this.ui)?ei:14===w?Dc:13===w?ju:12===w?_p:11===w?_f:void en();var w;let O;return this.wi.runTransaction(e,d,m,G=>(O=new ec(G,this.Os?this.Os.next():pn.ct),"readwrite-primary"===t?this.Ti(O).next(Q=>!!Q||this.Ei(O)).next(Q=>{if(!Q)throw Xi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new qt(Rt.FAILED_PRECONDITION,Jl);return l(O)}).next(Q=>this.vi(O).next(()=>Q)):this.Oi(O).next(()=>l(O)))).then(G=>(O.raiseOnCommittedEvent(),G))}Oi(e){return Vh(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new qt(Rt.FAILED_PRECONDITION,Lh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vh(e).put("owner",t)}static D(){return Ws.D()}Ai(e){const t=Vh(e);return t.get("owner").next(l=>this.Ri(l)?(sn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):_t.resolve())}Vi(e,t){const l=Date.now();return!(e<l-t||e>l&&(Xi(`Detected an update time that is in the future: ${e} > ${l}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ze.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const l=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return sn("IndexedDbPersistence",`Client '${e}' ${l?"is":"is not"} zombied in LocalStorage`),l}catch(l){return Xi("IndexedDbPersistence","Failed to get zombied client id.",l),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Xi("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vh(i){return Ns(i,"owner")}function Qm(i){return Ns(i,"clientMetadata")}function pv(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Bc{constructor(e,t,l,d){this.targetId=e,this.fromCache=t,this.Fi=l,this.Bi=d}static Li(e,t){let l=ti(),d=ti();for(const m of t.docChanges)switch(m.type){case 0:l=l.add(m.doc.key);break;case 1:d=d.add(m.doc.key)}return new Bc(e,t.fromCache,l,d)}}class Nf{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,l,d){return this.Ki(e,t).next(m=>m||this.Gi(e,t,d,l)).next(m=>m||this.Qi(e,t))}Ki(e,t){if(xd(t))return _t.resolve(null);let l=ai(t);return this.indexManager.getIndexType(e,l).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=_l(t,null,"F"),l=ai(t)),this.indexManager.getDocumentsMatchingTarget(e,l).next(m=>{const w=ti(...m);return this.Ui.getDocuments(e,w).next(O=>this.indexManager.getMinOffset(e,l).next(G=>{const Q=this.ji(t,O);return this.zi(t,Q,w,G.readTime)?this.Ki(e,_l(t,null,"F")):this.Wi(e,Q,t,G)}))})))}Gi(e,t,l,d){return xd(t)||d.isEqual(rr.min())?this.Qi(e,t):this.Ui.getDocuments(e,l).next(m=>{const w=this.ji(t,m);return this.zi(t,w,l,d)?this.Qi(e,t):(_a()<=Se.in.DEBUG&&sn("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),Mc(t)),this.Wi(e,w,t,ml(d,-1)))})}ji(e,t){let l=new zi(vl(e));return t.forEach((d,m)=>{yl(e,m)&&(l=l.add(m))}),l}zi(e,t,l,d){if(null===e.limit)return!1;if(l.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(d)>0)}Qi(e,t){return _a()<=Se.in.DEBUG&&sn("QueryEngine","Using full collection scan to execute query:",Mc(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ho.min())}Wi(e,t,l,d){return this.Ui.getDocumentsMatchingQuery(e,l,d).next(m=>(t.forEach(w=>{m=m.insert(w.key,w)}),m))}}class $p{constructor(e,t,l,d){this.persistence=e,this.Hi=t,this.serializer=d,this.Ji=new hi(vr),this.Yi=new La(m=>kl(m),Nl),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(l)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $d(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Gp(i,e,t,l){return new $p(i,e,t,l)}function I_(i,e){return Xm.apply(this,arguments)}function Xm(){return Xm=(0,Oe.Z)(function*(i,e){const t=Sn(i);return yield t.persistence.runTransaction("Handle user change","readonly",l=>{let d;return t.mutationQueue.getAllMutationBatches(l).next(m=>(d=m,t.tr(e),t.mutationQueue.getAllMutationBatches(l))).next(m=>{const w=[],O=[];let G=ti();for(const Q of d){w.push(Q.batchId);for(const ce of Q.mutations)G=G.add(ce.key)}for(const Q of m){O.push(Q.batchId);for(const ce of Q.mutations)G=G.add(ce.key)}return t.localDocuments.getDocuments(l,G).next(Q=>({er:Q,removedBatchIds:w,addedBatchIds:O}))})})}),Xm.apply(this,arguments)}function Gd(i){const e=Sn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function ol(i,e,t){let l=ti(),d=ti();return t.forEach(m=>l=l.add(m)),e.getEntries(i,l).next(m=>{let w=ea();return t.forEach((O,G)=>{const Q=m.get(O);G.isFoundDocument()!==Q.isFoundDocument()&&(d=d.add(O)),G.isNoDocument()&&G.version.isEqual(rr.min())?(e.removeEntry(O,G.readTime),w=w.insert(O,G)):!Q.isValidDocument()||G.version.compareTo(Q.version)>0||0===G.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(G),w=w.insert(O,G)):sn("LocalStore","Ignoring outdated watch update for ",O,". Current version:",Q.version," Watch version:",G.version)}),{nr:w,sr:d}})}function eg(i,e){const t=Sn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",l=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(l,e)))}function dd(i,e){const t=Sn(i);return t.persistence.runTransaction("Allocate target","readwrite",l=>{let d;return t.Bs.getTargetData(l,e).next(m=>m?(d=m,_t.resolve(d)):t.Bs.allocateTargetId(l).next(w=>(d=new Fc(e,w,"TargetPurposeListen",l.currentSequenceNumber),t.Bs.addTargetData(l,d).next(()=>d))))}).then(l=>{const d=t.Ji.get(l.targetId);return(null===d||l.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(l.targetId,l),t.Yi.set(e,l.targetId)),l})}function Bh(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,Oe.Z)(function*(i,e,t){const l=Sn(i),d=l.Ji.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield l.persistence.runTransaction("Release target",m,w=>l.persistence.referenceDelegate.removeTarget(w,d)))}catch(w){if(!b(w))throw w;sn("LocalStore",`Failed to update sequence numbers for target ${e}: ${w}`)}l.Ji=l.Ji.remove(e),l.Yi.delete(d.target)}),Kp.apply(this,arguments)}function Uh(i,e,t){const l=Sn(i);let d=rr.min(),m=ti();return l.persistence.runTransaction("Execute query","readonly",w=>function(O,G,Q){const ce=Sn(O),Ue=ce.Yi.get(Q);return void 0!==Ue?_t.resolve(ce.Ji.get(Ue)):ce.Bs.getTargetData(G,Q)}(l,w,ai(e)).next(O=>{if(O)return d=O.lastLimboFreeSnapshotVersion,l.Bs.getMatchingKeysForTargetId(w,O.targetId).next(G=>{m=G})}).next(()=>l.Hi.getDocumentsMatchingQuery(w,e,t?d:rr.min(),t?m:ti())).next(O=>(ng(l,Ih(e),O),{documents:O,ir:m})))}function tg(i,e){const t=Sn(i),l=Sn(t.Bs),d=t.Ji.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",m=>l.le(m,e).next(w=>w?w.target:null))}function D_(i,e){const t=Sn(i),l=t.Xi.get(e)||rr.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Zi.getAllFromCollectionGroup(d,e,ml(l,-1),Number.MAX_SAFE_INTEGER)).then(d=>(ng(t,e,d),d))}function ng(i,e,t){let l=i.Xi.get(e)||rr.min();t.forEach((d,m)=>{m.readTime.compareTo(l)>0&&(l=m.readTime)}),i.Xi.set(e,l)}function S_(){return S_=(0,Oe.Z)(function*(i,e,t,l){const d=Sn(i);let m=ti(),w=ea();for(const Q of t){const ce=e.rr(Q.metadata.name);Q.document&&(m=m.add(ce));const Ue=e.ur(Q);Ue.setReadTime(e.cr(Q.metadata.readTime)),w=w.insert(ce,Ue)}const O=d.Zi.newChangeBuffer({trackRemovals:!0}),G=yield dd(d,(Q=l,ai(nu(Gr.fromString(`__bundle__/docs/${Q}`)))));var Q;return d.persistence.runTransaction("Apply bundle documents","readwrite",Q=>ol(Q,O,w).next(ce=>(O.apply(Q),ce)).next(ce=>d.Bs.removeMatchingKeysForTargetId(Q,G.targetId).next(()=>d.Bs.addMatchingKeys(Q,m,G.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(Q,ce.nr,ce.sr)).next(()=>ce.nr)))}),S_.apply(this,arguments)}function mv(i,e){return T_.apply(this,arguments)}function T_(){return T_=(0,Oe.Z)(function*(i,e,t=ti()){const l=yield dd(i,ai(Mf(e.bundledQuery))),d=Sn(i);return d.persistence.runTransaction("Save named query","readwrite",m=>{const w=Ks(e.readTime);if(l.snapshotVersion.compareTo(w)>=0)return d.qs.saveNamedQuery(m,e);const O=l.withResumeToken(Fs.EMPTY_BYTE_STRING,w);return d.Ji=d.Ji.insert(O.targetId,O),d.Bs.updateTargetData(m,O).next(()=>d.Bs.removeMatchingKeysForTargetId(m,l.targetId)).next(()=>d.Bs.addMatchingKeys(m,t,l.targetId)).next(()=>d.qs.saveNamedQuery(m,e))})}),T_.apply(this,arguments)}function A_(i,e){return`firestore_clients_${i}_${e}`}function x_(i,e,t){let l=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(l+=`_${e.uid}`),l}function M_(i,e){return`firestore_targets_${i}_${e}`}class rg{constructor(e,t,l,d){this.user=e,this.batchId=t,this.state=l,this.error=d}static ar(e,t,l){const d=JSON.parse(l);let m,w="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return w&&d.error&&(w="string"==typeof d.error.message&&"string"==typeof d.error.code,w&&(m=new qt(d.error.code,d.error.message))),w?new rg(e,t,d.state,m):(Xi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${l}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ba{constructor(e,t,l){this.targetId=e,this.state=t,this.error=l}static ar(e,t){const l=JSON.parse(t);let d,m="object"==typeof l&&-1!==["not-current","current","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return m&&l.error&&(m="string"==typeof l.error.message&&"string"==typeof l.error.code,m&&(d=new qt(l.error.code,l.error.message))),m?new Ba(e,l.state,d):(Xi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ig{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const l=JSON.parse(t);let d="object"==typeof l&&l.activeTargetIds instanceof Array,m=Ku();for(let w=0;d&&w<l.activeTargetIds.length;++w)d=ar(l.activeTargetIds[w]),m=m.add(l.activeTargetIds[w]);return d?new ig(e,m):(Xi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class R_{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new R_(t.clientId,t.onlineState):(Xi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gv{constructor(){this.activeTargetIds=Ku()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qp{constructor(e,t,l,d,m){this.window=e,this.ii=t,this.persistenceKey=l,this.wr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new hi(vr),this.started=!1,this.yr=[];const w=l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.pr=A_(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new gv),this.Tr=new RegExp(`^firestore_clients_${w}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${w}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${w}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.syncEngine.$i();for(const d of t){if(d===e.wr)continue;const m=e.getItem(A_(e.persistenceKey,d));if(m){const w=ig.ar(d,m);w&&(e.gr=e.gr.insert(w.clientId,w))}}e.Pr();const l=e.storage.getItem(e.vr);if(l){const d=e.br(l);d&&e.Vr(d)}for(const d of e.yr)e.mr(d);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((l,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,l){this.Dr(e,t,l),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const l=this.storage.getItem(M_(this.persistenceKey,e));if(l){const d=Ba.ar(e,l);d&&(t=d.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(M_(this.persistenceKey,e))}updateQueryState(e,t,l){this.kr(e,t,l)}handleUserChange(e,t,l){t.forEach(d=>{this.Cr(d)}),this.currentUser=e,l.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return sn("SharedClientState","READ",e,t),t}setItem(e,t){sn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){sn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const l=e;if(l.storageArea===this.storage){if(sn("SharedClientState","EVENT",l.key,l.newValue),l.key===this.pr)return void Xi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Oe.Z)(function*(){if(t.started){if(null!==l.key)if(t.Tr.test(l.key)){if(null==l.newValue){const d=t.Or(l.key);return t.Fr(d,null)}{const d=t.Br(l.key,l.newValue);if(d)return t.Fr(d.clientId,d)}}else if(t.Er.test(l.key)){if(null!==l.newValue){const d=t.Lr(l.key,l.newValue);if(d)return t.qr(d)}}else if(t.Ar.test(l.key)){if(null!==l.newValue){const d=t.Ur(l.key,l.newValue);if(d)return t.Kr(d)}}else if(l.key===t.vr){if(null!==l.newValue){const d=t.br(l.newValue);if(d)return t.Vr(d)}}else if(l.key===t.Ir){const d=function(m){let w=pn.ct;if(null!=m)try{const O=JSON.parse(m);Jn("number"==typeof O),w=O}catch(O){Xi("SharedClientState","Failed to read sequence number from WebStorage",O)}return w}(l.newValue);d!==pn.ct&&t.sequenceNumberHandler(d)}else if(l.key===t.Rr){const d=t.Gr(l.newValue);yield Promise.all(d.map(m=>t.syncEngine.Qr(m)))}}else t.yr.push(l)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,l){const d=new rg(this.currentUser,e,t,l),m=x_(this.persistenceKey,this.currentUser,e);this.setItem(m,d.hr())}Cr(e){const t=x_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,l){const d=M_(this.persistenceKey,e),m=new Ba(e,t,l);this.setItem(d,m.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const l=this.Or(e);return ig.ar(l,t)}Lr(e,t){const l=this.Er.exec(e),d=Number(l[1]);return rg.ar(new ns(void 0!==l[2]?l[2]:null),d,t)}Ur(e,t){const l=this.Ar.exec(e),d=Number(l[1]);return Ba.ar(d,t)}br(e){return R_.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);sn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const l=t?this.gr.insert(e,t):this.gr.remove(e),d=this.Sr(this.gr),m=this.Sr(l),w=[],O=[];return m.forEach(G=>{d.has(G)||w.push(G)}),d.forEach(G=>{m.has(G)||O.push(G)}),this.syncEngine.Wr(w,O).then(()=>{this.gr=l})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Ku();return e.forEach((l,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class O_{constructor(){this.Hr=new gv,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,l){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,l){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new gv,Promise.resolve()}handleUserChange(e,t,l){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class au{Yr(e){}shutdown(){}}class _v{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){sn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){sn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ff=null;function Yp(){return null===Ff?Ff=268435456+Math.round(2147483648*Math.random()):Ff++,"0x"+Ff.toString(16)}const L0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ia="WebChannelConnection";class V0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,l,d,m){const w=Yp(),O=this.To(e,t);sn("RestConnection",`Sending RPC '${e}' ${w}:`,O,l);const G={};return this.Eo(G,d,m),this.Ao(e,O,G,l).then(Q=>(sn("RestConnection",`Received RPC '${e}' ${w}: `,Q),Q),Q=>{throw io("RestConnection",`RPC '${e}' ${w} failed with error: `,Q,"url: ",O,"request:",l),Q})}vo(e,t,l,d,m,w){return this.Io(e,t,l,d,m)}Eo(e,t,l){e["X-Goog-Api-Client"]="gl-js/ fire/"+ga,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,m)=>e[m]=d),l&&l.headers.forEach((d,m)=>e[m]=d)}To(e,t){return`${this.mo}/v1/${t}:${L0[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,l,d){const m=Yp();return new Promise((w,O)=>{const G=new Bo;G.setWithCredentials(!0),G.listenOnce(po.COMPLETE,()=>{try{switch(G.getLastErrorCode()){case Vo.NO_ERROR:const ce=G.getResponseJson();sn(Ia,`XHR for RPC '${e}' ${m} received:`,JSON.stringify(ce)),w(ce);break;case Vo.TIMEOUT:sn(Ia,`RPC '${e}' ${m} timed out`),O(new qt(Rt.DEADLINE_EXCEEDED,"Request time out"));break;case Vo.HTTP_ERROR:const Ue=G.getStatus();if(sn(Ia,`RPC '${e}' ${m} failed with status:`,Ue,"response text:",G.getResponseText()),Ue>0){let bt=G.getResponseJson();Array.isArray(bt)&&(bt=bt[0]);const jt=bt?.error;if(jt&&jt.status&&jt.message){const mn=function(Mn){const Pn=Mn.toLowerCase().replace(/_/g,"-");return Object.values(Rt).indexOf(Pn)>=0?Pn:Rt.UNKNOWN}(jt.status);O(new qt(mn,jt.message))}else O(new qt(Rt.UNKNOWN,"Server responded with status "+G.getStatus()))}else O(new qt(Rt.UNAVAILABLE,"Connection failed."));break;default:en()}}finally{sn(Ia,`RPC '${e}' ${m} completed.`)}});const Q=JSON.stringify(d);sn(Ia,`RPC '${e}' ${m} sending request:`,d),G.send(t,"POST",Q,l,15)})}Ro(e,t,l){const d=Yp(),m=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],w=di(),O=us(),G={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},Q=this.longPollingOptions.timeoutSeconds;void 0!==Q&&(G.longPollingTimeout=Math.round(1e3*Q)),this.useFetchStreams&&(G.xmlHttpFactory=new ro({})),this.Eo(G.initMessageHeaders,t,l),G.encodeInitMessageHeaders=!0;const ce=m.join("");sn(Ia,`Creating RPC '${e}' stream ${d}: ${ce}`,G);const Ue=w.createWebChannel(ce,G);let bt=!1,jt=!1;const mn=new yv({ro:Pn=>{jt?sn(Ia,`Not sending because RPC '${e}' stream ${d} is closed:`,Pn):(bt||(sn(Ia,`Opening RPC '${e}' stream ${d} transport.`),Ue.open(),bt=!0),sn(Ia,`RPC '${e}' stream ${d} sending:`,Pn),Ue.send(Pn))},oo:()=>Ue.close()}),Mn=(Pn,ri,vi)=>{Pn.listen(ri,Br=>{try{vi(Br)}catch(Vs){setTimeout(()=>{throw Vs},0)}})};return Mn(Ue,ks.EventType.OPEN,()=>{jt||sn(Ia,`RPC '${e}' stream ${d} transport opened.`)}),Mn(Ue,ks.EventType.CLOSE,()=>{jt||(jt=!0,sn(Ia,`RPC '${e}' stream ${d} transport closed`),mn.wo())}),Mn(Ue,ks.EventType.ERROR,Pn=>{jt||(jt=!0,io(Ia,`RPC '${e}' stream ${d} transport errored:`,Pn),mn.wo(new qt(Rt.UNAVAILABLE,"The operation could not be completed")))}),Mn(Ue,ks.EventType.MESSAGE,Pn=>{var ri;if(!jt){const vi=Pn.data[0];Jn(!!vi);const Vs=vi.error||(null===(ri=vi[0])||void 0===ri?void 0:ri.error);if(Vs){sn(Ia,`RPC '${e}' stream ${d} received error:`,Vs);const Ss=Vs.status;let Es=function(Vu){const zy=se[Vu];if(void 0!==zy)return rn(zy)}(Ss),qo=Vs.message;void 0===Es&&(Es=Rt.INTERNAL,qo="Unknown error status: "+Ss+" with message "+Vs.message),jt=!0,mn.wo(new qt(Es,qo)),Ue.close()}else sn(Ia,`RPC '${e}' stream ${d} received:`,vi),mn._o(vi)}}),Mn(O,ma.STAT_EVENT,Pn=>{Pn.stat===ys.PROXY?sn(Ia,`RPC '${e}' stream ${d} detected buffering proxy`):Pn.stat===ys.NOPROXY&&sn(Ia,`RPC '${e}' stream ${d} detected no buffering proxy`)}),setTimeout(()=>{mn.fo()},0),mn}}function vv(){return typeof window<"u"?window:null}function sg(){return typeof document<"u"?document:null}function Lf(i){return new Tu(i,!0)}class P_{constructor(e,t,l=1e3,d=1.5,m=6e4){this.ii=e,this.timerId=t,this.Po=l,this.bo=d,this.Vo=m,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),l=Math.max(0,Date.now()-this.Co),d=Math.max(0,t-l);d>0&&sn("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${l} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,d,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class lu{constructor(e,t,l,d,m,w,O,G){this.ii=e,this.$o=l,this.Oo=d,this.connection=m,this.authCredentialsProvider=w,this.appCheckCredentialsProvider=O,this.listener=G,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new P_(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Oe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Oe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var l=this;return(0,Oe.Z)(function*(){l.Ho(),l.Jo(),l.qo.cancel(),l.Fo++,4!==e?l.qo.reset():t&&t.code===Rt.RESOURCE_EXHAUSTED?(Xi(t.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),l.qo.xo()):t&&t.code===Rt.UNAUTHENTICATED&&3!==l.state&&(l.authCredentialsProvider.invalidateToken(),l.appCheckCredentialsProvider.invalidateToken()),null!==l.stream&&(l.Yo(),l.stream.close(),l.stream=null),l.state=e,yield l.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([l,d])=>{this.Fo===t&&this.Zo(l,d)},l=>{e(()=>{const d=new qt(Rt.UNKNOWN,"Fetching auth token failed: "+l.message);return this.tu(d)})})}Zo(e,t){const l=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{l(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(d=>{l(()=>this.tu(d))}),this.stream.onMessage(d=>{l(()=>this.onMessage(d))})}Go(){var e=this;this.state=5,this.qo.No((0,Oe.Z)(function*(){e.state=0,e.start()}))}tu(e){return sn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(sn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ev extends lu{constructor(e,t,l,d,m,w){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,l,d,w),this.serializer=m}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function xp(i,e){let t;if("targetChange"in e){const l="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:en(),d=e.targetChange.targetIds||[],m=function(G,Q){return G.useProto3Json?(Jn(void 0===Q||"string"==typeof Q),Fs.fromBase64String(Q||"")):(Jn(void 0===Q||Q instanceof Uint8Array),Fs.fromUint8Array(Q||new Uint8Array))}(i,e.targetChange.resumeToken),w=e.targetChange.cause,O=w&&function(G){const Q=void 0===G.code?Rt.UNKNOWN:rn(G.code);return new qt(Q,G.message||"")}(w);t=new Nd(l,d,m,O||null)}else if("documentChange"in e){const l=e.documentChange,d=kc(i,l.document.name),m=Ks(l.document.updateTime),w=l.document.createTime?Ks(l.document.createTime):rr.min(),O=new yi({mapValue:{fields:l.document.fields}}),G=Ji.newFoundDocument(d,m,w,O);t=new Su(l.targetIds||[],l.removedTargetIds||[],G.key,G)}else if("documentDelete"in e){const l=e.documentDelete,d=kc(i,l.document),m=l.readTime?Ks(l.readTime):rr.min(),w=Ji.newNoDocument(d,m);t=new Su([],l.removedTargetIds||[],w.key,w)}else if("documentRemove"in e){const l=e.documentRemove,d=kc(i,l.document);t=new Su([],l.removedTargetIds||[],d,null)}else{if(!("filter"in e))return en();{const l=e.filter,{count:d=0,unchangedNames:m}=l,w=new Z(d,m);t=new ac(l.targetId,w)}}var G;return t}(this.serializer,e),l=function(d){if(!("targetChange"in d))return rr.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?rr.min():m.readTime?Ks(m.readTime):rr.min()}(e);return this.listener.nu(t,l)}su(e){const t={};t.database=Ld(this.serializer),t.addTarget=function(d,m){let w;const O=m.target;if(w=Wu(O)?{documents:td(d,O)}:{query:nd(d,O)},w.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){w.resumeToken=s_(d,m.resumeToken);const G=Fd(d,m.expectedCount);null!==G&&(w.expectedCount=G)}else if(m.snapshotVersion.compareTo(rr.min())>0){w.readTime=Ah(d,m.snapshotVersion.toTimestamp());const G=Fd(d,m.expectedCount);null!==G&&(w.expectedCount=G)}return w}(this.serializer,e);const l=function c_(i,e){const t=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return en()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);l&&(t.labels=l),this.Wo(t)}iu(e){const t={};t.database=Ld(this.serializer),t.removeTarget=e,this.Wo(t)}}class wv extends lu{constructor(e,t,l,d,m,w){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,l,d,w),this.serializer=m,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Jn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function a_(i,e){return i&&i.length>0?(Jn(void 0!==e),i.map(t=>function(l,d){let m=Ks(l.updateTime?l.updateTime:d);return m.isEqual(rr.min())&&(m=Ks(d)),new Qy(m,l.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),l=Ks(e.commitTime);return this.listener.cu(l,t)}return Jn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=Ld(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(l=>Au(this.serializer,l))};this.Wo(t)}}class B0 extends class{}{constructor(e,t,l,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=l,this.serializer=d,this.lu=!1}fu(){if(this.lu)throw new qt(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,l){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.Io(e,t,l,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new qt(Rt.UNKNOWN,d.toString())})}vo(e,t,l,d){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,w])=>this.connection.vo(e,t,l,m,w,d)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Rt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new qt(Rt.UNKNOWN,m.toString())})}terminate(){this.lu=!0}}class U0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Xi(t),this.mu=!1):sn("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class j0{constructor(e,t,l,d,m){var w=this;this.localStore=e,this.datastore=t,this.asyncQueue=l,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=m,this.Pu.Yr(O=>{l.enqueueAndForget((0,Oe.Z)(function*(){var G;hd(w)&&(sn("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,Oe.Z)(function*(Q){const ce=Sn(Q);ce.vu.add(4),yield Vf(ce),ce.bu.set("Unknown"),ce.vu.delete(4),yield jh(ce)}),function(Q){return G.apply(this,arguments)})(w))}))}),this.bu=new U0(l,d)}}function jh(i){return N_.apply(this,arguments)}function N_(){return N_=(0,Oe.Z)(function*(i){if(hd(i))for(const e of i.Ru)yield e(!0)}),N_.apply(this,arguments)}function Vf(i){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,Oe.Z)(function*(i){for(const e of i.Ru)yield e(!1)}),Bf.apply(this,arguments)}function Uf(i,e){const t=Sn(i);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Zp(t)?Iv(t):$h(t).Ko()&&Cv(t,e))}function Hh(i,e){const t=Sn(i),l=$h(t);t.Au.delete(e),l.Ko()&&og(t,e),0===t.Au.size&&(l.Ko()?l.jo():hd(t)&&t.bu.set("Unknown"))}function Cv(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rr.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}$h(i).su(e)}function og(i,e){i.Vu.qt(e),$h(i).iu(e)}function Iv(i){i.Vu=new Pm({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),$h(i).start(),i.bu.gu()}function Zp(i){return hd(i)&&!$h(i).Uo()&&i.Au.size>0}function hd(i){return 0===Sn(i).vu.size}function F_(i){i.Vu=void 0}function Dv(i){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,Oe.Z)(function*(i){i.Au.forEach((e,t)=>{Cv(i,e)})}),Qp.apply(this,arguments)}function al(i,e){return vo.apply(this,arguments)}function vo(){return vo=(0,Oe.Z)(function*(i,e){F_(i),Zp(i)?(i.bu.Iu(e),Iv(i)):i.bu.set("Unknown")}),vo.apply(this,arguments)}function ll(i,e,t){return cu.apply(this,arguments)}function cu(){return cu=(0,Oe.Z)(function*(i,e,t){if(i.bu.set("Online"),e instanceof Nd&&2===e.state&&e.cause)try{yield(l=(0,Oe.Z)(function*(d,m){const w=m.cause;for(const O of m.targetIds)d.Au.has(O)&&(yield d.remoteSyncer.rejectListen(O,w),d.Au.delete(O),d.Vu.removeTarget(O))}),function(d,m){return l.apply(this,arguments)})(i,e)}catch(l){sn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),l),yield ag(i,l)}else if(e instanceof Su?i.Vu.Ht(e):e instanceof ac?i.Vu.ne(e):i.Vu.Xt(e),!t.isEqual(rr.min()))try{const l=yield Gd(i.localStore);t.compareTo(l)>=0&&(yield function(d,m){const w=d.Vu.ce(m);return w.targetChanges.forEach((O,G)=>{if(O.resumeToken.approximateByteSize()>0){const Q=d.Au.get(G);Q&&d.Au.set(G,Q.withResumeToken(O.resumeToken,m))}}),w.targetMismatches.forEach((O,G)=>{const Q=d.Au.get(O);if(!Q)return;d.Au.set(O,Q.withResumeToken(Fs.EMPTY_BYTE_STRING,Q.snapshotVersion)),og(d,O);const ce=new Fc(Q.target,O,G,Q.sequenceNumber);Cv(d,ce)}),d.remoteSyncer.applyRemoteEvent(w)}(i,t))}catch(l){sn("RemoteStore","Failed to raise snapshot:",l),yield ag(i,l)}var l}),cu.apply(this,arguments)}function ag(i,e,t){return lg.apply(this,arguments)}function lg(){return lg=(0,Oe.Z)(function*(i,e,t){if(!b(e))throw e;i.vu.add(1),yield Vf(i),i.bu.set("Offline"),t||(t=()=>Gd(i.localStore)),i.asyncQueue.enqueueRetryable((0,Oe.Z)(function*(){sn("RemoteStore","Retrying IndexedDB access"),yield t(),i.vu.delete(1),yield jh(i)}))}),lg.apply(this,arguments)}function L_(i,e){return e().catch(t=>ag(i,t,e))}function jf(i){return V_.apply(this,arguments)}function V_(){return V_=(0,Oe.Z)(function*(i){const e=Sn(i),t=Wd(e);let l=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Xp(e);)try{const d=yield eg(e.localStore,l);if(null===d){0===e.Eu.length&&t.jo();break}l=d.batchId,Sv(e,d)}catch(d){yield ag(e,d)}Tv(e)&&B_(e)}),V_.apply(this,arguments)}function Xp(i){return hd(i)&&i.Eu.length<10}function Sv(i,e){i.Eu.push(e);const t=Wd(i);t.Ko()&&t.ou&&t.uu(e.mutations)}function Tv(i){return hd(i)&&!Wd(i).Uo()&&i.Eu.length>0}function B_(i){Wd(i).start()}function Av(i){return zh.apply(this,arguments)}function zh(){return zh=(0,Oe.Z)(function*(i){Wd(i).hu()}),zh.apply(this,arguments)}function H0(i){return cg.apply(this,arguments)}function cg(){return cg=(0,Oe.Z)(function*(i){const e=Wd(i);for(const t of i.Eu)e.uu(t.mutations)}),cg.apply(this,arguments)}function z0(i,e,t){return U_.apply(this,arguments)}function U_(){return U_=(0,Oe.Z)(function*(i,e,t){const l=i.Eu.shift(),d=g.from(l,e,t);yield L_(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield jf(i)}),U_.apply(this,arguments)}function j_(i,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,Oe.Z)(function*(i,e){var t;e&&Wd(i).ou&&(yield(t=(0,Oe.Z)(function*(l,d){if(yt(m=d.code)&&m!==Rt.ABORTED){const w=l.Eu.shift();Wd(l).Qo(),yield L_(l,()=>l.remoteSyncer.rejectFailedWrite(w.batchId,d)),yield jf(l)}var m}),function(l,d){return t.apply(this,arguments)})(i,e)),Tv(i)&&B_(i)}),Hf.apply(this,arguments)}function H_(i,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,Oe.Z)(function*(i,e){const t=Sn(i);t.asyncQueue.verifyOperationInProgress(),sn("RemoteStore","RemoteStore received new credentials");const l=hd(t);t.vu.add(3),yield Vf(t),l&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield jh(t)}),Jp.apply(this,arguments)}function z_(i,e){return $_.apply(this,arguments)}function $_(){return $_=(0,Oe.Z)(function*(i,e){const t=Sn(i);e?(t.vu.delete(2),yield jh(t)):e||(t.vu.add(2),yield Vf(t),t.bu.set("Unknown"))}),$_.apply(this,arguments)}function $h(i){return i.Su||(i.Su=function(e,t,l){const d=Sn(e);return d.fu(),new Ev(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,l)}(i.datastore,i.asyncQueue,{uo:Dv.bind(null,i),ao:al.bind(null,i),nu:ll.bind(null,i)}),i.Ru.push(function(){var e=(0,Oe.Z)(function*(t){t?(i.Su.Qo(),Zp(i)?Iv(i):i.bu.set("Unknown")):(yield i.Su.stop(),F_(i))});return function(t){return e.apply(this,arguments)}}())),i.Su}function Wd(i){return i.Du||(i.Du=function(e,t,l){const d=Sn(e);return d.fu(),new wv(t,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,l)}(i.datastore,i.asyncQueue,{uo:Av.bind(null,i),ao:j_.bind(null,i),au:H0.bind(null,i),cu:z0.bind(null,i)}),i.Ru.push(function(){var e=(0,Oe.Z)(function*(t){t?(i.Du.Qo(),yield jf(i)):(yield i.Du.stop(),i.Eu.length>0&&(sn("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Du}class G_{constructor(e,t,l,d,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=l,this.op=d,this.removalCallback=m,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(w=>{})}static createAndSchedule(e,t,l,d,m){const w=Date.now()+l,O=new G_(e,t,w,d,m);return O.start(l),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qt(Rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gh(i,e){if(Xi("AsyncQueue",`${e}: ${i}`),b(i))return new qt(Rt.UNAVAILABLE,`${e}: ${i}`);throw i}class zf{constructor(e){this.comparator=e?(t,l)=>e(t,l)||tn.comparator(t.key,l.key):(t,l)=>tn.comparator(t.key,l.key),this.keyedMap=Rc(),this.sortedSet=new hi(this.comparator)}static emptySet(e){return new zf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,l)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),l=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,m=l.getNext().key;if(!d.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const l=new zf;return l.comparator=this.comparator,l.keyedMap=e,l.sortedSet=t,l}}class W_{constructor(){this.Cu=new hi(tn.comparator)}track(e){const t=e.doc.key,l=this.Cu.get(t);l?0!==e.type&&3===l.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==l.type?this.Cu=this.Cu.insert(t,{type:l.type,doc:e.doc}):2===e.type&&2===l.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===l.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===l.type?this.Cu=this.Cu.remove(t):1===e.type&&2===l.type?this.Cu=this.Cu.insert(t,{type:1,doc:l.doc}):0===e.type&&1===l.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):en():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,l)=>{e.push(l)}),e}}class Wh{constructor(e,t,l,d,m,w,O,G,Q){this.query=e,this.docs=t,this.oldDocs=l,this.docChanges=d,this.mutatedKeys=m,this.fromCache=w,this.syncStateChanged=O,this.excludesMetadataChanges=G,this.hasCachedResults=Q}static fromInitialDocuments(e,t,l,d,m){const w=[];return t.forEach(O=>{w.push({type:0,doc:O})}),new Wh(e,t,zf.emptySet(t),w,l,d,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,l=e.docChanges;if(t.length!==l.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==l[d].type||!t[d].doc.isEqual(l[d].doc))return!1;return!0}}class $0{constructor(){this.Nu=void 0,this.listeners=[]}}class qE{constructor(){this.queries=new La(e=>bf(e),xc),this.onlineState="Unknown",this.ku=new Set}}function fs(i,e){return G0.apply(this,arguments)}function G0(){return G0=(0,Oe.Z)(function*(i,e){const t=Sn(i),l=e.query;let d=!1,m=t.queries.get(l);if(m||(d=!0,m=new $0),d)try{m.Nu=yield t.onListen(l)}catch(w){const O=Gh(w,`Initialization of query '${Mc(e.query)}' failed`);return void e.onError(O)}t.queries.set(l,m),m.listeners.push(e),e.Mu(t.onlineState),m.Nu&&e.$u(m.Nu)&&Y_(t)}),G0.apply(this,arguments)}function Kh(i,e){return K_.apply(this,arguments)}function K_(){return K_=(0,Oe.Z)(function*(i,e){const t=Sn(i),l=e.query;let d=!1;const m=t.queries.get(l);if(m){const w=m.listeners.indexOf(e);w>=0&&(m.listeners.splice(w,1),d=0===m.listeners.length)}if(d)return t.queries.delete(l),t.onUnlisten(l)}),K_.apply(this,arguments)}function W0(i,e){const t=Sn(i);let l=!1;for(const d of e){const w=t.queries.get(d.query);if(w){for(const O of w.listeners)O.$u(d)&&(l=!0);w.Nu=d}}l&&Y_(t)}function q_(i,e,t){const l=Sn(i),d=l.queries.get(e);if(d)for(const m of d.listeners)m.onError(t);l.queries.delete(e)}function Y_(i){i.ku.forEach(e=>{e.next()})}class Uc{constructor(e,t,l){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=l||{}}$u(e){if(!this.options.includeMetadataChanges){const l=[];for(const d of e.docChanges)3!==d.type&&l.push(d);e=new Wh(e.query,e.docs,e.oldDocs,l,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Wh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class em{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Ua{constructor(e){this.serializer=e}rr(e){return kc(this.serializer,e)}ur(e){return e.metadata.exists?Nc(this.serializer,e.document,!1):Ji.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ks(e)}}class qh{constructor(e,t,l){this.ju=e,this.localStore=t,this.serializer=l,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tm(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const l=Gr.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(l.get(l.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,l=new Ua(this.serializer);for(const d of e)if(d.metadata.queries){const m=l.rr(d.metadata.name);for(const w of d.metadata.queries){const O=(t.get(w)||ti()).add(m);t.set(w,O)}}return t}complete(){var e=this;return(0,Oe.Z)(function*(){const t=yield function F0(i,e,t,l){return S_.apply(this,arguments)}(e.localStore,new Ua(e.serializer),e.documents,e.ju.id),l=e.Wu(e.documents);for(const d of e.queries)yield mv(e.localStore,d,l.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function tm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class cc{constructor(e){this.key=e}}class Z_{constructor(e){this.key=e}}class Yh{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=ti(),this.mutatedKeys=ti(),this.tc=vl(e),this.ec=new zf(this.tc)}get nc(){return this.Yu}sc(e,t){const l=t?t.ic:new W_,d=t?t.ec:this.ec;let m=t?t.mutatedKeys:this.mutatedKeys,w=d,O=!1;const G="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,Q="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((ce,Ue)=>{const bt=d.get(ce),jt=yl(this.query,Ue)?Ue:null,mn=!!bt&&this.mutatedKeys.has(bt.key),Mn=!!jt&&(jt.hasLocalMutations||this.mutatedKeys.has(jt.key)&&jt.hasCommittedMutations);let Pn=!1;bt&&jt?bt.data.isEqual(jt.data)?mn!==Mn&&(l.track({type:3,doc:jt}),Pn=!0):this.rc(bt,jt)||(l.track({type:2,doc:jt}),Pn=!0,(G&&this.tc(jt,G)>0||Q&&this.tc(jt,Q)<0)&&(O=!0)):!bt&&jt?(l.track({type:0,doc:jt}),Pn=!0):bt&&!jt&&(l.track({type:1,doc:bt}),Pn=!0,(G||Q)&&(O=!0)),Pn&&(jt?(w=w.add(jt),m=Mn?m.add(ce):m.delete(ce)):(w=w.delete(ce),m=m.delete(ce)))}),null!==this.query.limit)for(;w.size>this.query.limit;){const ce="F"===this.query.limitType?w.last():w.first();w=w.delete(ce.key),m=m.delete(ce.key),l.track({type:1,doc:ce})}return{ec:w,ic:l,zi:O,mutatedKeys:m}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,l){const d=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const m=e.ic.xu();m.sort((Q,ce)=>function(Ue,bt){const jt=mn=>{switch(mn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en()}};return jt(Ue)-jt(bt)}(Q.type,ce.type)||this.tc(Q.doc,ce.doc)),this.oc(l);const w=t?this.uc():[],O=0===this.Zu.size&&this.current?1:0,G=O!==this.Xu;return this.Xu=O,0!==m.length||G?{snapshot:new Wh(this.query,e.ec,d,m,e.mutatedKeys,0===O,G,!1,!!l&&l.resumeToken.approximateByteSize()>0),cc:w}:{cc:w}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new W_,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=ti(),this.ec.forEach(l=>{this.ac(l.key)&&(this.Zu=this.Zu.add(l.key))});const t=[];return e.forEach(l=>{this.Zu.has(l)||t.push(new Z_(l))}),this.Zu.forEach(l=>{e.has(l)||t.push(new cc(l))}),t}hc(e){this.Yu=e.ir,this.Zu=ti();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Wh.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class $f{constructor(e,t,l){this.query=e,this.targetId=t,this.view=l}}class Gf{constructor(e){this.key=e,this.fc=!1}}class Wf{constructor(e,t,l,d,m,w){this.localStore=e,this.remoteStore=t,this.eventManager=l,this.sharedClientState=d,this.currentUser=m,this.maxConcurrentLimboResolutions=w,this.dc={},this.wc=new La(O=>bf(O),xc),this._c=new Map,this.mc=new Set,this.gc=new hi(tn.comparator),this.yc=new Map,this.Ic=new ia,this.Tc={},this.Ec=new Map,this.Ac=kh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function Kf(i,e){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,Oe.Z)(function*(i,e){const t=cm(i);let l,d;const m=t.wc.get(e);if(m)l=m.targetId,t.sharedClientState.addLocalQueryTarget(l),d=m.view.lc();else{const w=yield dd(t.localStore,ai(e)),O=t.sharedClientState.addLocalQueryTarget(w.targetId);l=w.targetId,d=yield qd(t,e,l,"current"===O,w.resumeToken),t.isPrimaryClient&&Uf(t.remoteStore,w)}return d}),Kd.apply(this,arguments)}function qd(i,e,t,l,d){return Yd.apply(this,arguments)}function Yd(){return Yd=(0,Oe.Z)(function*(i,e,t,l,d){i.Rc=(Ue,bt,jt)=>{return(mn=(0,Oe.Z)(function*(Mn,Pn,ri,vi){let Br=Pn.view.sc(ri);Br.zi&&(Br=yield Uh(Mn.localStore,Pn.query,!1).then(({documents:Es})=>Pn.view.sc(Es,Br)));const Vs=vi&&vi.targetChanges.get(Pn.targetId),Ss=Pn.view.applyChanges(Br,Mn.isPrimaryClient,Vs);return uc(Mn,Pn.targetId,Ss.cc),Ss.snapshot}),function(Mn,Pn,ri,vi){return mn.apply(this,arguments)})(i,Ue,bt,jt);var mn};const m=yield Uh(i.localStore,e,!0),w=new Yh(e,m.ir),O=w.sc(m.documents),G=Xu.createSynthesizedTargetChangeForCurrentChange(t,l&&"Offline"!==i.onlineState,d),Q=w.applyChanges(O,i.isPrimaryClient,G);uc(i,t,Q.cc);const ce=new $f(e,t,w);return i.wc.set(e,ce),i._c.has(t)?i._c.get(t).push(e):i._c.set(t,[e]),Q.snapshot}),Yd.apply(this,arguments)}function qf(i,e){return ug.apply(this,arguments)}function ug(){return ug=(0,Oe.Z)(function*(i,e){const t=Sn(i),l=t.wc.get(e),d=t._c.get(l.targetId);if(d.length>1)return t._c.set(l.targetId,d.filter(m=>!xc(m,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(l.targetId),t.sharedClientState.isActiveQueryTarget(l.targetId)||(yield Bh(t.localStore,l.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(l.targetId),Hh(t.remoteStore,l.targetId),Yf(t,l.targetId)}).catch(ka))):(Yf(t,l.targetId),yield Bh(t.localStore,l.targetId,!0))}),ug.apply(this,arguments)}function dg(){return dg=(0,Oe.Z)(function*(i,e,t){const l=Eg(i);try{const d=yield function(m,w){const O=Sn(m),G=Pi.now(),Q=w.reduce((bt,jt)=>bt.add(jt.key),ti());let ce,Ue;return O.persistence.runTransaction("Locally write mutations","readwrite",bt=>{let jt=ea(),mn=ti();return O.Zi.getEntries(bt,Q).next(Mn=>{jt=Mn,jt.forEach((Pn,ri)=>{ri.isValidDocument()||(mn=mn.add(Pn))})}).next(()=>O.localDocuments.getOverlayedDocuments(bt,jt)).next(Mn=>{ce=Mn;const Pn=[];for(const ri of w){const vi=Sh(ri,ce.get(ri.key).overlayedDocument);null!=vi&&Pn.push(new na(ri.key,vi,Jc(vi.value.mapValue),Ms.exists(!0)))}return O.mutationQueue.addMutationBatch(bt,G,Pn,w)}).next(Mn=>{Ue=Mn;const Pn=Mn.applyToLocalDocumentSet(ce,mn);return O.documentOverlayCache.saveOverlays(bt,Mn.batchId,Pn)})}).then(()=>({batchId:Ue.batchId,changes:vp(ce)}))}(l.localStore,e);l.sharedClientState.addPendingMutation(d.batchId),function(m,w,O){let G=m.Tc[m.currentUser.toKey()];G||(G=new hi(vr)),G=G.insert(w,O),m.Tc[m.currentUser.toKey()]=G}(l,d.batchId,t),yield dc(l,d.changes),yield jf(l.remoteStore)}catch(d){const m=Gh(d,"Failed to persist write");t.reject(m)}}),dg.apply(this,arguments)}function Q_(i,e){return hg.apply(this,arguments)}function hg(){return hg=(0,Oe.Z)(function*(i,e){const t=Sn(i);try{const l=yield function Jm(i,e){const t=Sn(i),l=e.snapshotVersion;let d=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const w=t.Zi.newChangeBuffer({trackRemovals:!0});d=t.Ji;const O=[];e.targetChanges.forEach((ce,Ue)=>{const bt=d.get(Ue);if(!bt)return;O.push(t.Bs.removeMatchingKeys(m,ce.removedDocuments,Ue).next(()=>t.Bs.addMatchingKeys(m,ce.addedDocuments,Ue)));let jt=bt.withSequenceNumber(m.currentSequenceNumber);var mn,Mn,Pn;null!==e.targetMismatches.get(Ue)?jt=jt.withResumeToken(Fs.EMPTY_BYTE_STRING,rr.min()).withLastLimboFreeSnapshotVersion(rr.min()):ce.resumeToken.approximateByteSize()>0&&(jt=jt.withResumeToken(ce.resumeToken,l)),d=d.insert(Ue,jt),Mn=jt,Pn=ce,(0===(mn=bt).resumeToken.approximateByteSize()||Mn.snapshotVersion.toMicroseconds()-mn.snapshotVersion.toMicroseconds()>=3e8||Pn.addedDocuments.size+Pn.modifiedDocuments.size+Pn.removedDocuments.size>0)&&O.push(t.Bs.updateTargetData(m,jt))});let G=ea(),Q=ti();if(e.documentUpdates.forEach(ce=>{e.resolvedLimboDocuments.has(ce)&&O.push(t.persistence.referenceDelegate.updateLimboDocument(m,ce))}),O.push(ol(m,w,e.documentUpdates).next(ce=>{G=ce.nr,Q=ce.sr})),!l.isEqual(rr.min())){const ce=t.Bs.getLastRemoteSnapshotVersion(m).next(Ue=>t.Bs.setTargetsMetadata(m,m.currentSequenceNumber,l));O.push(ce)}return _t.waitFor(O).next(()=>w.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,G,Q)).next(()=>G)}).then(m=>(t.Ji=d,m))}(t.localStore,e);e.targetChanges.forEach((d,m)=>{const w=t.yc.get(m);w&&(Jn(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?w.fc=!0:d.modifiedDocuments.size>0?Jn(w.fc):d.removedDocuments.size>0&&(Jn(w.fc),w.fc=!1))}),yield dc(t,l,e)}catch(l){yield ka(l)}}),hg.apply(this,arguments)}function X_(i,e,t){const l=Sn(i);if(l.isPrimaryClient&&0===t||!l.isPrimaryClient&&1===t){const d=[];l.wc.forEach((m,w)=>{const O=w.view.Mu(e);O.snapshot&&d.push(O.snapshot)}),function(m,w){const O=Sn(m);O.onlineState=w;let G=!1;O.queries.forEach((Q,ce)=>{for(const Ue of ce.listeners)Ue.Mu(w)&&(G=!0)}),G&&Y_(O)}(l.eventManager,e),d.length&&l.dc.nu(d),l.onlineState=e,l.isPrimaryClient&&l.sharedClientState.setOnlineState(e)}}function Mv(i,e,t){return fg.apply(this,arguments)}function fg(){return fg=(0,Oe.Z)(function*(i,e,t){const l=Sn(i);l.sharedClientState.updateQueryState(e,"rejected",t);const d=l.yc.get(e),m=d&&d.key;if(m){let w=new hi(tn.comparator);w=w.insert(m,Ji.newNoDocument(m,rr.min()));const O=ti().add(m),G=new sl(rr.min(),new Map,new hi(vr),w,O);yield Q_(l,G),l.gc=l.gc.remove(m),l.yc.delete(e),im(l)}else yield Bh(l.localStore,e,!1).then(()=>Yf(l,e,t)).catch(ka)}),fg.apply(this,arguments)}function Rv(i,e){return J_.apply(this,arguments)}function J_(){return J_=(0,Oe.Z)(function*(i,e){const t=Sn(i),l=e.batch.batchId;try{const d=yield function Wp(i,e){const t=Sn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const d=e.batch.keys(),m=t.Zi.newChangeBuffer({trackRemovals:!0});return function(w,O,G,Q){const ce=G.batch,Ue=ce.keys();let bt=_t.resolve();return Ue.forEach(jt=>{bt=bt.next(()=>Q.getEntry(O,jt)).next(mn=>{const Mn=G.docVersions.get(jt);Jn(null!==Mn),mn.version.compareTo(Mn)<0&&(ce.applyToRemoteDocument(mn,G),mn.isValidDocument()&&(mn.setReadTime(G.commitVersion),Q.addEntry(mn)))})}),bt.next(()=>w.mutationQueue.removeMutationBatch(O,ce))}(t,l,e,m).next(()=>m.apply(l)).next(()=>t.mutationQueue.performConsistencyCheck(l)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(l,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,function(w){let O=ti();for(let G=0;G<w.mutationResults.length;++G)w.mutationResults[G].transformResults.length>0&&(O=O.add(w.batch.mutations[G].key));return O}(e))).next(()=>t.localDocuments.getDocuments(l,d))})}(t.localStore,e);rm(t,l,null),nm(t,l),t.sharedClientState.updateMutationState(l,"acknowledged"),yield dc(t,d)}catch(d){yield ka(d)}}),J_.apply(this,arguments)}function K0(i,e,t){return pg.apply(this,arguments)}function pg(){return pg=(0,Oe.Z)(function*(i,e,t){const l=Sn(i);try{const d=yield function(m,w){const O=Sn(m);return O.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let Q;return O.mutationQueue.lookupMutationBatch(G,w).next(ce=>(Jn(null!==ce),Q=ce.keys(),O.mutationQueue.removeMutationBatch(G,ce))).next(()=>O.mutationQueue.performConsistencyCheck(G)).next(()=>O.documentOverlayCache.removeOverlaysForBatchId(G,Q,w)).next(()=>O.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,Q)).next(()=>O.localDocuments.getDocuments(G,Q))})}(l.localStore,e);rm(l,e,t),nm(l,e),l.sharedClientState.updateMutationState(e,"rejected",t),yield dc(l,d)}catch(d){yield ka(d)}}),pg.apply(this,arguments)}function ey(){return ey=(0,Oe.Z)(function*(i,e){const t=Sn(i);hd(t.remoteStore)||sn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const l=yield function(m){const w=Sn(m);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>w.mutationQueue.getHighestUnacknowledgedBatchId(O))}(t.localStore);if(-1===l)return void e.resolve();const d=t.Ec.get(l)||[];d.push(e),t.Ec.set(l,d)}catch(l){const d=Gh(l,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),ey.apply(this,arguments)}function nm(i,e){(i.Ec.get(e)||[]).forEach(t=>{t.resolve()}),i.Ec.delete(e)}function rm(i,e,t){const l=Sn(i);let d=l.Tc[l.currentUser.toKey()];if(d){const m=d.get(e);m&&(t?m.reject(t):m.resolve(),d=d.remove(e)),l.Tc[l.currentUser.toKey()]=d}}function Yf(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const l of i._c.get(e))i.wc.delete(l),t&&i.dc.Pc(l,t);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(l=>{i.Ic.containsKey(l)||Zh(i,l)})}function Zh(i,e){i.mc.delete(e.path.canonicalString());const t=i.gc.get(e);null!==t&&(Hh(i.remoteStore,t),i.gc=i.gc.remove(e),i.yc.delete(t),im(i))}function uc(i,e,t){for(const l of t)l instanceof cc?(i.Ic.addReference(l.key,e),mg(i,l)):l instanceof Z_?(sn("SyncEngine","Document no longer in limbo: "+l.key),i.Ic.removeReference(l.key,e),i.Ic.containsKey(l.key)||Zh(i,l.key)):en()}function mg(i,e){const t=e.key,l=t.path.canonicalString();i.gc.get(t)||i.mc.has(l)||(sn("SyncEngine","New document in limbo: "+t),i.mc.add(l),im(i))}function im(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const t=new tn(Gr.fromString(e)),l=i.Ac.next();i.yc.set(l,new Gf(t)),i.gc=i.gc.insert(t,l),Uf(i.remoteStore,new Fc(ai(nu(t.path)),l,"TargetPurposeLimboResolution",pn.ct))}}function dc(i,e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,Oe.Z)(function*(i,e,t){const l=Sn(i),d=[],m=[],w=[];var O;l.wc.isEmpty()||(l.wc.forEach((O,G)=>{w.push(l.Rc(G,e,t).then(Q=>{if((Q||t)&&l.isPrimaryClient&&l.sharedClientState.updateQueryState(G.targetId,Q?.fromCache?"not-current":"current"),Q){d.push(Q);const ce=Bc.Li(G.targetId,Q);m.push(ce)}}))}),yield Promise.all(w),l.dc.nu(d),yield(O=(0,Oe.Z)(function*(G,Q){const ce=Sn(G);try{yield ce.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ue=>_t.forEach(Q,bt=>_t.forEach(bt.Fi,jt=>ce.persistence.referenceDelegate.addReference(Ue,bt.targetId,jt)).next(()=>_t.forEach(bt.Bi,jt=>ce.persistence.referenceDelegate.removeReference(Ue,bt.targetId,jt)))))}catch(Ue){if(!b(Ue))throw Ue;sn("LocalStore","Failed to update sequence numbers: "+Ue)}for(const Ue of Q){const bt=Ue.targetId;if(!Ue.fromCache){const jt=ce.Ji.get(bt),Mn=jt.withLastLimboFreeSnapshotVersion(jt.snapshotVersion);ce.Ji=ce.Ji.insert(bt,Mn)}}}),function(G,Q){return O.apply(this,arguments)})(l.localStore,m))}),Qh.apply(this,arguments)}function Ul(i,e){return sm.apply(this,arguments)}function sm(){return sm=(0,Oe.Z)(function*(i,e){const t=Sn(i);if(!t.currentUser.isEqual(e)){sn("SyncEngine","User change. New user:",e.toKey());const l=yield I_(t.localStore,e);t.currentUser=e,(d=t).Ec.forEach(w=>{w.forEach(O=>{O.reject(new qt(Rt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.Ec.clear(),t.sharedClientState.handleUserChange(e,l.removedBatchIds,l.addedBatchIds),yield dc(t,l.er)}var d}),sm.apply(this,arguments)}function om(i,e){const t=Sn(i),l=t.yc.get(e);if(l&&l.fc)return ti().add(l.key);{let d=ti();const m=t._c.get(e);if(!m)return d;for(const w of m){const O=t.wc.get(w);d=d.unionWith(O.view.nc)}return d}}function ty(i,e){return am.apply(this,arguments)}function am(){return am=(0,Oe.Z)(function*(i,e){const t=Sn(i),l=yield Uh(t.localStore,e.query,!0),d=e.view.hc(l);return t.isPrimaryClient&&uc(t,e.targetId,d.cc),d}),am.apply(this,arguments)}function lm(i,e){return ny.apply(this,arguments)}function ny(){return ny=(0,Oe.Z)(function*(i,e){const t=Sn(i);return D_(t.localStore,e).then(l=>dc(t,l))}),ny.apply(this,arguments)}function Y0(i,e,t,l){return Mu.apply(this,arguments)}function Mu(){return Mu=(0,Oe.Z)(function*(i,e,t,l){const d=Sn(i),m=yield function(w,O){const G=Sn(w),Q=Sn(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",ce=>Q.Sn(ce,O).next(Ue=>Ue?G.localDocuments.getDocuments(ce,Ue):_t.resolve(null)))}(d.localStore,e);var O;null!==m?("pending"===t?yield jf(d.remoteStore):"acknowledged"===t||"rejected"===t?(rm(d,e,l||null),nm(d,e),O=e,Sn(Sn(d.localStore).mutationQueue).Cn(O)):en(),yield dc(d,m)):sn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Mu.apply(this,arguments)}function gg(){return gg=(0,Oe.Z)(function*(i,e){const t=Sn(i);if(cm(t),Eg(t),!0===e&&!0!==t.vc){const l=t.sharedClientState.getAllActiveQueryTargets(),d=yield Ov(t,l.toArray());t.vc=!0,yield z_(t.remoteStore,!0);for(const m of d)Uf(t.remoteStore,m)}else if(!1===e&&!1!==t.vc){const l=[];let d=Promise.resolve();t._c.forEach((m,w)=>{t.sharedClientState.isLocalQueryTarget(w)?l.push(w):d=d.then(()=>(Yf(t,w),Bh(t.localStore,w,!0))),Hh(t.remoteStore,w)}),yield d,yield Ov(t,l),function(m){const w=Sn(m);w.yc.forEach((O,G)=>{Hh(w.remoteStore,G)}),w.Ic.Ts(),w.yc=new Map,w.gc=new hi(tn.comparator)}(t),t.vc=!1,yield z_(t.remoteStore,!1)}}),gg.apply(this,arguments)}function Ov(i,e,t){return iy.apply(this,arguments)}function iy(){return iy=(0,Oe.Z)(function*(i,e,t){const l=Sn(i),d=[],m=[];for(const w of e){let O;const G=l._c.get(w);if(G&&0!==G.length){O=yield dd(l.localStore,ai(G[0]));for(const Q of G){const ce=l.wc.get(Q),Ue=yield ty(l,ce);Ue.snapshot&&m.push(Ue.snapshot)}}else{const Q=yield tg(l.localStore,w);O=yield dd(l.localStore,Q),yield qd(l,_g(Q),w,!1,O.resumeToken)}d.push(O)}return l.dc.nu(m),d}),iy.apply(this,arguments)}function _g(i){return Ch(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function sy(i){const e=Sn(i);return Sn(Sn(e.localStore).persistence).$i()}function Z0(i,e,t,l){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,Oe.Z)(function*(i,e,t,l){const d=Sn(i);if(d.vc)return void sn("SyncEngine","Ignoring unexpected query state notification.");const m=d._c.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const w=yield D_(d.localStore,Ih(m[0])),O=sl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Fs.EMPTY_BYTE_STRING);yield dc(d,w,O);break}case"rejected":yield Bh(d.localStore,e,!0),Yf(d,e,l);break;default:en()}}),Zf.apply(this,arguments)}function yg(i,e,t){return vg.apply(this,arguments)}function vg(){return vg=(0,Oe.Z)(function*(i,e,t){const l=cm(i);if(l.vc){for(const d of e){if(l._c.has(d)){sn("SyncEngine","Adding an already active target "+d);continue}const m=yield tg(l.localStore,d),w=yield dd(l.localStore,m);yield qd(l,_g(m),w.targetId,!1,w.resumeToken),Uf(l.remoteStore,w)}for(const d of t)l._c.has(d)&&(yield Bh(l.localStore,d,!1).then(()=>{Hh(l.remoteStore,d),Yf(l,d)}).catch(ka))}}),vg.apply(this,arguments)}function cm(i){const e=Sn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=om.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mv.bind(null,e),e.dc.nu=W0.bind(null,e.eventManager),e.dc.Pc=q_.bind(null,e.eventManager),e}function Eg(i){const e=Sn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K0.bind(null,e),e}class fd{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Oe.Z)(function*(){t.serializer=Lf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Gp(this.persistence,new Nf,e.initialUser,this.serializer)}createPersistence(e){return new Zm(ou.zs,this.serializer)}createSharedClientState(e){return new O_}terminate(){var e=this;return(0,Oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Xh extends fd{constructor(e,t,l){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=l,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,l=this;return(0,Oe.Z)(function*(){yield t().call(l,e),yield l.Vc.initialize(l,e),yield Eg(l.Vc.syncEngine),yield jf(l.Vc.remoteStore),yield l.persistence.Ii(()=>(l.gcScheduler&&!l.gcScheduler.started&&l.gcScheduler.start(),l.indexBackfillerScheduler&&!l.indexBackfillerScheduler.started&&l.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Gp(this.persistence,new Nf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new kf(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const l=new Gt(t,this.persistence);return new Je(e.asyncQueue,l)}createPersistence(e){const t=pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),l=void 0!==this.cacheSizeBytes?Va.withCacheSize(this.cacheSizeBytes):Va.DEFAULT;return new fv(this.synchronizeTabs,t,e.clientId,l,e.asyncQueue,vv(),sg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new O_}}class Qf extends Xh{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,l=this;return(0,Oe.Z)(function*(){yield t().call(l,e);const d=l.Vc.syncEngine;l.sharedClientState instanceof qp&&(l.sharedClientState.syncEngine={jr:Y0.bind(null,d),zr:Z0.bind(null,d),Wr:yg.bind(null,d),$i:sy.bind(null,d),Qr:lm.bind(null,d)},yield l.sharedClientState.start()),yield l.persistence.Ii(function(){var m=(0,Oe.Z)(function*(w){yield function ry(i,e){return gg.apply(this,arguments)}(l.Vc.syncEngine,w),l.gcScheduler&&(w&&!l.gcScheduler.started?l.gcScheduler.start():w||l.gcScheduler.stop()),l.indexBackfillerScheduler&&(w&&!l.indexBackfillerScheduler.started?l.indexBackfillerScheduler.start():w||l.indexBackfillerScheduler.stop())});return function(w){return m.apply(this,arguments)}}())})()}createSharedClientState(e){const t=vv();if(!qp.D(t))throw new qt(Rt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const l=pv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qp(t,e.asyncQueue,l,e.clientId,e.initialUser)}}class wl{initialize(e,t){var l=this;return(0,Oe.Z)(function*(){l.localStore||(l.localStore=e.localStore,l.sharedClientState=e.sharedClientState,l.datastore=l.createDatastore(t),l.remoteStore=l.createRemoteStore(t),l.eventManager=l.createEventManager(t),l.syncEngine=l.createSyncEngine(t,!e.synchronizeTabs),l.sharedClientState.onlineStateHandler=d=>X_(l.syncEngine,d,1),l.remoteStore.remoteSyncer.handleCredentialChange=Ul.bind(null,l.syncEngine),yield z_(l.remoteStore,l.syncEngine.isPrimaryClient))})()}createEventManager(e){return new qE}createDatastore(e){const t=Lf(e.databaseInfo.databaseId),l=new V0(e.databaseInfo);return new B0(e.authCredentials,e.appCheckCredentials,l,t)}createRemoteStore(e){return t=this.localStore,l=this.datastore,d=e.asyncQueue,m=O=>X_(this.syncEngine,O,0),w=_v.D()?new _v:new au,new j0(t,l,d,m,w);var t,l,d,m,w}createSyncEngine(e,t){return function(l,d,m,w,O,G,Q){const ce=new Wf(l,d,m,w,O,G);return Q&&(ce.vc=!0),ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Oe.Z)(function*(t){const l=Sn(t);sn("RemoteStore","RemoteStore shutting down."),l.vu.add(5),yield Vf(l),l.Pu.shutdown(),l.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Ru(i,e=10240){let t=0;return{read:()=>(0,Oe.Z)(function*(){if(t<i.byteLength){const l={value:i.slice(t,t+e),done:!1};return t+=e,l}return{done:!0}})(),cancel:()=>(0,Oe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Xf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Xi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Jf{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new fi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(l=>{l&&l.Qu()?this.metadata.resolve(l.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(l?.Gu)}`))},l=>this.metadata.reject(l))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Oe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Oe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const l=e.xc.decode(t),d=Number(l);isNaN(d)&&e.Mc(`length string (${l}) is not valid number`);const m=yield e.$c(d);return new em(JSON.parse(m),t.length+d)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Oe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const l=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),l})()}$c(e){var t=this;return(0,Oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const l=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),l})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const l=new Uint8Array(e.buffer.length+t.value.length);l.set(e.buffer),l.set(t.value,e.buffer.length),e.buffer=l}return t.done})()}}class Jh{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new qt(Rt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const l=yield(d=(0,Oe.Z)(function*(m,w){const O=Sn(m),G=Ld(O.serializer)+"/documents",Q={documents:w.map(jt=>ed(O.serializer,jt))},ce=yield O.vo("BatchGetDocuments",G,Q,w.length),Ue=new Map;ce.forEach(jt=>{const mn=function Lm(i,e){return"found"in e?function(t,l){Jn(!!l.found);const d=kc(t,l.found.name),m=Ks(l.found.updateTime),w=l.found.createTime?Ks(l.found.createTime):rr.min(),O=new yi({mapValue:{fields:l.found.fields}});return Ji.newFoundDocument(d,m,w,O)}(i,e):"missing"in e?function(t,l){Jn(!!l.missing),Jn(!!l.readTime);const d=kc(t,l.missing),m=Ks(l.readTime);return Ji.newNoDocument(d,m)}(i,e):en()}(O.serializer,jt);Ue.set(mn.key.toString(),mn)});const bt=[];return w.forEach(jt=>{const mn=Ue.get(jt.toString());Jn(!!mn),bt.push(mn)}),bt}),function(m,w){return d.apply(this,arguments)})(t.datastore,e);var d;return l.forEach(d=>t.recordVersion(d)),l})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(l){this.lastWriteError=l}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var l;e.mutations.forEach(l=>{t.delete(l.key.toString())}),t.forEach((l,d)=>{const m=tn.fromPath(d);e.mutations.push(new Om(m,e.precondition(m)))}),yield(l=(0,Oe.Z)(function*(d,m){const w=Sn(d),O=Ld(w.serializer)+"/documents",G={writes:m.map(Q=>Au(w.serializer,Q))};yield w.Io("Commit",O,G)}),function(d,m){return l.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw en();t=rr.min()}const l=this.readVersions.get(e.key.toString());if(l){if(!t.isEqual(l))throw new qt(Rt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(rr.min())?Ms.exists(!1):Ms.updateTime(t):Ms.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(rr.min()))throw new qt(Rt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ms.updateTime(t)}return Ms.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ef{constructor(e,t,l,d,m){this.asyncQueue=e,this.datastore=t,this.options=l,this.updateFunction=d,this.deferred=m,this.Bc=l.maxAttempts,this.qo=new P_(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Oe.Z)(function*(){const t=new Jh(e.datastore),l=e.qc(t);l&&l.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(m=>{e.Uc(m)}))}).catch(d=>{e.Uc(d)})}))}qc(e){try{const t=this.updateFunction(e);return!Zt(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yt(t)}return!1}}class Pv{constructor(e,t,l,d){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=l,this.databaseInfo=d,this.user=ns.UNAUTHENTICATED,this.clientId=Tl.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(l,function(){var w=(0,Oe.Z)(function*(O){sn("FirestoreClient","Received user=",O.uid),yield m.authCredentialListener(O),m.user=O});return function(O){return w.apply(this,arguments)}}()),this.appCheckCredentials.start(l,w=>(sn("FirestoreClient","Received new app check token=",w),this.appCheckCredentialListener(w,this.user)))}getConfiguration(){var e=this;return(0,Oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qt(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(l){const d=Gh(l,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function ep(i,e){return oy.apply(this,arguments)}function oy(){return oy=(0,Oe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),sn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let l=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,Oe.Z)(function*(m){l.isEqual(m)||(yield I_(e.localStore,m),l=m)});return function(m){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}),oy.apply(this,arguments)}function pd(i,e){return bg.apply(this,arguments)}function bg(){return bg=(0,Oe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield hc(i);sn("FirestoreClient","Initializing OnlineComponentProvider");const l=yield i.getConfiguration();yield e.initialize(t,l),i.setCredentialChangeListener(d=>H_(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,m)=>H_(e.remoteStore,m)),i._onlineComponents=e}),bg.apply(this,arguments)}function ay(i){return"FirebaseError"===i.name?i.code===Rt.FAILED_PRECONDITION||i.code===Rt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function hc(i){return md.apply(this,arguments)}function md(){return md=(0,Oe.Z)(function*(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){sn("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ep(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!ay(t))throw t;io("Error using user provided cache. Falling back to memory cache: "+t),yield ep(i,new fd)}}else sn("FirestoreClient","Using default OfflineComponentProvider"),yield ep(i,new fd);return i._offlineComponents}),md.apply(this,arguments)}function Rs(i){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,Oe.Z)(function*(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(sn("FirestoreClient","Using user provided OnlineComponentProvider"),yield pd(i,i._uninitializedComponentsProvider._online)):(sn("FirestoreClient","Using default OnlineComponentProvider"),yield pd(i,new wl))),i._onlineComponents}),Cg.apply(this,arguments)}function Ig(i){return hc(i).then(e=>e.persistence)}function dm(i){return hc(i).then(e=>e.localStore)}function tf(i){return Rs(i).then(e=>e.remoteStore)}function tp(i){return Rs(i).then(e=>e.syncEngine)}function gd(i){return Zd.apply(this,arguments)}function Zd(){return Zd=(0,Oe.Z)(function*(i){const e=yield Rs(i),t=e.eventManager;return t.onListen=Kf.bind(null,e.syncEngine),t.onUnlisten=qf.bind(null,e.syncEngine),t}),Zd.apply(this,arguments)}function cy(i,e,t={}){const l=new fi;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(d,m,w,O,G){const Q=new Xf({next:Ue=>{m.enqueueAndForget(()=>Kh(d,ce));const bt=Ue.docs.has(w);!bt&&Ue.fromCache?G.reject(new qt(Rt.UNAVAILABLE,"Failed to get document because the client is offline.")):bt&&Ue.fromCache&&O&&"server"===O.source?G.reject(new qt(Rt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(Ue)},error:Ue=>G.reject(Ue)}),ce=new Uc(nu(w.path),Q,{includeMetadataChanges:!0,Ku:!0});return fs(d,ce)}(yield gd(i),i.asyncQueue,e,t,l)})),l.promise}function Dg(i,e,t={}){const l=new fi;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(d,m,w,O,G){const Q=new Xf({next:Ue=>{m.enqueueAndForget(()=>Kh(d,ce)),Ue.fromCache&&"server"===O.source?G.reject(new qt(Rt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(Ue)},error:Ue=>G.reject(Ue)}),ce=new Uc(w,Q,{includeMetadataChanges:!0,Ku:!0});return fs(d,ce)}(yield gd(i),i.asyncQueue,e,t,l)})),l.promise}function J0(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const Hl=new Map;function fc(i,e,t){if(!t)throw new qt(Rt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function jc(i,e,t,l){if(!0===e&&!0===l)throw new qt(Rt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function hy(i){if(!tn.isDocumentKey(i))throw new qt(Rt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function np(i){if(tn.isDocumentKey(i))throw new qt(Rt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function nf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":en()}function Mi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new qt(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nf(i);throw new qt(Rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function fy(i,e){if(e<=0)throw new qt(Rt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class kv{constructor(e){var t,l;if(void 0===e.host){if(void 0!==e.ssl)throw new qt(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qt(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=J0(null!==(l=e.experimentalLongPollingOptions)&&void 0!==l?l:{}),function(d){if(void 0!==d.timeoutSeconds){if(isNaN(d.timeoutSeconds))throw new qt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (must not be NaN)`);if(d.timeoutSeconds<5)throw new qt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (minimum allowed value is 5)`);if(d.timeoutSeconds>30)throw new qt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${d.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _d{constructor(e,t,l,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=l,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new qt(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qt(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kv(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ds;switch(t.type){case"firstParty":return new Xa(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new qt(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Hl.get(e);t&&(sn("ComponentProvider","Removing Datastore"),Hl.delete(e),t.terminate())}(this),Promise.resolve()}}class Ls{constructor(e,t,l){this.converter=t,this._key=l,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ls(this.firestore,e,this._key)}}class Da{constructor(e,t,l){this.converter=t,this._query=l,this.type="query",this.firestore=e}withConverter(e){return new Da(this.firestore,e,this._query)}}class Pu extends Da{constructor(e,t,l){super(e,t,nu(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ls(this.firestore,null,new tn(e))}withConverter(e){return new Pu(this.firestore,e,this._path)}}function Nv(i,e,...t){if(i=(0,ze.m9)(i),fc("collection","path",e),i instanceof _d){const l=Gr.fromString(e,...t);return np(l),new Pu(i,null,l)}{if(!(i instanceof Ls||i instanceof Pu))throw new qt(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=i._path.child(Gr.fromString(e,...t));return np(l),new Pu(i.firestore,null,l)}}function fm(i,e,...t){if(i=(0,ze.m9)(i),1===arguments.length&&(e=Tl.A()),fc("doc","path",e),i instanceof _d){const l=Gr.fromString(e,...t);return hy(l),new Ls(i,null,new tn(l))}{if(!(i instanceof Ls||i instanceof Pu))throw new qt(Rt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=i._path.child(Gr.fromString(e,...t));return hy(l),new Ls(i.firestore,i instanceof Pu?i.converter:null,new tn(l))}}function uu(i,e){return i=(0,ze.m9)(i),e=(0,ze.m9)(e),(i instanceof Ls||i instanceof Pu)&&(e instanceof Ls||e instanceof Pu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function pm(i,e){return i=(0,ze.m9)(i),e=(0,ze.m9)(e),i instanceof Da&&e instanceof Da&&i.firestore===e.firestore&&xc(i._query,e._query)&&i.converter===e.converter}class Sg{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new P_(this,"async_queue_retry"),this.Xc=()=>{const t=sg();t&&sn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=sg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=sg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new fi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Oe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!b(t))throw t;sn("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(l=>{throw this.Wc=l,this.Hc=!1,Xi("INTERNAL UNHANDLED ERROR: ",function(m){let w=m.message||"";return m.stack&&(w=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),w}(l)),l}).then(l=>(this.Hc=!1,l))));return this.Gc=t,t}enqueueAfterDelay(e,t,l){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const d=G_.createAndSchedule(this,e,t,l,m=>this.na(m));return this.zc.push(d),d}Zc(){this.Wc&&en()}verifyOperationInProgress(){}sa(){var e=this;return(0,Oe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,l)=>t.targetTimeMs-l.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function sf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const l=e;for(const d of["next","error","complete"])if(d in l&&"function"==typeof l[d])return!0;return!1}(i)}class py{constructor(){this._progressObserver={},this._taskCompletionResolver=new fi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,l){this._progressObserver={next:e,error:t,complete:l}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ds extends _d{constructor(e,t,l,d){super(e,t,l,d),this.type="firestore",this._queue=new Sg,this._persistenceKey=d?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||my(this),this._firestoreClient.terminate()}}function qs(i){return i._firestoreClient||my(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function my(i){var e,t,l;const d=i._freezeSettings(),m=(O=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new yf(i._databaseId,O,i._persistenceKey,(Q=d).host,Q.ssl,Q.experimentalForceLongPolling,Q.experimentalAutoDetectLongPolling,J0(Q.experimentalLongPollingOptions),Q.useFetchStreams));var O,Q;i._firestoreClient=new Pv(i._authCredentials,i._appCheckCredentials,i._queue,m),null!==(t=d.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(l=d.cache)&&void 0!==l&&l._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:d.cache.kind,_offline:d.cache._offlineComponentProvider,_online:d.cache._onlineComponentProvider})}function rp(i,e,t){const l=new fi;return i.asyncQueue.enqueue((0,Oe.Z)(function*(){try{yield ep(i,t),yield pd(i,e),l.resolve()}catch(d){const m=d;if(!ay(m))throw m;io("Error enabling indexeddb cache. Falling back to memory cache: "+m),l.reject(m)}})).then(()=>l.promise)}function Uv(i){if(i._initialized||i._terminated)throw new qt(Rt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class du{constructor(e){this._byteString=e}static fromBase64String(e){try{return new du(Fs.fromBase64String(e))}catch(t){throw new qt(Rt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new du(Fs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new qt(Rt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class af{constructor(e){this._methodName=e}}class xg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qt(Rt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qt(Rt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vr(this._lat,e._lat)||vr(this._long,e._long)}}const iE=/^__.*__$/;class sE{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return null!==this.fieldMask?new na(e,this.data,this.fieldMask,t,this.fieldTransforms):new oc(e,this.data,t,this.fieldTransforms)}}class jv{constructor(e,t,l){this.data=e,this.fieldMask=t,this.fieldTransforms=l}toMutation(e,t){return new na(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Mg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en()}}class gm{constructor(e,t,l,d,m,w){this.settings=e,this.databaseId=t,this.serializer=l,this.ignoreUndefinedProperties=d,void 0===m&&this.ua(),this.fieldTransforms=m||[],this.fieldMask=w||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new gm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.aa({path:l,la:!1});return d.fa(e),d}da(e){var t;const l=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.aa({path:l,la:!1});return d.ua(),d}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return yr(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(Mg(this.ca)&&iE.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Hv{constructor(e,t,l){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=l||Lf(e)}ya(e,t,l,d=!1){return new gm({ca:e,methodName:t,ga:l,path:vs.emptyPath(),la:!1,ma:d},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yd(i){const e=i._freezeSettings(),t=Lf(i._databaseId);return new Hv(i._databaseId,!!e.ignoreUndefinedProperties,t)}function _m(i,e,t,l,d,m={}){const w=i.ya(m.merge||m.mergeFields?2:0,e,t,d);$v("Data must be an object, but it was:",w,l);const O=Ey(l,w);let G,Q;if(m.merge)G=new so(w.fieldMask),Q=w.fieldTransforms;else if(m.mergeFields){const ce=[];for(const Ue of m.mergeFields){const bt=Jd(e,Ue,t);if(!w.contains(bt))throw new qt(Rt.INVALID_ARGUMENT,`Field '${bt}' is specified in your field mask but missing from your input data.`);Wv(ce,bt)||ce.push(bt)}G=new so(ce),Q=w.fieldTransforms.filter(Ue=>G.covers(Ue.field))}else G=null,Q=w.fieldTransforms;return new sE(new yi(O),G,Q)}class Xd extends af{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xd}}function _y(i,e,t){return new gm({ca:3,ga:e.settings.ga,methodName:i._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Rg extends af{_toFieldTransform(e){return new Yu(e.path,new Pc)}isEqual(e){return e instanceof Rg}}class zv extends af{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=_y(this,e,!0),l=this.pa.map(m=>cl(m,t)),d=new ru(l);return new Yu(e.path,d)}isEqual(e){return this===e}}class yy extends af{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=_y(this,e,!0),l=this.pa.map(m=>cl(m,t)),d=new bu(l);return new Yu(e.path,d)}isEqual(e){return this===e}}class vy extends af{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Pd(e.serializer,qu(e.serializer,this.Ia));return new Yu(e.path,t)}isEqual(e){return this===e}}function vd(i,e,t,l){const d=i.ya(1,e,t);$v("Data must be an object, but it was:",d,l);const m=[],w=yi.empty();_o(l,(G,Q)=>{const ce=wy(e,G,t);Q=(0,ze.m9)(Q);const Ue=d.da(ce);if(Q instanceof Xd)m.push(ce);else{const bt=cl(Q,Ue);null!=bt&&(m.push(ce),w.set(ce,bt))}});const O=new so(m);return new jv(w,O,d.fieldTransforms)}function zl(i,e,t,l,d,m){const w=i.ya(1,e,t),O=[Jd(e,l,t)],G=[d];if(m.length%2!=0)throw new qt(Rt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let bt=0;bt<m.length;bt+=2)O.push(Jd(e,m[bt])),G.push(m[bt+1]);const Q=[],ce=yi.empty();for(let bt=O.length-1;bt>=0;--bt)if(!Wv(Q,O[bt])){const jt=O[bt];let mn=G[bt];mn=(0,ze.m9)(mn);const Mn=w.da(jt);if(mn instanceof Xd)Q.push(jt);else{const Pn=cl(mn,Mn);null!=Pn&&(Q.push(jt),ce.set(jt,Pn))}}const Ue=new so(Q);return new jv(ce,Ue,w.fieldTransforms)}function Og(i,e,t,l=!1){return cl(t,i.ya(l?4:3,e))}function cl(i,e){if(Pg(i=(0,ze.m9)(i)))return $v("Unsupported field value:",e,i),Ey(i,e);if(i instanceof af)return function(t,l){if(!Mg(l.ca))throw l._a(`${t._methodName}() can only be used with update() and set()`);if(!l.path)throw l._a(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(l);d&&l.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,l){const d=[];let m=0;for(const w of t){let O=cl(w,l.wa(m));null==O&&(O={nullValue:"NULL_VALUE"}),d.push(O),m++}return{arrayValue:{values:d}}}(i,e)}return function(t,l){if(null===(t=(0,ze.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qu(l.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Pi.fromDate(t);return{timestampValue:Ah(l.serializer,d)}}if(t instanceof Pi){const d=new Pi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Ah(l.serializer,d)}}if(t instanceof xg)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof du)return{bytesValue:s_(l.serializer,t._byteString)};if(t instanceof Ls){const d=l.databaseId,m=t.firestore._databaseId;if(!m.isEqual(d))throw l._a(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Tp(t.firestore._databaseId||l.databaseId,t._key.path)}}throw l._a(`Unsupported field value: ${nf(t)}`)}(i,e)}function Ey(i,e){const t={};return gu(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_o(i,(l,d)=>{const m=cl(d,e.ha(l));null!=m&&(t[l]=m)}),{mapValue:{fields:t}}}function Pg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Pi||i instanceof xg||i instanceof du||i instanceof Ls||i instanceof af)}function $v(i,e,t){if(!Pg(t)||"object"!=typeof(l=t)||null===l||Object.getPrototypeOf(l)!==Object.prototype&&null!==Object.getPrototypeOf(l)){const l=nf(t);throw e._a("an object"===l?i+" a custom object":i+" "+l)}var l}function Jd(i,e,t){if((e=(0,ze.m9)(e))instanceof Qd)return e._internalPath;if("string"==typeof e)return wy(i,e);throw yr("Field path arguments must be of type string or ",i,!1,void 0,t)}const Gv=new RegExp("[~\\*/\\[\\]]");function wy(i,e,t){if(e.search(Gv)>=0)throw yr(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Qd(...e.split("."))._internalPath}catch{throw yr(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function yr(i,e,t,l,d){const m=l&&!l.isEmpty(),w=void 0!==d;let O=`Function ${e}() called with invalid data`;t&&(O+=" (via `toFirestore()`)"),O+=". ";let G="";return(m||w)&&(G+=" (found",m&&(G+=` in field ${l}`),w&&(G+=` in document ${d}`),G+=")"),new qt(Rt.INVALID_ARGUMENT,O+i+G)}function Wv(i,e){return i.some(t=>t.isEqual(e))}class sp{constructor(e,t,l,d,m){this._firestore=e,this._userDataWriter=t,this._key=l,this._document=d,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Ls(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Kv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ku("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Kv extends sp{data(){return super.data()}}function ku(i,e){return"string"==typeof e?wy(i,e):e instanceof Qd?e._internalPath:e._delegate._internalPath}function pc(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new qt(Rt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hu{}class eh extends hu{}function ps(i,e,...t){let l=[];e instanceof hu&&l.push(e),l=l.concat(t),function(d){const m=d.filter(O=>O instanceof th).length,w=d.filter(O=>O instanceof ym).length;if(m>1||m>0&&w>0)throw new qt(Rt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(l);for(const d of l)i=d._apply(i);return i}class ym extends eh{constructor(e,t,l){super(),this._field=e,this._op=t,this._value=l,this.type="where"}static _create(e,t,l){return new ym(e,t,l)}_apply(e){const t=this._parse(e);return Qv(e._query,t),new Da(e.firestore,e.converter,Ea(e._query,t))}_parse(e){const t=yd(e.firestore);return function(d,m,w,O,G,Q,ce){let Ue;if(G.isKeyField()){if("array-contains"===Q||"array-contains-any"===Q)throw new qt(Rt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Q}' queries on documentId().`);if("in"===Q||"not-in"===Q){Vg(ce,Q);const bt=[];for(const jt of ce)bt.push(Cy(O,d,jt));Ue={arrayValue:{values:bt}}}else Ue=Cy(O,d,ce)}else"in"!==Q&&"not-in"!==Q&&"array-contains-any"!==Q||Vg(ce,Q),Ue=Og(w,"where",ce,"in"===Q||"not-in"===Q);return Si.create(G,Q,Ue)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class th extends hu{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new th(e,t)}_parse(e){const t=this._queryConstraints.map(l=>l._parse(e)).filter(l=>l.getFilters().length>0);return 1===t.length?t[0]:Fi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(l,d){let m=l;const w=d.getFlattenedFilters();for(const O of w)Qv(m,O),m=Ea(m,O)}(e._query,t),new Da(e.firestore,e.converter,Ea(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class kg extends eh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new kg(e,t)}_apply(e){const t=function(l,d,m){if(null!==l.startAt)throw new qt(Rt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==l.endAt)throw new qt(Rt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const w=new ic(d,m);return function(O,G){if(null===Md(O)){const Q=Ll(O);null!==Q&&op(0,Q,G.field)}}(l,w),w}(e._query,this._field,this._direction);return new Da(e.firestore,e.converter,function(l,d){const m=l.explicitOrderBy.concat([d]);return new Ac(l.path,l.collectionGroup,m,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)}(e._query,t))}}class vm extends eh{constructor(e,t,l){super(),this.type=e,this._limit=t,this._limitType=l}static _create(e,t,l){return new vm(e,t,l)}_apply(e){return new Da(e.firestore,e.converter,_l(e._query,this._limit,this._limitType))}}class Em extends eh{constructor(e,t,l){super(),this.type=e,this._docOrFields=t,this._inclusive=l}static _create(e,t,l){return new Em(e,t,l)}_apply(e){const t=Lg(e,this.type,this._docOrFields,this._inclusive);return new Da(e.firestore,e.converter,(d=t,new Ac((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,d,l.endAt)));var l,d}}class Fg extends eh{constructor(e,t,l){super(),this.type=e,this._docOrFields=t,this._inclusive=l}static _create(e,t,l){return new Fg(e,t,l)}_apply(e){const t=Lg(e,this.type,this._docOrFields,this._inclusive);return new Da(e.firestore,e.converter,(d=t,new Ac((l=e._query).path,l.collectionGroup,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,d)));var l,d}}function Lg(i,e,t,l){if(t[0]=(0,ze.m9)(t[0]),t[0]instanceof sp)return function(d,m,w,O,G){if(!O)throw new qt(Rt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const Q=[];for(const ce of Eu(d))if(ce.field.isKeyField())Q.push(F(m,O.key));else{const Ue=O.data.field(ce.field);if(_u(Ue))throw new qt(Rt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ce.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ue){const bt=ce.field.canonicalString();throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${bt}' (used as the orderBy) does not exist.`)}Q.push(Ue)}return new Go(Q,G)}(i._query,i.firestore._databaseId,e,t[0]._document,l);{const d=yd(i.firestore);return function(m,w,O,G,Q,ce){const Ue=m.explicitOrderBy;if(Q.length>Ue.length)throw new qt(Rt.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const bt=[];for(let jt=0;jt<Q.length;jt++){const mn=Q[jt];if(Ue[jt].field.isKeyField()){if("string"!=typeof mn)throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof mn}`);if(!vu(m)&&-1!==mn.indexOf("/"))throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${mn}' contains a slash.`);const Mn=m.path.child(Gr.fromString(mn));if(!tn.isDocumentKey(Mn))throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${Mn}' is not because it contains an odd number of segments.`);const Pn=new tn(Mn);bt.push(F(w,Pn))}else{const Mn=Og(O,G,mn);bt.push(Mn)}}return new Go(bt,ce)}(i._query,i.firestore._databaseId,d,e,t,l)}}function Cy(i,e,t){if("string"==typeof(t=(0,ze.m9)(t))){if(""===t)throw new qt(Rt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vu(e)&&-1!==t.indexOf("/"))throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const l=e.path.child(Gr.fromString(t));if(!tn.isDocumentKey(l))throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${l}' is not because it has an odd number of segments (${l.length}).`);return F(i,new tn(l))}if(t instanceof Ls)return F(i,t._key);throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nf(t)}.`)}function Vg(i,e){if(!Array.isArray(i)||0===i.length)throw new qt(Rt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qv(i,e){if(e.isInequality()){const l=Ll(i),d=e.field;if(null!==l&&!l.isEqual(d))throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${l.toString()}' and '${d.toString()}'`);const m=Md(i);null!==m&&op(0,d,m)}const t=function(l,d){for(const m of l)for(const w of m.getFlattenedFilters())if(d.indexOf(w.op)>=0)return w.op;return null}(i.filters,function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new qt(Rt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function op(i,e,t){if(!t.isEqual(e))throw new qt(Rt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Iy{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xs(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ml(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw en()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const l={};return _o(e,(d,m)=>{l[d]=this.convertValue(m,t)}),l}convertGeoPoint(e){return new xg(xs(e.latitude),xs(e.longitude))}convertArray(e,t){return(e.values||[]).map(l=>this.convertValue(l,t))}convertServerTimestamp(e,t){switch(t){case"previous":const l=tl(e);return null==l?null:this.convertValue(l,t);case"estimate":return this.convertTimestamp(Ni(e));default:return null}}convertTimestamp(e){const t=nc(e);return new Pi(t.seconds,t.nanos)}convertDocumentKey(e,t){const l=Gr.fromString(e);Jn(Bm(l));const d=new yo(l.get(1),l.get(3)),m=new tn(l.popFirst(5));return d.isEqual(t)||Xi(`Document ${m} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function Bg(i,e,t){let l;return l=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,l}class cE extends Iy{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ls(this.firestore,null,t)}}class lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nh extends sp{constructor(e,t,l,d,m,w){super(e,t,l,d,w),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new rh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const l=this._document.data.field(ku("DocumentSnapshot.get",e));if(null!==l)return this._userDataWriter.convertValue(l,t.serverTimestamps)}}}class rh extends nh{data(e={}){return super.data(e)}}class cf{constructor(e,t,l,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new lp(d.hasPendingWrites,d.fromCache),this.query=l}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(l=>{e.call(t,new rh(this._firestore,this._userDataWriter,l.key,l,new lp(this._snapshot.mutatedKeys.has(l.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new qt(Rt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(l,d){if(l._snapshot.oldDocs.isEmpty()){let m=0;return l._snapshot.docChanges.map(w=>({type:"added",doc:new rh(l._firestore,l._userDataWriter,w.doc.key,w.doc,new lp(l._snapshot.mutatedKeys.has(w.doc.key),l._snapshot.fromCache),l.query.converter),oldIndex:-1,newIndex:m++}))}{let m=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(w=>d||3!==w.type).map(w=>{const O=new rh(l._firestore,l._userDataWriter,w.doc.key,w.doc,new lp(l._snapshot.mutatedKeys.has(w.doc.key),l._snapshot.fromCache),l.query.converter);let G=-1,Q=-1;return 0!==w.type&&(G=m.indexOf(w.doc.key),m=m.delete(w.doc.key)),1!==w.type&&(m=m.add(w.doc),Q=m.indexOf(w.doc.key)),{type:uE(w.type),doc:O,oldIndex:G,newIndex:Q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uE(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en()}}function dE(i,e){return i instanceof nh&&e instanceof nh?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof cf&&e instanceof cf&&i._firestore===e._firestore&&pm(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Yr extends Iy{constructor(e){super(),this.firestore=e}convertBytes(e){return new du(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ls(this.firestore,null,t)}}function t0(i,e,t){i=Mi(i,Ls);const l=Mi(i.firestore,Ds),d=Bg(i.converter,e,t);return uf(l,[_m(yd(l),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,Ms.none())])}function n0(i,e,t,...l){i=Mi(i,Ls);const d=Mi(i.firestore,Ds),m=yd(d);let w;return w="string"==typeof(e=(0,ze.m9)(e))||e instanceof Qd?zl(m,"updateDoc",i._key,e,t,l):vd(m,"updateDoc",i._key,e),uf(d,[w.toMutation(i._key,Ms.exists(!0))])}function Ug(i,...e){var t,l,d;i=(0,ze.m9)(i);let m={includeMetadataChanges:!1},w=0;"object"!=typeof e[w]||sf(e[w])||(m=e[w],w++);const O={includeMetadataChanges:m.includeMetadataChanges};if(sf(e[w])){const Ue=e[w];e[w]=null===(t=Ue.next)||void 0===t?void 0:t.bind(Ue),e[w+1]=null===(l=Ue.error)||void 0===l?void 0:l.bind(Ue),e[w+2]=null===(d=Ue.complete)||void 0===d?void 0:d.bind(Ue)}let G,Q,ce;if(i instanceof Ls)Q=Mi(i.firestore,Ds),ce=nu(i._key.path),G={next:Ue=>{e[w]&&e[w](jg(Q,i,Ue))},error:e[w+1],complete:e[w+2]};else{const Ue=Mi(i,Da);Q=Mi(Ue.firestore,Ds),ce=Ue._query;const bt=new Yr(Q);G={next:jt=>{e[w]&&e[w](new cf(Q,bt,Ue,jt))},error:e[w+1],complete:e[w+2]},pc(i._query)}return function(Ue,bt,jt,mn){const Mn=new Xf(mn),Pn=new Uc(bt,Mn,jt);return Ue.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return fs(yield gd(Ue),Pn)})),()=>{Mn.Dc(),Ue.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return Kh(yield gd(Ue),Pn)}))}}(qs(Q),ce,O,G)}function uf(i,e){return function(t,l){const d=new fi;return t.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function xv(i,e,t){return dg.apply(this,arguments)}(yield tp(t),l,d)})),d.promise}(qs(i),e)}function jg(i,e,t){const l=t.docs.get(e._key),d=new Yr(i);return new nh(i,d,e._key,l,new lp(t.hasPendingWrites,t.fromCache),e.converter)}const up={maxAttempts:5};class dp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yd(e)}set(e,t,l){this._verifyNotCommitted();const d=ih(e,this._firestore),m=Bg(d.converter,t,l),w=_m(this._dataReader,"WriteBatch.set",d._key,m,null!==d.converter,l);return this._mutations.push(w.toMutation(d._key,Ms.none())),this}update(e,t,l,...d){this._verifyNotCommitted();const m=ih(e,this._firestore);let w;return w="string"==typeof(t=(0,ze.m9)(t))||t instanceof Qd?zl(this._dataReader,"WriteBatch.update",m._key,t,l,d):vd(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(w.toMutation(m._key,Ms.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ih(e,this._firestore);return this._mutations=this._mutations.concat(new Zu(t._key,Ms.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qt(Rt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ih(i,e){if((i=(0,ze.m9)(i)).firestore!==e)throw new qt(Rt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class a0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yd(e)}get(e){const t=ih(e,this._firestore),l=new cE(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return en();const m=d[0];if(m.isFoundDocument())return new sp(this._firestore,l,m.key,m,t.converter);if(m.isNoDocument())return new sp(this._firestore,l,t._key,null,t.converter);throw en()})}set(e,t,l){const d=ih(e,this._firestore),m=Bg(d.converter,t,l),w=_m(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,l);return this._transaction.set(d._key,w),this}update(e,t,l,...d){const m=ih(e,this._firestore);let w;return w="string"==typeof(t=(0,ze.m9)(t))||t instanceof Qd?zl(this._dataReader,"Transaction.update",m._key,t,l,d):vd(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,w),this}delete(e){const t=ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ih(e,this._firestore),l=new Yr(this._firestore);return super.get(e).then(d=>new nh(this._firestore,l,t._key,d._document,new lp(!1,!1),t.converter))}}!function(i,e=!0){ga=Ft.SDK_VERSION,(0,Ft._registerComponent)(new qe.wA("firestore",(t,{instanceIdentifier:l,options:d})=>{const m=t.getProvider("app").getImmediate(),w=new Ds(new qc(t.getProvider("auth-internal")),new Bu(t.getProvider("app-check-internal")),function(O,G){if(!Object.prototype.hasOwnProperty.apply(O.options,["projectId"]))throw new qt(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yo(O.options.projectId,G)}(m,l),m);return d=Object.assign({useFetchStreams:e},d),w._setSettings(d),w},"PUBLIC").setMultipleInstances(!0)),(0,Ft.registerVersion)(Id,"3.13.0",i),(0,Ft.registerVersion)(Id,"3.13.0","esm2017")}();function Oy(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new qt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Py(){if(typeof Uint8Array>"u")throw new qt("unimplemented","Uint8Arrays are not available in this environment.")}function sh(){if(!function Sd(){return typeof atob<"u"}())throw new qt("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Cm{constructor(e){this._delegate=e}static fromBase64String(e){return sh(),new Cm(du.fromBase64String(e))}static fromUint8Array(e){return Py(),new Cm(du.fromUint8Array(e))}toBase64(){return sh(),this._delegate.toBase64()}toUint8Array(){return Py(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Gg(i){return function ky(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const l of e)if(l in t&&"function"==typeof t[l])return!0;return!1}(i,["next","error","complete"])}class Ny{enableIndexedDbPersistence(e,t){return function mm(i,e){Uv(i=Mi(i,Ds));const t=qs(i);if(t._uninitializedComponentsProvider)throw new qt(Rt.FAILED_PRECONDITION,"SDK cache is already specified.");io("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const l=i._freezeSettings(),d=new wl;return rp(t,d,new Xh(d,l.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Ag(i){Uv(i=Mi(i,Ds));const e=qs(i);if(e._uninitializedComponentsProvider)throw new qt(Rt.FAILED_PRECONDITION,"SDK cache is already specified.");io("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),l=new wl;return rp(e,l,new Qf(l,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Lv(i){if(i._initialized&&!i._terminated)throw new qt(Rt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new fi;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{yield(t=(0,Oe.Z)(function*(l){if(!Ws.D())return Promise.resolve();const d=l+"main";yield Ws.delete(d)}),function(l){return t.apply(this,arguments)})(pv(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Fy{constructor(e,t,l){this._delegate=t,this._persistenceProvider=l,this.INTERNAL={delete:()=>this.terminate()},e instanceof yo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&io("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,l={}){!function rf(i,e,t,l={}){var d;const m=(i=Mi(i,_d))._getSettings(),w=`${e}:${t}`;if("firestore.googleapis.com"!==m.host&&m.host!==w&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},m),{host:w,ssl:!1})),l.mockUserToken){let O,G;if("string"==typeof l.mockUserToken)O=l.mockUserToken,G=ns.MOCK_USER;else{O=(0,ze.Sg)(l.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const Q=l.mockUserToken.sub||l.mockUserToken.user_id;if(!Q)throw new qt(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");G=new ns(Q)}i._authCredentials=new Sl(new Zl(O,G))}}(this._delegate,e,t,l)}enableNetwork(){return function nE(i){return function Q0(i){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield Ig(i),t=yield tf(i);return e.setNetworkEnabled(!0),function(l){const d=Sn(l);return d.vu.delete(0),jh(d)}(t)}))}(qs(i=Mi(i,Ds)))}(this._delegate)}disableNetwork(){return function ZE(i){return function X0(i){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield Ig(i),t=yield tf(i);return e.setNetworkEnabled(!1),(l=(0,Oe.Z)(function*(d){const m=Sn(d);m.vu.add(0),yield Vf(m),m.bu.set("Offline")}),function(d){return l.apply(this,arguments)})(t);var l}))}(qs(i=Mi(i,Ds)))}(this._delegate)}enablePersistence(e){let t=!1,l=!1;return e&&(t=!!e.synchronizeTabs,l=!!e.experimentalForceOwningTab,jc("synchronizeTabs",t,"experimentalForceOwningTab",l)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,l)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Vv(i){return function(e){const t=new fi;return e.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function q0(i,e){return ey.apply(this,arguments)}(yield tp(e),t)})),t.promise}(qs(i=Mi(i,Ds)))}(this._delegate)}onSnapshotsInSync(e){return function xy(i,e){return function uy(i,e){const t=new Xf(e);return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return l=yield gd(i),d=t,Sn(l).ku.add(d),void d.next();var l,d})),()=>{t.Dc(),i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return l=yield gd(i),d=t,void Sn(l).ku.delete(d);var l,d}))}}(qs(i=Mi(i,Ds)),sf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new qt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hf(this,Nv(this._delegate,e))}catch(t){throw Wo(t,"collection()","Firestore.collection()")}}doc(e){try{return new $l(this,fm(this._delegate,e))}catch(t){throw Wo(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ko(this,function Fv(i,e){if(i=Mi(i,_d),fc("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new qt(Rt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Da(i,null,(t=e,new Ac(Gr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Wo(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function _E(i,e,t){i=Mi(i,Ds);const l=Object.assign(Object.assign({},up),t);return function(d){if(d.maxAttempts<1)throw new qt(Rt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(l),function(d,m,w){const O=new fi;return d.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){const G=yield function ly(i){return Rs(i).then(e=>e.datastore)}(d);new ef(d.asyncQueue,G,w,m,O).run()})),O.promise}(qs(i),d=>e(new a0(i,d)),l)}(this._delegate,t=>e(new li(this,t)))}batch(){return qs(this._delegate),new Hc(new dp(this._delegate,e=>uf(this._delegate,e)))}loadBundle(e){return function QE(i,e){const t=qs(i=Mi(i,Ds)),l=new py;return function dy(i,e,t,l){const d=function(m,w){let O;return O="string"==typeof m?Wn().encode(m):m,G=function(G,Q){if(G instanceof Uint8Array)return Ru(G,Q);if(G instanceof ArrayBuffer)return Ru(new Uint8Array(G),Q);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new Jf(G,w);var G}(t,Lf(e));i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){!function wg(i,e,t){const l=Sn(i);var d;(d=(0,Oe.Z)(function*(m,w,O){try{const G=yield w.getMetadata();if(yield function(bt,jt){const mn=Sn(bt),Mn=Ks(jt.createTime);return mn.persistence.runTransaction("hasNewerBundle","readonly",Pn=>mn.qs.getBundleMetadata(Pn,jt.id)).then(Pn=>!!Pn&&Pn.createTime.compareTo(Mn)>=0)}(m.localStore,G))return yield w.close(),O._completeWith({taskState:"Success",documentsLoaded:(bt=G).totalDocuments,bytesLoaded:bt.totalBytes,totalDocuments:bt.totalDocuments,totalBytes:bt.totalBytes}),Promise.resolve(new Set);O._updateProgress(tm(G));const Q=new qh(G,m.localStore,w.serializer);let ce=yield w.bc();for(;ce;){const bt=yield Q.zu(ce);bt&&O._updateProgress(bt),ce=yield w.bc()}const Ue=yield Q.complete();return yield dc(m,Ue.Ju,void 0),yield function(bt,jt){const mn=Sn(bt);return mn.persistence.runTransaction("Save bundle","readwrite",Mn=>mn.qs.saveBundleMetadata(Mn,jt))}(m.localStore,G),O._completeWith(Ue.progress),Promise.resolve(Ue.Hu)}catch(G){return io("SyncEngine",`Loading bundle failed with ${G}`),O._failWith(G),Promise.resolve(new Set)}var bt}),function(m,w,O){return d.apply(this,arguments)})(l,e,t).then(d=>{l.sharedClientState.notifyBundleLoaded(d)})}(yield tp(i),d,l)}))}(t,i._databaseId,e,l),l}(this._delegate,e)}namedQuery(e){return function rE(i,e){return function Ou(i,e){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){return function(t,l){const d=Sn(t);return d.persistence.runTransaction("Get named query","readonly",m=>d.qs.getNamedQuery(m,l))}(yield dm(i),e)}))}(qs(i=Mi(i,Ds)),e).then(t=>t?new Da(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ko(this,t):null)}}class hp extends Iy{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cm(new du(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $l.forKey(t,this.firestore,null)}}class li{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}get(e){const t=oh(e);return this._delegate.get(t).then(l=>new pp(this._firestore,new nh(this._firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,t.converter)))}set(e,t,l){const d=oh(e);return l?(Oy("Transaction.set",l),this._delegate.set(d,t,l)):this._delegate.set(d,t),this}update(e,t,l,...d){const m=oh(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,l,...d),this}delete(e){const t=oh(e);return this._delegate.delete(t),this}}class Hc{constructor(e){this._delegate=e}set(e,t,l){const d=oh(e);return l?(Oy("WriteBatch.set",l),this._delegate.set(d,t,l)):this._delegate.set(d,t),this}update(e,t,l,...d){const m=oh(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,l,...d),this}delete(e){const t=oh(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ja{constructor(e,t,l){this._firestore=e,this._userDataWriter=t,this._delegate=l}fromFirestore(e,t){const l=new rh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new df(this._firestore,l),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const l=ja.INSTANCES;let d=l.get(e);d||(d=new WeakMap,l.set(e,d));let m=d.get(t);return m||(m=new ja(e,new hp(e),t),d.set(t,m)),m}}ja.INSTANCES=new WeakMap;class $l{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}static forPath(e,t,l){if(e.length%2!=0)throw new qt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $l(t,new Ls(t._delegate,l,new tn(e)))}static forKey(e,t,l){return new $l(t,new Ls(t._delegate,l,e))}get id(){return this._delegate.id}get parent(){return new hf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hf(this.firestore,Nv(this._delegate,e))}catch(t){throw Wo(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ze.m9)(e))instanceof Ls&&uu(this._delegate,e)}set(e,t){t=Oy("DocumentReference.set",t);try{return t?t0(this._delegate,e,t):t0(this._delegate,e)}catch(l){throw Wo(l,"setDoc()","DocumentReference.set()")}}update(e,t,...l){try{return 1===arguments.length?n0(this._delegate,e):n0(this._delegate,e,t,...l)}catch(d){throw Wo(d,"updateDoc()","DocumentReference.update()")}}delete(){return function fE(i){return uf(Mi(i.firestore,Ds),[new Zu(i._key,Ms.none())])}(this._delegate)}onSnapshot(...e){const t=fp(e),l=h0(e,d=>new pp(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Ug(this._delegate,t,l)}get(e){let t;return t="cache"===e?.source?function Ty(i){i=Mi(i,Ls);const e=Mi(i.firestore,Ds),t=qs(e),l=new Yr(e);return function jl(i,e){const t=new fi;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(l=(0,Oe.Z)(function*(d,m,w){try{const O=yield function(G,Q){const ce=Sn(G);return ce.persistence.runTransaction("read document","readonly",Ue=>ce.localDocuments.getDocument(Ue,Q))}(d,m);O.isFoundDocument()?w.resolve(O):O.isNoDocument()?w.resolve(null):w.reject(new qt(Rt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const G=Gh(O,`Failed to get document '${m} from cache`);w.reject(G)}}),function(d,m,w){return l.apply(this,arguments)})(yield dm(i),e,t);var l})),t.promise}(t,i._key).then(d=>new nh(e,l,i._key,d,new lp(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function Ay(i){i=Mi(i,Ls);const e=Mi(i.firestore,Ds);return cy(qs(e),i._key,{source:"server"}).then(t=>jg(e,i,t))}(this._delegate):function Jv(i){i=Mi(i,Ls);const e=Mi(i.firestore,Ds);return cy(qs(e),i._key).then(t=>jg(e,i,t))}(this._delegate),t.then(l=>new pp(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)))}withConverter(e){return new $l(this.firestore,this._delegate.withConverter(e?ja.getInstance(this.firestore,e):null))}}function Wo(i,e,t){return i.message=i.message.replace(e,t),i}function fp(i){for(const e of i)if("object"==typeof e&&!Gg(e))return e;return{}}function h0(i,e){var t,l;let d;return d=Gg(i[0])?i[0]:Gg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{d.next&&d.next(e(m))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(l=d.complete)||void 0===l?void 0:l.bind(d)}}class pp{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return dE(this._delegate,e._delegate)}}class df extends pp{data(e){const t=this._delegate.data(e);return function Dl(i,e){i||en()}(void 0!==t),t}}class Ko{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new hp(e)}where(e,t,l){try{return new Ko(this.firestore,ps(this._delegate,function qv(i,e,t){const l=e,d=ku("where",i);return ym._create(d,l,t)}(e,t,l)))}catch(d){throw Wo(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ko(this.firestore,ps(this._delegate,function Ng(i,e="asc"){const t=e,l=ku("orderBy",i);return kg._create(l,t)}(e,t)))}catch(l){throw Wo(l,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ko(this.firestore,ps(this._delegate,function Yv(i){return fy("limit",i),vm._create("limit",i,"F")}(e)))}catch(t){throw Wo(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ko(this.firestore,ps(this._delegate,function aE(i){return fy("limitToLast",i),vm._create("limitToLast",i,"L")}(e)))}catch(t){throw Wo(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ko(this.firestore,ps(this._delegate,function wm(...i){return Em._create("startAt",i,!0)}(...e)))}catch(t){throw Wo(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ko(this.firestore,ps(this._delegate,function lE(...i){return Em._create("startAfter",i,!1)}(...e)))}catch(t){throw Wo(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ko(this.firestore,ps(this._delegate,function Zv(...i){return Fg._create("endBefore",i,!1)}(...e)))}catch(t){throw Wo(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ko(this.firestore,ps(this._delegate,function lf(...i){return Fg._create("endAt",i,!0)}(...e)))}catch(t){throw Wo(t,"endAt()","Query.endAt()")}}isEqual(e){return pm(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function bm(i){i=Mi(i,Da);const e=Mi(i.firestore,Ds),t=qs(e),l=new Yr(e);return function hm(i,e){const t=new fi;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(l=(0,Oe.Z)(function*(d,m,w){try{const O=yield Uh(d,m,!0),G=new Yh(m,O.ir),Q=G.sc(O.documents),ce=G.applyChanges(Q,!1);w.resolve(ce.snapshot)}catch(O){const G=Gh(O,`Failed to execute query '${m} against cache`);w.reject(G)}}),function(d,m,w){return l.apply(this,arguments)})(yield dm(i),e,t);var l})),t.promise}(t,i._query).then(d=>new cf(e,l,i,d))}(this._delegate):"server"===e?.source?function hE(i){i=Mi(i,Da);const e=Mi(i.firestore,Ds),t=qs(e),l=new Yr(e);return Dg(t,i._query,{source:"server"}).then(d=>new cf(e,l,i,d))}(this._delegate):function e0(i){i=Mi(i,Da);const e=Mi(i.firestore,Ds),t=qs(e),l=new Yr(e);return pc(i._query),Dg(t,i._query).then(d=>new cf(e,l,i,d))}(this._delegate),t.then(l=>new Im(this.firestore,new cf(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)))}onSnapshot(...e){const t=fp(e),l=h0(e,d=>new Im(this.firestore,new cf(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Ug(this._delegate,t,l)}withConverter(e){return new Ko(this.firestore,this._delegate.withConverter(e?ja.getInstance(this.firestore,e):null))}}class Wg{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new df(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Im{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ko(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new df(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Wg(this._firestore,t))}forEach(e,t){this._delegate.forEach(l=>{e.call(t,new df(this._firestore,l))})}isEqual(e){return dE(this._delegate,e._delegate)}}class hf extends Ko{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $l(this.firestore,e):null}doc(e){try{return new $l(this.firestore,void 0===e?fm(this._delegate):fm(this._delegate,e))}catch(t){throw Wo(t,"doc()","CollectionReference.doc()")}}add(e){return function pE(i,e){const t=Mi(i.firestore,Ds),l=fm(i),d=Bg(i.converter,e);return uf(t,[_m(yd(i.firestore),"addDoc",l._key,d,null!==i.converter,{}).toMutation(l._key,Ms.exists(!1))]).then(()=>l)}(this._delegate,e).then(t=>new $l(this.firestore,t))}isEqual(e){return uu(this._delegate,e._delegate)}withConverter(e){return new hf(this.firestore,this._delegate.withConverter(e?ja.getInstance(this.firestore,e):null))}}function oh(i){return Mi(i,Ls)}class Ed{constructor(...e){this._delegate=new Qd(...e)}static documentId(){return new Ed(vs.keyField().canonicalString())}isEqual(e){return(e=(0,ze.m9)(e))instanceof Qd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yE(){return new Rg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lu(e)}static delete(){const e=function l0(){return new Xd("deleteField")}();return e._methodName="FieldValue.delete",new Lu(e)}static arrayUnion(...e){const t=function vE(...i){return new zv("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Lu(t)}static arrayRemove(...e){const t=function EE(...i){return new yy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Lu(t)}static increment(e){const t=function c0(i){return new vy("increment",i)}(e);return t._methodName="FieldValue.increment",new Lu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const f0={Firestore:Fy,GeoPoint:xg,Timestamp:Pi,Blob:Cm,Transaction:li,WriteBatch:Hc,DocumentReference:$l,DocumentSnapshot:pp,Query:Ko,QueryDocumentSnapshot:df,QuerySnapshot:Im,CollectionReference:hf,FieldPath:Ed,FieldValue:Lu,setLogLevel:function Ly(i){!function Qa(i){Uo.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function p0(i){(function Dm(i,e){i.INTERNAL.registerComponent(new qe.wA("firestore-compat",t=>{const l=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(l,d)},"PUBLIC").setServiceProps(Object.assign({},f0)))})(i,(e,t)=>new Fy(e,t,new Ny)),i.registerVersion("@firebase/firestore-compat","0.3.12")}(It.Z);var wd=j(1205),m0=j(6217),Vy=j(9260);function ff(i,e){return function g0(i,e=L.z){return new W.y(t=>{let l;return null!=e?e.schedule(()=>{l=i.onSnapshot({includeMetadataChanges:!0},t)}):l=i.onSnapshot({includeMetadataChanges:!0},t),()=>{l?.()}})}(i,e)}function Kg(i,e){return ff(i,e).pipe((0,De.U)(t=>({payload:t,type:"query"})))}function qg(i,e){return Kg(i,e).pipe((0,$e.O)(void 0),Ie(),(0,De.U)(([t,l])=>{const d=l.payload.docChanges(),m=d.map(w=>({type:w.type,payload:w}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(l.payload.metadata)&&l.payload.docs.forEach((w,O)=>{const G=d.find(ce=>ce.doc.ref.isEqual(w.ref)),Q=t?.payload.docs.find(ce=>ce.ref.isEqual(w.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(w.metadata)||!G&&Q&&JSON.stringify(Q.metadata)===JSON.stringify(w.metadata)||m.push({type:"modified",payload:{oldIndex:O,newIndex:O,type:"modified",doc:w}})}),m}))}function _0(i,e,t){return qg(i,t).pipe((0,ke.R)((l,d)=>function zc(i,e,t){return e.forEach(l=>{t.indexOf(l.type)>-1&&(i=function ah(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return mc(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mc(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mc(i,e.oldIndex,1)}return i}(i,l))}),i}(l,d.map(m=>m.payload),e),[]),(0,Tt.x)(),(0,De.U)(l=>l.map(d=>({type:d.type,payload:d}))))}function mc(i,e,t,...l){const d=i.slice();return d.splice(e,t,...l),d}function fu(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class By{constructor(e,t,l){this.ref=e,this.query=t,this.afs=l}stateChanges(e){let t=qg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,De.U)(l=>l.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,$e.O)(void 0),Ie(),(0,ut.h)(([l,d])=>d.length>0||!l),(0,De.U)(([l,d])=>d),Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ke.R)((t,l)=>[...t,...l],[]))}snapshotChanges(e){const t=fu(e);return _0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Kg(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(t=>t.payload.docs.map(l=>e.idField?Object.assign(Object.assign({},l.data()),{[e.idField]:l.id}):l.data())),Ae.iC)}get(e){return(0,Fe.D)(this.query.get(e)).pipe(Ae.iC)}add(e){return this.ref.add(e)}doc(e){return new Uy(this.ref.doc(e),this.afs)}}class Uy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const l=this.ref.collection(e),{ref:d,query:m}=Hy(l,t);return new By(d,m,this.afs)}snapshotChanges(){return function bE(i,e){return ff(i,e).pipe((0,$e.O)(void 0),Ie(),(0,De.U)(([t,l])=>l.exists?t?.exists?{payload:l,type:"modified"}:{payload:l,type:"added"}:{payload:l,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,De.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Fe.D)(this.ref.get(e)).pipe(Ae.iC)}}class CE{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?qg(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(t=>t.filter(l=>e.indexOf(l.type)>-1)),(0,ut.h)(t=>t.length>0),Ae.iC):qg(this.query,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ke.R)((t,l)=>[...t,...l],[]))}snapshotChanges(e){const t=fu(e);return _0(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Kg(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(l=>l.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),Ae.iC)}get(e){return(0,Fe.D)(this.query.get(e)).pipe(Ae.iC)}}const mp=new _.OlP("angularfire2.enableFirestorePersistence"),pf=new _.OlP("angularfire2.firestore.persistenceSettings"),jy=new _.OlP("angularfire2.firestore.settings"),IE=new _.OlP("angularfire2.firestore.use-emulator");function Hy(i,e=(t=>t)){return{query:e(i),ref:i}}let y0=(()=>{class i{constructor(t,l,d,m,w,O,G,Q,ce,Ue,bt,jt,mn,Mn,Pn,ri,vi){this.schedulers=G;const Br=(0,Ht.on)(t,O,l),Vs=ce;Ue&&(0,wd.nw)(Br,O,bt,mn,Mn,Pn,jt,ri),[this.firestore,this.persistenceEnabled$]=(0,Ht.cc)(`${Br.name}.firestore`,"AngularFirestore",Br.name,()=>{const Ss=O.runOutsideAngular(()=>Br.firestore());if(m&&Ss.settings(m),Vs&&Ss.useEmulator(...Vs),d&&!(0,Kt.PM)(w)){const Es=()=>{try{return(0,Fe.D)(Ss.enablePersistence(Q||void 0).then(()=>!0,()=>!1))}catch(qo){return typeof console<"u"&&console.warn(qo),(0,Ne.of)(!1)}};return[Ss,O.runOutsideAngular(Es)]}return[Ss,(0,Ne.of)(!1)]},[m,Vs,d])}collection(t,l){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:w}=Hy(d,l),O=this.schedulers.ngZone.run(()=>m);return new By(O,w,this)}collectionGroup(t,l){const d=l||(w=>w),m=this.firestore.collectionGroup(t);return new CE(d(m),this)}doc(t){let l;l="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>l);return new Uy(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(_.LFG(Ht.Dh),_.LFG(Ht.xv,8),_.LFG(mp,8),_.LFG(jy,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Ae.HU),_.LFG(pf,8),_.LFG(IE,8),_.LFG(wd.zQ,8),_.LFG(wd.Qv,8),_.LFG(wd.L6,8),_.LFG(wd._Q,8),_.LFG(wd.rT,8),_.LFG(wd.lh,8),_.LFG(wd.f7,8),_.LFG(m0.nm,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),lh=(()=>{class i{constructor(){Vy.Z.registerVersion("angularfire",Ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:mp,useValue:!0},{provide:pf,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[y0]}),i})()},2011:(gn,at,j)=>{j.d(at,{Dh:()=>Ge,GT:()=>Ae,cc:()=>ut,hO:()=>Tt,on:()=>Ie,pX:()=>Ne,xv:()=>Ve});var _=j(4650),L=j(9260),W=j(4976);gn=j.hmd(gn);const Fe=["ngOnDestroy"],Ne=(It,Oe,Ft,qe={})=>new Proxy(It,{get:(Se,ze)=>Ft.runOutsideAngular(()=>{var Bt;if(It[ze])return!(null===(Bt=qe?.spy)||void 0===Bt)&&Bt.get&&qe.spy.get(ze,It[ze]),It[ze];if(Fe.indexOf(ze)>-1)return()=>{};const Ot=Oe.toPromise().then(nt=>{const Ye=nt&&nt[ze];return"function"==typeof Ye?Ye.bind(nt):Ye&&Ye.then?Ye.then(zt=>Ft.run(()=>zt)):Ft.run(()=>Ye)});return new Proxy(()=>{},{get:(nt,Ye)=>Ot[Ye],apply:(nt,Ye,zt)=>Ot.then(xt=>{var kn;const nn=xt&&xt(...zt);return!(null===(kn=qe?.spy)||void 0===kn)&&kn.apply&&qe.spy.apply(ze,zt,nn),nn})})})}),Ae=(It,Oe)=>{Oe.forEach(Ft=>{Object.getOwnPropertyNames(Ft.prototype||Ft).forEach(qe=>{Object.defineProperty(It.prototype,qe,Object.getOwnPropertyDescriptor(Ft.prototype||Ft,qe))})})};class $e{constructor(Oe){return Oe}}const Ge=new _.OlP("angularfire2.app.options"),Ve=new _.OlP("angularfire2.app.name");function Ie(It,Oe,Ft){const Se="object"==typeof Ft&&Ft||{};Se.name=Se.name||"string"==typeof Ft&&Ft||"[DEFAULT]";const Bt=L.Z.apps.filter(Ot=>Ot&&Ot.name===Se.name)[0]||Oe.runOutsideAngular(()=>L.Z.initializeApp(It,Se));try{JSON.stringify(It)!==JSON.stringify(Bt.options)&&De("error",`${Bt.name} Firebase App already initialized with different options${gn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new $e(Bt)}const De=(It,...Oe)=>{(0,_.X6Q)()&&typeof console<"u"&&console[It](...Oe)},ke={provide:$e,useFactory:Ie,deps:[Ge,_.R0b,[new _.FiY,Ve]]};let Tt=(()=>{class It{constructor(Ft){L.Z.registerVersion("angularfire",W.q4.full,"core"),L.Z.registerVersion("angularfire",W.q4.full,"app-compat"),L.Z.registerVersion("angular",_.q4F.full,Ft.toString())}static initializeApp(Ft,qe){return{ngModule:It,providers:[{provide:Ge,useValue:Ft},{provide:Ve,useValue:qe}]}}}return It.\u0275fac=function(Ft){return new(Ft||It)(_.LFG(_.Lbi))},It.\u0275mod=_.oAB({type:It}),It.\u0275inj=_.cJS({providers:[ke]}),It})();function ut(It,Oe,Ft,qe,Se){const[,ze,Bt]=globalThis.\u0275AngularfireInstanceCache.find(Ot=>Ot[0]===It)||[];if(ze)return function Ht(It,Oe){try{return It.toString()===Oe.toString()}catch{return It===Oe}}(Se,Bt)||(pt("error",`${Oe} was already initialized on the ${Ft} Firebase App with different settings.${Kt?" You may need to reload as Firebase is not HMR aware.":""}`),pt("warn",{is:Se,was:Bt})),ze;{const Ot=qe();return globalThis.\u0275AngularfireInstanceCache.push([It,Ot,Se]),Ot}}const Kt=!!gn.hot,pt=(It,...Oe)=>{(0,_.X6Q)()&&typeof console<"u"&&console[It](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(gn,at,j)=>{j.d(at,{q4:()=>ki,iC:()=>wr,fc:()=>ao,HU:()=>yo,vb:()=>_u,JM:()=>Ml});var _=j(4650),L=j(259),W=j(5861),Fe=j(6881),Ne=j(2090),Ae=j(4859),$e=j(1877);const Ge=(x,F)=>F.some(X=>x instanceof X);let Ve,Ie;const Tt=new WeakMap,ut=new WeakMap,Ht=new WeakMap,Kt=new WeakMap,pt=new WeakMap;let Ft={get(x,F,X){if(x instanceof IDBTransaction){if("done"===F)return ut.get(x);if("objectStoreNames"===F)return x.objectStoreNames||Ht.get(x);if("store"===F)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Bt(x[F])},set:(x,F,X)=>(x[F]=X,!0),has:(x,F)=>x instanceof IDBTransaction&&("done"===F||"store"===F)||F in x};function ze(x){return"function"==typeof x?function Se(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ke(){return Ie||(Ie=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...F){return x.apply(Ot(this),F),Bt(Tt.get(this))}:function(...F){return Bt(x.apply(Ot(this),F))}:function(F,...X){const Ce=x.call(Ot(this),F,...X);return Ht.set(Ce,F.sort?F.sort():[F]),Bt(Ce)}}(x):(x instanceof IDBTransaction&&function Oe(x){if(ut.has(x))return;const F=new Promise((X,Ce)=>{const Ke=()=>{x.removeEventListener("complete",ot),x.removeEventListener("error",Dt),x.removeEventListener("abort",Dt)},ot=()=>{X(),Ke()},Dt=()=>{Ce(x.error||new DOMException("AbortError","AbortError")),Ke()};x.addEventListener("complete",ot),x.addEventListener("error",Dt),x.addEventListener("abort",Dt)});ut.set(x,F)}(x),Ge(x,function De(){return Ve||(Ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,Ft):x)}function Bt(x){if(x instanceof IDBRequest)return function It(x){const F=new Promise((X,Ce)=>{const Ke=()=>{x.removeEventListener("success",ot),x.removeEventListener("error",Dt)},ot=()=>{X(Bt(x.result)),Ke()},Dt=()=>{Ce(x.error),Ke()};x.addEventListener("success",ot),x.addEventListener("error",Dt)});return F.then(X=>{X instanceof IDBCursor&&Tt.set(X,x)}).catch(()=>{}),pt.set(F,x),F}(x);if(Kt.has(x))return Kt.get(x);const F=ze(x);return F!==x&&(Kt.set(x,F),pt.set(F,x)),F}const Ot=x=>pt.get(x),zt=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],kn=new Map;function nn(x,F){if(!(x instanceof IDBDatabase)||F in x||"string"!=typeof F)return;if(kn.get(F))return kn.get(F);const X=F.replace(/FromIndex$/,""),Ce=F!==X,Ke=xt.includes(X);if(!(X in(Ce?IDBIndex:IDBObjectStore).prototype)||!Ke&&!zt.includes(X))return;const ot=function(){var Dt=(0,W.Z)(function*(yn,...bn){const Zn=this.transaction(yn,Ke?"readwrite":"readonly");let Ir=Zn.store;return Ce&&(Ir=Ir.index(bn.shift())),(yield Promise.all([Ir[X](...bn),Ke&&Zn.done]))[0]});return function(bn){return Dt.apply(this,arguments)}}();return kn.set(F,ot),ot}!function qe(x){Ft=x(Ft)}(x=>({...x,get:(F,X,Ce)=>nn(F,X)||x.get(F,X,Ce),has:(F,X)=>!!nn(F,X)||x.has(F,X)}));const Mr="@firebase/installations",_e="0.6.4",Kn=1e4,Qn=`w:${_e}`,Ze="FIS_v2",lt="https://firebaseinstallations.googleapis.com/v1",st=36e5,ln=new Ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $t(x){return x instanceof Ne.ZR&&x.code.includes("request-failed")}function Ln({projectId:x}){return`${lt}/projects/${x}/installations`}function Cn(x){return{token:x.token,requestStatus:2,expiresIn:or(x.expiresIn),creationTime:Date.now()}}function zn(x,F){return cr.apply(this,arguments)}function cr(){return(cr=(0,W.Z)(function*(x,F){const Ce=(yield F.json()).error;return ln.create("request-failed",{requestName:x,serverCode:Ce.code,serverMessage:Ce.message,serverStatus:Ce.status})})).apply(this,arguments)}function sr({apiKey:x}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x})}function ur(x){return qn.apply(this,arguments)}function qn(){return(qn=(0,W.Z)(function*(x){const F=yield x();return F.status>=500&&F.status<600?x():F})).apply(this,arguments)}function or(x){return Number(x.replace("s","000"))}function on(){return(on=(0,W.Z)(function*({appConfig:x,heartbeatServiceProvider:F},{fid:X}){const Ce=Ln(x),Ke=sr(x),ot=F.getImmediate({optional:!0});if(ot){const Zn=yield ot.getHeartbeatsHeader();Zn&&Ke.append("x-firebase-client",Zn)}const yn={method:"POST",headers:Ke,body:JSON.stringify({fid:X,authVersion:Ze,appId:x.appId,sdkVersion:Qn})},bn=yield ur(()=>fetch(Ce,yn));if(bn.ok){const Zn=yield bn.json();return{fid:Zn.fid||X,registrationStatus:2,refreshToken:Zn.refreshToken,authToken:Cn(Zn.authToken)}}throw yield zn("Create Installation",bn)})).apply(this,arguments)}function Cr(x){return new Promise(F=>{setTimeout(F,x)})}const jr=/^[cdef][\w-]{21}$/,ci="";function Ri(){try{const x=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(x),x[0]=112+x[0]%16;const X=function er(x){return function Li(x){return btoa(String.fromCharCode(...x)).replace(/\+/g,"-").replace(/\//g,"_")}(x).substr(0,22)}(x);return jr.test(X)?X:ci}catch{return ci}}function ir(x){return`${x.appName}!${x.appId}`}const cn=new Map;function un(x,F){const X=ir(x);An(X,F),function Fr(x,F){const X=function zr(){return!Hr&&"BroadcastChannel"in self&&(Hr=new BroadcastChannel("[Firebase] FID Change"),Hr.onmessage=x=>{An(x.data.key,x.data.fid)}),Hr}();X&&X.postMessage({key:x,fid:F}),function gt(){0===cn.size&&Hr&&(Hr.close(),Hr=null)}()}(X,F)}function An(x,F){const X=cn.get(x);if(X)for(const Ce of X)Ce(F)}let Hr=null;const _n="firebase-installations-database",je=1,At="firebase-installations-store";let an=null;function xn(){return an||(an=function nt(x,F,{blocked:X,upgrade:Ce,blocking:Ke,terminated:ot}={}){const Dt=indexedDB.open(x,F),yn=Bt(Dt);return Ce&&Dt.addEventListener("upgradeneeded",bn=>{Ce(Bt(Dt.result),bn.oldVersion,bn.newVersion,Bt(Dt.transaction))}),X&&Dt.addEventListener("blocked",()=>X()),yn.then(bn=>{ot&&bn.addEventListener("close",()=>ot()),Ke&&bn.addEventListener("versionchange",()=>Ke())}).catch(()=>{}),yn}(_n,je,{upgrade:(x,F)=>{0===F&&x.createObjectStore(At)}})),an}function Et(x,F){return de.apply(this,arguments)}function de(){return(de=(0,W.Z)(function*(x,F){const X=ir(x),Ke=(yield xn()).transaction(At,"readwrite"),ot=Ke.objectStore(At),Dt=yield ot.get(X);return yield ot.put(F,X),yield Ke.done,(!Dt||Dt.fid!==F.fid)&&un(x,F.fid),F})).apply(this,arguments)}function te(x){return le.apply(this,arguments)}function le(){return(le=(0,W.Z)(function*(x){const F=ir(x),Ce=(yield xn()).transaction(At,"readwrite");yield Ce.objectStore(At).delete(F),yield Ce.done})).apply(this,arguments)}function ct(x,F){return vt.apply(this,arguments)}function vt(){return(vt=(0,W.Z)(function*(x,F){const X=ir(x),Ke=(yield xn()).transaction(At,"readwrite"),ot=Ke.objectStore(At),Dt=yield ot.get(X),yn=F(Dt);return void 0===yn?yield ot.delete(X):yield ot.put(yn,X),yield Ke.done,yn&&(!Dt||Dt.fid!==yn.fid)&&un(x,yn.fid),yn})).apply(this,arguments)}function ve(x){return be.apply(this,arguments)}function be(){return be=(0,W.Z)(function*(x){let F;const X=yield ct(x.appConfig,Ce=>{const Ke=function He(x){return Re(x||{fid:Ri(),registrationStatus:0})}(Ce),ot=function we(x,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(ln.create("app-offline"))};const X={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},Ce=function re(x,F){return ye.apply(this,arguments)}(x,X);return{installationEntry:X,registrationPromise:Ce}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:pe(x)}:{installationEntry:F}}(x,Ke);return F=ot.registrationPromise,ot.installationEntry});return X.fid===ci?{installationEntry:yield F}:{installationEntry:X,registrationPromise:F}}),be.apply(this,arguments)}function ye(){return ye=(0,W.Z)(function*(x,F){try{const X=yield function Tn(x,F){return on.apply(this,arguments)}(x,F);return Et(x.appConfig,X)}catch(X){throw $t(X)&&409===X.customData.serverCode?yield te(x.appConfig):yield Et(x.appConfig,{fid:F.fid,registrationStatus:0}),X}}),ye.apply(this,arguments)}function pe(x){return he.apply(this,arguments)}function he(){return(he=(0,W.Z)(function*(x){let F=yield oe(x.appConfig);for(;1===F.registrationStatus;)yield Cr(100),F=yield oe(x.appConfig);if(0===F.registrationStatus){const{installationEntry:X,registrationPromise:Ce}=yield ve(x);return Ce||X}return F})).apply(this,arguments)}function oe(x){return ct(x,F=>{if(!F)throw ln.create("installation-not-found");return Re(F)})}function Re(x){return function rt(x){return 1===x.registrationStatus&&x.registrationTime+Kn<Date.now()}(x)?{fid:x.fid,registrationStatus:0}:x}function vn(){return(vn=(0,W.Z)(function*({appConfig:x,heartbeatServiceProvider:F},X){const Ce=function _r(x,{fid:F}){return`${Ln(x)}/${F}/authTokens:generate`}(x,X),Ke=function Dn(x,{refreshToken:F}){const X=sr(x);return X.append("Authorization",function Dr(x){return`${Ze} ${x}`}(F)),X}(x,X),ot=F.getImmediate({optional:!0});if(ot){const Zn=yield ot.getHeartbeatsHeader();Zn&&Ke.append("x-firebase-client",Zn)}const yn={method:"POST",headers:Ke,body:JSON.stringify({installation:{sdkVersion:Qn,appId:x.appId}})},bn=yield ur(()=>fetch(Ce,yn));if(bn.ok)return Cn(yield bn.json());throw yield zn("Generate Auth Token",bn)})).apply(this,arguments)}function ii(x){return Wi.apply(this,arguments)}function Wi(){return Wi=(0,W.Z)(function*(x,F=!1){let X;const Ce=yield ct(x.appConfig,ot=>{if(!tr(ot))throw ln.create("not-registered");const Dt=ot.authToken;if(!F&&function En(x){return 2===x.requestStatus&&!function Sr(x){const F=Date.now();return F<x.creationTime||x.creationTime+x.expiresIn<F+st}(x)}(Dt))return ot;if(1===Dt.requestStatus)return X=function ht(x,F){return mt.apply(this,arguments)}(x,F),ot;{if(!navigator.onLine)throw ln.create("app-offline");const yn=function Rr(x){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},x),{authToken:F})}(ot);return X=function Nn(x,F){return Bn.apply(this,arguments)}(x,yn),yn}});return X?yield X:Ce.authToken}),Wi.apply(this,arguments)}function mt(){return(mt=(0,W.Z)(function*(x,F){let X=yield Qt(x.appConfig);for(;1===X.authToken.requestStatus;)yield Cr(100),X=yield Qt(x.appConfig);const Ce=X.authToken;return 0===Ce.requestStatus?ii(x,F):Ce})).apply(this,arguments)}function Qt(x){return ct(x,F=>{if(!tr(F))throw ln.create("not-registered");return function $r(x){return 1===x.requestStatus&&x.requestTime+Kn<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function Bn(){return Bn=(0,W.Z)(function*(x,F){try{const X=yield function Ut(x,F){return vn.apply(this,arguments)}(x,F),Ce=Object.assign(Object.assign({},F),{authToken:X});return yield Et(x.appConfig,Ce),X}catch(X){if(!$t(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const Ce=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Et(x.appConfig,Ce)}else yield te(x.appConfig);throw X}}),Bn.apply(this,arguments)}function tr(x){return void 0!==x&&2===x.registrationStatus}function aa(){return(aa=(0,W.Z)(function*(x){const F=x,{installationEntry:X,registrationPromise:Ce}=yield ve(F);return Ce?Ce.catch(console.error):ii(F).catch(console.error),X.fid})).apply(this,arguments)}function xo(){return xo=(0,W.Z)(function*(x,F=!1){const X=x;return yield function Bi(x){return hn.apply(this,arguments)}(X),(yield ii(X,F)).token}),xo.apply(this,arguments)}function hn(){return(hn=(0,W.Z)(function*(x){const{registrationPromise:F}=yield ve(x);F&&(yield F)})).apply(this,arguments)}function Xr(x){return ln.create("missing-app-config-values",{valueName:x})}const nr="installations",lo=x=>{const F=x.getProvider("app").getImmediate(),X=function Ts(x){if(!x||!x.options)throw Xr("App Configuration");if(!x.name)throw Xr("App Name");const F=["projectId","apiKey","appId"];for(const X of F)if(!x.options[X])throw Xr(X);return{appName:x.name,projectId:x.options.projectId,apiKey:x.options.apiKey,appId:x.options.appId}}(F);return{app:F,appConfig:X,heartbeatServiceProvider:(0,Fe._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},As=x=>{const F=x.getProvider("app").getImmediate(),X=(0,Fe._getProvider)(F,nr).getImmediate();return{getId:()=>function Ti(x){return aa.apply(this,arguments)}(X),getToken:Ke=>function Ao(x){return xo.apply(this,arguments)}(X,Ke)}};(function Zs(){(0,Fe._registerComponent)(new Ae.wA(nr,lo,"PUBLIC")),(0,Fe._registerComponent)(new Ae.wA("installations-internal",As,"PRIVATE"))})(),(0,Fe.registerVersion)(Mr,_e),(0,Fe.registerVersion)(Mr,_e,"esm2017");const Vr="@firebase/remote-config",Ei=new Ne.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class es{constructor(F,X,Ce,Ke){this.client=F,this.storage=X,this.storageCache=Ce,this.logger=Ke}isCachedDataFresh(F,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ce=Date.now()-X,Ke=Ce<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Ke}.`),Ke}fetch(F){var X=this;return(0,W.Z)(function*(){const[Ce,Ke]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if(Ke&&X.isCachedDataFresh(F.cacheMaxAgeMillis,Ce))return Ke;F.eTag=Ke&&Ke.eTag;const ot=yield X.client.fetch(F),Dt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ot.status&&Dt.push(X.storage.setLastSuccessfulFetchResponse(ot)),yield Promise.all(Dt),ot})()}}function Ro(x=navigator){return x.languages&&x.languages[0]||x.language}class Us{constructor(F,X,Ce,Ke,ot,Dt){this.firebaseInstallations=F,this.sdkVersion=X,this.namespace=Ce,this.projectId=Ke,this.apiKey=ot,this.appId=Dt}fetch(F){var X=this;return(0,W.Z)(function*(){const[Ce,Ke]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),Dt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,yn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},bn={sdk_version:X.sdkVersion,app_instance_id:Ce,app_instance_id_token:Ke,app_id:X.appId,language_code:Ro()},Zn={method:"POST",headers:yn,body:JSON.stringify(bn)},Ir=fetch(Dt,Zn),Or=new Promise((nl,va)=>{F.signal.addEventListener(()=>{const ic=new Error("The operation was aborted.");ic.name="AbortError",va(ic)})});let $o;try{yield Promise.race([Ir,Or]),$o=yield Ir}catch(nl){let va="fetch-client-network";throw"AbortError"===nl?.name&&(va="fetch-timeout"),Ei.create(va,{originalErrorMessage:nl?.message})}let yi=$o.status;const Jc=$o.headers.get("ETag")||void 0;let Ji,Go;if(200===$o.status){let nl;try{nl=yield $o.json()}catch(va){throw Ei.create("fetch-client-parse",{originalErrorMessage:va?.message})}Ji=nl.entries,Go=nl.state}if("INSTANCE_STATE_UNSPECIFIED"===Go?yi=500:"NO_CHANGE"===Go?yi=304:("NO_TEMPLATE"===Go||"EMPTY_CONFIG"===Go)&&(Ji={}),304!==yi&&200!==yi)throw Ei.create("fetch-status",{httpStatus:yi});return{status:yi,eTag:Jc,config:Ji}})()}}class Cl{constructor(F,X){this.client=F,this.storage=X}fetch(F){var X=this;return(0,W.Z)(function*(){const Ce=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(F,Ce)})()}attemptFetch(F,{throttleEndTimeMillis:X,backoffCount:Ce}){var Ke=this;return(0,W.Z)(function*(){yield function Ta(x,F){return new Promise((X,Ce)=>{const Ke=Math.max(F-Date.now(),0),ot=setTimeout(X,Ke);x.addEventListener(()=>{clearTimeout(ot),Ce(Ei.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,X);try{const ot=yield Ke.client.fetch(F);return yield Ke.storage.deleteThrottleMetadata(),ot}catch(ot){if(!function gs(x){if(!(x instanceof Ne.ZR&&x.customData))return!1;const F=Number(x.customData.httpStatus);return 429===F||500===F||503===F||504===F}(ot))throw ot;const Dt={throttleEndTimeMillis:Date.now()+(0,Ne.$s)(Ce),backoffCount:Ce+1};return yield Ke.storage.setThrottleMetadata(Dt),Ke.attemptFetch(F,Dt)}})()}}class xa{constructor(F,X,Ce,Ke,ot){this.app=F,this._client=X,this._storageCache=Ce,this._storage=Ke,this._logger=ot,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function js(x,F){const X=x.target.error||void 0;return Ei.create(F,{originalErrorMessage:X&&X?.message})}const qi="app_namespace_store";class Ii{constructor(F,X,Ce,Ke=function wo(){return new Promise((x,F)=>{try{const X=indexedDB.open("firebase_remote_config",1);X.onerror=Ce=>{F(js(Ce,"storage-open"))},X.onsuccess=Ce=>{x(Ce.target.result)},X.onupgradeneeded=Ce=>{0===Ce.oldVersion&&Ce.target.result.createObjectStore(qi,{keyPath:"compositeKey"})}}catch(X){F(Ei.create("storage-open",{originalErrorMessage:X?.message}))}})}()){this.appId=F,this.appName=X,this.namespace=Ce,this.openDbPromise=Ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var X=this;return(0,W.Z)(function*(){const Ce=yield X.openDbPromise;return new Promise((Ke,ot)=>{const yn=Ce.transaction([qi],"readonly").objectStore(qi),bn=X.createCompositeKey(F);try{const Zn=yn.get(bn);Zn.onerror=Ir=>{ot(js(Ir,"storage-get"))},Zn.onsuccess=Ir=>{const Or=Ir.target.result;Ke(Or?Or.value:void 0)}}catch(Zn){ot(Ei.create("storage-get",{originalErrorMessage:Zn?.message}))}})})()}set(F,X){var Ce=this;return(0,W.Z)(function*(){const Ke=yield Ce.openDbPromise;return new Promise((ot,Dt)=>{const bn=Ke.transaction([qi],"readwrite").objectStore(qi),Zn=Ce.createCompositeKey(F);try{const Ir=bn.put({compositeKey:Zn,value:X});Ir.onerror=Or=>{Dt(js(Or,"storage-set"))},Ir.onsuccess=()=>{ot()}}catch(Ir){Dt(Ei.create("storage-set",{originalErrorMessage:Ir?.message}))}})})()}delete(F){var X=this;return(0,W.Z)(function*(){const Ce=yield X.openDbPromise;return new Promise((Ke,ot)=>{const yn=Ce.transaction([qi],"readwrite").objectStore(qi),bn=X.createCompositeKey(F);try{const Zn=yn.delete(bn);Zn.onerror=Ir=>{ot(js(Ir,"storage-delete"))},Zn.onsuccess=()=>{Ke()}}catch(Zn){ot(Ei.create("storage-delete",{originalErrorMessage:Zn?.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class la{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,W.Z)(function*(){const X=F.storage.getLastFetchStatus(),Ce=F.storage.getLastSuccessfulFetchTimestampMillis(),Ke=F.storage.getActiveConfig(),ot=yield X;ot&&(F.lastFetchStatus=ot);const Dt=yield Ce;Dt&&(F.lastSuccessfulFetchTimestampMillis=Dt);const yn=yield Ke;yn&&(F.activeConfig=yn)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function Po(){return ca.apply(this,arguments)}function ca(){return(ca=(0,W.Z)(function*(){if(!(0,Ne.hl)())return!1;try{return yield(0,Ne.eu)()}catch{return!1}})).apply(this,arguments)}!function cs(){(0,Fe._registerComponent)(new Ae.wA("remote-config",function x(F,{instanceIdentifier:X}){const Ce=F.getProvider("app").getImmediate(),Ke=F.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ei.create("registration-window");if(!(0,Ne.hl)())throw Ei.create("indexed-db-unavailable");const{projectId:ot,apiKey:Dt,appId:yn}=Ce.options;if(!ot)throw Ei.create("registration-project-id");if(!Dt)throw Ei.create("registration-api-key");if(!yn)throw Ei.create("registration-app-id");const bn=new Ii(yn,Ce.name,X=X||"firebase"),Zn=new la(bn),Ir=new $e.Yd(Vr);Ir.logLevel=$e.in.ERROR;const Or=new Us(Ke,Fe.SDK_VERSION,X,ot,Dt,yn),$o=new Cl(Or,bn),yi=new es($o,bn,Zn,Ir),Jc=new xa(Ce,yi,Zn,bn,Ir);return function lr(x){const F=(0,Ne.m9)(x);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(Jc),Jc},"PUBLIC").setMultipleInstances(!0)),(0,Fe.registerVersion)(Vr,"0.4.4"),(0,Fe.registerVersion)(Vr,"0.4.4","esm2017")}();const $a=(x,F)=>F.some(X=>x instanceof X);let ua,zs;const Ga=new WeakMap,ha=new WeakMap,os=new WeakMap,Yi=new WeakMap,Ee=new WeakMap;let Y={get(x,F,X){if(x instanceof IDBTransaction){if("done"===F)return ha.get(x);if("objectStoreNames"===F)return x.objectStoreNames||os.get(x);if("store"===F)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return Xt(x[F])},set:(x,F,X)=>(x[F]=X,!0),has:(x,F)=>x instanceof IDBTransaction&&("done"===F||"store"===F)||F in x};function Mt(x){return"function"==typeof x?function Be(x){return x!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function bo(){return zs||(zs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(x)?function(...F){return x.apply(Jt(this),F),Xt(Ga.get(this))}:function(...F){return Xt(x.apply(Jt(this),F))}:function(F,...X){const Ce=x.call(Jt(this),F,...X);return os.set(Ce,F.sort?F.sort():[F]),Xt(Ce)}}(x):(x instanceof IDBTransaction&&function R(x){if(ha.has(x))return;const F=new Promise((X,Ce)=>{const Ke=()=>{x.removeEventListener("complete",ot),x.removeEventListener("error",Dt),x.removeEventListener("abort",Dt)},ot=()=>{X(),Ke()},Dt=()=>{Ce(x.error||new DOMException("AbortError","AbortError")),Ke()};x.addEventListener("complete",ot),x.addEventListener("error",Dt),x.addEventListener("abort",Dt)});ha.set(x,F)}(x),$a(x,function da(){return ua||(ua=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(x,Y):x)}function Xt(x){if(x instanceof IDBRequest)return function V(x){const F=new Promise((X,Ce)=>{const Ke=()=>{x.removeEventListener("success",ot),x.removeEventListener("error",Dt)},ot=()=>{X(Xt(x.result)),Ke()},Dt=()=>{Ce(x.error),Ke()};x.addEventListener("success",ot),x.addEventListener("error",Dt)});return F.then(X=>{X instanceof IDBCursor&&Ga.set(X,x)}).catch(()=>{}),Ee.set(F,x),F}(x);if(Yi.has(x))return Yi.get(x);const F=Mt(x);return F!==x&&(Yi.set(x,F),Ee.set(F,x)),F}const Jt=x=>Ee.get(x);function Fn(x,F,{blocked:X,upgrade:Ce,blocking:Ke,terminated:ot}={}){const Dt=indexedDB.open(x,F),yn=Xt(Dt);return Ce&&Dt.addEventListener("upgradeneeded",bn=>{Ce(Xt(Dt.result),bn.oldVersion,bn.newVersion,Xt(Dt.transaction))}),X&&Dt.addEventListener("blocked",()=>X()),yn.then(bn=>{ot&&bn.addEventListener("close",()=>ot()),Ke&&bn.addEventListener("versionchange",()=>Ke())}).catch(()=>{}),yn}function Un(x,{blocked:F}={}){const X=indexedDB.deleteDatabase(x);return F&&X.addEventListener("blocked",()=>F()),Xt(X).then(()=>{})}const Pr=["get","getKey","getAll","getAllKeys","count"],ji=["put","add","delete","clear"],wi=new Map;function Hi(x,F){if(!(x instanceof IDBDatabase)||F in x||"string"!=typeof F)return;if(wi.get(F))return wi.get(F);const X=F.replace(/FromIndex$/,""),Ce=F!==X,Ke=ji.includes(X);if(!(X in(Ce?IDBIndex:IDBObjectStore).prototype)||!Ke&&!Pr.includes(X))return;const ot=function(){var Dt=(0,W.Z)(function*(yn,...bn){const Zn=this.transaction(yn,Ke?"readwrite":"readonly");let Ir=Zn.store;return Ce&&(Ir=Ir.index(bn.shift())),(yield Promise.all([Ir[X](...bn),Ke&&Zn.done]))[0]});return function(bn){return Dt.apply(this,arguments)}}();return wi.set(F,ot),ot}!function me(x){Y=x(Y)}(x=>({...x,get:(F,X,Ce)=>Hi(F,X)||x.get(F,X,Ce),has:(F,X)=>!!Hi(F,X)||x.has(F,X)}));const Vn="/firebase-messaging-sw.js",ui="/firebase-cloud-messaging-push-scope",q="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",z="https://fcmregistrations.googleapis.com/v1",H="google.c.a.c_id",fe="google.c.a.c_l",Lt="google.c.a.ts",On="google.c.a.e";var Pt=(()=>{return(x=Pt||(Pt={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",Pt;var x})();function Er(x){const F=new Uint8Array(x);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ko(x){const X=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ce=atob(X),Ke=new Uint8Array(Ce.length);for(let ot=0;ot<Ce.length;++ot)Ke[ot]=Ce.charCodeAt(ot);return Ke}const No="fcm_token_details_db",Zi=5,Wa="fcm_token_object_Store";function eo(){return eo=(0,W.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ot=>ot.name).includes(No))return null;let F=null;return(yield Fn(No,Zi,{upgrade:(Ce=(0,W.Z)(function*(Ke,ot,Dt,yn){var bn;if(ot<2||!Ke.objectStoreNames.contains(Wa))return;const Zn=yn.objectStore(Wa),Ir=yield Zn.index("fcmSenderId").get(x);if(yield Zn.clear(),Ir)if(2===ot){const Or=Ir;if(!Or.auth||!Or.p256dh||!Or.endpoint)return;F={token:Or.fcmToken,createTime:null!==(bn=Or.createTime)&&void 0!==bn?bn:Date.now(),subscriptionOptions:{auth:Or.auth,p256dh:Or.p256dh,endpoint:Or.endpoint,swScope:Or.swScope,vapidKey:"string"==typeof Or.vapidKey?Or.vapidKey:Er(Or.vapidKey)}}}else if(3===ot){const Or=Ir;F={token:Or.fcmToken,createTime:Or.createTime,subscriptionOptions:{auth:Er(Or.auth),p256dh:Er(Or.p256dh),endpoint:Or.endpoint,swScope:Or.swScope,vapidKey:Er(Or.vapidKey)}}}else if(4===ot){const Or=Ir;F={token:Or.fcmToken,createTime:Or.createTime,subscriptionOptions:{auth:Er(Or.auth),p256dh:Er(Or.p256dh),endpoint:Or.endpoint,swScope:Or.swScope,vapidKey:Er(Or.vapidKey)}}}}),function(ot,Dt,yn,bn){return Ce.apply(this,arguments)})})).close(),yield Un(No),yield Un("fcm_vapid_details_db"),yield Un("undefined"),function Zo(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:F}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}(F)?F:null;var Ce}),eo.apply(this,arguments)}const vc="firebase-messaging-database",Cd=1,fa="firebase-messaging-store";let dl=null;function ts(){return dl||(dl=Fn(vc,Cd,{upgrade:(x,F)=>{0===F&&x.createObjectStore(fa)}})),dl}function to(x){return Fo.apply(this,arguments)}function Fo(){return Fo=(0,W.Z)(function*(x){const F=Kl(x),Ce=yield(yield ts()).transaction(fa).objectStore(fa).get(F);if(Ce)return Ce;{const Ke=yield function ul(x){return eo.apply(this,arguments)}(x.appConfig.senderId);if(Ke)return yield Co(x,Ke),Ke}}),Fo.apply(this,arguments)}function Co(x,F){return uo.apply(this,arguments)}function uo(){return(uo=(0,W.Z)(function*(x,F){const X=Kl(x),Ke=(yield ts()).transaction(fa,"readwrite");return yield Ke.objectStore(fa).put(F,X),yield Ke.done,F})).apply(this,arguments)}function pa(){return(pa=(0,W.Z)(function*(x){const F=Kl(x),Ce=(yield ts()).transaction(fa,"readwrite");yield Ce.objectStore(fa).delete(F),yield Ce.done})).apply(this,arguments)}function Kl({appConfig:x}){return x.appId}const _s=new Ne.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function hl(x,F){return qa.apply(this,arguments)}function qa(){return(qa=(0,W.Z)(function*(x,F){const X=yield no(x),Ce=Gc(F),Ke={method:"POST",headers:X,body:JSON.stringify(Ce)};let ot;try{ot=yield(yield fetch(Ya(x.appConfig),Ke)).json()}catch(Dt){throw _s.create("token-subscribe-failed",{errorInfo:Dt?.toString()})}if(ot.error)throw _s.create("token-subscribe-failed",{errorInfo:ot.error.message});if(!ot.token)throw _s.create("token-subscribe-no-token");return ot.token})).apply(this,arguments)}function $c(){return($c=(0,W.Z)(function*(x,F){const X=yield no(x),Ce=Gc(F.subscriptionOptions),Ke={method:"PATCH",headers:X,body:JSON.stringify(Ce)};let ot;try{ot=yield(yield fetch(`${Ya(x.appConfig)}/${F.token}`,Ke)).json()}catch(Dt){throw _s.create("token-update-failed",{errorInfo:Dt?.toString()})}if(ot.error)throw _s.create("token-update-failed",{errorInfo:ot.error.message});if(!ot.token)throw _s.create("token-update-no-token");return ot.token})).apply(this,arguments)}function Lo(x,F){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,W.Z)(function*(x,F){const Ce={method:"DELETE",headers:yield no(x)};try{const ot=yield(yield fetch(`${Ya(x.appConfig)}/${F}`,Ce)).json();if(ot.error)throw _s.create("token-unsubscribe-failed",{errorInfo:ot.error.message})}catch(Ke){throw _s.create("token-unsubscribe-failed",{errorInfo:Ke?.toString()})}})).apply(this,arguments)}function Ya({projectId:x}){return`${z}/projects/${x}/registrations`}function no(x){return Za.apply(this,arguments)}function Za(){return(Za=(0,W.Z)(function*({appConfig:x,installations:F}){const X=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function Gc({p256dh:x,auth:F,endpoint:X,vapidKey:Ce}){const Ke={web:{endpoint:X,auth:F,p256dh:x}};return Ce!==q&&(Ke.web.applicationPubKey=Ce),Ke}const ql=6048e5;function Io(){return Io=(0,W.Z)(function*(x){const F=yield function wc(x,F){return bi.apply(this,arguments)}(x.swRegistration,x.vapidKey),X={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:F.endpoint,auth:Er(F.getKey("auth")),p256dh:Er(F.getKey("p256dh"))},Ce=yield to(x.firebaseDependencies);if(Ce){if(function Ps(x,F){return F.vapidKey===x.vapidKey&&F.endpoint===x.endpoint&&F.auth===x.auth&&F.p256dh===x.p256dh}(Ce.subscriptionOptions,X))return Date.now()>=Ce.createTime+ql?function Gi(x,F){return Qo.apply(this,arguments)}(x,{token:Ce.token,createTime:Date.now(),subscriptionOptions:X}):Ce.token;try{yield Lo(x.firebaseDependencies,Ce.token)}catch(Ke){console.warn(Ke)}return Yl(x.firebaseDependencies,X)}return Yl(x.firebaseDependencies,X)}),Io.apply(this,arguments)}function $s(){return $s=(0,W.Z)(function*(x){const F=yield to(x.firebaseDependencies);F&&(yield Lo(x.firebaseDependencies,F.token),yield function Ka(x){return pa.apply(this,arguments)}(x.firebaseDependencies));const X=yield x.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()}),$s.apply(this,arguments)}function Qo(){return Qo=(0,W.Z)(function*(x,F){try{const X=yield function fl(x,F){return $c.apply(this,arguments)}(x.firebaseDependencies,F),Ce=Object.assign(Object.assign({},F),{token:X,createTime:Date.now()});return yield Co(x.firebaseDependencies,Ce),X}catch(X){throw yield function Di(x){return $s.apply(this,arguments)}(x),X}}),Qo.apply(this,arguments)}function Yl(x,F){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,W.Z)(function*(x,F){const Ce={token:yield hl(x,F),createTime:Date.now(),subscriptionOptions:F};return yield Co(x,Ce),Ce.token})).apply(this,arguments)}function bi(){return(bi=(0,W.Z)(function*(x,F){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ko(F)})})).apply(this,arguments)}function Xo(x){const F={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function ho(x,F){if(!F.notification)return;x.notification={};const X=F.notification.title;X&&(x.notification.title=X);const Ce=F.notification.body;Ce&&(x.notification.body=Ce);const Ke=F.notification.image;Ke&&(x.notification.image=Ke);const ot=F.notification.icon;ot&&(x.notification.icon=ot)}(F,x),function fo(x,F){F.data&&(x.data=F.data)}(F,x),function k(x,F){var X,Ce,Ke,ot,Dt;if(!(F.fcmOptions||null!==(X=F.notification)&&void 0!==X&&X.click_action))return;x.fcmOptions={};const yn=null!==(Ke=null===(Ce=F.fcmOptions)||void 0===Ce?void 0:Ce.link)&&void 0!==Ke?Ke:null===(ot=F.notification)||void 0===ot?void 0:ot.click_action;yn&&(x.fcmOptions.link=yn);const bn=null===(Dt=F.fcmOptions)||void 0===Dt?void 0:Dt.analytics_label;bn&&(x.fcmOptions.analyticsLabel=bn)}(F,x),F}function U(x,F){const X=[];for(let Ce=0;Ce<x.length;Ce++)X.push(x.charAt(Ce)),Ce<F.length&&X.push(F.charAt(Ce));return X.join("")}function xe(x){return _s.create("missing-app-config-values",{valueName:x})}U("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),U("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wt{constructor(F,X,Ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ke=function ae(x){if(!x||!x.options)throw xe("App Configuration Object");if(!x.name)throw xe("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:X}=x;for(const Ce of F)if(!X[Ce])throw xe(Ce);return{appName:x.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:Ke,installations:X,analyticsProvider:Ce}}_delete(){return Promise.resolve()}}function kt(x){return jn.apply(this,arguments)}function jn(){return(jn=(0,W.Z)(function*(x){try{x.swRegistration=yield navigator.serviceWorker.register(Vn,{scope:ui}),x.swRegistration.update().catch(()=>{})}catch(F){throw _s.create("failed-service-worker-registration",{browserErrorMessage:F?.message})}})).apply(this,arguments)}function Jr(){return(Jr=(0,W.Z)(function*(x,F){if(!F&&!x.swRegistration&&(yield kt(x)),F||!x.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw _s.create("invalid-sw-registration");x.swRegistration=F}})).apply(this,arguments)}function Yn(){return(Yn=(0,W.Z)(function*(x,F){F?x.vapidKey=F:x.vapidKey||(x.vapidKey=q)})).apply(this,arguments)}function di(){return di=(0,W.Z)(function*(x,F){if(!navigator)throw _s.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw _s.create("permission-blocked");return yield function Nr(x,F){return Yn.apply(this,arguments)}(x,F?.vapidKey),yield function _i(x,F){return Jr.apply(this,arguments)}(x,F?.serviceWorkerRegistration),function Wc(x){return Io.apply(this,arguments)}(x)}),di.apply(this,arguments)}function Vo(){return(Vo=(0,W.Z)(function*(x,F,X){const Ce=function po(x){switch(x){case Pt.NOTIFICATION_CLICKED:return"notification_open";case Pt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(F);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(Ce,{message_id:X[H],message_name:X[fe],message_time:X[Lt],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ys(){return ys=(0,W.Z)(function*(x,F){const X=F.data;if(!X.isFirebaseMessaging)return;x.onMessageHandler&&X.messageType===Pt.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Xo(X)):x.onMessageHandler.next(Xo(X)));const Ce=X.data;(function J(x){return"object"==typeof x&&!!x&&H in x})(Ce)&&"1"===Ce[On]&&(yield function us(x,F,X){return Vo.apply(this,arguments)}(x,X.messageType,Ce))}),ys.apply(this,arguments)}const ro="@firebase/messaging",Bo=x=>{const F=new wt(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function ma(x,F){return ys.apply(this,arguments)}(F,X)),F},Il=x=>{const F=x.getProvider("messaging").getImmediate();return{getToken:Ce=>function Oi(x,F){return di.apply(this,arguments)}(F,Ce)}};function Id(){return ns.apply(this,arguments)}function ns(){return(ns=(0,W.Z)(function*(){try{yield(0,Ne.eu)()}catch{return!1}return typeof window<"u"&&(0,Ne.hl)()&&(0,Ne.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function pl(){(0,Fe._registerComponent)(new Ae.wA("messaging",Bo,"PUBLIC")),(0,Fe._registerComponent)(new Ae.wA("messaging-internal",Il,"PRIVATE")),(0,Fe.registerVersion)(ro,"0.12.4"),(0,Fe.registerVersion)(ro,"0.12.4","esm2017")}();const en="analytics",Jn="firebase_id",Dl="origin",Sn=6e4,Rt="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qt="https://www.googletagmanager.com/gtag/js",fi=new $e.Yd("@firebase/analytics"),ds=new Ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Sl(x){if(!x.startsWith(qt)){const F=ds.create("invalid-gtag-resource",{gtagURL:x});return fi.warn(F.message),""}return x}function qc(x){return Promise.all(x.map(F=>F.catch(X=>X)))}function bc(){return(bc=(0,W.Z)(function*(x,F,X,Ce,Ke,ot){const Dt=Ce[Ke];try{if(Dt)yield F[Dt];else{const bn=(yield qc(X)).find(Zn=>Zn.measurementId===Ke);bn&&(yield F[bn.appId])}}catch(yn){fi.error(yn)}x("config",Ke,ot)})).apply(this,arguments)}function Tl(){return(Tl=(0,W.Z)(function*(x,F,X,Ce,Ke){try{let ot=[];if(Ke&&Ke.send_to){let Dt=Ke.send_to;Array.isArray(Dt)||(Dt=[Dt]);const yn=yield qc(X);for(const bn of Dt){const Zn=yn.find(Or=>Or.measurementId===bn),Ir=Zn&&F[Zn.appId];if(!Ir){ot=[];break}ot.push(Ir)}}0===ot.length&&(ot=Object.values(F)),yield Promise.all(ot),x("event",Ce,Ke||{})}catch(ot){fi.error(ot)}})).apply(this,arguments)}const Pi=30,Gr=new class jo{constructor(F={},X=1e3){this.throttleMetadata=F,this.intervalMillis=X}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,X){this.throttleMetadata[F]=X}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function uh(x){return new Headers({Accept:"application/json","x-goog-api-key":x})}function tn(){return(tn=(0,W.Z)(function*(x){var F;const{appId:X,apiKey:Ce}=x,Ke={method:"GET",headers:uh(Ce)},ot=Rt.replace("{app-id}",X),Dt=yield fetch(ot,Ke);if(200!==Dt.status&&304!==Dt.status){let yn="";try{const bn=yield Dt.json();null!==(F=bn.error)&&void 0!==F&&F.message&&(yn=bn.error.message)}catch{}throw ds.create("config-fetch-failed",{httpStatus:Dt.status,responseMessage:yn})}return Dt.json()})).apply(this,arguments)}function Jo(){return(Jo=(0,W.Z)(function*(x,F=Gr,X){const{appId:Ce,apiKey:Ke,measurementId:ot}=x.options;if(!Ce)throw ds.create("no-app-id");if(!Ke){if(ot)return{measurementId:ot,appId:Ce};throw ds.create("no-api-key")}const Dt=F.getThrottleMetadata(Ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},yn=new Ja;return setTimeout((0,W.Z)(function*(){yn.abort()}),void 0!==X?X:Sn),Al({appId:Ce,apiKey:Ke,measurementId:ot},Dt,yn,F)})).apply(this,arguments)}function Al(x,F,X){return dh.apply(this,arguments)}function dh(){return dh=(0,W.Z)(function*(x,{throttleEndTimeMillis:F,backoffCount:X},Ce,Ke=Gr){var ot;const{appId:Dt,measurementId:yn}=x;try{yield function Xl(x,F){return new Promise((X,Ce)=>{const Ke=Math.max(F-Date.now(),0),ot=setTimeout(X,Ke);x.addEventListener(()=>{clearTimeout(ot),Ce(ds.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(Ce,F)}catch(bn){if(yn)return fi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${bn?.message}]`),{appId:Dt,measurementId:yn};throw bn}try{const bn=yield function vs(x){return tn.apply(this,arguments)}(x);return Ke.deleteThrottleMetadata(Dt),bn}catch(bn){const Zn=bn;if(!function pu(x){if(!(x instanceof Ne.ZR&&x.customData))return!1;const F=Number(x.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Zn)){if(Ke.deleteThrottleMetadata(Dt),yn)return fi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yn} provided in the "measurementId" field in the local Firebase config. [${Zn?.message}]`),{appId:Dt,measurementId:yn};throw bn}const Ir=503===Number(null===(ot=Zn?.customData)||void 0===ot?void 0:ot.httpStatus)?(0,Ne.$s)(X,Ke.intervalMillis,Pi):(0,Ne.$s)(X,Ke.intervalMillis),Or={throttleEndTimeMillis:Date.now()+Ir,backoffCount:X+1};return Ke.setThrottleMetadata(Dt,Or),fi.debug(`Calling attemptFetch again in ${Ir} millis`),Al(x,Or,Ce,Ke)}}),dh.apply(this,arguments)}class Ja{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}let ml,b;function Ho(){return(Ho=(0,W.Z)(function*(x,F,X,Ce,Ke){if(Ke&&Ke.global)x("event",X,Ce);else{const ot=yield F;x("event",X,Object.assign(Object.assign({},Ce),{send_to:ot}))}})).apply(this,arguments)}function ge(){return(ge=(0,W.Z)(function*(){if(!(0,Ne.hl)())return fi.warn(ds.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ne.eu)()}catch(x){return fi.warn(ds.create("indexeddb-unavailable",{errorInfo:x?.toString()}).message),!1}return!0})).apply(this,arguments)}function Gt(){return Gt=(0,W.Z)(function*(x,F,X,Ce,Ke,ot,Dt){var yn;const bn=function Uu(x){return Jo.apply(this,arguments)}(x);bn.then(yi=>{X[yi.measurementId]=yi.appId,x.options.measurementId&&yi.measurementId!==x.options.measurementId&&fi.warn(`The measurement ID in the local Firebase config (${x.options.measurementId}) does not match the measurement ID fetched from the server (${yi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yi=>fi.error(yi)),F.push(bn);const Zn=function ie(){return ge.apply(this,arguments)}().then(yi=>{if(yi)return Ce.getId()}),[Ir,Or]=yield Promise.all([bn,Zn]);(function Cc(x){const F=window.document.getElementsByTagName("script");for(const X of Object.values(F))if(X.src&&X.src.includes(qt)&&X.src.includes(x))return X;return null})(ot)||function Xa(x,F){const X=function Gs(x,F){let X;return window.trustedTypes&&(X=window.trustedTypes.createPolicy(x,F)),X}("firebase-js-sdk-policy",{createScriptURL:Sl}),Ce=document.createElement("script"),Ke=`${qt}?l=${x}&id=${F}`;Ce.src=X?X?.createScriptURL(Ke):Ke,Ce.async=!0,document.head.appendChild(Ce)}(ot,Ir.measurementId),b&&(Ke("consent","default",b),function N(x){b=x}(void 0)),Ke("js",new Date);const $o=null!==(yn=Dt?.config)&&void 0!==yn?yn:{};return $o[Dl]="firebase",$o.update=!0,null!=Or&&($o[Jn]=Or),Ke("config",Ir.measurementId,$o),ml&&(Ke("set",ml),function K(x){ml=x}(void 0)),Ir.measurementId}),Gt.apply(this,arguments)}class pn{constructor(F){this.app=F}_delete(){return delete Zt[this.app.options.appId],Promise.resolve()}}let Zt={},$n=[];const ar={};let ya,xi,Ci="dataLayer",oi="gtag",el=!1;function qr(x,F,X){!function Vi(){const x=[];if((0,Ne.ru)()&&x.push("This is a browser extension environment."),(0,Ne.zI)()||x.push("Cookies are not available."),x.length>0){const F=x.map((Ce,Ke)=>`(${Ke+1}) ${Ce}`).join(" "),X=ds.create("invalid-analytics-context",{errorInfo:F});fi.warn(X.message)}}();const Ce=x.options.appId;if(!Ce)throw ds.create("no-app-id");if(!x.options.apiKey){if(!x.options.measurementId)throw ds.create("no-api-key");fi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${x.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zt[Ce])throw ds.create("already-exists",{id:Ce});if(!el){!function Ql(x){let F=[];Array.isArray(window[x])?F=window[x]:window[x]=F}(Ci);const{wrappedGtag:ot,gtagCore:Dt}=function Pa(x,F,X,Ce,Ke){let ot=function(...Dt){window[Ce].push(arguments)};return window[Ke]&&"function"==typeof window[Ke]&&(ot=window[Ke]),window[Ke]=function vr(x,F,X,Ce){function ot(){return ot=(0,W.Z)(function*(Dt,...yn){try{if("event"===Dt){const[bn,Zn]=yn;yield function Oa(x,F,X,Ce,Ke){return Tl.apply(this,arguments)}(x,F,X,bn,Zn)}else if("config"===Dt){const[bn,Zn]=yn;yield function Bu(x,F,X,Ce,Ke,ot){return bc.apply(this,arguments)}(x,F,X,Ce,bn,Zn)}else if("consent"===Dt){const[bn]=yn;x("consent","update",bn)}else if("get"===Dt){const[bn,Zn,Ir]=yn;x("get",bn,Zn,Ir)}else if("set"===Dt){const[bn]=yn;x("set",bn)}else x(Dt,...yn)}catch(bn){fi.error(bn)}}),ot.apply(this,arguments)}return function Ke(Dt){return ot.apply(this,arguments)}}(ot,x,F,X),{gtagCore:ot,wrappedGtag:window[Ke]}}(Zt,$n,ar,Ci,oi);xi=ot,ya=Dt,el=!0}return Zt[Ce]=function Je(x,F,X,Ce,Ke,ot,Dt){return Gt.apply(this,arguments)}(x,$n,ar,F,ya,Ci,X),new pn(x)}function mu(){return go.apply(this,arguments)}function go(){return(go=(0,W.Z)(function*(){if((0,Ne.ru)()||!(0,Ne.zI)()||!(0,Ne.hl)())return!1;try{return yield(0,Ne.eu)()}catch{return!1}})).apply(this,arguments)}const _h="@firebase/analytics";!function _p(){(0,Fe._registerComponent)(new Ae.wA(en,(F,{options:X})=>qr(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,Fe._registerComponent)(new Ae.wA("analytics-internal",function x(F){try{const X=F.getProvider(en).getImmediate();return{logEvent:(Ce,Ke,ot)=>function gf(x,F,X,Ce){x=(0,Ne.m9)(x),function hh(x,F,X,Ce,Ke){return Ho.apply(this,arguments)}(xi,Zt[x.app.options.appId],F,X,Ce).catch(Ke=>fi.error(Ke))}(X,Ce,Ke,ot)}}catch(X){throw ds.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,Fe.registerVersion)(_h,"0.10.0"),(0,Fe.registerVersion)(_h,"0.10.0","esm2017")}();var ju=j(4408),ei=j(7565);const Ns=new class ec extends ei.v{}(class Dc extends ju.o{constructor(F,X){super(F,X),this.scheduler=F,this.work=X}schedule(F,X=0){return X>0?super.schedule(F,X):(this.delay=X,this.state=F,this.scheduler.flush(this),this)}execute(F,X){return X>0||this.closed?super.execute(F,X):this._execute(F,X)}requestAsyncId(F,X,Ce=0){return null!=Ce&&Ce>0||null==Ce&&this.delay>0?super.requestAsyncId(F,X,Ce):(F.flush(this),0)}});var _o=j(4986),gu=j(8505),hi=j(5363),Qc=j(9468);const ki=new _.GfV("7.6.1"),zi="__angularfire_symbol__analyticsIsSupportedValue",Xc="__angularfire_symbol__analyticsIsSupported",tc="__angularfire_symbol__remoteConfigIsSupportedValue",so="__angularfire_symbol__remoteConfigIsSupported",Hu="__angularfire_symbol__messagingIsSupportedValue",Sd="__angularfire_symbol__messagingIsSupported";function Ml(x,F,X){if(F){if(1===F.length)return F[0];const ot=F.filter(Dt=>Dt.app===X);if(1===ot.length)return ot[0]}return X.container.getProvider(x).getImmediate({optional:!0})}globalThis[Xc]||(globalThis[Xc]=mu().then(x=>globalThis[zi]=x).catch(()=>globalThis[zi]=!1)),globalThis[Sd]||(globalThis[Sd]=Id().then(x=>globalThis[Hu]=x).catch(()=>globalThis[Hu]=!1)),globalThis[so]||(globalThis[so]=Po().then(x=>globalThis[tc]=x).catch(()=>globalThis[tc]=!1));const _u=(x,F)=>{const X=F?[F]:(0,L.C6)(),Ce=[];return X.forEach(Ke=>{Ke.container.getProvider(x).instances.forEach(Dt=>{Ce.includes(Dt)||Ce.push(Dt)})}),Ce};function tl(){}class Ni{constructor(F,X=Ns){this.zone=F,this.delegate=X}now(){return this.delegate.now()}schedule(F,X,Ce){const Ke=this.zone;return this.delegate.schedule(function(Dt){Ke.runGuarded(()=>{F.apply(this,[Dt])})},X,Ce)}}class yf{constructor(F){this.zone=F,this.task=null}call(F,X){const Ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",tl,{},tl,tl)),X.pipe((0,gu.b)({next:Ce,complete:Ce,error:Ce})).subscribe(F).add(Ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yo=(()=>{class x{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new Ni(Zone.current)),this.insideAngular=X.run(()=>new Ni(Zone.current,_o.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(X){return new(X||x)(_.LFG(_.R0b))},x.\u0275prov=_.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function Do(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function ao(x){return x.pipe((0,hi.Q)(Do().outsideAngular))}function wr(x){return Do(),function vf(x){return function(X){return(X=X.lift(new yf(x.ngZone))).pipe((0,Qc.R)(x.outsideAngular),(0,hi.Q)(x.insideAngular))}}(Do())(x)}},2090:(gn,at,j)=>{j.d(at,{$s:()=>te,BH:()=>ze,DV:()=>or,Dv:()=>An,G6:()=>Qn,GJ:()=>ur,L:()=>Ve,LL:()=>it,Pz:()=>Se,Sg:()=>Bt,UG:()=>Ye,UI:()=>Tn,US:()=>Ae,Wj:()=>zr,Wl:()=>Cn,Yr:()=>Kn,ZB:()=>ke,ZR:()=>dt,aH:()=>qe,b$:()=>kn,cI:()=>Ln,dS:()=>_n,eu:()=>lt,g5:()=>W,gK:()=>Fr,gQ:()=>er,h$:()=>Ge,hl:()=>Ze,hu:()=>L,jU:()=>zt,lb:()=>gt,m9:()=>vt,ne:()=>ir,p$:()=>De,pd:()=>Ri,r3:()=>qn,ru:()=>xt,tV:()=>Ie,uI:()=>nt,ug:()=>je,vZ:()=>on,w1:()=>Mr,w9:()=>Dn,xO:()=>jr,xb:()=>Dr,z$:()=>Ot,zI:()=>st,zd:()=>ci});const _={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},L=function(ve,be){if(!ve)throw W(be)},W=function(ve){return new Error("Firebase Database ("+_.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ve)},Fe=function(ve){const be=[];let He=0;for(let we=0;we<ve.length;we++){let re=ve.charCodeAt(we);re<128?be[He++]=re:re<2048?(be[He++]=re>>6|192,be[He++]=63&re|128):55296==(64512&re)&&we+1<ve.length&&56320==(64512&ve.charCodeAt(we+1))?(re=65536+((1023&re)<<10)+(1023&ve.charCodeAt(++we)),be[He++]=re>>18|240,be[He++]=re>>12&63|128,be[He++]=re>>6&63|128,be[He++]=63&re|128):(be[He++]=re>>12|224,be[He++]=re>>6&63|128,be[He++]=63&re|128)}return be},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ve,be){if(!Array.isArray(ve))throw Error("encodeByteArray takes an array as a parameter");this.init_();const He=be?this.byteToCharMapWebSafe_:this.byteToCharMap_,we=[];for(let re=0;re<ve.length;re+=3){const ye=ve[re],pe=re+1<ve.length,he=pe?ve[re+1]:0,oe=re+2<ve.length,Re=oe?ve[re+2]:0;let vn=(15&he)<<2|Re>>6,_r=63&Re;oe||(_r=64,pe||(vn=64)),we.push(He[ye>>2],He[(3&ye)<<4|he>>4],He[vn],He[_r])}return we.join("")},encodeString(ve,be){return this.HAS_NATIVE_SUPPORT&&!be?btoa(ve):this.encodeByteArray(Fe(ve),be)},decodeString(ve,be){return this.HAS_NATIVE_SUPPORT&&!be?atob(ve):function(ve){const be=[];let He=0,we=0;for(;He<ve.length;){const re=ve[He++];if(re<128)be[we++]=String.fromCharCode(re);else if(re>191&&re<224){const ye=ve[He++];be[we++]=String.fromCharCode((31&re)<<6|63&ye)}else if(re>239&&re<365){const oe=((7&re)<<18|(63&ve[He++])<<12|(63&ve[He++])<<6|63&ve[He++])-65536;be[we++]=String.fromCharCode(55296+(oe>>10)),be[we++]=String.fromCharCode(56320+(1023&oe))}else{const ye=ve[He++],pe=ve[He++];be[we++]=String.fromCharCode((15&re)<<12|(63&ye)<<6|63&pe)}}return be.join("")}(this.decodeStringToByteArray(ve,be))},decodeStringToByteArray(ve,be){this.init_();const He=be?this.charToByteMapWebSafe_:this.charToByteMap_,we=[];for(let re=0;re<ve.length;){const ye=He[ve.charAt(re++)],he=re<ve.length?He[ve.charAt(re)]:0;++re;const Re=re<ve.length?He[ve.charAt(re)]:64;++re;const Ut=re<ve.length?He[ve.charAt(re)]:64;if(++re,null==ye||null==he||null==Re||null==Ut)throw new $e;we.push(ye<<2|he>>4),64!==Re&&(we.push(he<<4&240|Re>>2),64!==Ut&&we.push(Re<<6&192|Ut))}return we},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ve=0;ve<this.ENCODED_VALS.length;ve++)this.byteToCharMap_[ve]=this.ENCODED_VALS.charAt(ve),this.charToByteMap_[this.byteToCharMap_[ve]]=ve,this.byteToCharMapWebSafe_[ve]=this.ENCODED_VALS_WEBSAFE.charAt(ve),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ve]]=ve,ve>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ve)]=ve,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ve)]=ve)}}};class $e extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ge=function(ve){const be=Fe(ve);return Ae.encodeByteArray(be,!0)},Ve=function(ve){return Ge(ve).replace(/\./g,"")},Ie=function(ve){try{return Ae.decodeString(ve,!0)}catch(be){console.error("base64Decode failed: ",be)}return null};function De(ve){return ke(void 0,ve)}function ke(ve,be){if(!(be instanceof Object))return be;switch(be.constructor){case Date:return new Date(be.getTime());case Object:void 0===ve&&(ve={});break;case Array:ve=[];break;default:return be}for(const He in be)!be.hasOwnProperty(He)||!Tt(He)||(ve[He]=ke(ve[He],be[He]));return ve}function Tt(ve){return"__proto__"!==ve}const It=()=>{try{return function ut(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ve=process.env.__FIREBASE_DEFAULTS__;return ve?JSON.parse(ve):void 0})()||(()=>{if(typeof document>"u")return;let ve;try{ve=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const be=ve&&Ie(ve[1]);return be&&JSON.parse(be)})()}catch(ve){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ve}`)}},qe=()=>{var ve;return null===(ve=It())||void 0===ve?void 0:ve.config},Se=ve=>{var be;return null===(be=It())||void 0===be?void 0:be[`_${ve}`]};class ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((be,He)=>{this.resolve=be,this.reject=He})}wrapCallback(be){return(He,we)=>{He?this.reject(He):this.resolve(we),"function"==typeof be&&(this.promise.catch(()=>{}),1===be.length?be(He):be(He,we))}}}function Bt(ve,be){if(ve.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const we=be||"demo-project",re=ve.iat||0,ye=ve.sub||ve.user_id;if(!ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const pe=Object.assign({iss:`https://securetoken.google.com/${we}`,aud:we,iat:re,exp:re+3600,auth_time:re,sub:ye,user_id:ye,firebase:{sign_in_provider:"custom",identities:{}}},ve);return[Ve(JSON.stringify({alg:"none",type:"JWT"})),Ve(JSON.stringify(pe)),""].join(".")}function Ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function Ye(){var ve;const be=null===(ve=It())||void 0===ve?void 0:ve.forceEnvironment;if("node"===be)return!0;if("browser"===be)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function zt(){return"object"==typeof self&&self.self===self}function xt(){const ve="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ve&&void 0!==ve.id}function kn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Mr(){const ve=Ot();return ve.indexOf("MSIE ")>=0||ve.indexOf("Trident/")>=0}function Kn(){return!0===_.NODE_CLIENT||!0===_.NODE_ADMIN}function Qn(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){try{return"object"==typeof indexedDB}catch{return!1}}function lt(){return new Promise((ve,be)=>{try{let He=!0;const we="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(we);re.onsuccess=()=>{re.result.close(),He||self.indexedDB.deleteDatabase(we),ve(!0)},re.onupgradeneeded=()=>{He=!1},re.onerror=()=>{var ye;be((null===(ye=re.error)||void 0===ye?void 0:ye.message)||"")}}catch(He){be(He)}})}function st(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class dt extends Error{constructor(be,He,we){super(He),this.code=be,this.customData=we,this.name="FirebaseError",Object.setPrototypeOf(this,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,it.prototype.create)}}class it{constructor(be,He,we){this.service=be,this.serviceName=He,this.errors=we}create(be,...He){const we=He[0]||{},re=`${this.service}/${be}`,ye=this.errors[be],pe=ye?function ln(ve,be){return ve.replace($t,(He,we)=>{const re=be[we];return null!=re?String(re):`<${we}?>`})}(ye,we):"Error";return new dt(re,`${this.serviceName}: ${pe} (${re}).`,we)}}const $t=/\{\$([^}]+)}/g;function Ln(ve){return JSON.parse(ve)}function Cn(ve){return JSON.stringify(ve)}const zn=function(ve){let be={},He={},we={},re="";try{const ye=ve.split(".");be=Ln(Ie(ye[0])||""),He=Ln(Ie(ye[1])||""),re=ye[2],we=He.d||{},delete He.d}catch{}return{header:be,claims:He,data:we,signature:re}},Dn=function(ve){const He=zn(ve).claims;return!!He&&"object"==typeof He&&He.hasOwnProperty("iat")},ur=function(ve){const be=zn(ve).claims;return"object"==typeof be&&!0===be.admin};function qn(ve,be){return Object.prototype.hasOwnProperty.call(ve,be)}function or(ve,be){if(Object.prototype.hasOwnProperty.call(ve,be))return ve[be]}function Dr(ve){for(const be in ve)if(Object.prototype.hasOwnProperty.call(ve,be))return!1;return!0}function Tn(ve,be,He){const we={};for(const re in ve)Object.prototype.hasOwnProperty.call(ve,re)&&(we[re]=be.call(He,ve[re],re,ve));return we}function on(ve,be){if(ve===be)return!0;const He=Object.keys(ve),we=Object.keys(be);for(const re of He){if(!we.includes(re))return!1;const ye=ve[re],pe=be[re];if(Cr(ye)&&Cr(pe)){if(!on(ye,pe))return!1}else if(ye!==pe)return!1}for(const re of we)if(!He.includes(re))return!1;return!0}function Cr(ve){return null!==ve&&"object"==typeof ve}function jr(ve){const be=[];for(const[He,we]of Object.entries(ve))Array.isArray(we)?we.forEach(re=>{be.push(encodeURIComponent(He)+"="+encodeURIComponent(re))}):be.push(encodeURIComponent(He)+"="+encodeURIComponent(we));return be.length?"&"+be.join("&"):""}function ci(ve){const be={};return ve.replace(/^\?/,"").split("&").forEach(we=>{if(we){const[re,ye]=we.split("=");be[decodeURIComponent(re)]=decodeURIComponent(ye)}}),be}function Ri(ve){const be=ve.indexOf("?");if(!be)return"";const He=ve.indexOf("#",be);return ve.substring(be,He>0?He:void 0)}class er{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let be=1;be<this.blockSize;++be)this.pad_[be]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(be,He){He||(He=0);const we=this.W_;if("string"==typeof be)for(let Ut=0;Ut<16;Ut++)we[Ut]=be.charCodeAt(He)<<24|be.charCodeAt(He+1)<<16|be.charCodeAt(He+2)<<8|be.charCodeAt(He+3),He+=4;else for(let Ut=0;Ut<16;Ut++)we[Ut]=be[He]<<24|be[He+1]<<16|be[He+2]<<8|be[He+3],He+=4;for(let Ut=16;Ut<80;Ut++){const vn=we[Ut-3]^we[Ut-8]^we[Ut-14]^we[Ut-16];we[Ut]=4294967295&(vn<<1|vn>>>31)}let Re,rt,re=this.chain_[0],ye=this.chain_[1],pe=this.chain_[2],he=this.chain_[3],oe=this.chain_[4];for(let Ut=0;Ut<80;Ut++){Ut<40?Ut<20?(Re=he^ye&(pe^he),rt=1518500249):(Re=ye^pe^he,rt=1859775393):Ut<60?(Re=ye&pe|he&(ye|pe),rt=2400959708):(Re=ye^pe^he,rt=3395469782);const vn=(re<<5|re>>>27)+Re+oe+rt+we[Ut]&4294967295;oe=he,he=pe,pe=4294967295&(ye<<30|ye>>>2),ye=re,re=vn}this.chain_[0]=this.chain_[0]+re&4294967295,this.chain_[1]=this.chain_[1]+ye&4294967295,this.chain_[2]=this.chain_[2]+pe&4294967295,this.chain_[3]=this.chain_[3]+he&4294967295,this.chain_[4]=this.chain_[4]+oe&4294967295}update(be,He){if(null==be)return;void 0===He&&(He=be.length);const we=He-this.blockSize;let re=0;const ye=this.buf_;let pe=this.inbuf_;for(;re<He;){if(0===pe)for(;re<=we;)this.compress_(be,re),re+=this.blockSize;if("string"==typeof be){for(;re<He;)if(ye[pe]=be.charCodeAt(re),++pe,++re,pe===this.blockSize){this.compress_(ye),pe=0;break}}else for(;re<He;)if(ye[pe]=be[re],++pe,++re,pe===this.blockSize){this.compress_(ye),pe=0;break}}this.inbuf_=pe,this.total_+=He}digest(){const be=[];let He=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let re=this.blockSize-1;re>=56;re--)this.buf_[re]=255&He,He/=256;this.compress_(this.buf_);let we=0;for(let re=0;re<5;re++)for(let ye=24;ye>=0;ye-=8)be[we]=this.chain_[re]>>ye&255,++we;return be}}function ir(ve,be){const He=new cn(ve,be);return He.subscribe.bind(He)}class cn{constructor(be,He){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=He,this.task.then(()=>{be(this)}).catch(we=>{this.error(we)})}next(be){this.forEachObserver(He=>{He.next(be)})}error(be){this.forEachObserver(He=>{He.error(be)}),this.close(be)}complete(){this.forEachObserver(be=>{be.complete()}),this.close()}subscribe(be,He,we){let re;if(void 0===be&&void 0===He&&void 0===we)throw new Error("Missing Observer.");re=function Ar(ve,be){if("object"!=typeof ve||null===ve)return!1;for(const He of be)if(He in ve&&"function"==typeof ve[He])return!0;return!1}(be,["next","error","complete"])?be:{next:be,error:He,complete:we},void 0===re.next&&(re.next=Kr),void 0===re.error&&(re.error=Kr),void 0===re.complete&&(re.complete=Kr);const ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch{}}),this.observers.push(re),ye}unsubscribeOne(be){void 0===this.observers||void 0===this.observers[be]||(delete this.observers[be],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(be){if(!this.finalized)for(let He=0;He<this.observers.length;He++)this.sendOne(He,be)}sendOne(be,He){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[be])try{He(this.observers[be])}catch(we){typeof console<"u"&&console.error&&console.error(we)}})}close(be){this.finalized||(this.finalized=!0,void 0!==be&&(this.finalError=be),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Kr(){}const An=function(ve,be,He,we){let re;if(we<be?re="at least "+be:we>He&&(re=0===He?"none":"no more than "+He),re)throw new Error(ve+" failed: Was called with "+we+(1===we?" argument.":" arguments.")+" Expects "+re+".")};function Fr(ve,be){return`${ve} failed: ${be} argument `}function zr(ve,be,He,we){if((!we||He)&&"function"!=typeof He)throw new Error(Fr(ve,be)+"must be a valid function.")}function gt(ve,be,He,we){if((!we||He)&&("object"!=typeof He||null===He))throw new Error(Fr(ve,be)+"must be a valid context object.")}const _n=function(ve){const be=[];let He=0;for(let we=0;we<ve.length;we++){let re=ve.charCodeAt(we);if(re>=55296&&re<=56319){const ye=re-55296;we++,L(we<ve.length,"Surrogate pair missing trail surrogate."),re=65536+(ye<<10)+(ve.charCodeAt(we)-56320)}re<128?be[He++]=re:re<2048?(be[He++]=re>>6|192,be[He++]=63&re|128):re<65536?(be[He++]=re>>12|224,be[He++]=re>>6&63|128,be[He++]=63&re|128):(be[He++]=re>>18|240,be[He++]=re>>12&63|128,be[He++]=re>>6&63|128,be[He++]=63&re|128)}return be},je=function(ve){let be=0;for(let He=0;He<ve.length;He++){const we=ve.charCodeAt(He);we<128?be++:we<2048?be+=2:we>=55296&&we<=56319?(be+=4,He++):be+=3}return be},an=1e3,xn=2,Et=144e5,de=.5;function te(ve,be=an,He=xn){const we=be*Math.pow(He,ve),re=Math.round(de*we*(Math.random()-.5)*2);return Math.min(Et,we+re)}function vt(ve){return ve&&ve._delegate?ve._delegate:ve}},5756:(gn,at,j)=>{var _=j(1481),L=j(6360),W=j(4650),Fe=j(4004),Ne=j(5698),Ae=j(1205),$e=j(9260);const Ge=(0,Fe.U)(a=>!!a);const Oe=[{path:"pages",loadChildren:()=>Promise.all([j.e(592),j.e(736)]).then(j.bind(j,4736)).then(a=>a.PagesModule),canActivate:[(()=>{class a{constructor(s,u){this.router=s,this.auth=u,this.canActivate=(f,E)=>{const I=f.data.authGuardPipe||(()=>Ge);return this.auth.user.pipe((0,Ne.q)(1),I(f,E),(0,Fe.U)(M=>"boolean"==typeof M?M:Array.isArray(M)?this.router.createUrlTree(M):this.router.parseUrl(M)))}}}return a.\u0275fac=function(s){return new(s||a)(W.LFG(L.F0),W.LFG(Ae.zQ))},a.\u0275prov=W.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})()]},{path:"",loadChildren:()=>Promise.all([j.e(592),j.e(530)]).then(j.bind(j,2530)).then(a=>a.AuthModule)},{path:"**",redirectTo:""}];let Ft=(()=>{class a{static#e=this.\u0275fac=function(u){return new(u||a)};static#t=this.\u0275mod=W.oAB({type:a});static#n=this.\u0275inj=W.cJS({imports:[L.Bz.forRoot(Oe),L.Bz]})}return a})(),qe=(()=>{class a{constructor(){this.title="idiomasWEB"}static#e=this.\u0275fac=function(u){return new(u||a)};static#t=this.\u0275cmp=W.Xpm({type:a,selectors:[["app-root"]],decls:1,vars:0,template:function(u,f){1&u&&W._UZ(0,"router-outlet")},dependencies:[L.lC]})}return a})();const Se_firebase={apiKey:"AIzaSyBfvUz5hmwQmxENmSr-FMmlpXhN4hMh4Z4",authDomain:"vocabularioapp-de800.firebaseapp.com",projectId:"vocabularioapp-de800",storageBucket:"vocabularioapp-de800.appspot.com",messagingSenderId:"971549967648",appId:"1:971549967648:web:3d599643f96d916107c345",measurementId:"G-15TKQLWYHZ"};var ze=j(2011),Bt=j(9751),Ot=j(9646),nt=j(8996),Ye=j(8372),zt=j(3900),xt=j(4976),kn=j(3942),nn=j(5861),Mr=j(6881),_e=j(2090),Kn=j(4859);const Qn="firebasestorage.googleapis.com",Ze="storageBucket";class dt extends _e.ZR{constructor(n,s,u=0){super(ln(n),`Firebase Storage: ${s} (${ln(n)})`),this.status_=u,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(n){this.status_=n}_codeEquals(n){return ln(n)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(n){this.customData.serverResponse=n,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var it=(()=>{return(a=it||(it={})).UNKNOWN="unknown",a.OBJECT_NOT_FOUND="object-not-found",a.BUCKET_NOT_FOUND="bucket-not-found",a.PROJECT_NOT_FOUND="project-not-found",a.QUOTA_EXCEEDED="quota-exceeded",a.UNAUTHENTICATED="unauthenticated",a.UNAUTHORIZED="unauthorized",a.UNAUTHORIZED_APP="unauthorized-app",a.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",a.INVALID_CHECKSUM="invalid-checksum",a.CANCELED="canceled",a.INVALID_EVENT_NAME="invalid-event-name",a.INVALID_URL="invalid-url",a.INVALID_DEFAULT_BUCKET="invalid-default-bucket",a.NO_DEFAULT_BUCKET="no-default-bucket",a.CANNOT_SLICE_BLOB="cannot-slice-blob",a.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",a.NO_DOWNLOAD_URL="no-download-url",a.INVALID_ARGUMENT="invalid-argument",a.INVALID_ARGUMENT_COUNT="invalid-argument-count",a.APP_DELETED="app-deleted",a.INVALID_ROOT_OPERATION="invalid-root-operation",a.INVALID_FORMAT="invalid-format",a.INTERNAL_ERROR="internal-error",a.UNSUPPORTED_ENVIRONMENT="unsupported-environment",it;var a})();function ln(a){return"storage/"+a}function $t(){return new dt(it.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Dn(){return new dt(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ur(){return new dt(it.CANCELED,"User canceled the upload/download.")}function Tn(){return new dt(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jr(a){return new dt(it.INVALID_ARGUMENT,a)}function ci(){return new dt(it.APP_DELETED,"The Firebase app was deleted.")}function Ri(a){return new dt(it.INVALID_ROOT_OPERATION,"The operation '"+a+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function er(a,n){return new dt(it.INVALID_FORMAT,"String does not match format '"+a+"': "+n)}function ir(a){throw new dt(it.INTERNAL_ERROR,"Internal error: "+a)}class cn{constructor(n,s){this.bucket=n,this.path_=s}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const n=encodeURIComponent;return"/b/"+n(this.bucket)+"/o/"+n(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(n,s){let u;try{u=cn.makeFromUrl(n,s)}catch{return new cn(n,"")}if(""===u.path)return u;throw function or(a){return new dt(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+a+"'.")}(n)}static makeFromUrl(n,s){let u=null;const f="([A-Za-z0-9.\\-_]+)",M=new RegExp("^gs://"+f+"(/(.*))?$","i");function ne(Qr){Qr.path_=decodeURIComponent(Qr.path)}const Le=s.replace(/[.]/g,"\\."),br=[{regex:M,indices:{bucket:1,path:3},postModify:function E(Qr){"/"===Qr.path.charAt(Qr.path.length-1)&&(Qr.path_=Qr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Le}/v[A-Za-z0-9_]+/b/${f}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ne},{regex:new RegExp(`^https?://${s===Qn?"(?:storage.googleapis.com|storage.cloud.google.com)":s}/${f}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ne}];for(let Qr=0;Qr<br.length;Qr++){const sa=br[Qr],Ys=sa.regex.exec(n);if(Ys){let Os=Ys[sa.indices.path];Os||(Os=""),u=new cn(Ys[sa.indices.bucket],Os),sa.postModify(u);break}}if(null==u)throw function qn(a){return new dt(it.INVALID_URL,"Invalid URL '"+a+"'.")}(n);return u}}class un{constructor(n){this.promise_=Promise.reject(n)}getPromise(){return this.promise_}cancel(n=!1){}}function zr(a){return"string"==typeof a||a instanceof String}function gt(a){return _n()&&a instanceof Blob}function _n(){return typeof Blob<"u"&&!(0,_e.UG)()}function je(a,n,s,u){if(u<n)throw jr(`Invalid value for '${a}'. Expected ${n} or greater.`);if(u>s)throw jr(`Invalid value for '${a}'. Expected ${s} or less.`)}function At(a,n,s){let u=n;return null==s&&(u=`https://${n}`),`${s}://${u}/v0${a}`}function an(a){const n=encodeURIComponent;let s="?";for(const u in a)a.hasOwnProperty(u)&&(s=s+(n(u)+"=")+n(a[u])+"&");return s=s.slice(0,-1),s}var xn=(()=>{return(a=xn||(xn={}))[a.NO_ERROR=0]="NO_ERROR",a[a.NETWORK_ERROR=1]="NETWORK_ERROR",a[a.ABORT=2]="ABORT",xn;var a})();function Et(a,n){const s=a>=500&&a<600,f=-1!==[408,429].indexOf(a),E=-1!==n.indexOf(a);return s||f||E}class de{constructor(n,s,u,f,E,I,M,$,ne,Te,Le,Xe=!0){this.url_=n,this.method_=s,this.headers_=u,this.body_=f,this.successCodes_=E,this.additionalRetryCodes_=I,this.callback_=M,this.errorCallback_=$,this.timeout_=ne,this.progressCallback_=Te,this.connectionFactory_=Le,this.retry=Xe,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Nt,Vt)=>{this.resolve_=Nt,this.reject_=Vt,this.start_()})}start_(){const s=(u,f)=>{const E=this.resolve_,I=this.reject_,M=f.connection;if(f.wasSuccessCode)try{const $=this.callback_(M,M.getResponse());!function An(a){return void 0!==a}($)?E():E($)}catch($){I($)}else if(null!==M){const $=$t();$.serverResponse=M.getErrorText(),I(this.errorCallback_?this.errorCallback_(M,$):$)}else I(f.canceled?this.appDelete_?ci():ur():Dn())};this.canceled_?s(0,new te(!1,null,!0)):this.backoffId_=function Ar(a,n,s){let u=1,f=null,E=null,I=!1,M=0;function $(){return 2===M}let ne=!1;function Te(...Rn){ne||(ne=!0,n.apply(null,Rn))}function Le(Rn){f=setTimeout(()=>{f=null,a(Nt,$())},Rn)}function Xe(){E&&clearTimeout(E)}function Nt(Rn,...pr){if(ne)return void Xe();if(Rn)return Xe(),void Te.call(null,Rn,...pr);if($()||I)return Xe(),void Te.call(null,Rn,...pr);let br;u<64&&(u*=2),1===M?(M=2,br=0):br=1e3*(u+Math.random()),Le(br)}let Vt=!1;function dn(Rn){Vt||(Vt=!0,Xe(),!ne&&(null!==f?(Rn||(M=2),clearTimeout(f),Le(0)):Rn||(M=1)))}return Le(0),E=setTimeout(()=>{I=!0,dn(!0)},s),dn}((u,f)=>{if(f)return void u(!1,new te(!1,null,!0));const E=this.connectionFactory_();this.pendingConnection_=E;const I=M=>{null!==this.progressCallback_&&this.progressCallback_(M.loaded,M.lengthComputable?M.total:-1)};null!==this.progressCallback_&&E.addUploadProgressListener(I),E.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&E.removeUploadProgressListener(I),this.pendingConnection_=null;const M=E.getErrorCode()===xn.NO_ERROR,$=E.getStatus();if(!M||Et($,this.additionalRetryCodes_)&&this.retry){const Te=E.getErrorCode()===xn.ABORT;return void u(!1,new te(!1,null,Te))}const ne=-1!==this.successCodes_.indexOf($);u(!0,new te(ne,E))})},s,this.timeout_)}getPromise(){return this.promise_}cancel(n){this.canceled_=!0,this.appDelete_=n||!1,null!==this.backoffId_&&function Kr(a){a(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class te{constructor(n,s,u){this.wasSuccessCode=n,this.connection=s,this.canceled=!!u}}function we(...a){const n=function He(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==n){const s=new n;for(let u=0;u<a.length;u++)s.append(a[u]);return s.getBlob()}if(_n())return new Blob(a);throw new dt(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const pe={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class he{constructor(n,s){this.data=n,this.contentType=s||null}}function oe(a,n){switch(a){case pe.RAW:return new he(Re(n));case pe.BASE64:case pe.BASE64URL:return new he(Ut(a,n));case pe.DATA_URL:return new he(function _r(a){const n=new vn(a);return n.base64?Ut(pe.BASE64,n.rest):function rt(a){let n;try{n=decodeURIComponent(a)}catch{throw er(pe.DATA_URL,"Malformed data URL.")}return Re(n)}(n.rest)}(n),function ii(a){return new vn(a).contentType}(n))}throw $t()}function Re(a){const n=[];for(let s=0;s<a.length;s++){let u=a.charCodeAt(s);u<=127?n.push(u):u<=2047?n.push(192|u>>6,128|63&u):55296==(64512&u)?s<a.length-1&&56320==(64512&a.charCodeAt(s+1))?(u=65536|(1023&u)<<10|1023&a.charCodeAt(++s),n.push(240|u>>18,128|u>>12&63,128|u>>6&63,128|63&u)):n.push(239,191,189):56320==(64512&u)?n.push(239,191,189):n.push(224|u>>12,128|u>>6&63,128|63&u)}return new Uint8Array(n)}function Ut(a,n){switch(a){case pe.BASE64:{const f=-1!==n.indexOf("-"),E=-1!==n.indexOf("_");if(f||E)throw er(a,"Invalid character '"+(f?"-":"_")+"' found: is it base64url encoded?");break}case pe.BASE64URL:{const f=-1!==n.indexOf("+"),E=-1!==n.indexOf("/");if(f||E)throw er(a,"Invalid character '"+(f?"+":"/")+"' found: is it base64 encoded?");n=n.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=function ye(a){if(typeof atob>"u")throw function Li(a){return new dt(it.UNSUPPORTED_ENVIRONMENT,`${a} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(a)}(n)}catch(f){throw f.message.includes("polyfill")?f:er(a,"Invalid character found")}const u=new Uint8Array(s.length);for(let f=0;f<s.length;f++)u[f]=s.charCodeAt(f);return u}class vn{constructor(n){this.base64=!1,this.contentType=null;const s=n.match(/^data:([^,]+)?,/);if(null===s)throw er(pe.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const u=s[1]||null;null!=u&&(this.base64=function Wi(a,n){return a.length>=n.length&&a.substring(a.length-n.length)===n}(u,";base64"),this.contentType=this.base64?u.substring(0,u.length-7):u),this.rest=n.substring(n.indexOf(",")+1)}}class ht{constructor(n,s){let u=0,f="";gt(n)?(this.data_=n,u=n.size,f=n.type):n instanceof ArrayBuffer?(s?this.data_=new Uint8Array(n):(this.data_=new Uint8Array(n.byteLength),this.data_.set(new Uint8Array(n))),u=this.data_.length):n instanceof Uint8Array&&(s?this.data_=n:(this.data_=new Uint8Array(n.length),this.data_.set(n)),u=n.length),this.size_=u,this.type_=f}size(){return this.size_}type(){return this.type_}slice(n,s){if(gt(this.data_)){const f=function re(a,n,s){return a.webkitSlice?a.webkitSlice(n,s):a.mozSlice?a.mozSlice(n,s):a.slice?a.slice(n,s):null}(this.data_,n,s);return null===f?null:new ht(f)}{const u=new Uint8Array(this.data_.buffer,n,s-n);return new ht(u,!0)}}static getBlob(...n){if(_n()){const s=n.map(u=>u instanceof ht?u.data_:u);return new ht(we.apply(null,s))}{const s=n.map(I=>zr(I)?oe(pe.RAW,I).data:I.data_);let u=0;s.forEach(I=>{u+=I.byteLength});const f=new Uint8Array(u);let E=0;return s.forEach(I=>{for(let M=0;M<I.length;M++)f[E++]=I[M]}),new ht(f,!0)}}uploadData(){return this.data_}}function mt(a){let n;try{n=JSON.parse(a)}catch{return null}return function Hr(a){return"object"==typeof a&&!Array.isArray(a)}(n)?n:null}function Bn(a){const n=a.lastIndexOf("/",a.length-2);return-1===n?a:a.slice(n+1)}function tr(a,n){return n}class En{constructor(n,s,u,f){this.server=n,this.local=s||n,this.writable=!!u,this.xform=f||tr}}let Sr=null;function $r(){if(Sr)return Sr;const a=[];a.push(new En("bucket")),a.push(new En("generation")),a.push(new En("metageneration")),a.push(new En("name","fullPath",!0));const s=new En("name");s.xform=function n(E,I){return function Rr(a){return!zr(a)||a.length<2?a:Bn(a)}(I)},a.push(s);const f=new En("size");return f.xform=function u(E,I){return void 0!==I?Number(I):I},a.push(f),a.push(new En("timeCreated")),a.push(new En("updated")),a.push(new En("md5Hash",null,!0)),a.push(new En("cacheControl",null,!0)),a.push(new En("contentDisposition",null,!0)),a.push(new En("contentEncoding",null,!0)),a.push(new En("contentLanguage",null,!0)),a.push(new En("contentType",null,!0)),a.push(new En("metadata","customMetadata",!0)),Sr=a,Sr}function Ao(a,n,s){const u=mt(n);return null===u?null:function aa(a,n,s){const u={type:"file"},f=s.length;for(let E=0;E<f;E++){const I=s[E];u[I.local]=I.xform(u,n[I.server])}return function Ti(a,n){Object.defineProperty(a,"ref",{get:function s(){const E=new cn(a.bucket,a.fullPath);return n._makeStorageReference(E)}})}(u,a),u}(a,u,s)}function Bi(a,n){const s={},u=n.length;for(let f=0;f<u;f++){const E=n[f];E.writable&&(s[E.server]=a[E.local])}return JSON.stringify(s)}const hn="prefixes",dr="items";class gr{constructor(n,s,u,f){this.url=n,this.method=s,this.handler=u,this.timeout=f,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Lr(a){if(!a)throw $t()}function Ai(a,n){return function s(u,f){const E=Ao(a,f,n);return Lr(null!==E),E}}function Xr(a){return function n(s,u){let f;return f=401===s.getStatus()?s.getErrorText().includes("Firebase App Check token is invalid")?function cr(){return new dt(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function zn(){return new dt(it.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===s.getStatus()?function Cn(a){return new dt(it.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(a.bucket):403===s.getStatus()?function sr(a){return new dt(it.UNAUTHORIZED,"User does not have permission to access '"+a+"'.")}(a.path):u,f.status=s.getStatus(),f.serverResponse=u.serverResponse,f}}function nr(a){const n=Xr(a);return function s(u,f){let E=n(u,f);return 404===u.getStatus()&&(E=function Ln(a){return new dt(it.OBJECT_NOT_FOUND,"Object '"+a+"' does not exist.")}(a.path)),E.serverResponse=f.serverResponse,E}}function bs(a,n,s){const f=At(n.fullServerUrl(),a.host,a._protocol),I=a.maxOperationRetryTime,M=new gr(f,"GET",Ai(a,s),I);return M.errorHandler=nr(n),M}function lo(a,n,s,u,f){const E={};E.prefix=n.isRoot?"":n.path+"/",s&&s.length>0&&(E.delimiter=s),u&&(E.pageToken=u),f&&(E.maxResults=f);const M=At(n.bucketOnlyServerUrl(),a.host,a._protocol),ne=a.maxOperationRetryTime,Te=new gr(M,"GET",function Tr(a,n){return function s(u,f){const E=function is(a,n,s){const u=mt(s);return null===u?null:function mi(a,n,s){const u={prefixes:[],items:[],nextPageToken:s.nextPageToken};if(s[hn])for(const f of s[hn]){const E=f.replace(/\/$/,""),I=a._makeStorageReference(new cn(n,E));u.prefixes.push(I)}if(s[dr])for(const f of s[dr]){const E=a._makeStorageReference(new cn(n,f.name));u.items.push(E)}return u}(a,n,u)}(a,n,f);return Lr(null!==E),E}}(a,n.bucket),ne);return Te.urlParams=E,Te.errorHandler=Xr(n),Te}function Ki(a,n,s){const u=Object.assign({},s);return u.fullPath=a.path,u.size=n.size(),u.contentType||(u.contentType=function Cs(a,n){return a&&a.contentType||n&&n.type()||"application/octet-stream"}(null,n)),u}class Ei{constructor(n,s,u,f){this.current=n,this.total=s,this.finalized=!!u,this.metadata=f||null}}function si(a,n){let s=null;try{s=a.getResponseHeader("X-Goog-Upload-Status")}catch{Lr(!1)}return Lr(!!s&&-1!==(n||["active"]).indexOf(s)),s}const ft={STATE_CHANGED:"state_changed"},Ct={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Wt(a){switch(a){case"running":case"pausing":case"canceling":return Ct.RUNNING;case"paused":return Ct.PAUSED;case"success":return Ct.SUCCESS;case"canceled":return Ct.CANCELED;default:return Ct.ERROR}}class Xn{constructor(n,s,u){if(function Fr(a){return"function"==typeof a}(n)||null!=s||null!=u)this.next=n,this.error=s??void 0,this.complete=u??void 0;else{const E=n;this.next=E.next,this.error=E.error,this.complete=E.complete}}}function lr(a){return(...n)=>{Promise.resolve().then(()=>a(...n))}}let fr=null;class kr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xn.NO_ERROR,this.sendPromise_=new Promise(n=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xn.ABORT,n()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xn.NETWORK_ERROR,n()}),this.xhr_.addEventListener("load",()=>{n()})})}send(n,s,u,f){if(this.sent_)throw ir("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(s,n,!0),void 0!==f)for(const E in f)f.hasOwnProperty(E)&&this.xhr_.setRequestHeader(E,f[E].toString());return void 0!==u?this.xhr_.send(u):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ir("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ir("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ir("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ir("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(n){return this.xhr_.getResponseHeader(n)}addUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",n)}removeUploadProgressListener(n){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",n)}}class Ui extends kr{initXhr(){this.xhr_.responseType="text"}}function $i(){return fr?fr():new Ui}class Eo{constructor(n,s,u=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=n,this._blob=s,this._metadata=u,this._mappings=$r(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=f=>{if(this._request=void 0,this._chunkMultiplier=1,f._codeEquals(it.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const E=this.isExponentialBackoffExpired();if(Et(f.status,[])){if(!E)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();f=Dn()}this._error=f,this._transition("error")}},this._metadataErrorHandler=f=>{this._request=void 0,f._codeEquals(it.CANCELED)?this.completeTransitions_():(this._error=f,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((f,E)=>{this._resolve=f,this._reject=E,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const n=this._transferred;return s=>this._updateProgress(n+s)}_shouldDoResumable(n){return n.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(n){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([s,u])=>{switch(this._state){case"running":n(s,u);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((n,s)=>{const u=function ms(a,n,s,u,f){const E=n.bucketOnlyServerUrl(),I=Ki(n,u,f),M={name:I.fullPath},$=At(E,a.host,a._protocol),Te={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${u.size()}`,"X-Goog-Upload-Header-Content-Type":I.contentType,"Content-Type":"application/json; charset=utf-8"},Le=Bi(I,s),Vt=new gr($,"POST",function Nt(dn){let Rn;si(dn);try{Rn=dn.getResponseHeader("X-Goog-Upload-URL")}catch{Lr(!1)}return Lr(zr(Rn)),Rn},a.maxUploadRetryTime);return Vt.urlParams=M,Vt.headers=Te,Vt.body=Le,Vt.errorHandler=Xr(n),Vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),f=this._ref.storage._makeRequest(u,$i,n,s);this._request=f,f.getPromise().then(E=>{this._request=void 0,this._uploadUrl=E,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const n=this._uploadUrl;this._resolveToken((s,u)=>{const f=function Xs(a,n,s,u){const $=new gr(s,"POST",function E(ne){const Te=si(ne,["active","final"]);let Le=null;try{Le=ne.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Lr(!1)}Le||Lr(!1);const Xe=Number(Le);return Lr(!isNaN(Xe)),new Ei(Xe,u.size(),"final"===Te)},a.maxUploadRetryTime);return $.headers={"X-Goog-Upload-Command":"query"},$.errorHandler=Xr(n),$}(this._ref.storage,this._ref._location,n,this._blob),E=this._ref.storage._makeRequest(f,$i,s,u);this._request=E,E.getPromise().then(I=>{this._request=void 0,this._updateProgress(I.current),this._needToFetchStatus=!1,I.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const n=262144*this._chunkMultiplier,s=new Ei(this._transferred,this._blob.size()),u=this._uploadUrl;this._resolveToken((f,E)=>{let I;try{I=function We(a,n,s,u,f,E,I,M){const $=new Ei(0,0);if(I?($.current=I.current,$.total=I.total):($.current=0,$.total=u.size()),u.size()!==$.total)throw function on(){return new dt(it.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const ne=$.total-$.current;let Te=ne;f>0&&(Te=Math.min(Te,f));const Le=$.current;let Nt="";Nt=0===Te?"finalize":ne===Te?"upload, finalize":"upload";const Vt={"X-Goog-Upload-Command":Nt,"X-Goog-Upload-Offset":`${$.current}`},dn=u.slice(Le,Le+Te);if(null===dn)throw Tn();const br=new gr(s,"POST",function Rn(Qr,sa){const Ys=si(Qr,["active","final"]),oa=$.current+Te,Os=u.size();let _c;return _c="final"===Ys?Ai(n,E)(Qr,sa):null,new Ei(oa,Os,"final"===Ys,_c)},n.maxUploadRetryTime);return br.headers=Vt,br.body=dn.uploadData(),br.progressCallback=M||null,br.errorHandler=Xr(a),br}(this._ref._location,this._ref.storage,u,this._blob,n,this._mappings,s,this._makeProgressCallback())}catch($){return this._error=$,void this._transition("error")}const M=this._ref.storage._makeRequest(I,$i,f,E,!1);this._request=M,M.getPromise().then($=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress($.current),$.finalized?(this._metadata=$.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((n,s)=>{const u=bs(this._ref.storage,this._ref._location,this._mappings),f=this._ref.storage._makeRequest(u,$i,n,s);this._request=f,f.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((n,s)=>{const u=function Qs(a,n,s,u,f){const E=n.bucketOnlyServerUrl(),I={"X-Goog-Upload-Protocol":"multipart"},$=function M(){let br="";for(let Qr=0;Qr<2;Qr++)br+=Math.random().toString().slice(2);return br}();I["Content-Type"]="multipart/related; boundary="+$;const ne=Ki(n,u,f),Te=Bi(ne,s),Nt=ht.getBlob("--"+$+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Te+"\r\n--"+$+"\r\nContent-Type: "+ne.contentType+"\r\n\r\n",u,"\r\n--"+$+"--");if(null===Nt)throw Tn();const Vt={name:ne.fullPath},dn=At(E,a.host,a._protocol),pr=a.maxUploadRetryTime,Zr=new gr(dn,"POST",Ai(a,s),pr);return Zr.urlParams=Vt,Zr.headers=I,Zr.body=Nt.uploadData(),Zr.errorHandler=Xr(n),Zr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),f=this._ref.storage._makeRequest(u,$i,n,s);this._request=f,f.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(n){const s=this._transferred;this._transferred=n,this._transferred!==s&&this._notifyObservers()}_transition(n){if(this._state!==n)switch(n){case"canceling":case"pausing":this._state=n,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const s="paused"===this._state;this._state=n,s&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=n,this._notifyObservers();break;case"canceled":this._error=ur(),this._state=n,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const n=Wt(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:n,metadata:this._metadata,task:this,ref:this._ref}}on(n,s,u,f){const E=new Xn(s||void 0,u||void 0,f||void 0);return this._addObserver(E),()=>{this._removeObserver(E)}}then(n,s){return this._promise.then(n,s)}catch(n){return this.then(null,n)}_addObserver(n){this._observers.push(n),this._notifyObserver(n)}_removeObserver(n){const s=this._observers.indexOf(n);-1!==s&&this._observers.splice(s,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(s=>{this._notifyObserver(s)})}_finishPromise(){if(void 0!==this._resolve){let n=!0;switch(Wt(this._state)){case Ct.SUCCESS:lr(this._resolve.bind(null,this.snapshot))();break;case Ct.CANCELED:case Ct.ERROR:lr(this._reject.bind(null,this._error))();break;default:n=!1}n&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(n){switch(Wt(this._state)){case Ct.RUNNING:case Ct.PAUSED:n.next&&lr(n.next.bind(n,this.snapshot))();break;case Ct.SUCCESS:n.complete&&lr(n.complete.bind(n))();break;default:n.error&&lr(n.error.bind(n,this._error))()}}resume(){const n="paused"===this._state||"pausing"===this._state;return n&&this._transition("running"),n}pause(){const n="running"===this._state;return n&&this._transition("pausing"),n}cancel(){const n="running"===this._state||"pausing"===this._state;return n&&this._transition("canceling"),n}}class es{constructor(n,s){this._service=n,this._location=s instanceof cn?s:cn.makeFromUrl(s,n.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(n,s){return new es(n,s)}get root(){const n=new cn(this._location.bucket,"");return this._newRef(this._service,n)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Bn(this._location.path)}get storage(){return this._service}get parent(){const n=function Qt(a){if(0===a.length)return null;const n=a.lastIndexOf("/");return-1===n?"":a.slice(0,n)}(this._location.path);if(null===n)return null;const s=new cn(this._location.bucket,n);return new es(this._service,s)}_throwIfRoot(n){if(""===this._location.path)throw Ri(n)}}function Aa(a,n,s){return xa.apply(this,arguments)}function xa(){return(xa=(0,nn.Z)(function*(a,n,s){const f=yield js(a,{pageToken:s});n.prefixes.push(...f.prefixes),n.items.push(...f.items),null!=f.nextPageToken&&(yield Aa(a,n,f.nextPageToken))})).apply(this,arguments)}function js(a,n){null!=n&&"number"==typeof n.maxResults&&je("options.maxResults",1,1e3,n.maxResults);const s=n||{},u=lo(a.storage,a._location,"/",s.pageToken,s.maxResults);return a.storage.makeRequestWithTokens(u,$i)}function Oo(a){a._throwIfRoot("getDownloadURL");const n=function Zs(a,n,s){const f=At(n.fullServerUrl(),a.host,a._protocol),I=a.maxOperationRetryTime,M=new gr(f,"GET",function Ts(a,n){return function s(u,f){const E=Ao(a,f,n);return Lr(null!==E),function xo(a,n,s,u){const f=mt(n);if(null===f||!zr(f.downloadTokens))return null;const E=f.downloadTokens;if(0===E.length)return null;const I=encodeURIComponent;return E.split(",").map(ne=>{const Le=a.fullPath;return At("/b/"+I(a.bucket)+"/o/"+I(Le),s,u)+an({alt:"media",token:ne})})[0]}(E,f,a.host,a._protocol)}}(a,s),I);return M.errorHandler=nr(n),M}(a.storage,a._location,$r());return a.storage.makeRequestWithTokens(n,$i).then(s=>{if(null===s)throw function Cr(){return new dt(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return s})}function Ii(a,n){const s=function Nn(a,n){const s=n.split("/").filter(u=>u.length>0).join("/");return 0===a.length?s:a+"/"+s}(a._location.path,n),u=new cn(a._location.bucket,s);return new es(a.storage,u)}function ss(a,n){if(a instanceof $a){const s=a;if(null==s._bucket)throw function Dr(){return new dt(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ze+"' property when initializing the app?")}();const u=new es(s,s._bucket);return null!=n?ss(u,n):u}return void 0!==n?Ii(a,n):a}function Hs(a,n){if(n&&function la(a){return/^[A-Za-z]+:\/\//.test(a)}(n)){if(a instanceof $a)return function cs(a,n){return new es(a,n)}(a,n);throw jr("To use ref(service, url), the first argument must be a Storage instance.")}return ss(a,n)}function Po(a,n){const s=n?.[Ze];return null==s?null:cn.makeFromBucketSpec(s,a)}class $a{constructor(n,s,u,f,E){this.app=n,this._authProvider=s,this._appCheckProvider=u,this._url=f,this._firebaseVersion=E,this._bucket=null,this._host=Qn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=f?cn.makeFromBucketSpec(f,this._host):Po(this._host,this.app.options)}get host(){return this._host}set host(n){this._host=n,this._bucket=null!=this._url?cn.makeFromBucketSpec(this._url,n):Po(n,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(n){je("time",0,Number.POSITIVE_INFINITY,n),this._maxUploadRetryTime=n}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(n){je("time",0,Number.POSITIVE_INFINITY,n),this._maxOperationRetryTime=n}_getAuthToken(){var n=this;return(0,nn.Z)(function*(){if(n._overrideAuthToken)return n._overrideAuthToken;const s=n._authProvider.getImmediate({optional:!0});if(s){const u=yield s.getToken();if(null!==u)return u.accessToken}return null})()}_getAppCheckToken(){var n=this;return(0,nn.Z)(function*(){const s=n._appCheckProvider.getImmediate({optional:!0});return s?(yield s.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(n=>n.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(n){return new es(this,n)}_makeRequest(n,s,u,f,E=!0){if(this._deleted)return new un(ci());{const I=function be(a,n,s,u,f,E,I=!0){const M=an(a.urlParams),$=a.url+M,ne=Object.assign({},a.headers);return function vt(a,n){n&&(a["X-Firebase-GMPID"]=n)}(ne,n),function le(a,n){null!==n&&n.length>0&&(a.Authorization="Firebase "+n)}(ne,s),function ct(a,n){a["X-Firebase-Storage-Version"]="webjs/"+(n??"AppManager")}(ne,E),function ve(a,n){null!==n&&(a["X-Firebase-AppCheck"]=n)}(ne,u),new de($,a.method,ne,a.body,a.successCodes,a.additionalRetryCodes,a.handler,a.errorHandler,a.timeout,a.progressCallback,f,I)}(n,this._appId,u,f,s,this._firebaseVersion,E);return this._requests.add(I),I.getPromise().then(()=>this._requests.delete(I),()=>this._requests.delete(I)),I}}makeRequestWithTokens(n,s){var u=this;return(0,nn.Z)(function*(){const[f,E]=yield Promise.all([u._getAuthToken(),u._getAppCheckToken()]);return u._makeRequest(n,s,f,E).getPromise()})()}}const ua="@firebase/storage";function Be(a,n){return Hs(a=(0,_e.m9)(a),n)}function Pr(a,{instanceIdentifier:n}){const s=a.getProvider("app").getImmediate(),u=a.getProvider("auth-internal"),f=a.getProvider("app-check-internal");return new $a(s,u,f,n,Mr.SDK_VERSION)}!function ji(){(0,Mr._registerComponent)(new Kn.wA("storage",Pr,"PUBLIC").setMultipleInstances(!0)),(0,Mr.registerVersion)(ua,"0.11.2",""),(0,Mr.registerVersion)(ua,"0.11.2","esm2017")}();class wi{constructor(n,s,u){this._delegate=n,this.task=s,this.ref=u}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Hi{constructor(n,s){this._delegate=n,this._ref=s,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wi(this._delegate.snapshot,this,this._ref)}then(n,s){return this._delegate.then(u=>{if(n)return n(new wi(u,this,this._ref))},s)}on(n,s,u,f){let E;return s&&(E="function"==typeof s?I=>s(new wi(I,this,this._ref)):{next:s.next?I=>s.next(new wi(I,this,this._ref)):void 0,complete:s.complete||void 0,error:s.error||void 0}),this._delegate.on(n,E,u||void 0,f||void 0)}}class Vn{constructor(n,s){this._delegate=n,this._service=s}get prefixes(){return this._delegate.prefixes.map(n=>new ui(n,this._service))}get items(){return this._delegate.items.map(n=>new ui(n,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ui{constructor(n,s){this._delegate=n,this.storage=s}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(n){const s=function Mt(a,n){return Ii(a,n)}(this._delegate,n);return new ui(s,this.storage)}get root(){return new ui(this._delegate.root,this.storage)}get parent(){const n=this._delegate.parent;return null==n?null:new ui(n,this.storage)}put(n,s){return this._throwIfRoot("put"),new Hi(function os(a,n,s){return function gs(a,n,s){return a._throwIfRoot("uploadBytesResumable"),new Eo(a,new ht(n),s)}(a=(0,_e.m9)(a),n,s)}(this._delegate,n,s),this)}putString(n,s=pe.RAW,u){this._throwIfRoot("putString");const f=oe(s,n),E=Object.assign({},u);return null==E.contentType&&null!=f.contentType&&(E.contentType=f.contentType),new Hi(new Eo(this._delegate,new ht(f.data,!0),E),this)}listAll(){return function R(a){return function co(a){const n={prefixes:[],items:[]};return Aa(a,n).then(()=>n)}(a=(0,_e.m9)(a))}(this._delegate).then(n=>new Vn(n,this.storage))}list(n){return function V(a,n){return js(a=(0,_e.m9)(a),n)}(this._delegate,n||void 0).then(s=>new Vn(s,this.storage))}getMetadata(){return function Yi(a){return function qi(a){a._throwIfRoot("getMetadata");const n=bs(a.storage,a._location,$r());return a.storage.makeRequestWithTokens(n,$i)}(a=(0,_e.m9)(a))}(this._delegate)}updateMetadata(n){return function Ee(a,n){return function Ma(a,n){a._throwIfRoot("updateMetadata");const s=function Vr(a,n,s,u){const E=At(n.fullServerUrl(),a.host,a._protocol),M=Bi(s,u),ne=a.maxOperationRetryTime,Te=new gr(E,"PATCH",Ai(a,u),ne);return Te.headers={"Content-Type":"application/json; charset=utf-8"},Te.body=M,Te.errorHandler=nr(n),Te}(a.storage,a._location,n,$r());return a.storage.makeRequestWithTokens(s,$i)}(a=(0,_e.m9)(a),n)}(this._delegate,n)}getDownloadURL(){return function Y(a){return Oo(a=(0,_e.m9)(a))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function me(a){return function wo(a){a._throwIfRoot("deleteObject");const n=function Mo(a,n){const u=At(n.fullServerUrl(),a.host,a._protocol),M=new gr(u,"DELETE",function I($,ne){},a.maxOperationRetryTime);return M.successCodes=[200,204],M.errorHandler=nr(n),M}(a.storage,a._location);return a.storage.makeRequestWithTokens(n,$i)}(a=(0,_e.m9)(a))}(this._delegate)}_throwIfRoot(n){if(""===this._delegate._location.path)throw Ri(n)}}class q{constructor(n,s){this.app=n,this._delegate=s}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(n){if(z(n))throw jr("ref() expected a child path but got a URL, use refFromURL instead.");return new ui(Be(this._delegate,n),this)}refFromURL(n){if(!z(n))throw jr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{cn.makeFromUrl(n,this._delegate.host)}catch{throw jr("refFromUrl() expected a valid full URL but got an invalid one.")}return new ui(Be(this._delegate,n),this)}setMaxUploadRetryTime(n){this._delegate.maxUploadRetryTime=n}setMaxOperationRetryTime(n){this._delegate.maxOperationRetryTime=n}useEmulator(n,s,u={}){!function Jt(a,n,s,u={}){!function ca(a,n,s,u={}){a.host=`${n}:${s}`,a._protocol="http";const{mockUserToken:f}=u;f&&(a._overrideAuthToken="string"==typeof f?f:(0,_e.Sg)(f,a.app.options.projectId))}(a,n,s,u)}(this._delegate,n,s,u)}}function z(a){return/^[A-Za-z]+:\/\//.test(a)}function On(a,{instanceIdentifier:n}){const s=a.getProvider("app-compat").getImmediate(),u=a.getProvider("storage").getImmediate({identifier:n});return new q(s,u)}!function as(a){const n={TaskState:Ct,TaskEvent:ft,StringFormat:pe,Storage:q,Reference:ui};a.INTERNAL.registerComponent(new Kn.wA("storage-compat",On,"PUBLIC").setServiceProps(n).setMultipleInstances(!0)),a.registerVersion("@firebase/storage-compat","0.3.2")}(kn.Z);var Pt=j(6217);function ko(a){const n=function Er(a){return new Bt.y(n=>{const s=I=>n.next(I);s(a.snapshot);const E=a.on("state_changed",s);return a.then(I=>{s(I),n.complete()},I=>{s(a.snapshot),(I=>{n.error(I)})(I)}),function(){E()}}).pipe((0,Ye.b)(0))}(a);return{task:a,then:a.then.bind(a),catch:a.catch.bind(a),pause:a.pause.bind(a),cancel:a.cancel.bind(a),resume:a.resume.bind(a),snapshotChanges:()=>n,percentageChanges:()=>n.pipe((0,Fe.U)(s=>s.bytesTransferred/s.totalBytes*100))}}function No(a){return{getDownloadURL:()=>(0,Ot.of)(void 0).pipe(xt.fc,(0,zt.w)(()=>a.getDownloadURL()),xt.iC),getMetadata:()=>(0,Ot.of)(void 0).pipe(xt.fc,(0,zt.w)(()=>a.getMetadata()),xt.iC),delete:()=>(0,nt.D)(a.delete()),child:n=>No(a.child(n)),updateMetadata:n=>(0,nt.D)(a.updateMetadata(n)),put:(n,s)=>ko(a.put(n,s)),putString:(n,s,u)=>ko(a.putString(n,s,u)),list:n=>(0,nt.D)(a.list(n)),listAll:()=>(0,nt.D)(a.listAll())}}const Zi=new W.OlP("angularfire2.storageBucket"),Wa=new W.OlP("angularfire2.storage.maxUploadRetryTime"),ul=new W.OlP("angularfire2.storage.maxOperationRetryTime"),eo=new W.OlP("angularfire2.storage.use-emulator");let Zo=(()=>{class a{constructor(s,u,f,E,I,M,$,ne,Te,Le){const Xe=(0,ze.on)(s,I,u);this.storage=(0,ze.cc)(`${Xe.name}.storage.${f}`,"AngularFireStorage",Xe.name,()=>{const Nt=I.runOutsideAngular(()=>Xe.storage(f||void 0)),Vt=Te;return Vt&&Nt.useEmulator(...Vt),$&&Nt.setMaxUploadRetryTime($),ne&&Nt.setMaxOperationRetryTime(ne),Nt},[$,ne])}ref(s){return No(this.storage.ref(s))}refFromURL(s){return No(this.storage.refFromURL(s))}upload(s,u,f){return No(this.storage.ref(s)).put(u,f)}}return a.\u0275fac=function(s){return new(s||a)(W.LFG(ze.Dh),W.LFG(ze.xv,8),W.LFG(Zi,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(xt.HU),W.LFG(Wa,8),W.LFG(ul,8),W.LFG(eo,8),W.LFG(Pt.nm,8))},a.\u0275prov=W.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})(),Cd=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=W.oAB({type:a}),a.\u0275inj=W.cJS({}),a})(),fa=(()=>{class a{constructor(){$e.Z.registerVersion("angularfire",xt.q4.full,"gcs-compat")}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=W.oAB({type:a}),a.\u0275inj=W.cJS({providers:[Zo],imports:[Cd]}),a})();var dl=j(1762),ts=j(4986),to=j(6451),Fo=j(3099),Co=j(5026),uo=j(1884),Ka=j(4482),pa=j(5403),Kl=j(8421),Ec=j(4671),_s=j(5032),hl=j(3269);j(2644);var Lo=j(1877);const Ra="@firebase/database";let no="";function Za(a){no=a}class Gc{constructor(n){this.domStorage_=n,this.prefix_="firebase:"}set(n,s){null==s?this.domStorage_.removeItem(this.prefixedName_(n)):this.domStorage_.setItem(this.prefixedName_(n),(0,_e.Wl)(s))}get(n){const s=this.domStorage_.getItem(this.prefixedName_(n));return null==s?null:(0,_e.cI)(s)}remove(n){this.domStorage_.removeItem(this.prefixedName_(n))}prefixedName_(n){return this.prefix_+n}toString(){return this.domStorage_.toString()}}class ql{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(n,s){null==s?delete this.cache_[n]:this.cache_[n]=s}get(n){return(0,_e.r3)(this.cache_,n)?this.cache_[n]:null}remove(n){delete this.cache_[n]}}const Wc=function(a){try{if(typeof window<"u"&&typeof window[a]<"u"){const n=window[a];return n.setItem("firebase:sentinel","cache"),n.removeItem("firebase:sentinel"),new Gc(n)}}catch{}return new ql},Io=Wc("localStorage"),Di=Wc("sessionStorage"),$s=new Lo.Yd("@firebase/database"),Gi=function(){let a=1;return function(){return a++}}(),Qo=function(a){const n=(0,_e.dS)(a),s=new _e.gQ;s.update(n);const u=s.digest();return _e.US.encodeByteArray(u)},Yl=function(...a){let n="";for(let s=0;s<a.length;s++){const u=a[s];Array.isArray(u)||u&&"object"==typeof u&&"number"==typeof u.length?n+=Yl.apply(null,u):n+="object"==typeof u?(0,_e.Wl)(u):u,n+=" "}return n};let Qi=null,wc=!0;const bi=function(a,n){(0,_e.hu)(!n||!0===a||!1===a,"Can't turn on custom loggers persistently."),!0===a?($s.logLevel=Lo.in.VERBOSE,Qi=$s.log.bind($s),n&&Di.set("logging_enabled",!0)):"function"==typeof a?Qi=a:(Qi=null,Di.remove("logging_enabled"))},Ps=function(...a){if(!0===wc&&(wc=!1,null===Qi&&!0===Di.get("logging_enabled")&&bi(!0)),Qi){const n=Yl.apply(null,a);Qi(n)}},Xo=function(a){return function(...n){Ps(a,...n)}},ho=function(...a){const n="FIREBASE INTERNAL ERROR: "+Yl(...a);$s.error(n)},fo=function(...a){const n=`FIREBASE FATAL ERROR: ${Yl(...a)}`;throw $s.error(n),new Error(n)},k=function(...a){const n="FIREBASE WARNING: "+Yl(...a);$s.warn(n)},U=function(a){return"number"==typeof a&&(a!=a||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)},xe="[MIN_NAME]",wt="[MAX_NAME]",kt=function(a,n){if(a===n)return 0;if(a===xe||n===wt)return-1;if(n===xe||a===wt)return 1;{const s=ro(a),u=ro(n);return null!==s?null!==u?s-u==0?a.length-n.length:s-u:-1:null!==u?1:a<n?-1:1}},jn=function(a,n){return a===n?0:a<n?-1:1},_i=function(a,n){if(n&&a in n)return n[a];throw new Error("Missing required key ("+a+") in object: "+(0,_e.Wl)(n))},Jr=function(a){if("object"!=typeof a||null===a)return(0,_e.Wl)(a);const n=[];for(const u in a)n.push(u);n.sort();let s="{";for(let u=0;u<n.length;u++)0!==u&&(s+=","),s+=(0,_e.Wl)(n[u]),s+=":",s+=Jr(a[n[u]]);return s+="}",s},Nr=function(a,n){const s=a.length;if(s<=n)return[a];const u=[];for(let f=0;f<s;f+=n)u.push(a.substring(f,f+n>s?s:f+n));return u};function Yn(a,n){for(const s in a)a.hasOwnProperty(s)&&n(s,a[s])}const Oi=function(a){(0,_e.hu)(!U(a),"Invalid JSON number");const u=1023;let f,E,I,M,$;0===a?(E=0,I=0,f=1/a==-1/0?1:0):(f=a<0,(a=Math.abs(a))>=Math.pow(2,1-u)?(M=Math.min(Math.floor(Math.log(a)/Math.LN2),u),E=M+u,I=Math.round(a*Math.pow(2,52-M)-Math.pow(2,52))):(E=0,I=Math.round(a/Math.pow(2,-1074))));const ne=[];for($=52;$;$-=1)ne.push(I%2?1:0),I=Math.floor(I/2);for($=11;$;$-=1)ne.push(E%2?1:0),E=Math.floor(E/2);ne.push(f?1:0),ne.reverse();const Te=ne.join("");let Le="";for($=0;$<64;$+=8){let Xe=parseInt(Te.substr($,8),2).toString(16);1===Xe.length&&(Xe="0"+Xe),Le+=Xe}return Le.toLowerCase()},po=new RegExp("^-?(0*)\\d{1,10}$"),ro=function(a){if(po.test(a)){const n=Number(a);if(n>=-2147483648&&n<=2147483647)return n}return null},ks=function(a){try{a()}catch(n){setTimeout(()=>{throw k("Exception was thrown by user callback.",n.stack||""),n},Math.floor(0))}},Bo=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Il=function(a,n){const s=setTimeout(a,n);return"number"==typeof s&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(s):"object"==typeof s&&s.unref&&s.unref(),s};class pl{constructor(n,s){this.appName_=n,this.appCheckProvider=s,this.appCheck=s?.getImmediate({optional:!0}),this.appCheck||s?.get().then(u=>this.appCheck=u)}getToken(n){return this.appCheck?this.appCheck.getToken(n):new Promise((s,u)=>{setTimeout(()=>{this.appCheck?this.getToken(n).then(s,u):s(null)},0)})}addTokenChangeListener(n){var s;null===(s=this.appCheckProvider)||void 0===s||s.get().then(u=>u.addTokenListener(n))}notifyForInvalidToken(){k(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Id{constructor(n,s,u){this.appName_=n,this.firebaseOptions_=s,this.authProvider_=u,this.auth_=null,this.auth_=u.getImmediate({optional:!0}),this.auth_||u.onInit(f=>this.auth_=f)}getToken(n){return this.auth_?this.auth_.getToken(n).catch(s=>s&&"auth/token-not-initialized"===s.code?(Ps("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,u)=>{setTimeout(()=>{this.auth_?this.getToken(n).then(s,u):s(null)},0)})}addTokenChangeListener(n){this.auth_?this.auth_.addAuthTokenListener(n):this.authProvider_.get().then(s=>s.addAuthTokenListener(n))}removeTokenChangeListener(n){this.authProvider_.get().then(s=>s.removeAuthTokenListener(n))}notifyForInvalidToken(){let n='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';n+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',k(n)}}let ns=(()=>{class a{constructor(s){this.accessToken=s}getToken(s){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(s){s(this.accessToken)}removeTokenChangeListener(s){}notifyForInvalidToken(){}}return a.OWNER="owner",a})();const Xi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jn="websocket",Dl="long_polling";class Sn{constructor(n,s,u,f,E=!1,I="",M=!1,$=!1){this.secure=s,this.namespace=u,this.webSocketOnly=f,this.nodeAdmin=E,this.persistenceKey=I,this.includeNamespaceInQueryParams=M,this.isUsingEmulator=$,this._host=n.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Io.get("host:"+n)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(n){n!==this.internalHost&&(this.internalHost=n,this.isCacheableHost()&&Io.set("host:"+this._host,this.internalHost))}toString(){let n=this.toURLString();return this.persistenceKey&&(n+="<"+this.persistenceKey+">"),n}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qt(a,n,s){let u;if((0,_e.hu)("string"==typeof n,"typeof type must == string"),(0,_e.hu)("object"==typeof s,"typeof params must == object"),n===Jn)u=(a.secure?"wss://":"ws://")+a.internalHost+"/.ws?";else{if(n!==Dl)throw new Error("Unknown connection type: "+n);u=(a.secure?"https://":"http://")+a.internalHost+"/.lp?"}(function Rt(a){return a.host!==a.internalHost||a.isCustomHost()||a.includeNamespaceInQueryParams})(a)&&(s.ns=a.namespace);const f=[];return Yn(s,(E,I)=>{f.push(E+"="+I)}),u+f.join("&")}class fi{constructor(){this.counters_={}}incrementCounter(n,s=1){(0,_e.r3)(this.counters_,n)||(this.counters_[n]=0),this.counters_[n]+=s}get(){return(0,_e.p$)(this.counters_)}}const Zl={},ds={};function Sl(a){const n=a.toString();return Zl[n]||(Zl[n]=new fi),Zl[n]}class Gs{constructor(n){this.onMessage_=n,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(n,s){this.closeAfterResponse=n,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(n,s){for(this.pendingResponses[n]=s;this.pendingResponses[this.currentResponseNum];){const u=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let f=0;f<u.length;++f)u[f]&&ks(()=>{this.onMessage_(u[f])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Jo{constructor(n,s,u,f,E,I,M){this.connId=n,this.repoInfo=s,this.applicationId=u,this.appCheckToken=f,this.authToken=E,this.transportSessionId=I,this.lastSessionId=M,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xo(n),this.stats_=Sl(s),this.urlFn=$=>(this.appCheckToken&&($.ac=this.appCheckToken),qt(s,Dl,$))}open(n,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new Gs(n),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(a){if((0,_e.Yr)()||"complete"===document.readyState)a();else{let n=!1;const s=function(){document.body?n||(n=!0,a()):setTimeout(s,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&s()}),window.attachEvent("onload",s))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Al((...E)=>{const[I,M,$,ne,Te]=E;if(this.incrementIncomingBytes_(E),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===I)this.id=M,this.password=$;else{if("close"!==I)throw new Error("Unrecognized command received: "+I);M?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(M,()=>{this.onClosed_()})):this.onClosed_()}},(...E)=>{const[I,M]=E;this.incrementIncomingBytes_(E),this.myPacketOrderer.handleResponse(I,M)},()=>{this.onClosed_()},this.urlFn);const u={start:"t"};u.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(u.cb=this.scriptTagHolder.uniqueCallbackIdentifier),u.v="5",this.transportSessionId&&(u.s=this.transportSessionId),this.lastSessionId&&(u.ls=this.lastSessionId),this.applicationId&&(u.p=this.applicationId),this.appCheckToken&&(u.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Xi.test(location.hostname)&&(u.r="f");const f=this.urlFn(u);this.log_("Connecting via long-poll to "+f),this.scriptTagHolder.addTag(f,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Jo.forceAllow_=!0}static forceDisallow(){Jo.forceDisallow_=!0}static isAvailable(){return!((0,_e.Yr)()||!Jo.forceAllow_&&(Jo.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(n){const s=(0,_e.Wl)(n);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const u=(0,_e.h$)(s),f=Nr(u,1840);for(let E=0;E<f.length;E++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,f.length,f[E]),this.curSegmentNum++}addDisconnectPingFrame(n,s){if((0,_e.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const u={dframe:"t"};u.id=n,u.pw=s,this.myDisconnFrame.src=this.urlFn(u),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(n){const s=(0,_e.Wl)(n).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class Al{constructor(n,s,u,f){if(this.onDisconnect=u,this.urlFn=f,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,_e.Yr)())this.commandCB=n,this.onMessageCB=s;else{this.uniqueCallbackIdentifier=Gi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=n,window["pRTLPCB"+this.uniqueCallbackIdentifier]=s,this.myIFrame=Al.createIFrame_();let E="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(E='<script>document.domain="'+document.domain+'";<\/script>');const I="<html><body>"+E+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(I),this.myIFrame.doc.close()}catch(M){Ps("frame writing exception"),M.stack&&Ps(M.stack),Ps(M)}}}static createIFrame_(){const n=document.createElement("iframe");if(n.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(n);try{n.contentWindow.document||Ps("No IE domain setting required")}catch{const u=document.domain;n.src="javascript:void((function(){document.open();document.domain='"+u+"';document.close();})())"}return n.contentDocument?n.doc=n.contentDocument:n.contentWindow?n.doc=n.contentWindow.document:n.document&&(n.doc=n.document),n}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const n=this.onDisconnect;n&&(this.onDisconnect=null,n())}startLongPoll(n,s){for(this.myID=n,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const n={};n.id=this.myID,n.pw=this.myPW,n.ser=this.currentSerial;let s=this.urlFn(n),u="",f=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+u.length<=1870;){const I=this.pendingSegs.shift();u=u+"&seg"+f+"="+I.seg+"&ts"+f+"="+I.ts+"&d"+f+"="+I.d,f++}return s+=u,this.addLongPollTag_(s,this.currentSerial),!0}return!1}enqueueSegment(n,s,u){this.pendingSegs.push({seg:n,ts:s,d:u}),this.alive&&this.newRequest_()}addLongPollTag_(n,s){this.outstandingRequests.add(s);const u=()=>{this.outstandingRequests.delete(s),this.newRequest_()},f=setTimeout(u,Math.floor(25e3));this.addTag(n,()=>{clearTimeout(f),u()})}addTag(n,s){(0,_e.Yr)()?this.doNodeLongPoll(n,s):setTimeout(()=>{try{if(!this.sendNewPolls)return;const u=this.myIFrame.doc.createElement("script");u.type="text/javascript",u.async=!0,u.src=n,u.onload=u.onreadystatechange=function(){const f=u.readyState;(!f||"loaded"===f||"complete"===f)&&(u.onload=u.onreadystatechange=null,u.parentNode&&u.parentNode.removeChild(u),s())},u.onerror=()=>{Ps("Long-poll script failed to load: "+n),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(u)}catch{}},Math.floor(1))}}let pu=null;typeof MozWebSocket<"u"?pu=MozWebSocket:typeof WebSocket<"u"&&(pu=WebSocket);let Ja=(()=>{class a{constructor(s,u,f,E,I,M,$){this.connId=s,this.applicationId=f,this.appCheckToken=E,this.authToken=I,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xo(this.connId),this.stats_=Sl(u),this.connURL=a.connectionURL_(u,M,$,E,f),this.nodeAdmin=u.nodeAdmin}static connectionURL_(s,u,f,E,I){const M={v:"5"};return!(0,_e.Yr)()&&typeof location<"u"&&location.hostname&&Xi.test(location.hostname)&&(M.r="f"),u&&(M.s=u),f&&(M.ls=f),E&&(M.ac=E),I&&(M.p=I),qt(s,Jn,M)}open(s,u){this.onDisconnect=u,this.onMessage=s,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Io.set("previous_websocket_failure",!0);try{let f;if((0,_e.Yr)()){f={headers:{"User-Agent":`Firebase/5/${no}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(f.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(f.headers["X-Firebase-AppCheck"]=this.appCheckToken);const I=process.env,M=0===this.connURL.indexOf("wss://")?I.HTTPS_PROXY||I.https_proxy:I.HTTP_PROXY||I.http_proxy;M&&(f.proxy={origin:M})}this.mySock=new pu(this.connURL,[],f)}catch(f){this.log_("Error instantiating WebSocket.");const E=f.message||f.data;return E&&this.log_(E),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=f=>{this.handleIncomingFrame(f)},this.mySock.onerror=f=>{this.log_("WebSocket error.  Closing connection.");const E=f.message||f.data;E&&this.log_(E),this.onClosed_()}}start(){}static forceDisallow(){a.forceDisallow_=!0}static isAvailable(){let s=!1;if(typeof navigator<"u"&&navigator.userAgent){const f=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);f&&f.length>1&&parseFloat(f[1])<4.4&&(s=!0)}return!s&&null!==pu&&!a.forceDisallow_}static previouslyFailed(){return Io.isInMemoryStorage||!0===Io.get("previous_websocket_failure")}markConnectionHealthy(){Io.remove("previous_websocket_failure")}appendFrame_(s){if(this.frames.push(s),this.frames.length===this.totalFrames){const u=this.frames.join("");this.frames=null;const f=(0,_e.cI)(u);this.onMessage(f)}}handleNewFrameCount_(s){this.totalFrames=s,this.frames=[]}extractFrameCount_(s){if((0,_e.hu)(null===this.frames,"We already have a frame buffer"),s.length<=6){const u=Number(s);if(!isNaN(u))return this.handleNewFrameCount_(u),null}return this.handleNewFrameCount_(1),s}handleIncomingFrame(s){if(null===this.mySock)return;const u=s.data;if(this.bytesReceived+=u.length,this.stats_.incrementCounter("bytes_received",u.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(u);else{const f=this.extractFrameCount_(u);null!==f&&this.appendFrame_(f)}}send(s){this.resetKeepAlive();const u=(0,_e.Wl)(s);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const f=Nr(u,16384);f.length>1&&this.sendString_(String(f.length));for(let E=0;E<f.length;E++)this.sendString_(f[E])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(s){try{this.mySock.send(s)}catch(u){this.log_("Exception thrown from WebSocket.send():",u.message||u.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return a.responsesRequiredToBeHealthy=2,a.healthyTimeout=3e4,a})(),ml=(()=>{class a{constructor(s){this.initTransports_(s)}static get ALL_TRANSPORTS(){return[Jo,Ja]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(s){const u=Ja&&Ja.isAvailable();let f=u&&!Ja.previouslyFailed();if(s.webSocketOnly&&(u||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),f=!0),f)this.transports_=[Ja];else{const E=this.transports_=[];for(const I of a.ALL_TRANSPORTS)I&&I.isAvailable()&&E.push(I);a.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return a.globalTransportInitialized_=!1,a})();class K{constructor(n,s,u,f,E,I,M,$,ne,Te){this.id=n,this.repoInfo_=s,this.applicationId_=u,this.appCheckToken_=f,this.authToken_=E,this.onMessage_=I,this.onReady_=M,this.onDisconnect_=$,this.onKill_=ne,this.lastSessionId=Te,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xo("c:"+this.id+":"),this.transportManager_=new ml(s),this.log_("Connection created"),this.start_()}start_(){const n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),u=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,u)},Math.floor(0));const f=n.healthyTimeout||0;f>0&&(this.healthyTimeout_=Il(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(f)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(n){return s=>{n===this.conn_?this.onConnectionLost_(s):n===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(n){return s=>{2!==this.state_&&(n===this.rx_?this.onPrimaryMessageReceived_(s):n===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(n){this.sendData_({t:"d",d:n})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(n){if("t"in n){const s=n.t;"a"===s?this.upgradeIfSecondaryHealthy_():"r"===s?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===s&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(n){const s=_i("t",n),u=_i("d",n);if("c"===s)this.onSecondaryControl_(u);else{if("d"!==s)throw new Error("Unknown protocol layer: "+s);this.pendingDataMessages.push(u)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(n){const s=_i("t",n),u=_i("d",n);"c"===s?this.onControl_(u):"d"===s&&this.onDataMessage_(u)}onDataMessage_(n){this.onPrimaryResponse_(),this.onMessage_(n)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(n){const s=_i("t",n);if("d"in n){const u=n.d;if("h"===s){const f=Object.assign({},u);this.repoInfo_.isUsingEmulator&&(f.h=this.repoInfo_.host),this.onHandshake_(f)}else if("n"===s){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let f=0;f<this.pendingDataMessages.length;++f)this.onDataMessage_(this.pendingDataMessages[f]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===s?this.onConnectionShutdown_(u):"r"===s?this.onReset_(u):"e"===s?ho("Server Error: "+u):"o"===s?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ho("Unknown control packet command: "+s)}}onHandshake_(n){const s=n.ts,u=n.v,f=n.h;this.sessionId=n.s,this.repoInfo_.host=f,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),"5"!==u&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const n=this.transportManager_.upgradeTransport();n&&this.startUpgrade_(n)}startUpgrade_(n){this.secondaryConn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),u=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,u),Il(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(n){this.log_("Reset packet received.  New host: "+n),this.repoInfo_.host=n,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(n,s){this.log_("Realtime connection established."),this.conn_=n,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Il(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const n=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===n||this.rx_===n)&&this.close()}onConnectionLost_(n){this.conn_=null,n||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Io.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(n){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(n),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(n){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(n)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ie{put(n,s,u,f){}merge(n,s,u,f){}refreshAuthToken(n){}refreshAppCheckToken(n){}onDisconnectPut(n,s,u){}onDisconnectMerge(n,s,u){}onDisconnectCancel(n,s){}reportStats(n){}}class ge{constructor(n){this.allowedEvents_=n,this.listeners_={},(0,_e.hu)(Array.isArray(n)&&n.length>0,"Requires a non-empty array")}trigger(n,...s){if(Array.isArray(this.listeners_[n])){const u=[...this.listeners_[n]];for(let f=0;f<u.length;f++)u[f].callback.apply(u[f].context,s)}}on(n,s,u){this.validateEventType_(n),this.listeners_[n]=this.listeners_[n]||[],this.listeners_[n].push({callback:s,context:u});const f=this.getInitialEvent(n);f&&s.apply(u,f)}off(n,s,u){this.validateEventType_(n);const f=this.listeners_[n]||[];for(let E=0;E<f.length;E++)if(f[E].callback===s&&(!u||u===f[E].context))return void f.splice(E,1)}validateEventType_(n){(0,_e.hu)(this.allowedEvents_.find(s=>s===n),"Unknown event: "+n)}}class Je extends ge{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,_e.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Je}getInitialEvent(n){return(0,_e.hu)("online"===n,"Unknown event type: "+n),[this.online_]}currentlyOnline(){return this.online_}}const Gt=32,pn=768;class Zt{constructor(n,s){if(void 0===s){this.pieces_=n.split("/");let u=0;for(let f=0;f<this.pieces_.length;f++)this.pieces_[f].length>0&&(this.pieces_[u]=this.pieces_[f],u++);this.pieces_.length=u,this.pieceNum_=0}else this.pieces_=n,this.pieceNum_=s}toString(){let n="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)""!==this.pieces_[s]&&(n+="/"+this.pieces_[s]);return n||"/"}}function $n(){return new Zt("")}function ar(a){return a.pieceNum_>=a.pieces_.length?null:a.pieces_[a.pieceNum_]}function Ci(a){return a.pieces_.length-a.pieceNum_}function oi(a){let n=a.pieceNum_;return n<a.pieces_.length&&n++,new Zt(a.pieces_,n)}function ya(a){return a.pieceNum_<a.pieces_.length?a.pieces_[a.pieces_.length-1]:null}function el(a,n=0){return a.pieces_.slice(a.pieceNum_+n)}function Na(a){if(a.pieceNum_>=a.pieces_.length)return null;const n=[];for(let s=a.pieceNum_;s<a.pieces_.length-1;s++)n.push(a.pieces_[s]);return new Zt(n,0)}function Vi(a,n){const s=[];for(let u=a.pieceNum_;u<a.pieces_.length;u++)s.push(a.pieces_[u]);if(n instanceof Zt)for(let u=n.pieceNum_;u<n.pieces_.length;u++)s.push(n.pieces_[u]);else{const u=n.split("/");for(let f=0;f<u.length;f++)u[f].length>0&&s.push(u[f])}return new Zt(s,0)}function qr(a){return a.pieceNum_>=a.pieces_.length}function mo(a,n){const s=ar(a),u=ar(n);if(null===s)return n;if(s===u)return mo(oi(a),oi(n));throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+a+")")}function fh(a,n){const s=el(a,0),u=el(n,0);for(let f=0;f<s.length&&f<u.length;f++){const E=kt(s[f],u[f]);if(0!==E)return E}return s.length===u.length?0:s.length<u.length?-1:1}function mu(a,n){if(Ci(a)!==Ci(n))return!1;for(let s=a.pieceNum_,u=n.pieceNum_;s<=a.pieces_.length;s++,u++)if(a.pieces_[s]!==n.pieces_[u])return!1;return!0}function go(a,n){let s=a.pieceNum_,u=n.pieceNum_;if(Ci(a)>Ci(n))return!1;for(;s<a.pieces_.length;){if(a.pieces_[s]!==n.pieces_[u])return!1;++s,++u}return!0}class Zc{constructor(n,s){this.errorPrefix_=s,this.parts_=el(n,0),this.byteLength_=Math.max(1,this.parts_.length);for(let u=0;u<this.parts_.length;u++)this.byteLength_+=(0,_e.ug)(this.parts_[u]);mh(this)}}function mh(a){if(a.byteLength_>pn)throw new Error(a.errorPrefix_+"has a key path longer than "+pn+" bytes ("+a.byteLength_+").");if(a.parts_.length>Gt)throw new Error(a.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Gt+") or object contains a cycle "+Fa(a))}function Fa(a){return 0===a.parts_.length?"":"in property '"+a.parts_.join(".")+"'"}class Ic extends ge{constructor(){let n,s;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(s="visibilitychange",n="hidden"):typeof document.mozHidden<"u"?(s="mozvisibilitychange",n="mozHidden"):typeof document.msHidden<"u"?(s="msvisibilitychange",n="msHidden"):typeof document.webkitHidden<"u"&&(s="webkitvisibilitychange",n="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const u=!document[n];u!==this.visible_&&(this.visible_=u,this.trigger("visible",u))},!1)}static getInstance(){return new Ic}getInitialEvent(n){return(0,_e.hu)("visible"===n,"Unknown event type: "+n),[this.visible_]}}const Dd=1e3;let Ns,Dc=(()=>{class a extends ie{constructor(s,u,f,E,I,M,$,ne){if(super(),this.repoInfo_=s,this.applicationId_=u,this.onDataUpdate_=f,this.onConnectStatus_=E,this.onServerInfoUpdate_=I,this.authTokenProvider_=M,this.appCheckTokenProvider_=$,this.authOverride_=ne,this.id=a.nextPersistentConnectionId_++,this.log_=Xo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Dd,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ne&&!(0,_e.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ic.getInstance().on("visible",this.onVisible_,this),-1===s.host.indexOf("fblocal")&&Je.getInstance().on("online",this.onOnline_,this)}sendRequest(s,u,f){const E=++this.requestNumber_,I={r:E,a:s,b:u};this.log_((0,_e.Wl)(I)),(0,_e.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(I),f&&(this.requestCBHash_[E]=f)}get(s){this.initConnection_();const u=new _e.BH,E={action:"g",request:{p:s._path.toString(),q:s._queryObject},onComplete:M=>{const $=M.d;"ok"===M.s?u.resolve($):u.reject($)}};return this.outstandingGets_.push(E),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),u.promise}listen(s,u,f,E){this.initConnection_();const I=s._queryIdentifier,M=s._path.toString();this.log_("Listen called for "+M+" "+I),this.listens.has(M)||this.listens.set(M,new Map),(0,_e.hu)(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,_e.hu)(!this.listens.get(M).has(I),"listen() called twice for same path/queryId.");const $={onComplete:E,hashFn:u,query:s,tag:f};this.listens.get(M).set(I,$),this.connected_&&this.sendListen_($)}sendGet_(s){const u=this.outstandingGets_[s];this.sendRequest("g",u.request,f=>{delete this.outstandingGets_[s],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),u.onComplete&&u.onComplete(f)})}sendListen_(s){const u=s.query,f=u._path.toString(),E=u._queryIdentifier;this.log_("Listen on "+f+" for "+E);const I={p:f};s.tag&&(I.q=u._queryObject,I.t=s.tag),I.h=s.hashFn(),this.sendRequest("q",I,$=>{const ne=$.d,Te=$.s;a.warnOnListenWarnings_(ne,u),(this.listens.get(f)&&this.listens.get(f).get(E))===s&&(this.log_("listen response",$),"ok"!==Te&&this.removeListen_(f,E),s.onComplete&&s.onComplete(Te,ne))})}static warnOnListenWarnings_(s,u){if(s&&"object"==typeof s&&(0,_e.r3)(s,"w")){const f=(0,_e.DV)(s,"w");if(Array.isArray(f)&&~f.indexOf("no_index")){const E='".indexOn": "'+u._queryParams.getIndex().toString()+'"',I=u._path.toString();k(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${E} at ${I} to your security rules for better performance.`)}}}refreshAuthToken(s){this.authToken_=s,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(s)}reduceReconnectDelayIfAdminCredential_(s){(s&&40===s.length||(0,_e.GJ)(s))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(s){this.appCheckToken_=s,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const s=this.authToken_,u=(0,_e.w9)(s)?"auth":"gauth",f={cred:s};null===this.authOverride_?f.noauth=!0:"object"==typeof this.authOverride_&&(f.authvar=this.authOverride_),this.sendRequest(u,f,E=>{const I=E.s,M=E.d||"error";this.authToken_===s&&("ok"===I?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(I,M))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},s=>{const u=s.s,f=s.d||"error";"ok"===u?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(u,f)})}unlisten(s,u){const f=s._path.toString(),E=s._queryIdentifier;this.log_("Unlisten called for "+f+" "+E),(0,_e.hu)(s._queryParams.isDefault()||!s._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(f,E)&&this.connected_&&this.sendUnlisten_(f,E,s._queryObject,u)}sendUnlisten_(s,u,f,E){this.log_("Unlisten on "+s+" for "+u);const I={p:s};E&&(I.q=f,I.t=E),this.sendRequest("n",I)}onDisconnectPut(s,u,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",s,u,f):this.onDisconnectRequestQueue_.push({pathString:s,action:"o",data:u,onComplete:f})}onDisconnectMerge(s,u,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",s,u,f):this.onDisconnectRequestQueue_.push({pathString:s,action:"om",data:u,onComplete:f})}onDisconnectCancel(s,u){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",s,null,u):this.onDisconnectRequestQueue_.push({pathString:s,action:"oc",data:null,onComplete:u})}sendOnDisconnect_(s,u,f,E){const I={p:u,d:f};this.log_("onDisconnect "+s,I),this.sendRequest(s,I,M=>{E&&setTimeout(()=>{E(M.s,M.d)},Math.floor(0))})}put(s,u,f,E){this.putInternal("p",s,u,f,E)}merge(s,u,f,E){this.putInternal("m",s,u,f,E)}putInternal(s,u,f,E,I){this.initConnection_();const M={p:u,d:f};void 0!==I&&(M.h=I),this.outstandingPuts_.push({action:s,request:M,onComplete:E}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+u)}sendPut_(s){const u=this.outstandingPuts_[s].action,f=this.outstandingPuts_[s].request,E=this.outstandingPuts_[s].onComplete;this.outstandingPuts_[s].queued=this.connected_,this.sendRequest(u,f,I=>{this.log_(u+" response",I),delete this.outstandingPuts_[s],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),E&&E(I.s,I.d)})}reportStats(s){if(this.connected_){const u={c:s};this.log_("reportStats",u),this.sendRequest("s",u,f=>{"ok"!==f.s&&this.log_("reportStats","Error sending stats: "+f.d)})}}onDataMessage_(s){if("r"in s){this.log_("from server: "+(0,_e.Wl)(s));const u=s.r,f=this.requestCBHash_[u];f&&(delete this.requestCBHash_[u],f(s.b))}else{if("error"in s)throw"A server-side error has occurred: "+s.error;"a"in s&&this.onDataPush_(s.a,s.b)}}onDataPush_(s,u){this.log_("handleServerMessage",s,u),"d"===s?this.onDataUpdate_(u.p,u.d,!1,u.t):"m"===s?this.onDataUpdate_(u.p,u.d,!0,u.t):"c"===s?this.onListenRevoked_(u.p,u.q):"ac"===s?this.onAuthRevoked_(u.s,u.d):"apc"===s?this.onAppCheckRevoked_(u.s,u.d):"sd"===s?this.onSecurityDebugPacket_(u):ho("Unrecognized action received from server: "+(0,_e.Wl)(s)+"\nAre you using the latest client?")}onReady_(s,u){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(s),this.lastSessionId=u,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(s){(0,_e.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(s))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(s){s&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Dd,this.realtime_||this.scheduleConnect_(0)),this.visible_=s}onOnline_(s){s?(this.log_("Browser went online."),this.reconnectDelay_=Dd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Dd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const s=(new Date).getTime()-this.lastConnectionAttemptTime_;let u=Math.max(0,this.reconnectDelay_-s);u=Math.random()*u,this.log_("Trying to reconnect in "+u+"ms"),this.scheduleConnect_(u),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var s=this;return(0,nn.Z)(function*(){if(s.shouldReconnect_()){s.log_("Making a connection attempt"),s.lastConnectionAttemptTime_=(new Date).getTime(),s.lastConnectionEstablishedTime_=null;const u=s.onDataMessage_.bind(s),f=s.onReady_.bind(s),E=s.onRealtimeDisconnect_.bind(s),I=s.id+":"+a.nextConnectionId_++,M=s.lastSessionId;let $=!1,ne=null;const Te=function(){ne?ne.close():($=!0,E())};s.realtime_={close:Te,sendRequest:function(Nt){(0,_e.hu)(ne,"sendRequest call when we're not connected not allowed."),ne.sendRequest(Nt)}};const Xe=s.forceTokenRefresh_;s.forceTokenRefresh_=!1;try{const[Nt,Vt]=yield Promise.all([s.authTokenProvider_.getToken(Xe),s.appCheckTokenProvider_.getToken(Xe)]);$?Ps("getToken() completed but was canceled"):(Ps("getToken() completed. Creating connection."),s.authToken_=Nt&&Nt.accessToken,s.appCheckToken_=Vt&&Vt.token,ne=new K(I,s.repoInfo_,s.applicationId_,s.appCheckToken_,s.authToken_,u,f,E,dn=>{k(dn+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")},M))}catch(Nt){s.log_("Failed to get token: "+Nt),$||(s.repoInfo_.nodeAdmin&&k(Nt),Te())}}})()}interrupt(s){Ps("Interrupting connection for reason: "+s),this.interruptReasons_[s]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(s){Ps("Resuming connection for reason: "+s),delete this.interruptReasons_[s],(0,_e.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Dd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(s){const u=s-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:u})}cancelSentTransactions_(){for(let s=0;s<this.outstandingPuts_.length;s++){const u=this.outstandingPuts_[s];u&&"h"in u.request&&u.queued&&(u.onComplete&&u.onComplete("disconnect"),delete this.outstandingPuts_[s],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(s,u){let f;f=u?u.map(I=>Jr(I)).join("$"):"default";const E=this.removeListen_(s,f);E&&E.onComplete&&E.onComplete("permission_denied")}removeListen_(s,u){const f=new Zt(s).toString();let E;if(this.listens.has(f)){const I=this.listens.get(f);E=I.get(u),I.delete(u),0===I.size&&this.listens.delete(f)}else E=void 0;return E}onAuthRevoked_(s,u){Ps("Auth token revoked: "+s+"/"+u),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===s||"permission_denied"===s)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(s,u){Ps("App check token revoked: "+s+"/"+u),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===s||"permission_denied"===s)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(s){this.securityDebugCallback_?this.securityDebugCallback_(s):"msg"in s&&console.log("FIREBASE: "+s.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const s of this.listens.values())for(const u of s.values())this.sendListen_(u);for(let s=0;s<this.outstandingPuts_.length;s++)this.outstandingPuts_[s]&&this.sendPut_(s);for(;this.onDisconnectRequestQueue_.length;){const s=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(s.action,s.pathString,s.data,s.onComplete)}for(let s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}sendConnectStats_(){const s={};let u="js";(0,_e.Yr)()&&(u=this.repoInfo_.nodeAdmin?"admin_node":"node"),s["sdk."+u+"."+no.replace(/\./g,"-")]=1,(0,_e.uI)()?s["framework.cordova"]=1:(0,_e.b$)()&&(s["framework.reactnative"]=1),this.reportStats(s)}shouldReconnect_(){const s=Je.getInstance().currentlyOnline();return(0,_e.xb)(this.interruptReasons_)&&s}}return a.nextPersistentConnectionId_=0,a.nextConnectionId_=0,a})();class ei{constructor(n,s){this.name=n,this.node=s}static Wrap(n,s){return new ei(n,s)}}class ec{getCompare(){return this.compare.bind(this)}indexedValueChanged(n,s){const u=new ei(xe,n),f=new ei(xe,s);return 0!==this.compare(u,f)}minPost(){return ei.MIN}}class yh extends ec{static get __EMPTY_NODE(){return Ns}static set __EMPTY_NODE(n){Ns=n}compare(n,s){return kt(n.name,s.name)}isDefinedOn(n){throw(0,_e.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(n,s){return!1}minPost(){return ei.MIN}maxPost(){return new ei(wt,Ns)}makePost(n,s){return(0,_e.hu)("string"==typeof n,"KeyIndex indexValue must always be a string."),new ei(n,Ns)}toString(){return".key"}}const _o=new yh;class gu{constructor(n,s,u,f,E=null){this.isReverse_=f,this.resultGenerator_=E,this.nodeStack_=[];let I=1;for(;!n.isEmpty();)if(I=s?u(n.key,s):1,f&&(I*=-1),I<0)n=this.isReverse_?n.left:n.right;else{if(0===I){this.nodeStack_.push(n);break}this.nodeStack_.push(n),n=this.isReverse_?n.right:n.left}}getNext(){if(0===this.nodeStack_.length)return null;let s,n=this.nodeStack_.pop();if(s=this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value},this.isReverse_)for(n=n.left;!n.isEmpty();)this.nodeStack_.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack_.push(n),n=n.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const n=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(n.key,n.value):{key:n.key,value:n.value}}}let tc,hi=(()=>{class a{constructor(s,u,f,E,I){this.key=s,this.value=u,this.color=f??a.RED,this.left=E??ki.EMPTY_NODE,this.right=I??ki.EMPTY_NODE}copy(s,u,f,E,I){return new a(s??this.key,u??this.value,f??this.color,E??this.left,I??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(s){return this.left.inorderTraversal(s)||!!s(this.key,this.value)||this.right.inorderTraversal(s)}reverseTraversal(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(s,u,f){let E=this;const I=f(s,E.key);return E=I<0?E.copy(null,null,null,E.left.insert(s,u,f),null):0===I?E.copy(null,u,null,null,null):E.copy(null,null,null,null,E.right.insert(s,u,f)),E.fixUp_()}removeMin_(){if(this.left.isEmpty())return ki.EMPTY_NODE;let s=this;return!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.removeMin_(),null),s.fixUp_()}remove(s,u){let f,E;if(f=this,u(s,f.key)<0)!f.left.isEmpty()&&!f.left.isRed_()&&!f.left.left.isRed_()&&(f=f.moveRedLeft_()),f=f.copy(null,null,null,f.left.remove(s,u),null);else{if(f.left.isRed_()&&(f=f.rotateRight_()),!f.right.isEmpty()&&!f.right.isRed_()&&!f.right.left.isRed_()&&(f=f.moveRedRight_()),0===u(s,f.key)){if(f.right.isEmpty())return ki.EMPTY_NODE;E=f.right.min_(),f=f.copy(E.key,E.value,null,null,f.right.removeMin_())}f=f.copy(null,null,null,null,f.right.remove(s,u))}return f.fixUp_()}isRed_(){return this.color}fixUp_(){let s=this;return s.right.isRed_()&&!s.left.isRed_()&&(s=s.rotateLeft_()),s.left.isRed_()&&s.left.left.isRed_()&&(s=s.rotateRight_()),s.left.isRed_()&&s.right.isRed_()&&(s=s.colorFlip_()),s}moveRedLeft_(){let s=this.colorFlip_();return s.right.left.isRed_()&&(s=s.copy(null,null,null,null,s.right.rotateRight_()),s=s.rotateLeft_(),s=s.colorFlip_()),s}moveRedRight_(){let s=this.colorFlip_();return s.left.left.isRed_()&&(s=s.rotateRight_(),s=s.colorFlip_()),s}rotateLeft_(){const s=this.copy(null,null,a.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)}rotateRight_(){const s=this.copy(null,null,a.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)}colorFlip_(){const s=this.left.copy(null,null,!this.left.color,null,null),u=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,u)}checkMaxDepth_(){const s=this.check_();return Math.pow(2,s)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const s=this.left.check_();if(s!==this.right.check_())throw new Error("Black depths differ");return s+(this.isRed_()?0:1)}}return a.RED=!0,a.BLACK=!1,a})();class ki{constructor(n,s=ki.EMPTY_NODE){this.comparator_=n,this.root_=s}insert(n,s){return new ki(this.comparator_,this.root_.insert(n,s,this.comparator_).copy(null,null,hi.BLACK,null,null))}remove(n){return new ki(this.comparator_,this.root_.remove(n,this.comparator_).copy(null,null,hi.BLACK,null,null))}get(n){let s,u=this.root_;for(;!u.isEmpty();){if(s=this.comparator_(n,u.key),0===s)return u.value;s<0?u=u.left:s>0&&(u=u.right)}return null}getPredecessorKey(n){let s,u=this.root_,f=null;for(;!u.isEmpty();){if(s=this.comparator_(n,u.key),0===s){if(u.left.isEmpty())return f?f.key:null;for(u=u.left;!u.right.isEmpty();)u=u.right;return u.key}s<0?u=u.left:s>0&&(f=u,u=u.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(n){return this.root_.inorderTraversal(n)}reverseTraversal(n){return this.root_.reverseTraversal(n)}getIterator(n){return new gu(this.root_,null,this.comparator_,!1,n)}getIteratorFrom(n,s){return new gu(this.root_,n,this.comparator_,!1,s)}getReverseIteratorFrom(n,s){return new gu(this.root_,n,this.comparator_,!0,s)}getReverseIterator(n){return new gu(this.root_,null,this.comparator_,!0,n)}}function zi(a,n){return kt(a.name,n.name)}function Xc(a,n){return kt(a,n)}ki.EMPTY_NODE=new class Qc{copy(n,s,u,f,E){return this}insert(n,s,u){return new hi(n,s,null)}remove(n,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Hu=function(a){return"number"==typeof a?"number:"+Oi(a):"string:"+a},Sd=function(a){if(a.isLeafNode()){const n=a.val();(0,_e.hu)("string"==typeof n||"number"==typeof n||"object"==typeof n&&(0,_e.r3)(n,".sv"),"Priority must be a string or number.")}else(0,_e.hu)(a===tc||a.isEmpty(),"priority of unexpected type.");(0,_e.hu)(a===tc||a.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Fs,nc,xs,zu=(()=>{class a{constructor(s,u=a.__childrenNodeConstructor.EMPTY_NODE){this.value_=s,this.priorityNode_=u,this.lazyHash_=null,(0,_e.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Sd(this.priorityNode_)}static set __childrenNodeConstructor(s){Fs=s}static get __childrenNodeConstructor(){return Fs}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(s){return new a(this.value_,s)}getImmediateChild(s){return".priority"===s?this.priorityNode_:a.__childrenNodeConstructor.EMPTY_NODE}getChild(s){return qr(s)?this:".priority"===ar(s)?this.priorityNode_:a.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(s,u){return null}updateImmediateChild(s,u){return".priority"===s?this.updatePriority(u):u.isEmpty()&&".priority"!==s?this:a.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(s,u).updatePriority(this.priorityNode_)}updateChild(s,u){const f=ar(s);return null===f?u:u.isEmpty()&&".priority"!==f?this:((0,_e.hu)(".priority"!==f||1===Ci(s),".priority must be the last token in a path"),this.updateImmediateChild(f,a.__childrenNodeConstructor.EMPTY_NODE.updateChild(oi(s),u)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(s,u){return!1}val(s){return s&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let s="";this.priorityNode_.isEmpty()||(s+="priority:"+Hu(this.priorityNode_.val())+":");const u=typeof this.value_;s+=u+":",s+="number"===u?Oi(this.value_):this.value_,this.lazyHash_=Qo(s)}return this.lazyHash_}getValue(){return this.value_}compareTo(s){return s===a.__childrenNodeConstructor.EMPTY_NODE?1:s instanceof a.__childrenNodeConstructor?-1:((0,_e.hu)(s.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(s))}compareToLeafNode_(s){const u=typeof s.value_,f=typeof this.value_,E=a.VALUE_TYPE_ORDER.indexOf(u),I=a.VALUE_TYPE_ORDER.indexOf(f);return(0,_e.hu)(E>=0,"Unknown leaf type: "+u),(0,_e.hu)(I>=0,"Unknown leaf type: "+f),E===I?"object"===f?0:this.value_<s.value_?-1:this.value_===s.value_?0:1:I-E}withIndex(){return this}isIndexed(){return!0}equals(s){return s===this||!!s.isLeafNode()&&(this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_))}}return a.VALUE_TYPE_ORDER=["object","boolean","number","string"],a})();const Ni=new class tl extends ec{compare(n,s){const u=n.node.getPriority(),f=s.node.getPriority(),E=u.compareTo(f);return 0===E?kt(n.name,s.name):E}isDefinedOn(n){return!n.getPriority().isEmpty()}indexedValueChanged(n,s){return!n.getPriority().equals(s.getPriority())}minPost(){return ei.MIN}maxPost(){return new ei(wt,new zu("[PRIORITY-POST]",xs))}makePost(n,s){const u=nc(n);return new ei(s,new zu("[PRIORITY-POST]",u))}toString(){return".priority"}},yf=Math.log(2);class yo{constructor(n){this.count=parseInt(Math.log(n+1)/yf,10),this.current_=this.count-1;const f=(E=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=n+1&f}nextBitIsOne(){const n=!(this.bits_&1<<this.current_);return this.current_--,n}}const Do=function(a,n,s,u){a.sort(n);const f=function($,ne){const Te=ne-$;let Le,Xe;if(0===Te)return null;if(1===Te)return Le=a[$],Xe=s?s(Le):Le,new hi(Xe,Le.node,hi.BLACK,null,null);{const Nt=parseInt(Te/2,10)+$,Vt=f($,Nt),dn=f(Nt+1,ne);return Le=a[Nt],Xe=s?s(Le):Le,new hi(Xe,Le.node,hi.BLACK,Vt,dn)}},M=function($){let ne=null,Te=null,Le=a.length;const Xe=function(Vt,dn){const Rn=Le-Vt,pr=Le;Le-=Vt;const Zr=f(Rn+1,pr),br=a[Rn],Qr=s?s(br):br;Nt(new hi(Qr,br.node,dn,null,Zr))},Nt=function(Vt){ne?(ne.left=Vt,ne=Vt):(Te=Vt,ne=Vt)};for(let Vt=0;Vt<$.count;++Vt){const dn=$.nextBitIsOne(),Rn=Math.pow(2,$.count-(Vt+1));dn?Xe(Rn,hi.BLACK):(Xe(Rn,hi.BLACK),Xe(Rn,hi.RED))}return Te}(new yo(a.length));return new ki(u||n,M)};let rc;const oo={};class ao{constructor(n,s){this.indexes_=n,this.indexSet_=s}static get Default(){return(0,_e.hu)(oo&&Ni,"ChildrenNode.ts has not been loaded"),rc=rc||new ao({".priority":oo},{".priority":Ni}),rc}get(n){const s=(0,_e.DV)(this.indexes_,n);if(!s)throw new Error("No index defined for "+n);return s instanceof ki?s:null}hasIndex(n){return(0,_e.r3)(this.indexSet_,n.toString())}addIndex(n,s){(0,_e.hu)(n!==_o,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const u=[];let f=!1;const E=s.getIterator(ei.Wrap);let M,I=E.getNext();for(;I;)f=f||n.isDefinedOn(I.node),u.push(I),I=E.getNext();M=f?Do(u,n.getCompare()):oo;const $=n.toString(),ne=Object.assign({},this.indexSet_);ne[$]=n;const Te=Object.assign({},this.indexes_);return Te[$]=M,new ao(Te,ne)}addToIndexes(n,s){const u=(0,_e.UI)(this.indexes_,(f,E)=>{const I=(0,_e.DV)(this.indexSet_,E);if((0,_e.hu)(I,"Missing index implementation for "+E),f===oo){if(I.isDefinedOn(n.node)){const M=[],$=s.getIterator(ei.Wrap);let ne=$.getNext();for(;ne;)ne.name!==n.name&&M.push(ne),ne=$.getNext();return M.push(n),Do(M,I.getCompare())}return oo}{const M=s.get(n.name);let $=f;return M&&($=$.remove(new ei(n.name,M))),$.insert(n,n.node)}});return new ao(u,this.indexSet_)}removeFromIndexes(n,s){const u=(0,_e.UI)(this.indexes_,f=>{if(f===oo)return f;{const E=s.get(n.name);return E?f.remove(new ei(n.name,E)):f}});return new ao(u,this.indexSet_)}}let Rl,wr=(()=>{class a{constructor(s,u,f){this.children_=s,this.priorityNode_=u,this.indexMap_=f,this.lazyHash_=null,this.priorityNode_&&Sd(this.priorityNode_),this.children_.isEmpty()&&(0,_e.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Rl||(Rl=new a(new ki(Xc),null,ao.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Rl}updatePriority(s){return this.children_.isEmpty()?this:new a(this.children_,s,this.indexMap_)}getImmediateChild(s){if(".priority"===s)return this.getPriority();{const u=this.children_.get(s);return null===u?Rl:u}}getChild(s){const u=ar(s);return null===u?this:this.getImmediateChild(u).getChild(oi(s))}hasChild(s){return null!==this.children_.get(s)}updateImmediateChild(s,u){if((0,_e.hu)(u,"We should always be passing snapshot nodes"),".priority"===s)return this.updatePriority(u);{const f=new ei(s,u);let E,I;u.isEmpty()?(E=this.children_.remove(s),I=this.indexMap_.removeFromIndexes(f,this.children_)):(E=this.children_.insert(s,u),I=this.indexMap_.addToIndexes(f,this.children_));const M=E.isEmpty()?Rl:this.priorityNode_;return new a(E,M,I)}}updateChild(s,u){const f=ar(s);if(null===f)return u;{(0,_e.hu)(".priority"!==ar(s)||1===Ci(s),".priority must be the last token in a path");const E=this.getImmediateChild(f).updateChild(oi(s),u);return this.updateImmediateChild(f,E)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(s){if(this.isEmpty())return null;const u={};let f=0,E=0,I=!0;if(this.forEachChild(Ni,(M,$)=>{u[M]=$.val(s),f++,I&&a.INTEGER_REGEXP_.test(M)?E=Math.max(E,Number(M)):I=!1}),!s&&I&&E<2*f){const M=[];for(const $ in u)M[$]=u[$];return M}return s&&!this.getPriority().isEmpty()&&(u[".priority"]=this.getPriority().val()),u}hash(){if(null===this.lazyHash_){let s="";this.getPriority().isEmpty()||(s+="priority:"+Hu(this.getPriority().val())+":"),this.forEachChild(Ni,(u,f)=>{const E=f.hash();""!==E&&(s+=":"+u+":"+E)}),this.lazyHash_=""===s?"":Qo(s)}return this.lazyHash_}getPredecessorChildName(s,u,f){const E=this.resolveIndex_(f);if(E){const I=E.getPredecessorKey(new ei(s,u));return I?I.name:null}return this.children_.getPredecessorKey(s)}getFirstChildName(s){const u=this.resolveIndex_(s);if(u){const f=u.minKey();return f&&f.name}return this.children_.minKey()}getFirstChild(s){const u=this.getFirstChildName(s);return u?new ei(u,this.children_.get(u)):null}getLastChildName(s){const u=this.resolveIndex_(s);if(u){const f=u.maxKey();return f&&f.name}return this.children_.maxKey()}getLastChild(s){const u=this.getLastChildName(s);return u?new ei(u,this.children_.get(u)):null}forEachChild(s,u){const f=this.resolveIndex_(s);return f?f.inorderTraversal(E=>u(E.name,E.node)):this.children_.inorderTraversal(u)}getIterator(s){return this.getIteratorFrom(s.minPost(),s)}getIteratorFrom(s,u){const f=this.resolveIndex_(u);if(f)return f.getIteratorFrom(s,E=>E);{const E=this.children_.getIteratorFrom(s.name,ei.Wrap);let I=E.peek();for(;null!=I&&u.compare(I,s)<0;)E.getNext(),I=E.peek();return E}}getReverseIterator(s){return this.getReverseIteratorFrom(s.maxPost(),s)}getReverseIteratorFrom(s,u){const f=this.resolveIndex_(u);if(f)return f.getReverseIteratorFrom(s,E=>E);{const E=this.children_.getReverseIteratorFrom(s.name,ei.Wrap);let I=E.peek();for(;null!=I&&u.compare(I,s)>0;)E.getNext(),I=E.peek();return E}}compareTo(s){return this.isEmpty()?s.isEmpty()?0:-1:s.isLeafNode()||s.isEmpty()?1:s===Ol?-1:0}withIndex(s){if(s===_o||this.indexMap_.hasIndex(s))return this;{const u=this.indexMap_.addIndex(s,this.children_);return new a(this.children_,this.priorityNode_,u)}}isIndexed(s){return s===_o||this.indexMap_.hasIndex(s)}equals(s){if(s===this)return!0;if(s.isLeafNode())return!1;{const u=s;if(this.getPriority().equals(u.getPriority())){if(this.children_.count()===u.children_.count()){const f=this.getIterator(Ni),E=u.getIterator(Ni);let I=f.getNext(),M=E.getNext();for(;I&&M;){if(I.name!==M.name||!I.node.equals(M.node))return!1;I=f.getNext(),M=E.getNext()}return null===I&&null===M}return!1}return!1}}resolveIndex_(s){return s===_o?null:this.indexMap_.get(s.toString())}}return a.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,a})();const Ol=new class vf extends wr{constructor(){super(new ki(Xc),wr.EMPTY_NODE,ao.Default)}compareTo(n){return n===this?0:1}equals(n){return n===this}getPriority(){return this}getImmediateChild(n){return wr.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(ei,{MIN:{value:new ei(xe,wr.EMPTY_NODE)},MAX:{value:new ei(wt,Ol)}}),yh.__EMPTY_NODE=wr.EMPTY_NODE,zu.__childrenNodeConstructor=wr,function so(a){tc=a}(Ol),function _u(a){xs=a}(Ol);const vh=!0;function x(a,n=null){if(null===a)return wr.EMPTY_NODE;if("object"==typeof a&&".priority"in a&&(n=a[".priority"]),(0,_e.hu)(null===n||"string"==typeof n||"number"==typeof n||"object"==typeof n&&".sv"in n,"Invalid priority type found: "+typeof n),"object"==typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]),"object"!=typeof a||".sv"in a)return new zu(a,x(n));if(a instanceof Array||!vh){let s=wr.EMPTY_NODE;return Yn(a,(u,f)=>{if((0,_e.r3)(a,u)&&"."!==u.substring(0,1)){const E=x(f);(E.isLeafNode()||!E.isEmpty())&&(s=s.updateImmediateChild(u,E))}}),s.updatePriority(x(n))}{const s=[];let u=!1;if(Yn(a,(I,M)=>{if("."!==I.substring(0,1)){const $=x(M);$.isEmpty()||(u=u||!$.getPriority().isEmpty(),s.push(new ei(I,$)))}}),0===s.length)return wr.EMPTY_NODE;const E=Do(s,zi,I=>I.name,Xc);if(u){const I=Do(s,Ni.getCompare());return new wr(E,x(n),new ao({".priority":I},{".priority":Ni}))}return new wr(E,x(n),ao.Default)}}!function Ml(a){nc=a}(x);class F extends ec{constructor(n){super(),this.indexPath_=n,(0,_e.hu)(!qr(n)&&".priority"!==ar(n),"Can't create PathIndex with empty path or .priority key")}extractChild(n){return n.getChild(this.indexPath_)}isDefinedOn(n){return!n.getChild(this.indexPath_).isEmpty()}compare(n,s){const u=this.extractChild(n.node),f=this.extractChild(s.node),E=u.compareTo(f);return 0===E?kt(n.name,s.name):E}makePost(n,s){const u=x(n),f=wr.EMPTY_NODE.updateChild(this.indexPath_,u);return new ei(s,f)}maxPost(){const n=wr.EMPTY_NODE.updateChild(this.indexPath_,Ol);return new ei(wt,n)}toString(){return el(this.indexPath_,0).join("/")}}const Ce=new class X extends ec{compare(n,s){const u=n.node.compareTo(s.node);return 0===u?kt(n.name,s.name):u}isDefinedOn(n){return!0}indexedValueChanged(n,s){return!n.equals(s)}minPost(){return ei.MIN}maxPost(){return ei.MAX}makePost(n,s){const u=x(n);return new ei(s,u)}toString(){return".value"}};function Ke(a){return{type:"value",snapshotNode:a}}function ot(a,n){return{type:"child_added",snapshotNode:n,childName:a}}function Dt(a,n){return{type:"child_removed",snapshotNode:n,childName:a}}function yn(a,n,s){return{type:"child_changed",snapshotNode:n,childName:a,oldSnap:s}}class Zn{constructor(n){this.index_=n}updateChild(n,s,u,f,E,I){(0,_e.hu)(n.isIndexed(this.index_),"A node must be indexed if only a child is updated");const M=n.getImmediateChild(s);return M.getChild(f).equals(u.getChild(f))&&M.isEmpty()===u.isEmpty()||(null!=I&&(u.isEmpty()?n.hasChild(s)?I.trackChildChange(Dt(s,M)):(0,_e.hu)(n.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):M.isEmpty()?I.trackChildChange(ot(s,u)):I.trackChildChange(yn(s,u,M))),n.isLeafNode()&&u.isEmpty())?n:n.updateImmediateChild(s,u).withIndex(this.index_)}updateFullNode(n,s,u){return null!=u&&(n.isLeafNode()||n.forEachChild(Ni,(f,E)=>{s.hasChild(f)||u.trackChildChange(Dt(f,E))}),s.isLeafNode()||s.forEachChild(Ni,(f,E)=>{if(n.hasChild(f)){const I=n.getImmediateChild(f);I.equals(E)||u.trackChildChange(yn(f,E,I))}else u.trackChildChange(ot(f,E))})),s.withIndex(this.index_)}updatePriority(n,s){return n.isEmpty()?wr.EMPTY_NODE:n.updatePriority(s)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Ir{constructor(n){this.indexedFilter_=new Zn(n.getIndex()),this.index_=n.getIndex(),this.startPost_=Ir.getStartPost_(n),this.endPost_=Ir.getEndPost_(n),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(n){const s=this.startIsInclusive_?this.index_.compare(this.getStartPost(),n)<=0:this.index_.compare(this.getStartPost(),n)<0,u=this.endIsInclusive_?this.index_.compare(n,this.getEndPost())<=0:this.index_.compare(n,this.getEndPost())<0;return s&&u}updateChild(n,s,u,f,E,I){return this.matches(new ei(s,u))||(u=wr.EMPTY_NODE),this.indexedFilter_.updateChild(n,s,u,f,E,I)}updateFullNode(n,s,u){s.isLeafNode()&&(s=wr.EMPTY_NODE);let f=s.withIndex(this.index_);f=f.updatePriority(wr.EMPTY_NODE);const E=this;return s.forEachChild(Ni,(I,M)=>{E.matches(new ei(I,M))||(f=f.updateImmediateChild(I,wr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(n,f,u)}updatePriority(n,s){return n}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(n){if(n.hasStart()){const s=n.getIndexStartName();return n.getIndex().makePost(n.getIndexStartValue(),s)}return n.getIndex().minPost()}static getEndPost_(n){if(n.hasEnd()){const s=n.getIndexEndName();return n.getIndex().makePost(n.getIndexEndValue(),s)}return n.getIndex().maxPost()}}class Or{constructor(n){this.withinDirectionalStart=s=>this.reverse_?this.withinEndPost(s):this.withinStartPost(s),this.withinDirectionalEnd=s=>this.reverse_?this.withinStartPost(s):this.withinEndPost(s),this.withinStartPost=s=>{const u=this.index_.compare(this.rangedFilter_.getStartPost(),s);return this.startIsInclusive_?u<=0:u<0},this.withinEndPost=s=>{const u=this.index_.compare(s,this.rangedFilter_.getEndPost());return this.endIsInclusive_?u<=0:u<0},this.rangedFilter_=new Ir(n),this.index_=n.getIndex(),this.limit_=n.getLimit(),this.reverse_=!n.isViewFromLeft(),this.startIsInclusive_=!n.startAfterSet_,this.endIsInclusive_=!n.endBeforeSet_}updateChild(n,s,u,f,E,I){return this.rangedFilter_.matches(new ei(s,u))||(u=wr.EMPTY_NODE),n.getImmediateChild(s).equals(u)?n:n.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(n,s,u,f,E,I):this.fullLimitUpdateChild_(n,s,u,E,I)}updateFullNode(n,s,u){let f;if(s.isLeafNode()||s.isEmpty())f=wr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<s.numChildren()&&s.isIndexed(this.index_)){let E;f=wr.EMPTY_NODE.withIndex(this.index_),E=this.reverse_?s.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let I=0;for(;E.hasNext()&&I<this.limit_;){const M=E.getNext();if(this.withinDirectionalStart(M)){if(!this.withinDirectionalEnd(M))break;f=f.updateImmediateChild(M.name,M.node),I++}}}else{let E;f=s.withIndex(this.index_),f=f.updatePriority(wr.EMPTY_NODE),E=this.reverse_?f.getReverseIterator(this.index_):f.getIterator(this.index_);let I=0;for(;E.hasNext();){const M=E.getNext();I<this.limit_&&this.withinDirectionalStart(M)&&this.withinDirectionalEnd(M)?I++:f=f.updateImmediateChild(M.name,wr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(n,f,u)}updatePriority(n,s){return n}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(n,s,u,f,E){let I;if(this.reverse_){const Le=this.index_.getCompare();I=(Xe,Nt)=>Le(Nt,Xe)}else I=this.index_.getCompare();const M=n;(0,_e.hu)(M.numChildren()===this.limit_,"");const $=new ei(s,u),ne=this.reverse_?M.getFirstChild(this.index_):M.getLastChild(this.index_),Te=this.rangedFilter_.matches($);if(M.hasChild(s)){const Le=M.getImmediateChild(s);let Xe=f.getChildAfterChild(this.index_,ne,this.reverse_);for(;null!=Xe&&(Xe.name===s||M.hasChild(Xe.name));)Xe=f.getChildAfterChild(this.index_,Xe,this.reverse_);const Nt=null==Xe?1:I(Xe,$);if(Te&&!u.isEmpty()&&Nt>=0)return E?.trackChildChange(yn(s,u,Le)),M.updateImmediateChild(s,u);{E?.trackChildChange(Dt(s,Le));const dn=M.updateImmediateChild(s,wr.EMPTY_NODE);return null!=Xe&&this.rangedFilter_.matches(Xe)?(E?.trackChildChange(ot(Xe.name,Xe.node)),dn.updateImmediateChild(Xe.name,Xe.node)):dn}}return u.isEmpty()?n:Te&&I(ne,$)>=0?(null!=E&&(E.trackChildChange(Dt(ne.name,ne.node)),E.trackChildChange(ot(s,u))),M.updateImmediateChild(s,u).updateImmediateChild(ne.name,wr.EMPTY_NODE)):n}}class $o{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ni}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,_e.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,_e.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:xe}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,_e.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,_e.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,_e.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ni}copy(){const n=new $o;return n.limitSet_=this.limitSet_,n.limit_=this.limit_,n.startSet_=this.startSet_,n.startAfterSet_=this.startAfterSet_,n.indexStartValue_=this.indexStartValue_,n.startNameSet_=this.startNameSet_,n.indexStartName_=this.indexStartName_,n.endSet_=this.endSet_,n.endBeforeSet_=this.endBeforeSet_,n.indexEndValue_=this.indexEndValue_,n.endNameSet_=this.endNameSet_,n.indexEndName_=this.indexEndName_,n.index_=this.index_,n.viewFrom_=this.viewFrom_,n}}function Go(a,n,s){const u=a.copy();return u.startSet_=!0,void 0===n&&(n=null),u.indexStartValue_=n,null!=s?(u.startNameSet_=!0,u.indexStartName_=s):(u.startNameSet_=!1,u.indexStartName_=""),u}function va(a,n,s){const u=a.copy();return u.endSet_=!0,void 0===n&&(n=null),u.indexEndValue_=n,void 0!==s?(u.endNameSet_=!0,u.indexEndName_=s):(u.endNameSet_=!1,u.indexEndName_=""),u}function Td(a,n){const s=a.copy();return s.index_=n,s}function $u(a){const n={};if(a.isDefault())return n;let s;if(a.index_===Ni?s="$priority":a.index_===Ce?s="$value":a.index_===_o?s="$key":((0,_e.hu)(a.index_ instanceof F,"Unrecognized index type!"),s=a.index_.toString()),n.orderBy=(0,_e.Wl)(s),a.startSet_){const u=a.startAfterSet_?"startAfter":"startAt";n[u]=(0,_e.Wl)(a.indexStartValue_),a.startNameSet_&&(n[u]+=","+(0,_e.Wl)(a.indexStartName_))}if(a.endSet_){const u=a.endBeforeSet_?"endBefore":"endAt";n[u]=(0,_e.Wl)(a.indexEndValue_),a.endNameSet_&&(n[u]+=","+(0,_e.Wl)(a.indexEndName_))}return a.limitSet_&&(a.isViewFromLeft()?n.limitToFirst=a.limit_:n.limitToLast=a.limit_),n}function Si(a){const n={};if(a.startSet_&&(n.sp=a.indexStartValue_,a.startNameSet_&&(n.sn=a.indexStartName_),n.sin=!a.startAfterSet_),a.endSet_&&(n.ep=a.indexEndValue_,a.endNameSet_&&(n.en=a.indexEndName_),n.ein=!a.endBeforeSet_),a.limitSet_){n.l=a.limit_;let s=a.viewFrom_;""===s&&(s=a.isViewFromLeft()?"l":"r"),n.vf=s}return a.index_!==Ni&&(n.i=a.index_.toString()),n}class Fi extends ie{constructor(n,s,u,f){super(),this.repoInfo_=n,this.onDataUpdate_=s,this.authTokenProvider_=u,this.appCheckTokenProvider_=f,this.log_=Xo("p:rest:"),this.listens_={}}reportStats(n){throw new Error("Method not implemented.")}static getListenId_(n,s){return void 0!==s?"tag$"+s:((0,_e.hu)(n._queryParams.isDefault(),"should have a tag if it's not a default query."),n._path.toString())}listen(n,s,u,f){const E=n._path.toString();this.log_("Listen called for "+E+" "+n._queryIdentifier);const I=Fi.getListenId_(n,u),M={};this.listens_[I]=M;const $=$u(n._queryParams);this.restRequest_(E+".json",$,(ne,Te)=>{let Le=Te;if(404===ne&&(Le=null,ne=null),null===ne&&this.onDataUpdate_(E,Le,!1,u),(0,_e.DV)(this.listens_,I)===M){let Xe;Xe=ne?401===ne?"permission_denied":"rest_error:"+ne:"ok",f(Xe,null)}})}unlisten(n,s){const u=Fi.getListenId_(n,s);delete this.listens_[u]}get(n){const s=$u(n._queryParams),u=n._path.toString(),f=new _e.BH;return this.restRequest_(u+".json",s,(E,I)=>{let M=I;404===E&&(M=null,E=null),null===E?(this.onDataUpdate_(u,M,!1,null),f.resolve(M)):f.reject(new Error(M))}),f.promise}refreshAuthToken(n){}restRequest_(n,s={},u){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([f,E])=>{f&&f.accessToken&&(s.auth=f.accessToken),E&&E.token&&(s.ac=E.token);const I=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+n+"?ns="+this.repoInfo_.namespace+(0,_e.xO)(s);this.log_("Sending REST request for "+I);const M=new XMLHttpRequest;M.onreadystatechange=()=>{if(u&&4===M.readyState){this.log_("REST Response for "+I+" received. status:",M.status,"response:",M.responseText);let $=null;if(M.status>=200&&M.status<300){try{$=(0,_e.cI)(M.responseText)}catch{k("Failed to parse JSON response for "+I+": "+M.responseText)}u(null,$)}else 401!==M.status&&404!==M.status&&k("Got unsuccessful REST response for "+I+" Status: "+M.status),u(M.status);u=null}},M.open("GET",I,!0),M.send()})}}class eu{constructor(){this.rootNode_=wr.EMPTY_NODE}getNode(n){return this.rootNode_.getChild(n)}updateSnapshot(n,s){this.rootNode_=this.rootNode_.updateChild(n,s)}}function sc(){return{value:null,children:new Map}}function Sc(a,n,s){if(qr(n))a.value=s,a.children.clear();else if(null!==a.value)a.value=a.value.updateChild(n,s);else{const u=ar(n);a.children.has(u)||a.children.set(u,sc()),Sc(a.children.get(u),n=oi(n),s)}}function Tc(a,n){if(qr(n))return a.value=null,a.children.clear(),!0;if(null!==a.value){if(a.value.isLeafNode())return!1;{const s=a.value;return a.value=null,s.forEachChild(Ni,(u,f)=>{Sc(a,new Zt(u),f)}),Tc(a,n)}}if(a.children.size>0){const s=ar(n);return n=oi(n),a.children.has(s)&&Tc(a.children.get(s),n)&&a.children.delete(s),0===a.children.size}return!0}function Gu(a,n,s){null!==a.value?s(n,a.value):function yp(a,n){a.children.forEach((s,u)=>{n(u,s)})}(a,(u,f)=>{Gu(f,new Zt(n.toString()+"/"+u),s)})}class Tm{constructor(n){this.collection_=n,this.last_=null}get(){const n=this.collection_.get(),s=Object.assign({},n);return this.last_&&Yn(this.last_,(u,f)=>{s[u]=s[u]-f}),this.last_=n,s}}class n_{constructor(n,s){this.server_=s,this.statsToReport_={},this.statsListener_=new Tm(n);const u=1e4+2e4*Math.random();Il(this.reportStats_.bind(this),Math.floor(u))}reportStats_(){const n=this.statsListener_.get(),s={};let u=!1;Yn(n,(f,E)=>{E>0&&(0,_e.r3)(this.statsToReport_,f)&&(s[f]=E,u=!0)}),u&&this.server_.reportStats(s),Il(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Pl=(()=>{return(a=Pl||(Pl={}))[a.OVERWRITE=0]="OVERWRITE",a[a.MERGE=1]="MERGE",a[a.ACK_USER_WRITE=2]="ACK_USER_WRITE",a[a.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Pl;var a})();function wf(a){return{fromUser:!1,fromServer:!0,queryId:a,tagged:!0}}class yu{constructor(n,s,u){this.path=n,this.affectedTree=s,this.revert=u,this.type=Pl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(n){if(qr(this.path)){if(null!=this.affectedTree.value)return(0,_e.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new Zt(n));return new yu($n(),s,this.revert)}}return(0,_e.hu)(ar(this.path)===n,"operationForChild called for unrelated child."),new yu(oi(this.path),this.affectedTree,this.revert)}}class Ad{constructor(n,s){this.source=n,this.path=s,this.type=Pl.LISTEN_COMPLETE}operationForChild(n){return qr(this.path)?new Ad(this.source,$n()):new Ad(this.source,oi(this.path))}}class gl{constructor(n,s,u){this.source=n,this.path=s,this.snap=u,this.type=Pl.OVERWRITE}operationForChild(n){return qr(this.path)?new gl(this.source,$n(),this.snap.getImmediateChild(n)):new gl(this.source,oi(this.path),this.snap)}}class kl{constructor(n,s,u){this.source=n,this.path=s,this.children=u,this.type=Pl.MERGE}operationForChild(n){if(qr(this.path)){const s=this.children.subtree(new Zt(n));return s.isEmpty()?null:s.value?new gl(this.source,$n(),s.value):new kl(this.source,$n(),s)}return(0,_e.hu)(ar(this.path)===n,"Can't get a merge for a child not on the path of the operation"),new kl(this.source,oi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Nl{constructor(n,s,u){this.node_=n,this.fullyInitialized_=s,this.filtered_=u}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(n){if(qr(n))return this.isFullyInitialized()&&!this.filtered_;const s=ar(n);return this.isCompleteForChild(s)}isCompleteForChild(n){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(n)}getNode(){return this.node_}}class Wu{constructor(n){this.query_=n,this.index_=this.query_._queryParams.getIndex()}}function Fl(a,n,s,u,f,E){const I=u.filter(M=>M.type===s);I.sort((M,$)=>function Ac(a,n,s){if(null==n.childName||null==s.childName)throw(0,_e.g5)("Should only compare child_ events.");const u=new ei(n.childName,n.snapshotNode),f=new ei(s.childName,s.snapshotNode);return a.index_.compare(u,f)}(a,M,$)),I.forEach(M=>{const $=function bh(a,n,s){return"value"===n.type||"child_removed"===n.type||(n.prevName=s.getPredecessorChildName(n.childName,n.snapshotNode,a.index_)),n}(a,M,E);f.forEach(ne=>{ne.respondsTo(M.type)&&n.push(ne.createEvent($,a.query_))})})}function Ch(a,n){return{eventCache:a,serverCache:n}}function nu(a,n,s,u){return Ch(new Nl(n,s,u),a.serverCache)}function xd(a,n,s,u){return Ch(a.eventCache,new Nl(n,s,u))}function Md(a){return a.eventCache.isFullyInitialized()?a.eventCache.getNode():null}function Ll(a){return a.serverCache.isFullyInitialized()?a.serverCache.getNode():null}let vu;class ai{constructor(n,s=(()=>(vu||(vu=new ki(jn)),vu))()){this.value=n,this.children=s}static fromObject(n){let s=new ai(null);return Yn(n,(u,f)=>{s=s.set(new Zt(u),f)}),s}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(n,s){if(null!=this.value&&s(this.value))return{path:$n(),value:this.value};if(qr(n))return null;{const u=ar(n),f=this.children.get(u);if(null!==f){const E=f.findRootMostMatchingPathAndValue(oi(n),s);return null!=E?{path:Vi(new Zt(u),E.path),value:E.value}:null}return null}}findRootMostValueAndPath(n){return this.findRootMostMatchingPathAndValue(n,()=>!0)}subtree(n){if(qr(n))return this;{const s=ar(n),u=this.children.get(s);return null!==u?u.subtree(oi(n)):new ai(null)}}set(n,s){if(qr(n))return new ai(s,this.children);{const u=ar(n),E=(this.children.get(u)||new ai(null)).set(oi(n),s),I=this.children.insert(u,E);return new ai(this.value,I)}}remove(n){if(qr(n))return this.children.isEmpty()?new ai(null):new ai(null,this.children);{const s=ar(n),u=this.children.get(s);if(u){const f=u.remove(oi(n));let E;return E=f.isEmpty()?this.children.remove(s):this.children.insert(s,f),null===this.value&&E.isEmpty()?new ai(null):new ai(this.value,E)}return this}}get(n){if(qr(n))return this.value;{const s=ar(n),u=this.children.get(s);return u?u.get(oi(n)):null}}setTree(n,s){if(qr(n))return s;{const u=ar(n),E=(this.children.get(u)||new ai(null)).setTree(oi(n),s);let I;return I=E.isEmpty()?this.children.remove(u):this.children.insert(u,E),new ai(this.value,I)}}fold(n){return this.fold_($n(),n)}fold_(n,s){const u={};return this.children.inorderTraversal((f,E)=>{u[f]=E.fold_(Vi(n,f),s)}),s(n,this.value,u)}findOnPath(n,s){return this.findOnPath_(n,$n(),s)}findOnPath_(n,s,u){const f=!!this.value&&u(s,this.value);if(f)return f;if(qr(n))return null;{const E=ar(n),I=this.children.get(E);return I?I.findOnPath_(oi(n),Vi(s,E),u):null}}foreachOnPath(n,s){return this.foreachOnPath_(n,$n(),s)}foreachOnPath_(n,s,u){if(qr(n))return this;{this.value&&u(s,this.value);const f=ar(n),E=this.children.get(f);return E?E.foreachOnPath_(oi(n),Vi(s,f),u):new ai(null)}}foreach(n){this.foreach_($n(),n)}foreach_(n,s){this.children.inorderTraversal((u,f)=>{f.foreach_(Vi(n,u),s)}),this.value&&s(n,this.value)}foreachChild(n){this.children.inorderTraversal((s,u)=>{u.value&&n(s,u.value)})}}class Ea{constructor(n){this.writeTree_=n}static empty(){return new Ea(new ai(null))}}function _l(a,n,s){if(qr(n))return new Ea(new ai(s));{const u=a.writeTree_.findRootMostValueAndPath(n);if(null!=u){const f=u.path;let E=u.value;const I=mo(f,n);return E=E.updateChild(I,s),new Ea(a.writeTree_.set(f,E))}{const f=new ai(s),E=a.writeTree_.setTree(n,f);return new Ea(E)}}}function xc(a,n,s){let u=a;return Yn(s,(f,E)=>{u=_l(u,Vi(n,f),E)}),u}function bf(a,n){if(qr(n))return Ea.empty();{const s=a.writeTree_.setTree(n,new ai(null));return new Ea(s)}}function Mc(a,n){return null!=yl(a,n)}function yl(a,n){const s=a.writeTree_.findRootMostValueAndPath(n);return null!=s?a.writeTree_.get(s.path).getChild(mo(s.path,n)):null}function Ih(a){const n=[],s=a.writeTree_.value;return null!=s?s.isLeafNode()||s.forEachChild(Ni,(u,f)=>{n.push(new ei(u,f))}):a.writeTree_.children.inorderTraversal((u,f)=>{null!=f.value&&n.push(new ei(u,f.value))}),n}function vl(a,n){if(qr(n))return a;{const s=yl(a,n);return new Ea(null!=s?new ai(s):a.writeTree_.subtree(n))}}function Cf(a){return a.writeTree_.isEmpty()}function La(a,n){return xm($n(),a.writeTree_,n)}function xm(a,n,s){if(null!=n.value)return s.updateChild(a,n.value);{let u=null;return n.children.inorderTraversal((f,E)=>{".priority"===f?((0,_e.hu)(null!==E.value,"Priority writes must always be leaf nodes"),u=E.value):s=xm(Vi(a,f),E,s)}),!s.getChild(a).isEmpty()&&null!==u&&(s=s.updateChild(Vi(a,".priority"),u)),s}}function ea(a,n){return Df(n,a)}function If(a,n){if(a.snap)return go(a.path,n);for(const s in a.children)if(a.children.hasOwnProperty(s)&&go(Vi(a.path,s),n))return!0;return!1}function r_(a){return a.visible}function Rm(a,n,s){let u=Ea.empty();for(let f=0;f<a.length;++f){const E=a[f];if(n(E)){const I=E.path;let M;if(E.snap)go(s,I)?(M=mo(s,I),u=_l(u,M,E.snap)):go(I,s)&&(M=mo(I,s),u=_l(u,$n(),E.snap.getChild(M)));else{if(!E.children)throw(0,_e.g5)("WriteRecord should have .snap or .children");if(go(s,I))M=mo(s,I),u=xc(u,M,E.children);else if(go(I,s))if(M=mo(I,s),qr(M))u=xc(u,$n(),E.children);else{const $=(0,_e.DV)(E.children,ar(M));if($){const ne=$.getChild(oi(M));u=_l(u,$n(),ne)}}}}}return u}function ti(a,n,s,u,f){if(u||f){const E=vl(a.visibleWrites,n);return!f&&Cf(E)?s:f||null!=s||Mc(E,$n())?La(Rm(a.allWrites,function(ne){return(ne.visible||f)&&(!u||!~u.indexOf(ne.writeId))&&(go(ne.path,n)||go(n,ne.path))},n),s||wr.EMPTY_NODE):null}{const E=yl(a.visibleWrites,n);if(null!=E)return E;{const I=vl(a.visibleWrites,n);return Cf(I)?s:null!=s||Mc(I,$n())?La(I,s||wr.EMPTY_NODE):null}}}function ta(a,n,s,u){return ti(a.writeTree,a.treePath,n,s,u)}function wu(a,n){return function Ep(a,n,s){let u=wr.EMPTY_NODE;const f=yl(a.visibleWrites,n);if(f)return f.isLeafNode()||f.forEachChild(Ni,(E,I)=>{u=u.updateImmediateChild(E,I)}),u;if(s){const E=vl(a.visibleWrites,n);return s.forEachChild(Ni,(I,M)=>{const $=La(vl(E,new Zt(I)),M);u=u.updateImmediateChild(I,$)}),Ih(E).forEach(I=>{u=u.updateImmediateChild(I.name,I.node)}),u}return Ih(vl(a.visibleWrites,n)).forEach(I=>{u=u.updateImmediateChild(I.name,I.node)}),u}(a.writeTree,a.treePath,n)}function Dh(a,n,s,u){return function Ku(a,n,s,u,f){(0,_e.hu)(u||f,"Either existingEventSnap or existingServerSnap must exist");const E=Vi(n,s);if(Mc(a.visibleWrites,E))return null;{const I=vl(a.visibleWrites,E);return Cf(I)?f.getChild(s):La(I,f.getChild(s))}}(a.writeTree,a.treePath,n,s,u)}function Pc(a,n){return function bp(a,n){return yl(a.visibleWrites,n)}(a.writeTree,Vi(a.treePath,n))}function Od(a,n,s){return function wp(a,n,s,u){const f=Vi(n,s),E=yl(a.visibleWrites,f);return null!=E?E:u.isCompleteForChild(s)?La(vl(a.visibleWrites,f),u.getNode().getImmediateChild(s)):null}(a.writeTree,a.treePath,n,s)}function bu(a,n){return Df(Vi(a.treePath,n),a.writeTree)}function Df(a,n){return{treePath:a,writeTree:n}}class Pd{constructor(){this.changeMap=new Map}trackChildChange(n){const s=n.type,u=n.childName;(0,_e.hu)("child_added"===s||"child_changed"===s||"child_removed"===s,"Only child changes supported for tracking"),(0,_e.hu)(".priority"!==u,"Only non-priority child changes can be tracked.");const f=this.changeMap.get(u);if(f){const E=f.type;if("child_added"===s&&"child_removed"===E)this.changeMap.set(u,yn(u,n.snapshotNode,f.snapshotNode));else if("child_removed"===s&&"child_added"===E)this.changeMap.delete(u);else if("child_removed"===s&&"child_changed"===E)this.changeMap.set(u,Dt(u,f.oldSnap));else if("child_changed"===s&&"child_added"===E)this.changeMap.set(u,ot(u,n.snapshotNode));else{if("child_changed"!==s||"child_changed"!==E)throw(0,_e.g5)("Illegal combination of changes: "+n+" occurred after "+f);this.changeMap.set(u,yn(u,n.snapshotNode,f.oldSnap))}}else this.changeMap.set(u,n)}getChanges(){return Array.from(this.changeMap.values())}}const Cu=new class wa{getCompleteChild(n){return null}getChildAfterChild(n,s,u){return null}};class Yu{constructor(n,s,u=null){this.writes_=n,this.viewCache_=s,this.optCompleteServerCache_=u}getCompleteChild(n){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(n))return s.getNode().getImmediateChild(n);{const u=null!=this.optCompleteServerCache_?new Nl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Od(this.writes_,n,u)}}getChildAfterChild(n,s,u){const f=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ll(this.viewCache_),E=function ru(a,n,s,u,f,E){return function qu(a,n,s,u,f,E,I){let M;const $=vl(a.visibleWrites,n),ne=yl($,$n());if(null!=ne)M=ne;else{if(null==s)return[];M=La($,s)}if(M=M.withIndex(I),M.isEmpty()||M.isLeafNode())return[];{const Te=[],Le=I.getCompare(),Xe=E?M.getReverseIteratorFrom(u,I):M.getIteratorFrom(u,I);let Nt=Xe.getNext();for(;Nt&&Te.length<f;)0!==Le(Nt,u)&&Te.push(Nt),Nt=Xe.getNext();return Te}}(a.writeTree,a.treePath,n,s,u,f,E)}(this.writes_,f,s,1,u,n);return 0===E.length?null:E[0]}}function kd(a,n,s,u,f,E){const I=n.eventCache;if(null!=Pc(u,s))return n;{let M,$;if(qr(s))if((0,_e.hu)(n.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),n.serverCache.isFiltered()){const ne=Ll(n),Le=wu(u,ne instanceof wr?ne:wr.EMPTY_NODE);M=a.filter.updateFullNode(n.eventCache.getNode(),Le,E)}else{const ne=ta(u,Ll(n));M=a.filter.updateFullNode(n.eventCache.getNode(),ne,E)}else{const ne=ar(s);if(".priority"===ne){(0,_e.hu)(1===Ci(s),"Can't have a priority with additional path components");const Te=I.getNode();$=n.serverCache.getNode();const Le=Dh(u,s,Te,$);M=null!=Le?a.filter.updatePriority(Te,Le):I.getNode()}else{const Te=oi(s);let Le;if(I.isCompleteForChild(ne)){$=n.serverCache.getNode();const Xe=Dh(u,s,I.getNode(),$);Le=null!=Xe?I.getNode().getImmediateChild(ne).updateChild(Te,Xe):I.getNode().getImmediateChild(ne)}else Le=Od(u,ne,n.serverCache);M=null!=Le?a.filter.updateChild(I.getNode(),ne,Le,Te,f,E):I.getNode()}}return nu(n,M,I.isFullyInitialized()||qr(s),a.filter.filtersNodes())}}function Iu(a,n,s,u,f,E,I,M){const $=n.serverCache;let ne;const Te=I?a.filter:a.filter.getIndexedFilter();if(qr(s))ne=Te.updateFullNode($.getNode(),u,null);else if(Te.filtersNodes()&&!$.isFiltered()){const Nt=$.getNode().updateChild(s,u);ne=Te.updateFullNode($.getNode(),Nt,null)}else{const Nt=ar(s);if(!$.isCompleteForPath(s)&&Ci(s)>1)return n;const Vt=oi(s),Rn=$.getNode().getImmediateChild(Nt).updateChild(Vt,u);ne=".priority"===Nt?Te.updatePriority($.getNode(),Rn):Te.updateChild($.getNode(),Nt,Rn,Vt,Cu,null)}const Le=xd(n,ne,$.isFullyInitialized()||qr(s),Te.filtersNodes());return kd(a,Le,s,f,new Yu(f,Le,E),M)}function Cp(a,n,s,u,f,E,I){const M=n.eventCache;let $,ne;const Te=new Yu(f,n,E);if(qr(s))ne=a.filter.updateFullNode(n.eventCache.getNode(),u,I),$=nu(n,ne,!0,a.filter.filtersNodes());else{const Le=ar(s);if(".priority"===Le)ne=a.filter.updatePriority(n.eventCache.getNode(),u),$=nu(n,ne,M.isFullyInitialized(),M.isFiltered());else{const Xe=oi(s),Nt=M.getNode().getImmediateChild(Le);let Vt;if(qr(Xe))Vt=u;else{const dn=Te.getCompleteChild(Le);Vt=null!=dn?".priority"===ya(Xe)&&dn.getChild(Na(Xe)).isEmpty()?dn:dn.updateChild(Xe,u):wr.EMPTY_NODE}$=Nt.equals(Vt)?n:nu(n,a.filter.updateChild(M.getNode(),Le,Vt,Xe,Te,I),M.isFullyInitialized(),a.filter.filtersNodes())}}return $}function il(a,n){return a.eventCache.isCompleteForChild(n)}function Sf(a,n,s){return s.foreach((u,f)=>{n=n.updateChild(u,f)}),n}function oc(a,n,s,u,f,E,I,M){if(n.serverCache.getNode().isEmpty()&&!n.serverCache.isFullyInitialized())return n;let ne,$=n;ne=qr(s)?u:new ai(null).setTree(s,u);const Te=n.serverCache.getNode();return ne.children.inorderTraversal((Le,Xe)=>{if(Te.hasChild(Le)){const Vt=Sf(0,n.serverCache.getNode().getImmediateChild(Le),Xe);$=Iu(a,$,new Zt(Le),Vt,f,E,I,M)}}),ne.children.inorderTraversal((Le,Xe)=>{const Nt=!n.serverCache.isCompleteForChild(Le)&&null===Xe.value;if(!Te.hasChild(Le)&&!Nt){const dn=Sf(0,n.serverCache.getNode().getImmediateChild(Le),Xe);$=Iu(a,$,new Zt(Le),dn,f,E,I,M)}}),$}class Dp{constructor(n,s){this.query_=n,this.eventRegistrations_=[];const u=this.query_._queryParams,f=new Zn(u.getIndex()),E=function yi(a){return a.loadsAllData()?new Zn(a.getIndex()):a.hasLimit()?new Or(a):new Ir(a)}(u);this.processor_=function Zy(a){return{filter:a}}(E);const I=s.serverCache,M=s.eventCache,$=f.updateFullNode(wr.EMPTY_NODE,I.getNode(),null),ne=E.updateFullNode(wr.EMPTY_NODE,M.getNode(),null),Te=new Nl($,I.isFullyInitialized(),f.filtersNodes()),Le=new Nl(ne,M.isFullyInitialized(),E.filtersNodes());this.viewCache_=Ch(Le,Te),this.eventGenerator_=new Wu(this.query_)}get query(){return this.query_}}function C(a,n){const s=Ll(a.viewCache_);return s&&(a.query._queryParams.loadsAllData()||!qr(n)&&!s.getImmediateChild(ar(n)).isEmpty())?s.getChild(n):null}function g(a){return 0===a.eventRegistrations_.length}function T(a,n,s){const u=[];if(s){(0,_e.hu)(null==n,"A cancel should cancel all event registrations.");const f=a.query._path;a.eventRegistrations_.forEach(E=>{const I=E.createCancelEvent(s,f);I&&u.push(I)})}if(n){let f=[];for(let E=0;E<a.eventRegistrations_.length;++E){const I=a.eventRegistrations_[E];if(I.matches(n)){if(n.hasAnyCallback()){f=f.concat(a.eventRegistrations_.slice(E+1));break}}else f.push(I)}a.eventRegistrations_=f}else a.eventRegistrations_=[];return u}function Z(a,n,s,u){n.type===Pl.MERGE&&null!==n.source.queryId&&((0,_e.hu)(Ll(a.viewCache_),"We should always have a full cache before handling merges"),(0,_e.hu)(Md(a.viewCache_),"Missing event cache, even though we have a server cache"));const f=a.viewCache_,E=function Ms(a,n,s,u,f){const E=new Pd;let I,M;if(s.type===Pl.OVERWRITE){const ne=s;ne.source.fromUser?I=Cp(a,n,ne.path,ne.snap,u,f,E):((0,_e.hu)(ne.source.fromServer,"Unknown source."),M=ne.source.tagged||n.serverCache.isFiltered()&&!qr(ne.path),I=Iu(a,n,ne.path,ne.snap,u,f,M,E))}else if(s.type===Pl.MERGE){const ne=s;ne.source.fromUser?I=function Sh(a,n,s,u,f,E,I){let M=n;return u.foreach(($,ne)=>{const Te=Vi(s,$);il(n,ar(Te))&&(M=Cp(a,M,Te,ne,f,E,I))}),u.foreach(($,ne)=>{const Te=Vi(s,$);il(n,ar(Te))||(M=Cp(a,M,Te,ne,f,E,I))}),M}(a,n,ne.path,ne.children,u,f,E):((0,_e.hu)(ne.source.fromServer,"Unknown source."),M=ne.source.tagged||n.serverCache.isFiltered(),I=oc(a,n,ne.path,ne.children,u,f,M,E))}else if(s.type===Pl.ACK_USER_WRITE){const ne=s;I=ne.revert?function Ip(a,n,s,u,f,E){let I;if(null!=Pc(u,s))return n;{const M=new Yu(u,n,f),$=n.eventCache.getNode();let ne;if(qr(s)||".priority"===ar(s)){let Te;if(n.serverCache.isFullyInitialized())Te=ta(u,Ll(n));else{const Le=n.serverCache.getNode();(0,_e.hu)(Le instanceof wr,"serverChildren would be complete if leaf node"),Te=wu(u,Le)}ne=a.filter.updateFullNode($,Te,E)}else{const Te=ar(s);let Le=Od(u,Te,n.serverCache);null==Le&&n.serverCache.isCompleteForChild(Te)&&(Le=$.getImmediateChild(Te)),ne=null!=Le?a.filter.updateChild($,Te,Le,oi(s),M,E):n.eventCache.getNode().hasChild(Te)?a.filter.updateChild($,Te,wr.EMPTY_NODE,oi(s),M,E):$,ne.isEmpty()&&n.serverCache.isFullyInitialized()&&(I=ta(u,Ll(n)),I.isLeafNode()&&(ne=a.filter.updateFullNode(ne,I,E)))}return I=n.serverCache.isFullyInitialized()||null!=Pc(u,$n()),nu(n,ne,I,a.filter.filtersNodes())}}(a,n,ne.path,u,f,E):function na(a,n,s,u,f,E,I){if(null!=Pc(f,s))return n;const M=n.serverCache.isFiltered(),$=n.serverCache;if(null!=u.value){if(qr(s)&&$.isFullyInitialized()||$.isCompleteForPath(s))return Iu(a,n,s,$.getNode().getChild(s),f,E,M,I);if(qr(s)){let ne=new ai(null);return $.getNode().forEachChild(_o,(Te,Le)=>{ne=ne.set(new Zt(Te),Le)}),oc(a,n,s,ne,f,E,M,I)}return n}{let ne=new ai(null);return u.foreach((Te,Le)=>{const Xe=Vi(s,Te);$.isCompleteForPath(Xe)&&(ne=ne.set(Te,$.getNode().getChild(Xe)))}),oc(a,n,s,ne,f,E,M,I)}}(a,n,ne.path,ne.affectedTree,u,f,E)}else{if(s.type!==Pl.LISTEN_COMPLETE)throw(0,_e.g5)("Unknown operation type: "+s.type);I=function Du(a,n,s,u,f){const E=n.serverCache;return kd(a,xd(n,E.getNode(),E.isFullyInitialized()||qr(s),E.isFiltered()),s,u,Cu,f)}(a,n,s.path,u,E)}const $=E.getChanges();return function ba(a,n,s){const u=n.eventCache;if(u.isFullyInitialized()){const f=u.getNode().isLeafNode()||u.getNode().isEmpty(),E=Md(a);(s.length>0||!a.eventCache.isFullyInitialized()||f&&!u.getNode().equals(E)||!u.getNode().getPriority().equals(E.getPriority()))&&s.push(Ke(Md(n)))}}(n,I,$),{viewCache:I,changes:$}}(a.processor_,f,n,s,u);return function Qy(a,n){(0,_e.hu)(n.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,_e.hu)(n.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed")}(a.processor_,E.viewCache),(0,_e.hu)(E.viewCache.serverCache.isFullyInitialized()||!f.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),a.viewCache_=E.viewCache,Pe(a,E.changes,E.viewCache.eventCache.getNode(),null)}function Pe(a,n,s,u){return function wh(a,n,s,u){const f=[],E=[];return n.forEach(I=>{"child_changed"===I.type&&a.index_.indexedValueChanged(I.oldSnap,I.snapshotNode)&&E.push(function bn(a,n){return{type:"child_moved",snapshotNode:n,childName:a}}(I.childName,I.snapshotNode))}),Fl(a,f,"child_removed",n,u,s),Fl(a,f,"child_added",n,u,s),Fl(a,f,"child_moved",E,u,s),Fl(a,f,"child_changed",n,u,s),Fl(a,f,"value",n,u,s),f}(a.eventGenerator_,n,s,u?[u]:a.eventRegistrations_)}let yt,Ju;class rn{constructor(){this.views=new Map}}function ls(a,n,s,u){const f=n.source.queryId;if(null!==f){const E=a.views.get(f);return(0,_e.hu)(null!=E,"SyncTree gave us an op for an invalid query."),Z(E,n,s,u)}{let E=[];for(const I of a.views.values())E=E.concat(Z(I,n,s,u));return E}}function El(a,n,s,u,f){const I=a.views.get(n._queryIdentifier);if(!I){let M=ta(s,f?u:null),$=!1;M?$=!0:u instanceof wr?(M=wu(s,u),$=!1):(M=wr.EMPTY_NODE,$=!1);const ne=Ch(new Nl(M,$,!1),new Nl(u,f,!1));return new Dp(n,ne)}return I}function hs(a){const n=[];for(const s of a.views.values())s.query._queryParams.loadsAllData()||n.push(s);return n}function sl(a,n){let s=null;for(const u of a.views.values())s=s||C(u,n);return s}function Xu(a,n){return n._queryParams.loadsAllData()?Nd(a):a.views.get(n._queryIdentifier)}function Su(a,n){return null!=Xu(a,n)}function ac(a){return null!=Nd(a)}function Nd(a){for(const n of a.views.values())if(n.query._queryParams.loadsAllData())return n;return null}let Th=1;class i_{constructor(n){this.listenProvider_=n,this.syncPointTree_=new ai(null),this.pendingWriteTree_=function Rd(){return{visibleWrites:Ea.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Xy(a,n,s,u,f){return function Mm(a,n,s,u,f){(0,_e.hu)(u>a.lastWriteId,"Stacking an older write on top of newer ones"),void 0===f&&(f=!0),a.allWrites.push({path:n,snap:s,writeId:u,visible:f}),f&&(a.visibleWrites=_l(a.visibleWrites,n,s)),a.lastWriteId=u}(a.pendingWriteTree_,n,s,u,f),f?xh(a,new gl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,s)):[]}function Tu(a,n,s=!1){const u=function vp(a,n){for(let s=0;s<a.allWrites.length;s++){const u=a.allWrites[s];if(u.writeId===n)return u}return null}(a.pendingWriteTree_,n);if(function rl(a,n){const s=a.allWrites.findIndex(M=>M.writeId===n);(0,_e.hu)(s>=0,"removeWrite called with nonexistent writeId.");const u=a.allWrites[s];a.allWrites.splice(s,1);let f=u.visible,E=!1,I=a.allWrites.length-1;for(;f&&I>=0;){const M=a.allWrites[I];M.visible&&(I>=s&&If(M,u.path)?f=!1:go(u.path,M.path)&&(E=!0)),I--}return!!f&&(E?(function Oc(a){a.visibleWrites=Rm(a.allWrites,r_,$n()),a.lastWriteId=a.allWrites.length>0?a.allWrites[a.allWrites.length-1].writeId:-1}(a),!0):(u.snap?a.visibleWrites=bf(a.visibleWrites,u.path):Yn(u.children,$=>{a.visibleWrites=bf(a.visibleWrites,Vi(u.path,$))}),!0))}(a.pendingWriteTree_,n)){let E=new ai(null);return null!=u.snap?E=E.set($n(),!0):Yn(u.children,I=>{E=E.set(new Zt(I),!0)}),xh(a,new yu(u.path,E,s))}return[]}function Fd(a,n,s){return xh(a,new gl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,s))}function Ks(a,n,s,u,f=!1){const E=n._path,I=a.syncPointTree_.get(E);let M=[];if(I&&("default"===n._queryIdentifier||Su(I,n))){const $=function Tf(a,n,s,u){const f=n._queryIdentifier,E=[];let I=[];const M=ac(a);if("default"===f)for(const[$,ne]of a.views.entries())I=I.concat(T(ne,s,u)),g(ne)&&(a.views.delete($),ne.query._queryParams.loadsAllData()||E.push(ne.query));else{const $=a.views.get(f);$&&(I=I.concat(T($,s,u)),g($)&&(a.views.delete(f),$.query._queryParams.loadsAllData()||E.push($.query)))}return M&&!ac(a)&&E.push(new(function Hn(){return(0,_e.hu)(yt,"Reference.ts has not been loaded"),yt}())(n._repo,n._path)),{removed:E,events:I}}(I,n,s,u);(function Wn(a){return 0===a.views.size})(I)&&(a.syncPointTree_=a.syncPointTree_.remove(E));const ne=$.removed;if(M=$.events,!f){const Te=-1!==ne.findIndex(Xe=>Xe._queryParams.loadsAllData()),Le=a.syncPointTree_.findOnPath(E,(Xe,Nt)=>ac(Nt));if(Te&&!Le){const Xe=a.syncPointTree_.subtree(E);if(!Xe.isEmpty()){const Nt=function a_(a){return a.fold((n,s,u)=>{if(s&&ac(s))return[Nd(s)];{let f=[];return s&&(f=hs(s)),Yn(u,(E,I)=>{f=f.concat(I)}),f}})}(Xe);for(let Vt=0;Vt<Nt.length;++Vt){const dn=Nt[Vt],Rn=dn.query,pr=Fm(a,dn);a.listenProvider_.startListening(td(Rn),Nc(a,Rn),pr.hashFn,pr.onComplete)}}}!Le&&ne.length>0&&!u&&(Te?a.listenProvider_.stopListening(td(n),null):ne.forEach(Xe=>{const Nt=a.queryToTagMap.get(Lm(Xe));a.listenProvider_.stopListening(td(Xe),Nt)}))}!function nd(a,n){for(let s=0;s<n.length;++s){const u=n[s];if(!u._queryParams.loadsAllData()){const f=Lm(u),E=a.queryToTagMap.get(f);a.queryToTagMap.delete(f),a.tagToQueryMap.delete(E)}}}(a,ne)}return M}function Tp(a,n,s,u){const f=xp(a,u);if(null!=f){const E=Au(f),I=E.path,M=E.queryId,$=mo(I,n);return Mp(a,I,new gl(wf(M),$,s))}return[]}function ed(a,n,s,u=!1){const f=n._path;let E=null,I=!1;a.syncPointTree_.foreachOnPath(f,(Xe,Nt)=>{const Vt=mo(Xe,f);E=E||sl(Nt,Vt),I=I||ac(Nt)});let $,M=a.syncPointTree_.get(f);M?(I=I||ac(M),E=E||sl(M,$n())):(M=new rn,a.syncPointTree_=a.syncPointTree_.set(f,M)),null!=E?$=!0:($=!1,E=wr.EMPTY_NODE,a.syncPointTree_.subtree(f).foreachChild((Nt,Vt)=>{const dn=sl(Vt,$n());dn&&(E=E.updateImmediateChild(Nt,dn))}));const ne=Su(M,n);if(!ne&&!n._queryParams.loadsAllData()){const Xe=Lm(n);(0,_e.hu)(!a.queryToTagMap.has(Xe),"View does not exist, but we have a tag");const Nt=function l_(){return Th++}();a.queryToTagMap.set(Xe,Nt),a.tagToQueryMap.set(Nt,Xe)}let Le=function Qu(a,n,s,u,f,E){const I=El(a,n,u,f,E);return a.views.has(n._queryIdentifier)||a.views.set(n._queryIdentifier,I),function y(a,n){a.eventRegistrations_.push(n)}(I,s),function se(a,n){const s=a.viewCache_.eventCache,u=[];return s.getNode().isLeafNode()||s.getNode().forEachChild(Ni,(E,I)=>{u.push(ot(E,I))}),s.isFullyInitialized()&&u.push(Ke(s.getNode())),Pe(a,u,s.getNode(),n)}(I,s)}(M,n,s,ea(a.pendingWriteTree_,f),E,$);if(!ne&&!I&&!u){const Xe=Xu(M,n);Le=Le.concat(function c_(a,n,s){const u=n._path,f=Nc(a,n),E=Fm(a,s),I=a.listenProvider_.startListening(td(n),f,E.hashFn,E.onComplete),M=a.syncPointTree_.subtree(u);if(f)(0,_e.hu)(!ac(M.value),"If we're adding a query, it shouldn't be shadowed");else{const $=M.fold((ne,Te,Le)=>{if(!qr(ne)&&Te&&ac(Te))return[Nd(Te).query];{let Xe=[];return Te&&(Xe=Xe.concat(hs(Te).map(Nt=>Nt.query))),Yn(Le,(Nt,Vt)=>{Xe=Xe.concat(Vt)}),Xe}});for(let ne=0;ne<$.length;++ne){const Te=$[ne];a.listenProvider_.stopListening(td(Te),Nc(a,Te))}}return I}(a,n,Xe))}return Le}function kc(a,n,s){const f=a.pendingWriteTree_,E=a.syncPointTree_.findOnPath(n,(I,M)=>{const ne=sl(M,mo(I,n));if(ne)return ne});return ti(f,n,E,s,!0)}function xh(a,n){return Ld(n,a.syncPointTree_,null,ea(a.pendingWriteTree_,$n()))}function Ld(a,n,s,u){if(qr(a.path))return Nm(a,n,s,u);{const f=n.get($n());null==s&&null!=f&&(s=sl(f,$n()));let E=[];const I=ar(a.path),M=a.operationForChild(I),$=n.children.get(I);if($&&M){const ne=s?s.getImmediateChild(I):null,Te=bu(u,I);E=E.concat(Ld(M,$,ne,Te))}return f&&(E=E.concat(ls(f,a,u,s))),E}}function Nm(a,n,s,u){const f=n.get($n());null==s&&null!=f&&(s=sl(f,$n()));let E=[];return n.children.inorderTraversal((I,M)=>{const $=s?s.getImmediateChild(I):null,ne=bu(u,I),Te=a.operationForChild(I);Te&&(E=E.concat(Nm(Te,M,$,ne)))}),f&&(E=E.concat(ls(f,a,u,s))),E}function Fm(a,n){const s=n.query,u=Nc(a,s);return{hashFn:()=>(function Zu(a){return a.viewCache_.serverCache.getNode()}(n)||wr.EMPTY_NODE).hash(),onComplete:f=>{if("ok"===f)return u?function O0(a,n,s){const u=xp(a,s);if(u){const f=Au(u),E=f.path,I=f.queryId,M=mo(E,n);return Mp(a,E,new Ad(wf(I),M))}return[]}(a,s._path,u):function s_(a,n){return xh(a,new Ad({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n))}(a,s._path);{const E=function Vo(a,n){let s="Unknown Error";"too_big"===a?s="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===a?s="Client doesn't have permission to access the desired data.":"unavailable"===a&&(s="The service is unavailable");const u=new Error(a+" at "+n._path.toString()+": "+s);return u.code=a.toUpperCase(),u}(f,s);return Ks(a,s,null,E)}}}}function Nc(a,n){const s=Lm(n);return a.queryToTagMap.get(s)}function Lm(a){return a._path.toString()+"$"+a._queryIdentifier}function xp(a,n){return a.tagToQueryMap.get(n)}function Au(a){const n=a.indexOf("$");return(0,_e.hu)(-1!==n&&n<a.length-1,"Bad queryKey."),{queryId:a.substr(n+1),path:new Zt(a.substr(0,n))}}function Mp(a,n,s){const u=a.syncPointTree_.get(n);return(0,_e.hu)(u,"Missing sync point for query tag that we're tracking"),ls(u,s,ea(a.pendingWriteTree_,n),null)}function td(a){return a._queryParams.loadsAllData()&&!a._queryParams.isDefault()?new(function km(){return(0,_e.hu)(Ju,"Reference.ts has not been loaded"),Ju}())(a._repo,a._path):a}class Vm{constructor(n){this.node_=n}getImmediateChild(n){const s=this.node_.getImmediateChild(n);return new Vm(s)}node(){return this.node_}}class u_{constructor(n,s){this.syncTree_=n,this.path_=s}getImmediateChild(n){const s=Vi(this.path_,n);return new u_(this.syncTree_,s)}node(){return kc(this.syncTree_,this.path_)}}const Jy=function(a){return(a=a||{}).timestamp=a.timestamp||(new Date).getTime(),a},Mh=function(a,n,s){return a&&"object"==typeof a?((0,_e.hu)(".sv"in a,"Unexpected leaf node or priority contents"),"string"==typeof a[".sv"]?Vd(a[".sv"],n,s):"object"==typeof a[".sv"]?Af(a[".sv"],n):void(0,_e.hu)(!1,"Unexpected server value: "+JSON.stringify(a,null,2))):a},Vd=function(a,n,s){if("timestamp"===a)return s.timestamp;(0,_e.hu)(!1,"Unexpected server value: "+a)},Af=function(a,n,s){a.hasOwnProperty("increment")||(0,_e.hu)(!1,"Unexpected server value: "+JSON.stringify(a,null,2));const u=a.increment;"number"!=typeof u&&(0,_e.hu)(!1,"Unexpected increment value: "+u);const f=n.node();if((0,_e.hu)(null!==f&&typeof f<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!f.isLeafNode())return u;const I=f.getValue();return"number"!=typeof I?u:I+u},d_=function(a,n,s,u){return Bm(n,new u_(s,a),u)},Rp=function(a,n,s){return Bm(a,new Vm(n),s)};function Bm(a,n,s){const u=a.getPriority().val(),f=Mh(u,n.getImmediateChild(".priority"),s);let E;if(a.isLeafNode()){const I=a,M=Mh(I.getValue(),n,s);return M!==I.getValue()||f!==I.getPriority().val()?new zu(M,x(f)):a}{const I=a;return E=I,f!==I.getPriority().val()&&(E=E.updatePriority(new zu(f))),I.forEachChild(Ni,(M,$)=>{const ne=Bm($,n.getImmediateChild(M),s);ne!==$&&(E=E.updateImmediateChild(M,ne))}),E}}class Fc{constructor(n="",s=null,u={children:{},childCount:0}){this.name=n,this.parent=s,this.node=u}}function Op(a,n){let s=n instanceof Zt?n:new Zt(n),u=a,f=ar(s);for(;null!==f;){const E=(0,_e.DV)(u.node.children,f)||{children:{},childCount:0};u=new Fc(f,u,E),s=oi(s),f=ar(s)}return u}function Bd(a){return a.node.value}function h_(a,n){a.node.value=n,Mf(a)}function Pp(a){return a.node.childCount>0}function xu(a,n){Yn(a.node.children,(s,u)=>{n(new Fc(s,a,u))})}function lc(a,n,s,u){s&&!u&&n(a),xu(a,f=>{lc(f,n,!0,u)}),s&&u&&n(a)}function xf(a){return new Zt(null===a.parent?a.name:xf(a.parent)+"/"+a.name)}function Mf(a){null!==a.parent&&function f_(a,n,s){const u=function iu(a){return void 0===Bd(a)&&!Pp(a)}(s),f=(0,_e.r3)(a.node.children,n);u&&f?(delete a.node.children[n],a.node.childCount--,Mf(a)):!u&&!f&&(a.node.children[n]=s.node,a.node.childCount++,Mf(a))}(a.parent,a.name,a)}const ev=/[\[\].#$\/\u0000-\u001F\u007F]/,tv=/[\[\].#$\u0000-\u001F\u007F]/,Um=10485760,Rf=function(a){return"string"==typeof a&&0!==a.length&&!ev.test(a)},kp=function(a){return"string"==typeof a&&0!==a.length&&!tv.test(a)},id=function(a){return null===a||"string"==typeof a||"number"==typeof a&&!U(a)||a&&"object"==typeof a&&(0,_e.r3)(a,".sv")},Ca=function(a,n,s,u){u&&void 0===n||sd((0,_e.gK)(a,"value"),n,s)},sd=function(a,n,s){const u=s instanceof Zt?new Zc(s,a):s;if(void 0===n)throw new Error(a+"contains undefined "+Fa(u));if("function"==typeof n)throw new Error(a+"contains a function "+Fa(u)+" with contents = "+n.toString());if(U(n))throw new Error(a+"contains "+n.toString()+" "+Fa(u));if("string"==typeof n&&n.length>Um/3&&(0,_e.ug)(n)>Um)throw new Error(a+"contains a string greater than "+Um+" utf8 bytes "+Fa(u)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){let f=!1,E=!1;if(Yn(n,(I,M)=>{if(".value"===I)f=!0;else if(".priority"!==I&&".sv"!==I&&(E=!0,!Rf(I)))throw new Error(a+" contains an invalid key ("+I+") "+Fa(u)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function gp(a,n){a.parts_.length>0&&(a.byteLength_+=1),a.parts_.push(n),a.byteLength_+=(0,_e.ug)(n),mh(a)})(u,I),sd(a,M,u),function ph(a){const n=a.parts_.pop();a.byteLength_-=(0,_e.ug)(n),a.parts_.length>0&&(a.byteLength_-=1)}(u)}),f&&E)throw new Error(a+' contains ".value" child '+Fa(u)+" in addition to actual children.")}},rv=function(a,n,s,u){if(u&&void 0===n)return;const f=(0,_e.gK)(a,"values");if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(f+" must be an object containing the children to replace.");const E=[];Yn(n,(I,M)=>{const $=new Zt(I);if(sd(f,M,Vi(s,$)),".priority"===ya($)&&!id(M))throw new Error(f+"contains an invalid value for '"+$.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");E.push($)}),function(a,n){let s,u;for(s=0;s<n.length;s++){u=n[s];const E=el(u);for(let I=0;I<E.length;I++)if((".priority"!==E[I]||I!==E.length-1)&&!Rf(E[I]))throw new Error(a+"contains an invalid key ("+E[I]+") in path "+u.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}n.sort(fh);let f=null;for(s=0;s<n.length;s++){if(u=n[s],null!==f&&go(f,u))throw new Error(a+"contains a path "+f.toString()+" that is ancestor of another path "+u.toString());f=u}}(f,E)},p_=function(a,n,s){if(!s||void 0!==n){if(U(n))throw new Error((0,_e.gK)(a,"priority")+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!id(n))throw new Error((0,_e.gK)(a,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Np=function(a,n,s,u){if(!(u&&void 0===s||Rf(s)))throw new Error((0,_e.gK)(a,n)+'was an invalid key = "'+s+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},od=function(a,n,s,u){if(!(u&&void 0===s||kp(s)))throw new Error((0,_e.gK)(a,n)+'was an invalid path = "'+s+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Rh=function(a,n,s,u){s&&(s=s.replace(/^\/*\.info(\/|$)/,"/")),od(a,n,s,u)},ra=function(a,n){if(".info"===ar(n))throw new Error(a+" failed = Can't modify data under /.info/")},Ud=function(a,n){const s=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Rf(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==s.length&&!function(a){return a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),kp(a)}(s))throw new Error((0,_e.gK)(a,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ad{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Fp(a,n){let s=null;for(let u=0;u<n.length;u++){const f=n[u],E=f.getPath();null!==s&&!mu(E,s.path)&&(a.eventLists_.push(s),s=null),null===s&&(s={events:[],path:E}),s.events.push(f)}s&&a.eventLists_.push(s)}function iv(a,n,s){Fp(a,s),m_(a,u=>mu(u,n))}function Vl(a,n,s){Fp(a,s),m_(a,u=>go(u,n)||go(n,u))}function m_(a,n){a.recursionDepth_++;let s=!0;for(let u=0;u<a.eventLists_.length;u++){const f=a.eventLists_[u];f&&(n(f.path)?(g_(a.eventLists_[u]),a.eventLists_[u]=null):s=!1)}s&&(a.eventLists_=[]),a.recursionDepth_--}function g_(a){for(let n=0;n<a.events.length;n++){const s=a.events[n];if(null!==s){a.events[n]=null;const u=s.getEventRunner();Qi&&Ps("event: "+s.toString()),ks(u)}}}const __="repo_interrupt",jm=25;class y_{constructor(n,s,u,f){this.repoInfo_=n,this.forceRestClient_=s,this.authTokenProvider_=u,this.appCheckProvider_=f,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ad,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sc(),this.transactionQueueTree_=new Fc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function v_(a){const s=a.infoData_.getNode(new Zt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+s}function Oh(a){return Jy({timestamp:v_(a)})}function Lp(a,n,s,u,f){a.dataUpdateCount++;const E=new Zt(n);s=a.interceptServerDataCallback_?a.interceptServerDataCallback_(n,s):s;let I=[];if(f)if(u){const $=(0,_e.UI)(s,ne=>x(ne));I=function o_(a,n,s,u){const f=xp(a,u);if(f){const E=Au(f),I=E.path,M=E.queryId,$=mo(I,n),ne=ai.fromObject(s);return Mp(a,I,new kl(wf(M),$,ne))}return[]}(a.serverSyncTree_,E,$,f)}else{const $=x(s);I=Tp(a.serverSyncTree_,E,$,f)}else if(u){const $=(0,_e.UI)(s,ne=>x(ne));I=function Ah(a,n,s){const u=ai.fromObject(s);return xh(a,new kl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},n,u))}(a.serverSyncTree_,E,$)}else{const $=x(s);I=Fd(a.serverSyncTree_,E,$)}let M=E;I.length>0&&(M=kf(a,E)),Vl(a.eventQueue_,M,I)}function Lc(a,n){jd(a,"connected",n),!1===n&&function Va(a){Pf(a,"onDisconnectEvents");const n=Oh(a),s=sc();Gu(a.onDisconnect_,$n(),(f,E)=>{const I=d_(f,E,a.serverSyncTree_,n);Sc(s,f,I)});let u=[];Gu(s,$n(),(f,E)=>{u=u.concat(Fd(a.serverSyncTree_,f,E));const I=Hp(a,f);kf(a,I)}),a.onDisconnect_=sc(),Vl(a.eventQueue_,$n(),u)}(a)}function jd(a,n,s){const u=new Zt("/.info/"+n),f=x(s);a.infoData_.updateSnapshot(u,f);const E=Fd(a.infoSyncTree_,u,f);Vl(a.eventQueue_,u,E)}function Ph(a){return a.nextWriteId_++}function zm(a,n,s,u,f){Pf(a,"set",{path:n.toString(),value:s,priority:u});const E=Oh(a),I=x(s,u),M=kc(a.serverSyncTree_,n),$=Rp(I,M,E),ne=Ph(a),Te=Xy(a.serverSyncTree_,n,$,ne,!0);Fp(a.eventQueue_,Te),a.server_.put(n.toString(),I.val(!0),(Xe,Nt)=>{const Vt="ok"===Xe;Vt||k("set at "+n+" failed: "+Xe);const dn=Tu(a.serverSyncTree_,ne,!Vt);Vl(a.eventQueue_,n,dn),Bl(0,f,Xe,Nt)});const Le=Hp(a,n);kf(a,Le),Vl(a.eventQueue_,Le,[])}function av(a,n,s){a.server_.onDisconnectCancel(n.toString(),(u,f)=>{"ok"===u&&Tc(a.onDisconnect_,n),Bl(0,s,u,f)})}function Bp(a,n,s,u){const f=x(s);a.server_.onDisconnectPut(n.toString(),f.val(!0),(E,I)=>{"ok"===E&&Sc(a.onDisconnect_,n,f),Bl(0,u,E,I)})}function cd(a,n,s){let u;u=".info"===ar(n._path)?Ks(a.infoSyncTree_,n,s):Ks(a.serverSyncTree_,n,s),iv(a.eventQueue_,n._path,u)}function Gm(a){a.persistentConnection_&&a.persistentConnection_.interrupt(__)}function Pf(a,...n){let s="";a.persistentConnection_&&(s=a.persistentConnection_.id+":"),Ps(s,...n)}function Bl(a,n,s,u){n&&ks(()=>{if("ok"===s)n(null);else{const f=(s||"error").toUpperCase();let E=f;u&&(E+=": "+u);const I=new Error(E);I.code=f,n(I)}})}function su(a,n,s){return kc(a.serverSyncTree_,n,s)||wr.EMPTY_NODE}function Up(a,n=a.transactionQueueTree_){if(n||Nh(a,n),Bd(n)){const s=Hd(a,n);(0,_e.hu)(s.length>0,"Sending zero length transaction queue"),s.every(f=>0===f.status)&&function P0(a,n,s){const u=s.map(ne=>ne.currentWriteId),f=su(a,n,u);let E=f;const I=f.hash();for(let ne=0;ne<s.length;ne++){const Te=s[ne];(0,_e.hu)(0===Te.status,"tryToSendTransactionQueue_: items in queue should all be run."),Te.status=1,Te.retryCount++;const Le=mo(n,Te.path);E=E.updateChild(Le,Te.currentOutputSnapshotRaw)}const M=E.val(!0),$=n;a.server_.put($.toString(),M,ne=>{Pf(a,"transaction put response",{path:$.toString(),status:ne});let Te=[];if("ok"===ne){const Le=[];for(let Xe=0;Xe<s.length;Xe++)s[Xe].status=2,Te=Te.concat(Tu(a.serverSyncTree_,s[Xe].currentWriteId)),s[Xe].onComplete&&Le.push(()=>s[Xe].onComplete(null,!0,s[Xe].currentOutputSnapshotResolved)),s[Xe].unwatcher();Nh(a,Op(a.transactionQueueTree_,n)),Up(a,a.transactionQueueTree_),Vl(a.eventQueue_,n,Te);for(let Xe=0;Xe<Le.length;Xe++)ks(Le[Xe])}else{if("datastale"===ne)for(let Le=0;Le<s.length;Le++)s[Le].status=3===s[Le].status?4:0;else{k("transaction at "+$.toString()+" failed: "+ne);for(let Le=0;Le<s.length;Le++)s[Le].status=4,s[Le].abortReason=ne}kf(a,n)}},I)}(a,xf(n),s)}else Pp(n)&&xu(n,s=>{Up(a,s)})}function kf(a,n){const s=Wm(a,n),u=xf(s);return function cv(a,n,s){if(0===n.length)return;const u=[];let f=[];const I=n.filter(M=>0===M.status).map(M=>M.currentWriteId);for(let M=0;M<n.length;M++){const $=n[M],ne=mo(s,$.path);let Le,Te=!1;if((0,_e.hu)(null!==ne,"rerunTransactionsUnderNode_: relativePath should not be null."),4===$.status)Te=!0,Le=$.abortReason,f=f.concat(Tu(a.serverSyncTree_,$.currentWriteId,!0));else if(0===$.status)if($.retryCount>=jm)Te=!0,Le="maxretry",f=f.concat(Tu(a.serverSyncTree_,$.currentWriteId,!0));else{const Xe=su(a,$.path,I);$.currentInputSnapshot=Xe;const Nt=n[M].update(Xe.val());if(void 0!==Nt){sd("transaction failed: Data returned ",Nt,$.path);let Vt=x(Nt);"object"==typeof Nt&&null!=Nt&&(0,_e.r3)(Nt,".priority")||(Vt=Vt.updatePriority(Xe.getPriority()));const Rn=$.currentWriteId,pr=Oh(a),Zr=Rp(Vt,Xe,pr);$.currentOutputSnapshotRaw=Vt,$.currentOutputSnapshotResolved=Zr,$.currentWriteId=Ph(a),I.splice(I.indexOf(Rn),1),f=f.concat(Xy(a.serverSyncTree_,$.path,Zr,$.currentWriteId,$.applyLocally)),f=f.concat(Tu(a.serverSyncTree_,Rn,!0))}else Te=!0,Le="nodata",f=f.concat(Tu(a.serverSyncTree_,$.currentWriteId,!0))}Vl(a.eventQueue_,s,f),f=[],Te&&(n[M].status=2,setTimeout(n[M].unwatcher,Math.floor(0)),n[M].onComplete&&u.push("nodata"===Le?()=>n[M].onComplete(null,!1,n[M].currentInputSnapshot):()=>n[M].onComplete(new Error(Le),!1,null)))}Nh(a,a.transactionQueueTree_);for(let M=0;M<u.length;M++)ks(u[M]);Up(a,a.transactionQueueTree_)}(a,Hd(a,s),u),u}function Wm(a,n){let s,u=a.transactionQueueTree_;for(s=ar(n);null!==s&&void 0===Bd(u);)u=Op(u,s),s=ar(n=oi(n));return u}function Hd(a,n){const s=[];return jp(a,n,s),s.sort((u,f)=>u.order-f.order),s}function jp(a,n,s){const u=Bd(n);if(u)for(let f=0;f<u.length;f++)s.push(u[f]);xu(n,f=>{jp(a,f,s)})}function Nh(a,n){const s=Bd(n);if(s){let u=0;for(let f=0;f<s.length;f++)2!==s[f].status&&(s[u]=s[f],u++);s.length=u,h_(n,s.length>0?s:void 0)}xu(n,u=>{Nh(a,u)})}function Hp(a,n){const s=xf(Wm(a,n)),u=Op(a.transactionQueueTree_,n);return function rd(a,n,s){let u=s?a:a.parent;for(;null!==u;){if(n(u))return!0;u=u.parent}}(u,f=>{Km(a,f)}),Km(a,u),lc(u,f=>{Km(a,f)}),s}function Km(a,n){const s=Bd(n);if(s){const u=[];let f=[],E=-1;for(let I=0;I<s.length;I++)3===s[I].status||(1===s[I].status?((0,_e.hu)(E===I-1,"All SENT items should be at beginning of queue."),E=I,s[I].status=3,s[I].abortReason="set"):((0,_e.hu)(0===s[I].status,"Unexpected transaction status in abort"),s[I].unwatcher(),f=f.concat(Tu(a.serverSyncTree_,s[I].currentWriteId,!0)),s[I].onComplete&&u.push(s[I].onComplete.bind(null,new Error("set"),!1,null))));-1===E?h_(n,void 0):s.length=E+1,Vl(a.eventQueue_,xf(n),f);for(let I=0;I<u.length;I++)ks(u[I])}}const zd=function(a,n){const s=zp(a),u=s.namespace;return"firebase.com"===s.domain&&fo(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!u||"undefined"===u)&&"localhost"!==s.domain&&fo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Sn(s.host,s.secure,u,"ws"===s.scheme||"wss"===s.scheme,n,"",u!==s.subdomain),path:new Zt(s.pathString)}},zp=function(a){let n="",s="",u="",f="",E="",I=!0,M="https",$=443;if("string"==typeof a){let ne=a.indexOf("//");ne>=0&&(M=a.substring(0,ne-1),a=a.substring(ne+2));let Te=a.indexOf("/");-1===Te&&(Te=a.length);let Le=a.indexOf("?");-1===Le&&(Le=a.length),n=a.substring(0,Math.min(Te,Le)),Te<Le&&(f=function KE(a){let n="";const s=a.split("/");for(let u=0;u<s.length;u++)if(s[u].length>0){let f=s[u];try{f=decodeURIComponent(f.replace(/\+/g," "))}catch{}n+="/"+f}return n}(a.substring(Te,Le)));const Xe=function k0(a){const n={};"?"===a.charAt(0)&&(a=a.substring(1));for(const s of a.split("&")){if(0===s.length)continue;const u=s.split("=");2===u.length?n[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k(`Invalid query segment '${s}' in query '${a}'`)}return n}(a.substring(Math.min(a.length,Le)));ne=n.indexOf(":"),ne>=0?(I="https"===M||"wss"===M,$=parseInt(n.substring(ne+1),10)):ne=n.length;const Nt=n.slice(0,ne);if("localhost"===Nt.toLowerCase())s="localhost";else if(Nt.split(".").length<=2)s=Nt;else{const Vt=n.indexOf(".");u=n.substring(0,Vt).toLowerCase(),s=n.substring(Vt+1),E=u}"ns"in Xe&&(E=Xe.ns)}return{host:n,port:$,domain:s,subdomain:u,secure:I,scheme:M,pathString:f,namespace:E}},qm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",N0=function(){let a=0;const n=[];return function(s){const u=s===a;let f;a=s;const E=new Array(8);for(f=7;f>=0;f--)E[f]=qm.charAt(s%64),s=Math.floor(s/64);(0,_e.hu)(0===s,"Cannot push at time == 0");let I=E.join("");if(u){for(f=11;f>=0&&63===n[f];f--)n[f]=0;n[f]++}else for(f=0;f<12;f++)n[f]=Math.floor(64*Math.random());for(f=0;f<12;f++)I+=qm.charAt(n[f]);return(0,_e.hu)(20===I.length,"nextPushId: Length should be 20."),I}}();class uv{constructor(n,s,u,f){this.eventType=n,this.eventRegistration=s,this.snapshot=u,this.prevName=f}getPath(){const n=this.snapshot.ref;return"value"===this.eventType?n._path:n.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,_e.Wl)(this.snapshot.exportVal())}}class $d{constructor(n,s,u){this.eventRegistration=n,this.error=s,this.path=u}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class E_{constructor(n,s){this.snapshotCallback=n,this.cancelCallback=s}onValue(n,s){this.snapshotCallback.call(null,n,s)}onCancel(n){return(0,_e.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,n)}get hasCancelCallback(){return!!this.cancelCallback}matches(n){return this.snapshotCallback===n.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===n.snapshotCallback.userCallback&&this.snapshotCallback.context===n.snapshotCallback.context}}class w_{constructor(n,s){this._repo=n,this._path=s}cancel(){const n=new _e.BH;return av(this._repo,this._path,n.wrapCallback(()=>{})),n.promise}remove(){ra("OnDisconnect.remove",this._path);const n=new _e.BH;return Bp(this._repo,this._path,null,n.wrapCallback(()=>{})),n.promise}set(n){ra("OnDisconnect.set",this._path),Ca("OnDisconnect.set",n,this._path,!1);const s=new _e.BH;return Bp(this._repo,this._path,n,s.wrapCallback(()=>{})),s.promise}setWithPriority(n,s){ra("OnDisconnect.setWithPriority",this._path),Ca("OnDisconnect.setWithPriority",n,this._path,!1),p_("OnDisconnect.setWithPriority",s,!1);const u=new _e.BH;return function $m(a,n,s,u,f){const E=x(s,u);a.server_.onDisconnectPut(n.toString(),E.val(!0),(I,M)=>{"ok"===I&&Sc(a.onDisconnect_,n,E),Bl(0,f,I,M)})}(this._repo,this._path,n,s,u.wrapCallback(()=>{})),u.promise}update(n){ra("OnDisconnect.update",this._path),rv("OnDisconnect.update",n,this._path,!1);const s=new _e.BH;return function ni(a,n,s,u){if((0,_e.xb)(s))return Ps("onDisconnect().update() called with empty data.  Don't do anything."),void Bl(0,u,"ok",void 0);a.server_.onDisconnectMerge(n.toString(),s,(f,E)=>{"ok"===f&&Yn(s,(I,M)=>{const $=x(M);Sc(a.onDisconnect_,Vi(n,I),$)}),Bl(0,u,f,E)})}(this._repo,this._path,n,s.wrapCallback(()=>{})),s.promise}}class ia{constructor(n,s,u,f){this._repo=n,this._path=s,this._queryParams=u,this._orderByCalled=f}get key(){return qr(this._path)?null:ya(this._path)}get ref(){return new Vc(this._repo,this._path)}get _queryIdentifier(){const n=Si(this._queryParams),s=Jr(n);return"{}"===s?"default":s}get _queryObject(){return Si(this._queryParams)}isEqual(n){if(!((n=(0,_e.m9)(n))instanceof ia))return!1;const s=this._repo===n._repo,u=mu(this._path,n._path);return s&&u&&this._queryIdentifier===n._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function xi(a){let n="";for(let s=a.pieceNum_;s<a.pieces_.length;s++)""!==a.pieces_[s]&&(n+="/"+encodeURIComponent(String(a.pieces_[s])));return n||"/"}(this._path)}}function So(a,n){if(!0===a._orderByCalled)throw new Error(n+": You can't combine multiple orderBy calls.")}function ud(a){let n=null,s=null;if(a.hasStart()&&(n=a.getIndexStartValue()),a.hasEnd()&&(s=a.getIndexEndValue()),a.getIndex()===_o){const u="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",f="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(a.hasStart()){if(a.getIndexStartName()!==xe)throw new Error(u);if("string"!=typeof n)throw new Error(f)}if(a.hasEnd()){if(a.getIndexEndName()!==wt)throw new Error(u);if("string"!=typeof s)throw new Error(f)}}else if(a.getIndex()===Ni){if(null!=n&&!id(n)||null!=s&&!id(s))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,_e.hu)(a.getIndex()instanceof F||a.getIndex()===Ce,"unknown index type."),null!=n&&"object"==typeof n||null!=s&&"object"==typeof s)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ym(a){if(a.hasStart()&&a.hasEnd()&&a.hasLimit()&&!a.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Vc extends ia{constructor(n,s){super(n,s,new $o,!1)}get parent(){const n=Na(this._path);return null===n?null:new Vc(this._repo,n)}get root(){let n=this;for(;null!==n.parent;)n=n.parent;return n}}class Fh{constructor(n,s,u){this._node=n,this.ref=s,this._index=u}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(n){const s=new Zt(n),u=ou(this.ref,n);return new Fh(this._node.getChild(s),u,Ni)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(n){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(u,f)=>n(new Fh(f,ou(this.ref,u),Ni)))}hasChild(n){const s=new Zt(n);return!this._node.getChild(s).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Zm(a,n){return(a=(0,_e.m9)(a))._checkNotDeleted("ref"),void 0!==n?ou(a._root,n):a._root}function dv(a,n){(a=(0,_e.m9)(a))._checkNotDeleted("refFromURL");const s=zd(n,a._repo.repoInfo_.nodeAdmin);Ud("refFromURL",s);const u=s.repoInfo;return!a._repo.repoInfo_.isCustomHost()&&u.host!==a._repo.repoInfo_.host&&fo("refFromURL: Host name does not match the current database: (found "+u.host+" but expected "+a._repo.repoInfo_.host+")"),Zm(a,s.path.toString())}function ou(a,n){return null===ar((a=(0,_e.m9)(a))._path)?Rh("child","path",n,!1):od("child","path",n,!1),new Vc(a._repo,Vi(a._path,n))}function Lh(a,n){a=(0,_e.m9)(a),ra("set",a._path),Ca("set",n,a._path,!1);const s=new _e.BH;return zm(a._repo,a._path,n,null,s.wrapCallback(()=>{})),s.promise}function Qm(a,n){rv("update",n,a._path,!1);const s=new _e.BH;return function ov(a,n,s,u){Pf(a,"update",{path:n.toString(),value:s});let f=!0;const E=Oh(a),I={};if(Yn(s,(M,$)=>{f=!1,I[M]=d_(Vi(n,M),x($),a.serverSyncTree_,E)}),f)Ps("update() called with empty data.  Don't do anything."),Bl(0,u,"ok",void 0);else{const M=Ph(a),$=function Sp(a,n,s,u){!function Rc(a,n,s,u){(0,_e.hu)(u>a.lastWriteId,"Stacking an older merge on top of newer ones"),a.allWrites.push({path:n,children:s,writeId:u,visible:!0}),a.visibleWrites=xc(a.visibleWrites,n,s),a.lastWriteId=u}(a.pendingWriteTree_,n,s,u);const f=ai.fromObject(s);return xh(a,new kl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},n,f))}(a.serverSyncTree_,n,I,M);Fp(a.eventQueue_,$),a.server_.merge(n.toString(),s,(ne,Te)=>{const Le="ok"===ne;Le||k("update at "+n+" failed: "+ne);const Xe=Tu(a.serverSyncTree_,M,!Le),Nt=Xe.length>0?kf(a,n):n;Vl(a.eventQueue_,Nt,Xe),Bl(0,u,ne,Te)}),Yn(s,ne=>{const Te=Hp(a,Vi(n,ne));kf(a,Te)}),Vl(a.eventQueue_,n,[])}}(a._repo,a._path,n,s.wrapCallback(()=>{})),s.promise}function pv(a){a=(0,_e.m9)(a);const n=new E_(()=>{}),s=new Bc(n);return function Vp(a,n,s){const u=function Ap(a,n){const s=n._path;let u=null;a.syncPointTree_.foreachOnPath(s,(ne,Te)=>{const Le=mo(ne,s);u=u||sl(Te,Le)});let f=a.syncPointTree_.get(s);f?u=u||sl(f,$n()):(f=new rn,a.syncPointTree_=a.syncPointTree_.set(s,f));const E=null!=u,I=E?new Nl(u,!0,!1):null;return function Om(a){return Md(a.viewCache_)}(El(f,n,ea(a.pendingWriteTree_,n._path),E?I.getNode():wr.EMPTY_NODE,E))}(a.serverSyncTree_,n);return null!=u?Promise.resolve(u):a.server_.get(n).then(f=>{const E=x(f).withIndex(n._queryParams.getIndex());let I;if(ed(a.serverSyncTree_,n,s,!0),n._queryParams.loadsAllData())I=Fd(a.serverSyncTree_,n._path,E);else{const M=Nc(a.serverSyncTree_,n);I=Tp(a.serverSyncTree_,n._path,E,M)}return Vl(a.eventQueue_,n._path,I),Ks(a.serverSyncTree_,n,s,null,!0),E},f=>(Pf(a,"get for query "+(0,_e.Wl)(n)+" failed: "+f),Promise.reject(new Error(f))))}(a._repo,a,s).then(u=>new Fh(u,new Vc(a._repo,a._path),a._queryParams.getIndex()))}class Bc{constructor(n){this.callbackContext=n}respondsTo(n){return"value"===n}createEvent(n,s){const u=s._queryParams.getIndex();return new uv("value",this,new Fh(n.snapshotNode,new Vc(s._repo,s._path),u))}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,null)}createCancelEvent(n,s){return this.callbackContext.hasCancelCallback?new $d(this,n,s):null}matches(n){return n instanceof Bc&&(!n.callbackContext||!this.callbackContext||n.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Nf{constructor(n,s){this.eventType=n,this.callbackContext=s}respondsTo(n){let s="children_added"===n?"child_added":n;return s="children_removed"===s?"child_removed":s,this.eventType===s}createCancelEvent(n,s){return this.callbackContext.hasCancelCallback?new $d(this,n,s):null}createEvent(n,s){(0,_e.hu)(null!=n.childName,"Child events should have a childName.");const u=ou(new Vc(s._repo,s._path),n.childName),f=s._queryParams.getIndex();return new uv(n.type,this,new Fh(n.snapshotNode,u,f),n.prevName)}getEventRunner(n){return"cancel"===n.getEventType()?()=>this.callbackContext.onCancel(n.error):()=>this.callbackContext.onValue(n.snapshot,n.prevName)}matches(n){return n instanceof Nf&&this.eventType===n.eventType&&(!this.callbackContext||!n.callbackContext||this.callbackContext.matches(n.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $p(a,n,s,u,f){let E;if("object"==typeof u&&(E=void 0,f=u),"function"==typeof u&&(E=u),f&&f.onlyOnce){const $=s,ne=(Te,Le)=>{cd(a._repo,a,M),$(Te,Le)};ne.userCallback=s.userCallback,ne.context=s.context,s=ne}const I=new E_(s,E||void 0),M="value"===n?new Bc(I):new Nf(n,I);return function ld(a,n,s){let u;u=".info"===ar(n._path)?ed(a.infoSyncTree_,n,s):ed(a.serverSyncTree_,n,s),iv(a.eventQueue_,n._path,u)}(a._repo,a,M),()=>cd(a._repo,a,M)}function Gp(a,n,s,u){return $p(a,"value",n,s,u)}function I_(a,n,s,u){return $p(a,"child_added",n,s,u)}function Xm(a,n,s,u){return $p(a,"child_changed",n,s,u)}function Wp(a,n,s,u){return $p(a,"child_moved",n,s,u)}function Gd(a,n,s,u){return $p(a,"child_removed",n,s,u)}function Jm(a,n,s){let u=null;const f=s?new E_(s):null;"value"===n?u=new Bc(f):n&&(u=new Nf(n,f)),cd(a._repo,a,u)}class ol{}class eg extends ol{constructor(n,s){super(),this._value=n,this._key=s}_apply(n){Ca("endAt",this._value,n._path,!0);const s=va(n._queryParams,this._value,this._key);if(Ym(s),ud(s),n._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ia(n._repo,n._path,s,n._orderByCalled)}}class Bh extends ol{constructor(n,s){super(),this._value=n,this._key=s}_apply(n){Ca("endBefore",this._value,n._path,!1);const s=function ic(a,n,s){let u;return u=va(a,n,a.index_===_o||s?s:xe),u.endBeforeSet_=!0,u}(n._queryParams,this._value,this._key);if(Ym(s),ud(s),n._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ia(n._repo,n._path,s,n._orderByCalled)}}class Uh extends ol{constructor(n,s){super(),this._value=n,this._key=s}_apply(n){Ca("startAt",this._value,n._path,!0);const s=Go(n._queryParams,this._value,this._key);if(Ym(s),ud(s),n._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ia(n._repo,n._path,s,n._orderByCalled)}}class D_ extends ol{constructor(n,s){super(),this._value=n,this._key=s}_apply(n){Ca("startAfter",this._value,n._path,!1);const s=function nl(a,n,s){let u;return u=Go(a,n,a.index_===_o||s?s:wt),u.startAfterSet_=!0,u}(n._queryParams,this._value,this._key);if(Ym(s),ud(s),n._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ia(n._repo,n._path,s,n._orderByCalled)}}class F0 extends ol{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ia(n._repo,n._path,function Jc(a,n){const s=a.copy();return s.limitSet_=!0,s.limit_=n,s.viewFrom_="l",s}(n._queryParams,this._limit),n._orderByCalled)}}class mv extends ol{constructor(n){super(),this._limit=n}_apply(n){if(n._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ia(n._repo,n._path,function Ji(a,n){const s=a.copy();return s.limitSet_=!0,s.limit_=n,s.viewFrom_="r",s}(n._queryParams,this._limit),n._orderByCalled)}}class A_ extends ol{constructor(n){super(),this._path=n}_apply(n){So(n,"orderByChild");const s=new Zt(this._path);if(qr(s))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const u=new F(s),f=Td(n._queryParams,u);return ud(f),new ia(n._repo,n._path,f,!0)}}class M_ extends ol{_apply(n){So(n,"orderByKey");const s=Td(n._queryParams,_o);return ud(s),new ia(n._repo,n._path,s,!0)}}class Ba extends ol{_apply(n){So(n,"orderByPriority");const s=Td(n._queryParams,Ni);return ud(s),new ia(n._repo,n._path,s,!0)}}class R_ extends ol{_apply(n){So(n,"orderByValue");const s=Td(n._queryParams,Ce);return ud(s),new ia(n._repo,n._path,s,!0)}}class qp extends ol{constructor(n,s){super(),this._value=n,this._key=s}_apply(n){if(Ca("equalTo",this._value,n._path,!1),n._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(n._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new eg(this._value,this._key)._apply(new Uh(this._value,this._key)._apply(n))}}function au(a,...n){let s=(0,_e.m9)(a);for(const u of n)s=u._apply(s);return s}(function wn(a){(0,_e.hu)(!yt,"__referenceConstructor has already been defined"),yt=a})(Vc),function Pm(a){(0,_e.hu)(!Ju,"__referenceConstructor has already been defined"),Ju=a}(Vc);const _v="FIREBASE_DATABASE_EMULATOR_HOST",Ff={};let Yp=!1;function yv(a,n,s,u,f){let E=u||a.options.databaseURL;void 0===E&&(a.options.projectId||fo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ps("Using default host for project ",a.options.projectId),E=`${a.options.projectId}-default-rtdb.firebaseio.com`);let $,ne,I=zd(E,f),M=I.repoInfo;typeof process<"u"&&process.env&&(ne=process.env[_v]),ne?($=!0,E=`http://${ne}?ns=${M.namespace}`,I=zd(E,f),M=I.repoInfo):$=!I.repoInfo.secure;const Te=f&&$?new ns(ns.OWNER):new Id(a.name,a.options,n);Ud("Invalid Firebase Database URL",I),qr(I.path)||fo("Database URL must point to the root of a Firebase Database (not including a child path).");const Le=function V0(a,n,s,u){let f=Ff[n.name];f||(f={},Ff[n.name]=f);let E=f[a.toURLString()];return E&&fo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),E=new y_(a,Yp,s,u),f[a.toURLString()]=E,E}(M,a,Te,new pl(a.name,s));return new sg(Le,a)}class sg{constructor(n,s){this._repoInternal=n,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Hm(a,n,s){if(a.stats_=Sl(a.repoInfo_),a.forceRestClient_||Bo())a.server_=new Fi(a.repoInfo_,(u,f,E,I)=>{Lp(a,u,f,E,I)},a.authTokenProvider_,a.appCheckProvider_),setTimeout(()=>Lc(a,!0),0);else{if(typeof s<"u"&&null!==s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,_e.Wl)(s)}catch(u){throw new Error("Invalid authOverride provided: "+u)}}a.persistentConnection_=new Dc(a.repoInfo_,n,(u,f,E,I)=>{Lp(a,u,f,E,I)},u=>{Lc(a,u)},u=>{!function sv(a,n){Yn(n,(s,u)=>{jd(a,s,u)})}(a,u)},a.authTokenProvider_,a.appCheckProvider_,s),a.server_=a.persistentConnection_}a.authTokenProvider_.addTokenChangeListener(u=>{a.server_.refreshAuthToken(u)}),a.appCheckProvider_.addTokenChangeListener(u=>{a.server_.refreshAppCheckToken(u.token)}),a.statsReporter_=function qc(a,n){const s=a.toString();return ds[s]||(ds[s]=n()),ds[s]}(a.repoInfo_,()=>new n_(a.stats_,a.server_)),a.infoData_=new eu,a.infoSyncTree_=new i_({startListening:(u,f,E,I)=>{let M=[];const $=a.infoData_.getNode(u._path);return $.isEmpty()||(M=Fd(a.infoSyncTree_,u._path,$),setTimeout(()=>{I("ok")},0)),M},stopListening:()=>{}}),jd(a,"connected",!1),a.serverSyncTree_=new i_({startListening:(u,f,E,I)=>(a.server_.listen(u,E,f,(M,$)=>{const ne=I(M,$);Vl(a.eventQueue_,u._path,ne)}),[]),stopListening:(u,f)=>{a.server_.unlisten(u,f)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vc(this._repo,$n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ia(a,n){const s=Ff[n];(!s||s[a.key]!==a)&&fo(`Database ${n}(${a.repoInfo_}) has already been deleted.`),Gm(a),delete s[a.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(n){null===this._rootInternal&&fo("Cannot call "+n+" on a deleted database.")}}function Lf(){ml.IS_TRANSPORT_INITIALIZED&&k("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function P_(){Lf(),Jo.forceDisallow()}function lu(){Lf(),Ja.forceDisallow(),Jo.forceAllow()}function k_(a,n){bi(a,n)}const j0={".sv":"timestamp"};class Vf{constructor(n,s){this.committed=n,this.snapshot=s}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Dc.prototype.simpleListen=function(a,n){this.sendRequest("q",{p:a},n)},Dc.prototype.echo=function(a,n){this.sendRequest("echo",{d:a},n)},function U0(a){Za(Mr.SDK_VERSION),(0,Mr._registerComponent)(new Kn.wA("database",(n,{instanceIdentifier:s})=>yv(n.getProvider("app").getImmediate(),n.getProvider("auth-internal"),n.getProvider("app-check-internal"),s),"PUBLIC").setMultipleInstances(!0)),(0,Mr.registerVersion)(Ra,"0.14.4",a),(0,Mr.registerVersion)(Ra,"0.14.4","esm2017")}();const Iv=new Lo.Yd("@firebase/database-compat"),Zp=function(a){Iv.warn("FIREBASE WARNING: "+a)};class Dv{constructor(n){this._delegate=n}cancel(n){(0,_e.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,_e.Wj)("OnDisconnect.cancel","onComplete",n,!0);const s=this._delegate.cancel();return n&&s.then(()=>n(null),u=>n(u)),s}remove(n){(0,_e.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,_e.Wj)("OnDisconnect.remove","onComplete",n,!0);const s=this._delegate.remove();return n&&s.then(()=>n(null),u=>n(u)),s}set(n,s){(0,_e.Dv)("OnDisconnect.set",1,2,arguments.length),(0,_e.Wj)("OnDisconnect.set","onComplete",s,!0);const u=this._delegate.set(n);return s&&u.then(()=>s(null),f=>s(f)),u}setWithPriority(n,s,u){(0,_e.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,_e.Wj)("OnDisconnect.setWithPriority","onComplete",u,!0);const f=this._delegate.setWithPriority(n,s);return u&&f.then(()=>u(null),E=>u(E)),f}update(n,s){if((0,_e.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(n)){const f={};for(let E=0;E<n.length;++E)f[""+E]=n[E];n=f,Zp("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,_e.Wj)("OnDisconnect.update","onComplete",s,!0);const u=this._delegate.update(n);return s&&u.then(()=>s(null),f=>s(f)),u}}class Qp{constructor(n,s){this.committed=n,this.snapshot=s}toJSON(){return(0,_e.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class al{constructor(n,s){this._database=n,this._delegate=s}val(){return(0,_e.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,_e.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,_e.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,_e.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(n){return(0,_e.Dv)("DataSnapshot.child",0,1,arguments.length),n=String(n),od("DataSnapshot.child","path",n,!1),new al(this._database,this._delegate.child(n))}hasChild(n){return(0,_e.Dv)("DataSnapshot.hasChild",1,1,arguments.length),od("DataSnapshot.hasChild","path",n,!1),this._delegate.hasChild(n)}getPriority(){return(0,_e.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(n){return(0,_e.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,_e.Wj)("DataSnapshot.forEach","action",n,!1),this._delegate.forEach(s=>n(new al(this._database,s)))}hasChildren(){return(0,_e.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,_e.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,_e.Dv)("DataSnapshot.ref",0,0,arguments.length),new ll(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class vo{constructor(n,s){this.database=n,this._delegate=s}on(n,s,u,f){var E;(0,_e.Dv)("Query.on",2,4,arguments.length),(0,_e.Wj)("Query.on","callback",s,!1);const I=vo.getCancelAndContextArgs_("Query.on",u,f),M=(ne,Te)=>{s.call(I.context,new al(this.database,ne),Te)};M.userCallback=s,M.context=I.context;const $=null===(E=I.cancel)||void 0===E?void 0:E.bind(I.context);switch(n){case"value":return Gp(this._delegate,M,$),s;case"child_added":return I_(this._delegate,M,$),s;case"child_removed":return Gd(this._delegate,M,$),s;case"child_changed":return Xm(this._delegate,M,$),s;case"child_moved":return Wp(this._delegate,M,$),s;default:throw new Error((0,_e.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(n,s,u){if((0,_e.Dv)("Query.off",0,3,arguments.length),function(a,n,s){if(void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,_e.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,n),(0,_e.Wj)("Query.off","callback",s,!0),(0,_e.lb)("Query.off","context",u,!0),s){const f=()=>{};f.userCallback=s,f.context=u,Jm(this._delegate,n,f)}else Jm(this._delegate,n)}get(){return pv(this._delegate).then(n=>new al(this.database,n))}once(n,s,u,f){(0,_e.Dv)("Query.once",1,4,arguments.length),(0,_e.Wj)("Query.once","callback",s,!0);const E=vo.getCancelAndContextArgs_("Query.once",u,f),I=new _e.BH,M=(ne,Te)=>{const Le=new al(this.database,ne);s&&s.call(E.context,Le,Te),I.resolve(Le)};M.userCallback=s,M.context=E.context;const $=ne=>{E.cancel&&E.cancel.call(E.context,ne),I.reject(ne)};switch(n){case"value":Gp(this._delegate,M,$,{onlyOnce:!0});break;case"child_added":I_(this._delegate,M,$,{onlyOnce:!0});break;case"child_removed":Gd(this._delegate,M,$,{onlyOnce:!0});break;case"child_changed":Xm(this._delegate,M,$,{onlyOnce:!0});break;case"child_moved":Wp(this._delegate,M,$,{onlyOnce:!0});break;default:throw new Error((0,_e.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return I.promise}limitToFirst(n){return(0,_e.Dv)("Query.limitToFirst",1,1,arguments.length),new vo(this.database,au(this._delegate,function S_(a){if("number"!=typeof a||Math.floor(a)!==a||a<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new F0(a)}(n)))}limitToLast(n){return(0,_e.Dv)("Query.limitToLast",1,1,arguments.length),new vo(this.database,au(this._delegate,function T_(a){if("number"!=typeof a||Math.floor(a)!==a||a<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new mv(a)}(n)))}orderByChild(n){return(0,_e.Dv)("Query.orderByChild",1,1,arguments.length),new vo(this.database,au(this._delegate,function x_(a){if("$key"===a)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===a)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===a)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return od("orderByChild","path",a,!1),new A_(a)}(n)))}orderByKey(){return(0,_e.Dv)("Query.orderByKey",0,0,arguments.length),new vo(this.database,au(this._delegate,function rg(){return new M_}()))}orderByPriority(){return(0,_e.Dv)("Query.orderByPriority",0,0,arguments.length),new vo(this.database,au(this._delegate,function ig(){return new Ba}()))}orderByValue(){return(0,_e.Dv)("Query.orderByValue",0,0,arguments.length),new vo(this.database,au(this._delegate,function gv(){return new R_}()))}startAt(n=null,s){return(0,_e.Dv)("Query.startAt",0,2,arguments.length),new vo(this.database,au(this._delegate,function tg(a=null,n){return Np("startAt","key",n,!0),new Uh(a,n)}(n,s)))}startAfter(n=null,s){return(0,_e.Dv)("Query.startAfter",0,2,arguments.length),new vo(this.database,au(this._delegate,function ng(a,n){return Np("startAfter","key",n,!0),new D_(a,n)}(n,s)))}endAt(n=null,s){return(0,_e.Dv)("Query.endAt",0,2,arguments.length),new vo(this.database,au(this._delegate,function dd(a,n){return Np("endAt","key",n,!0),new eg(a,n)}(n,s)))}endBefore(n=null,s){return(0,_e.Dv)("Query.endBefore",0,2,arguments.length),new vo(this.database,au(this._delegate,function Kp(a,n){return Np("endBefore","key",n,!0),new Bh(a,n)}(n,s)))}equalTo(n,s){return(0,_e.Dv)("Query.equalTo",1,2,arguments.length),new vo(this.database,au(this._delegate,function O_(a,n){return Np("equalTo","key",n,!0),new qp(a,n)}(n,s)))}toString(){return(0,_e.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,_e.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(n){if((0,_e.Dv)("Query.isEqual",1,1,arguments.length),!(n instanceof vo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(n._delegate)}static getCancelAndContextArgs_(n,s,u){const f={cancel:void 0,context:void 0};if(s&&u)f.cancel=s,(0,_e.Wj)(n,"cancel",f.cancel,!0),f.context=u,(0,_e.lb)(n,"context",f.context,!0);else if(s)if("object"==typeof s&&null!==s)f.context=s;else{if("function"!=typeof s)throw new Error((0,_e.gK)(n,"cancelOrContext")+" must either be a cancel callback or a context object.");f.cancel=s}return f}get ref(){return new ll(this.database,new Vc(this._delegate._repo,this._delegate._path))}}class ll extends vo{constructor(n,s){super(n,new ia(s._repo,s._path,new $o,!1)),this.database=n,this._delegate=s}getKey(){return(0,_e.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(n){return(0,_e.Dv)("Reference.child",1,1,arguments.length),"number"==typeof n&&(n=String(n)),new ll(this.database,ou(this._delegate,n))}getParent(){(0,_e.Dv)("Reference.parent",0,0,arguments.length);const n=this._delegate.parent;return n?new ll(this.database,n):null}getRoot(){return(0,_e.Dv)("Reference.root",0,0,arguments.length),new ll(this.database,this._delegate.root)}set(n,s){(0,_e.Dv)("Reference.set",1,2,arguments.length),(0,_e.Wj)("Reference.set","onComplete",s,!0);const u=Lh(this._delegate,n);return s&&u.then(()=>s(null),f=>s(f)),u}update(n,s){if((0,_e.Dv)("Reference.update",1,2,arguments.length),Array.isArray(n)){const f={};for(let E=0;E<n.length;++E)f[""+E]=n[E];n=f,Zp("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ra("Reference.update",this._delegate._path),(0,_e.Wj)("Reference.update","onComplete",s,!0);const u=Qm(this._delegate,n);return s&&u.then(()=>s(null),f=>s(f)),u}setWithPriority(n,s,u){(0,_e.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,_e.Wj)("Reference.setWithPriority","onComplete",u,!0);const f=function Vh(a,n,s){if(ra("setWithPriority",a._path),Ca("setWithPriority",n,a._path,!1),p_("setWithPriority",s,!1),".length"===a.key||".keys"===a.key)throw"setWithPriority failed: "+a.key+" is a read-only object.";const u=new _e.BH;return zm(a._repo,a._path,n,s,u.wrapCallback(()=>{})),u.promise}(this._delegate,n,s);return u&&f.then(()=>u(null),E=>u(E)),f}remove(n){(0,_e.Dv)("Reference.remove",0,1,arguments.length),(0,_e.Wj)("Reference.remove","onComplete",n,!0);const s=function C_(a){return ra("remove",a._path),Lh(a,null)}(this._delegate);return n&&s.then(()=>n(null),u=>n(u)),s}transaction(n,s,u){(0,_e.Dv)("Reference.transaction",1,3,arguments.length),(0,_e.Wj)("Reference.transaction","transactionUpdate",n,!1),(0,_e.Wj)("Reference.transaction","onComplete",s,!0),function(a,n,s,u){if(void 0!==s&&"boolean"!=typeof s)throw new Error((0,_e.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,u);const f=function Bf(a,n,s){var u;if(a=(0,_e.m9)(a),ra("Reference.transaction",a._path),".length"===a.key||".keys"===a.key)throw"Reference.transaction failed: "+a.key+" is a read-only object.";const f=null===(u=s?.applyLocally)||void 0===u||u,E=new _e.BH,M=Gp(a,()=>{});return function lv(a,n,s,u,f,E){Pf(a,"transaction on "+n);const I={path:n,update:s,onComplete:u,status:null,order:Gi(),applyLocally:E,retryCount:0,unwatcher:f,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},M=su(a,n,void 0);I.currentInputSnapshot=M;const $=I.update(M.val());if(void 0===$)I.unwatcher(),I.currentOutputSnapshotRaw=null,I.currentOutputSnapshotResolved=null,I.onComplete&&I.onComplete(null,!1,I.currentInputSnapshot);else{sd("transaction failed: Data returned ",$,I.path),I.status=0;const ne=Op(a.transactionQueueTree_,n),Te=Bd(ne)||[];let Le;Te.push(I),h_(ne,Te),"object"==typeof $&&null!==$&&(0,_e.r3)($,".priority")?(Le=(0,_e.DV)($,".priority"),(0,_e.hu)(id(Le),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Le=(kc(a.serverSyncTree_,n)||wr.EMPTY_NODE).getPriority().val();const Xe=Oh(a),Nt=x($,Le),Vt=Rp(Nt,M,Xe);I.currentOutputSnapshotRaw=Nt,I.currentOutputSnapshotResolved=Vt,I.currentWriteId=Ph(a);const dn=Xy(a.serverSyncTree_,n,Vt,I.currentWriteId,I.applyLocally);Vl(a.eventQueue_,n,dn),Up(a,a.transactionQueueTree_)}}(a._repo,a._path,n,($,ne,Te)=>{let Le=null;$?E.reject($):(Le=new Fh(Te,new Vc(a._repo,a._path),Ni),E.resolve(new Vf(ne,Le)))},M,f),E.promise}(this._delegate,n,{applyLocally:u}).then(E=>new Qp(E.committed,new al(this.database,E.snapshot)));return s&&f.then(E=>s(null,E.committed,E.snapshot),E=>s(E,!1,null)),f}setPriority(n,s){(0,_e.Dv)("Reference.setPriority",1,2,arguments.length),(0,_e.Wj)("Reference.setPriority","onComplete",s,!0);const u=function fv(a,n){a=(0,_e.m9)(a),ra("setPriority",a._path),p_("setPriority",n,!1);const s=new _e.BH;return zm(a._repo,Vi(a._path,".priority"),n,null,s.wrapCallback(()=>{})),s.promise}(this._delegate,n);return s&&u.then(()=>s(null),f=>s(f)),u}push(n,s){(0,_e.Dv)("Reference.push",0,2,arguments.length),(0,_e.Wj)("Reference.push","onComplete",s,!0);const u=function hv(a,n){a=(0,_e.m9)(a),ra("push",a._path),Ca("push",n,a._path,!0);const s=v_(a._repo),u=N0(s),f=ou(a,u),E=ou(a,u);let I;return I=null!=n?Lh(E,n).then(()=>E):Promise.resolve(E),f.then=I.then.bind(I),f.catch=I.then.bind(I,void 0),f}(this._delegate,n),f=u.then(I=>new ll(this.database,I));s&&f.then(()=>s(null),I=>s(I));const E=new ll(this.database,u);return E.then=f.then.bind(f),E.catch=f.catch.bind(f,void 0),E}onDisconnect(){return ra("Reference.onDisconnect",this._delegate._path),new Dv(new w_(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class cu{constructor(n,s){this._delegate=n,this.app=s,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:P_,forceLongPolling:lu}}useEmulator(n,s,u={}){!function wv(a,n,s,u={}){(a=(0,_e.m9)(a))._checkNotDeleted("useEmulator"),a._instanceStarted&&fo("Cannot call useEmulator() after instance has already been initialized.");const f=a._repoInternal;let E;if(f.repoInfo_.nodeAdmin)u.mockUserToken&&fo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),E=new ns(ns.OWNER);else if(u.mockUserToken){const I="string"==typeof u.mockUserToken?u.mockUserToken:(0,_e.Sg)(u.mockUserToken,a.app.options.projectId);E=new ns(I)}!function L0(a,n,s,u){a.repoInfo_=new Sn(`${n}:${s}`,!1,a.repoInfo_.namespace,a.repoInfo_.webSocketOnly,a.repoInfo_.nodeAdmin,a.repoInfo_.persistenceKey,a.repoInfo_.includeNamespaceInQueryParams,!0),u&&(a.authTokenProvider_=u)}(f,n,s,E)}(this._delegate,n,s,u)}ref(n){if((0,_e.Dv)("database.ref",0,1,arguments.length),n instanceof ll){const s=dv(this._delegate,n.toString());return new ll(this,s)}{const s=Zm(this._delegate,n);return new ll(this,s)}}refFromURL(n){(0,_e.Dv)("database.refFromURL",1,1,arguments.length);const u=dv(this._delegate,n);return new ll(this,u)}goOffline(){return(0,_e.Dv)("database.goOffline",0,0,arguments.length),function B0(a){(a=(0,_e.m9)(a))._checkNotDeleted("goOffline"),Gm(a._repo)}(this._delegate)}goOnline(){return(0,_e.Dv)("database.goOnline",0,0,arguments.length),function bv(a){(a=(0,_e.m9)(a))._checkNotDeleted("goOnline"),function kh(a){a.persistentConnection_&&a.persistentConnection_.resume(__)}(a._repo)}(this._delegate)}}cu.ServerValue={TIMESTAMP:function jh(){return j0}(),increment:a=>function N_(a){return{".sv":{increment:a}}}(a)};var lg=Object.freeze({__proto__:null,initStandalone:function ag({app:a,url:n,version:s,customAuthImpl:u,namespace:f,nodeAdmin:E=!1}){Za(s);const I=new Kn.zt("auth-internal",new Kn.H0("database-standalone"));return I.setComponent(new Kn.wA("auth-internal",()=>u,"PRIVATE")),{instance:new cu(yv(a,I,void 0,n,E),a),namespace:f}}});const L_=cu.ServerValue;function Sv(a){return null==a}function Tv(a){return"function"==typeof a.set}function B_(a,n){return Tv(n)?n:a.ref(n)}function Av(a,n){if(function V_(a){return"string"==typeof a}(a))return n.stringCase();if(Tv(a))return n.firebaseCase();if(function Xp(a){return"function"==typeof a.exportVal}(a))return n.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof a)}function zh(a,n,s="on",u=ts.z){return new Bt.y(f=>{let E=null;return E=a[s](n,(I,M)=>{u.schedule(()=>{f.next({snapshot:I,prevKey:M})}),"once"===s&&u.schedule(()=>f.complete())},I=>{u.schedule(()=>f.error(I))}),"on"===s?{unsubscribe(){null!=E&&a.off(n,E)}}:{unsubscribe(){}}}).pipe((0,Fe.U)(f=>{const{snapshot:E,prevKey:I}=f;let M=null;return E.exists()&&(M=E.key),{type:n,payload:E,prevKey:I,key:M}}),(0,Fo.B)())}function cg(a,n){const s=a.length;for(let u=0;u<s;u++)if(a[u].payload.key===n)return u;return-1}function U_(a,n){const{payload:s,prevKey:u,key:f}=n,E=cg(a,f),I=function z0(a,n){if(Sv(n))return 0;{const s=cg(a,n);return-1===s?a.length:s+1}}(a,u);switch(n.type){case"value":if(n.payload&&n.payload.exists()){let M=null;n.payload.forEach($=>{const ne={payload:$,type:"value",prevKey:M,key:$.key};return M=$.key,a=[...a,ne],!1})}return a;case"child_added":if(E>-1){const M=a[E-1];(M&&M.key||null)!==u&&(a=a.filter($=>$.payload.key!==s.key)).splice(I,0,n)}else{if(null==u)return[n,...a];(a=a.slice()).splice(I,0,n)}return a;case"child_removed":return a.filter(M=>M.payload.key!==s.key);case"child_changed":return a.map(M=>M.payload.key===f?n:M);case"child_moved":if(E>-1){const M=a.splice(E,1)[0];return(a=a.slice()).splice(I,0,M),a}return a;default:return a}}function j_(a){return(Sv(a)||0===a.length)&&(a=["child_added","child_removed","child_changed","child_moved"]),a}function Hf(a,n,s){return function H0(a,n,s){return zh(a,"value","once",s).pipe((0,zt.w)(u=>{const f=[(0,Ot.of)(u)];return n.forEach(E=>f.push(zh(a,E,"on",s))),(0,to.T)(...f).pipe((0,Co.R)(U_,[]))}),(0,uo.x)())}(a,n=j_(n),s)}function H_(a,n,s){const u=(n=j_(n)).map(f=>zh(a,f,"on",s));return(0,to.T)(...u)}function $h(a,n){return function(u,f){return Av(u,{stringCase:()=>a.child(u)[n](f),firebaseCase:()=>u[n](f),snapshotCase:()=>u.ref[n](f)})}}function Wd(a){return function(s){return s?Av(s,{stringCase:()=>a.child(s).remove(),firebaseCase:()=>s.remove(),snapshotCase:()=>s.ref.remove()}):a.remove()}}function Gh(a,n){return function(){return zh(a,"value","on",n)}}!function jf(a){a.INTERNAL.registerComponent(new Kn.wA("database-compat",(n,{instanceIdentifier:s})=>{const u=n.getProvider("app-compat").getImmediate(),f=n.getProvider("database").getImmediate({identifier:s});return new cu(f,u)},"PUBLIC").setServiceProps({Reference:ll,Query:vo,Database:cu,DataSnapshot:al,enableLogging:k_,INTERNAL:lg,ServerValue:L_}).setMultipleInstances(!0)),a.registerVersion("@firebase/database-compat","0.3.4")}(kn.Z);const W_=new W.OlP("angularfire2.realtimeDatabaseURL"),Wh=new W.OlP("angularfire2.database.use-emulator");let $0=(()=>{class a{constructor(s,u,f,E,I,M,$,ne,Te,Le,Xe,Nt,Vt,dn,Rn){this.schedulers=M;const pr=$,Zr=(0,ze.on)(s,I,u);ne&&(0,Ae.nw)(Zr,I,Te,Xe,Nt,Vt,Le,dn),this.database=(0,ze.cc)(`${Zr.name}.database.${f}`,"AngularFireDatabase",Zr.name,()=>{const br=I.runOutsideAngular(()=>Zr.database(f||void 0));return pr&&br.useEmulator(...pr),br},[pr])}list(s,u){const f=this.schedulers.ngZone.runOutsideAngular(()=>B_(this.database,s));let E=f;return u&&(E=u(f)),function G_(a,n){const s=n.schedulers.outsideAngular,u=n.schedulers.ngZone.run(()=>a.ref);return{query:a,update:$h(u,"update"),set:$h(u,"set"),push:f=>u.push(f),remove:Wd(u),snapshotChanges:f=>Hf(a,f,s).pipe(xt.iC),stateChanges:f=>H_(a,f,s).pipe(xt.iC),auditTrail:f=>function Jp(a,n,s){return function $_(a,n,s){return function z_(a,n){return zh(a,"value","on",n).pipe((0,Fe.U)(s=>{let u;return s.payload.forEach(f=>(u=f.key,!1)),{data:s,lastKeyToLoad:u}}))}(a,s).pipe(function qa(...a){const n=(0,hl.jO)(a);return(0,Ka.e)((s,u)=>{const f=a.length,E=new Array(f);let I=a.map(()=>!1),M=!1;for(let $=0;$<f;$++)(0,Kl.Xf)(a[$]).subscribe((0,pa.x)(u,ne=>{E[$]=ne,!M&&!I[$]&&(I[$]=!0,(M=I.every(Ec.y))&&(I=null))},_s.Z));s.subscribe((0,pa.x)(u,$=>{if(M){const ne=[$,...E];u.next(n?n(...ne):ne)}}))})}(n),(0,Fe.U)(([f,E])=>{const I=f.lastKeyToLoad,M=E.map($=>$.key);return{actions:E,lastKeyToLoad:I,loadedKeys:M}}),function fl(a){return(0,Ka.e)((n,s)=>{let u=!1,f=0;n.subscribe((0,pa.x)(s,E=>(u||(u=!a(E,f++)))&&s.next(E)))})}(f=>-1===f.loadedKeys.indexOf(f.lastKeyToLoad)),(0,Fe.U)(f=>f.actions))}(a,H_(a,n).pipe((0,Co.R)((f,E)=>[...f,E],[])),s)}(a,f,s).pipe(xt.iC),valueChanges:(f,E)=>Hf(a,f,s).pipe((0,Fe.U)(M=>M.map($=>E&&E.idField?Object.assign(Object.assign({},$.payload.val()),{[E.idField]:$.key}):$.payload.val())),xt.iC)}}(E,this)}object(s){return function zf(a,n){return{query:a,snapshotChanges:()=>Gh(a,n.schedulers.outsideAngular)().pipe(xt.iC),update:s=>a.ref.update(s),set:s=>a.ref.set(s),remove:()=>a.ref.remove(),valueChanges:()=>Gh(a,n.schedulers.outsideAngular)().pipe(xt.iC,(0,Fe.U)(u=>u.payload.exists()?u.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>B_(this.database,s)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return a.\u0275fac=function(s){return new(s||a)(W.LFG(ze.Dh),W.LFG(ze.xv,8),W.LFG(W_,8),W.LFG(W.Lbi),W.LFG(W.R0b),W.LFG(xt.HU),W.LFG(Wh,8),W.LFG(Ae.zQ,8),W.LFG(Ae.Qv,8),W.LFG(Ae.L6,8),W.LFG(Ae._Q,8),W.LFG(Ae.rT,8),W.LFG(Ae.lh,8),W.LFG(Ae.f7,8),W.LFG(Pt.nm,8))},a.\u0275prov=W.Yz7({token:a,factory:a.\u0275fac,providedIn:"any"}),a})(),qE=(()=>{class a{constructor(){$e.Z.registerVersion("angularfire",xt.q4.full,"rtdb-compat")}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=W.oAB({type:a}),a.\u0275inj=W.cJS({providers:[$0]}),a})();var fs=j(7340);function Kh(a){return new W.vHH(3e3,!1)}function Yf(){return typeof window<"u"&&typeof window.document<"u"}function Zh(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function uc(a){switch(a.length){case 0:return new fs.ZN;case 1:return a[0];default:return new fs.ZE(a)}}function mg(a,n,s,u,f=new Map,E=new Map){const I=[],M=[];let $=-1,ne=null;if(u.forEach(Te=>{const Le=Te.get("offset"),Xe=Le==$,Nt=Xe&&ne||new Map;Te.forEach((Vt,dn)=>{let Rn=dn,pr=Vt;if("offset"!==dn)switch(Rn=n.normalizePropertyName(Rn,I),pr){case fs.k1:pr=f.get(dn);break;case fs.l3:pr=E.get(dn);break;default:pr=n.normalizeStyleValue(dn,Rn,pr,I)}Nt.set(Rn,pr)}),Xe||M.push(Nt),ne=Nt,$=Le}),I.length)throw function Q_(a){return new W.vHH(3502,!1)}();return M}function im(a,n,s,u){switch(n){case"start":a.onStart(()=>u(s&&dc(s,"start",a)));break;case"done":a.onDone(()=>u(s&&dc(s,"done",a)));break;case"destroy":a.onDestroy(()=>u(s&&dc(s,"destroy",a)))}}function dc(a,n,s){const E=Qh(a.element,a.triggerName,a.fromState,a.toState,n||a.phaseName,s.totalTime??a.totalTime,!!s.disabled),I=a._data;return null!=I&&(E._data=I),E}function Qh(a,n,s,u,f="",E=0,I){return{element:a,triggerName:n,fromState:s,toState:u,phaseName:f,totalTime:E,disabled:!!I}}function Ul(a,n,s){let u=a.get(n);return u||a.set(n,u=s),u}function sm(a){const n=a.indexOf(":");return[a.substring(1,n),a.slice(n+1)]}let om=(a,n)=>!1,ty=(a,n,s)=>[],am=null;function lm(a){const n=a.parentNode||a.host;return n===am?null:n}(Zh()||typeof Element<"u")&&(Yf()?(am=(()=>document.documentElement)(),om=(a,n)=>{for(;n;){if(n===a)return!0;n=lm(n)}return!1}):om=(a,n)=>a.contains(n),ty=(a,n,s)=>{if(s)return Array.from(a.querySelectorAll(n));const u=a.querySelector(n);return u?[u]:[]});let Mu=null,ry=!1;const _g=om,sy=ty;let Zf=(()=>{class a{validateStyleProperty(s){return function gg(a){Mu||(Mu=function iy(){return typeof document<"u"?document.body:null}()||{},ry=!!Mu.style&&"WebkitAppearance"in Mu.style);let n=!0;return Mu.style&&!function Y0(a){return"ebkit"==a.substring(1,6)}(a)&&(n=a in Mu.style,!n&&ry&&(n="Webkit"+a.charAt(0).toUpperCase()+a.slice(1)in Mu.style)),n}(s)}matchesElement(s,u){return!1}containsElement(s,u){return _g(s,u)}getParentElement(s){return lm(s)}query(s,u,f){return sy(s,u,f)}computeStyle(s,u,f){return f||""}animate(s,u,f,E,I,M=[],$){return new fs.ZN(f,E)}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275prov=W.Yz7({token:a,factory:a.\u0275fac}),a})(),yg=(()=>{class a{}return a.NOOP=new Zf,a})();const vg=1e3,wg="ng-enter",fd="ng-leave",um="ng-trigger",Xh=".ng-trigger",Qf="ng-animating",wl=".ng-animating";function Ru(a){if("number"==typeof a)return a;const n=a.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:Xf(parseFloat(n[1]),n[2])}function Xf(a,n){return"s"===n?a*vg:a}function Jf(a,n,s){return a.hasOwnProperty("duration")?a:function Jh(a,n,s){let f,E=0,I="";if("string"==typeof a){const M=a.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===M)return n.push(Kh()),{duration:0,delay:0,easing:""};f=Xf(parseFloat(M[1]),M[2]);const $=M[3];null!=$&&(E=Xf(parseFloat($),M[4]));const ne=M[5];ne&&(I=ne)}else f=a;if(!s){let M=!1,$=n.length;f<0&&(n.push(function K_(){return new W.vHH(3100,!1)}()),M=!0),E<0&&(n.push(function W0(){return new W.vHH(3101,!1)}()),M=!0),M&&n.splice($,0,Kh())}return{duration:f,delay:E,easing:I}}(a,n,s)}function ef(a,n={}){return Object.keys(a).forEach(s=>{n[s]=a[s]}),n}function Pv(a){const n=new Map;return Object.keys(a).forEach(s=>{n.set(s,a[s])}),n}function pd(a,n=new Map,s){if(s)for(let[u,f]of s)n.set(u,f);for(let[u,f]of a)n.set(u,f);return n}function bg(a,n,s){return s?n+":"+s+";":""}function ay(a){let n="";for(let s=0;s<a.style.length;s++){const u=a.style.item(s);n+=bg(0,u,a.style.getPropertyValue(u))}for(const s in a.style)a.style.hasOwnProperty(s)&&!s.startsWith("_")&&(n+=bg(0,Zd(s),a.style[s]));a.setAttribute("style",n)}function hc(a,n,s){a.style&&(n.forEach((u,f)=>{const E=gd(f);s&&!s.has(f)&&s.set(f,a.style[E]),a.style[E]=u}),Zh()&&ay(a))}function md(a,n){a.style&&(n.forEach((s,u)=>{const f=gd(u);a.style[f]=""}),Zh()&&ay(a))}function Rs(a){return Array.isArray(a)?1==a.length?a[0]:(0,fs.vP)(a):a}const Ig=new RegExp("{{\\s*(.+?)\\s*}}","g");function dm(a){let n=[];if("string"==typeof a){let s;for(;s=Ig.exec(a);)n.push(s[1]);Ig.lastIndex=0}return n}function tf(a,n,s){const u=a.toString(),f=u.replace(Ig,(E,I)=>{let M=n[I];return null==M&&(s.push(function Y_(a){return new W.vHH(3003,!1)}()),M=""),M.toString()});return f==u?a:f}function tp(a){const n=[];let s=a.next();for(;!s.done;)n.push(s.value),s=a.next();return n}const ly=/-+([a-z0-9])/g;function gd(a){return a.replace(ly,(...n)=>n[1].toUpperCase())}function Zd(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function jl(a,n,s){switch(n.type){case 7:return a.visitTrigger(n,s);case 0:return a.visitState(n,s);case 1:return a.visitTransition(n,s);case 2:return a.visitSequence(n,s);case 3:return a.visitGroup(n,s);case 4:return a.visitAnimate(n,s);case 5:return a.visitKeyframes(n,s);case 6:return a.visitStyle(n,s);case 8:return a.visitReference(n,s);case 9:return a.visitAnimateChild(n,s);case 10:return a.visitAnimateRef(n,s);case 11:return a.visitQuery(n,s);case 12:return a.visitStagger(n,s);default:throw function Uc(a){return new W.vHH(3004,!1)}()}}function cy(a,n){return window.getComputedStyle(a)[n]}const Hl="*";function fc(a,n){const s=[];return"string"==typeof a?a.split(/\s*,\s*/).forEach(u=>function jc(a,n,s){if(":"==a[0]){const $=function hy(a,n){switch(a){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(s,u)=>parseFloat(u)>parseFloat(s);case":decrement":return(s,u)=>parseFloat(u)<parseFloat(s);default:return n.push(function qf(a){return new W.vHH(3016,!1)}()),"* => *"}}(a,s);if("function"==typeof $)return void n.push($);a=$}const u=a.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==u||u.length<4)return s.push(function Yd(a){return new W.vHH(3015,!1)}()),n;const f=u[1],E=u[2],I=u[3];n.push(Mi(f,I));"<"==E[0]&&!(f==Hl&&I==Hl)&&n.push(Mi(I,f))}(u,s,n)):s.push(a),s}const np=new Set(["true","1"]),nf=new Set(["false","0"]);function Mi(a,n){const s=np.has(a)||nf.has(a),u=np.has(n)||nf.has(n);return(f,E)=>{let I=a==Hl||a==f,M=n==Hl||n==E;return!I&&s&&"boolean"==typeof f&&(I=f?np.has(a):nf.has(a)),!M&&u&&"boolean"==typeof E&&(M=E?np.has(n):nf.has(n)),I&&M}}const kv=new RegExp("s*:selfs*,?","g");function _d(a,n,s,u){return new Ls(a).build(n,s,u)}class Ls{constructor(n){this._driver=n}build(n,s,u){const f=new Nv(s);return this._resetContextStyleTimingState(f),jl(this,Rs(n),f)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,s){let u=s.queryCount=0,f=s.depCount=0;const E=[],I=[];return"@"==n.name.charAt(0)&&s.errors.push(function Ua(){return new W.vHH(3006,!1)}()),n.definitions.forEach(M=>{if(this._resetContextStyleTimingState(s),0==M.type){const $=M,ne=$.name;ne.toString().split(/\s*,\s*/).forEach(Te=>{$.name=Te,E.push(this.visitState($,s))}),$.name=ne}else if(1==M.type){const $=this.visitTransition(M,s);u+=$.queryCount,f+=$.depCount,I.push($)}else s.errors.push(function qh(){return new W.vHH(3007,!1)}())}),{type:7,name:n.name,states:E,transitions:I,queryCount:u,depCount:f,options:null}}visitState(n,s){const u=this.visitStyle(n.styles,s),f=n.options&&n.options.params||null;if(u.containsDynamicStyles){const E=new Set,I=f||{};u.styles.forEach(M=>{M instanceof Map&&M.forEach($=>{dm($).forEach(ne=>{I.hasOwnProperty(ne)||E.add(ne)})})}),E.size&&(tp(E.values()),s.errors.push(function tm(a,n){return new W.vHH(3008,!1)}()))}return{type:0,name:n.name,style:u,options:f?{params:f}:null}}visitTransition(n,s){s.queryCount=0,s.depCount=0;const u=jl(this,Rs(n.animation),s);return{type:1,matchers:fc(n.expr,s.errors),animation:u,queryCount:s.queryCount,depCount:s.depCount,options:uu(n.options)}}visitSequence(n,s){return{type:2,steps:n.steps.map(u=>jl(this,u,s)),options:uu(n.options)}}visitGroup(n,s){const u=s.currentTime;let f=0;const E=n.steps.map(I=>{s.currentTime=u;const M=jl(this,I,s);return f=Math.max(f,s.currentTime),M});return s.currentTime=f,{type:3,steps:E,options:uu(n.options)}}visitAnimate(n,s){const u=function fm(a,n){if(a.hasOwnProperty("duration"))return a;if("number"==typeof a)return pm(Jf(a,n).duration,0,"");const s=a;if(s.split(/\s+/).some(E=>"{"==E.charAt(0)&&"{"==E.charAt(1))){const E=pm(0,0,"");return E.dynamic=!0,E.strValue=s,E}const f=Jf(s,n);return pm(f.duration,f.delay,f.easing)}(n.timings,s.errors);s.currentAnimateTimings=u;let f,E=n.styles?n.styles:(0,fs.oB)({});if(5==E.type)f=this.visitKeyframes(E,s);else{let I=n.styles,M=!1;if(!I){M=!0;const ne={};u.easing&&(ne.easing=u.easing),I=(0,fs.oB)(ne)}s.currentTime+=u.duration+u.delay;const $=this.visitStyle(I,s);$.isEmptyStep=M,f=$}return s.currentAnimateTimings=null,{type:4,timings:u,style:f,options:null}}visitStyle(n,s){const u=this._makeStyleAst(n,s);return this._validateStyleAst(u,s),u}_makeStyleAst(n,s){const u=[],f=Array.isArray(n.styles)?n.styles:[n.styles];for(let M of f)"string"==typeof M?M===fs.l3?u.push(M):s.errors.push(new W.vHH(3002,!1)):u.push(Pv(M));let E=!1,I=null;return u.forEach(M=>{if(M instanceof Map&&(M.has("easing")&&(I=M.get("easing"),M.delete("easing")),!E))for(let $ of M.values())if($.toString().indexOf("{{")>=0){E=!0;break}}),{type:6,styles:u,easing:I,offset:n.offset,containsDynamicStyles:E,options:null}}_validateStyleAst(n,s){const u=s.currentAnimateTimings;let f=s.currentTime,E=s.currentTime;u&&E>0&&(E-=u.duration+u.delay),n.styles.forEach(I=>{"string"!=typeof I&&I.forEach((M,$)=>{const ne=s.collectedStyles.get(s.currentQuerySelector),Te=ne.get($);let Le=!0;Te&&(E!=f&&E>=Te.startTime&&f<=Te.endTime&&(s.errors.push(function Yh(a,n,s,u,f){return new W.vHH(3010,!1)}()),Le=!1),E=Te.startTime),Le&&ne.set($,{startTime:E,endTime:f}),s.options&&function Cg(a,n,s){const u=n.params||{},f=dm(a);f.length&&f.forEach(E=>{u.hasOwnProperty(E)||s.push(function q_(a){return new W.vHH(3001,!1)}())})}(M,s.options,s.errors)})})}visitKeyframes(n,s){const u={type:5,styles:[],options:null};if(!s.currentAnimateTimings)return s.errors.push(function $f(){return new W.vHH(3011,!1)}()),u;let E=0;const I=[];let M=!1,$=!1,ne=0;const Te=n.steps.map(pr=>{const Zr=this._makeStyleAst(pr,s);let br=null!=Zr.offset?Zr.offset:function Fv(a){if("string"==typeof a)return null;let n=null;if(Array.isArray(a))a.forEach(s=>{if(s instanceof Map&&s.has("offset")){const u=s;n=parseFloat(u.get("offset")),u.delete("offset")}});else if(a instanceof Map&&a.has("offset")){const s=a;n=parseFloat(s.get("offset")),s.delete("offset")}return n}(Zr.styles),Qr=0;return null!=br&&(E++,Qr=Zr.offset=br),$=$||Qr<0||Qr>1,M=M||Qr<ne,ne=Qr,I.push(Qr),Zr});$&&s.errors.push(function Gf(){return new W.vHH(3012,!1)}()),M&&s.errors.push(function Wf(){return new W.vHH(3200,!1)}());const Le=n.steps.length;let Xe=0;E>0&&E<Le?s.errors.push(function Kf(){return new W.vHH(3202,!1)}()):0==E&&(Xe=1/(Le-1));const Nt=Le-1,Vt=s.currentTime,dn=s.currentAnimateTimings,Rn=dn.duration;return Te.forEach((pr,Zr)=>{const br=Xe>0?Zr==Nt?1:Xe*Zr:I[Zr],Qr=br*Rn;s.currentTime=Vt+dn.delay+Qr,dn.duration=Qr,this._validateStyleAst(pr,s),pr.offset=br,u.styles.push(pr)}),u}visitReference(n,s){return{type:8,animation:jl(this,Rs(n.animation),s),options:uu(n.options)}}visitAnimateChild(n,s){return s.depCount++,{type:9,options:uu(n.options)}}visitAnimateRef(n,s){return{type:10,animation:this.visitReference(n.animation,s),options:uu(n.options)}}visitQuery(n,s){const u=s.currentQuerySelector,f=n.options||{};s.queryCount++,s.currentQuery=n;const[E,I]=function Da(a){const n=!!a.split(/\s*,\s*/).find(s=>":self"==s);return n&&(a=a.replace(kv,"")),a=a.replace(/@\*/g,Xh).replace(/@\w+/g,s=>Xh+"-"+s.slice(1)).replace(/:animating/g,wl),[a,n]}(n.selector);s.currentQuerySelector=u.length?u+" "+E:E,Ul(s.collectedStyles,s.currentQuerySelector,new Map);const M=jl(this,Rs(n.animation),s);return s.currentQuery=null,s.currentQuerySelector=u,{type:11,selector:E,limit:f.limit||0,optional:!!f.optional,includeSelf:I,animation:M,originalSelector:n.selector,options:uu(n.options)}}visitStagger(n,s){s.currentQuery||s.errors.push(function Kd(){return new W.vHH(3013,!1)}());const u="full"===n.timings?{duration:0,delay:0,easing:"full"}:Jf(n.timings,s.errors,!0);return{type:12,animation:jl(this,Rs(n.animation),s),timings:u,options:null}}}class Nv{constructor(n){this.errors=n,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function uu(a){return a?(a=ef(a)).params&&(a.params=function Pu(a){return a?ef(a):null}(a.params)):a={},a}function pm(a,n,s){return{duration:a,delay:n,easing:s}}function Sg(a,n,s,u,f,E,I=null,M=!1){return{type:1,element:a,keyframes:n,preStyleProps:s,postStyleProps:u,duration:f,delay:E,totalTime:f+E,easing:I,subTimeline:M}}class sf{constructor(){this._map=new Map}get(n){return this._map.get(n)||[]}append(n,s){let u=this._map.get(n);u||this._map.set(n,u=[]),u.push(...s)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const Ds=new RegExp(":enter","g"),tE=new RegExp(":leave","g");function qs(a,n,s,u,f,E=new Map,I=new Map,M,$,ne=[]){return(new my).buildKeyframes(a,n,s,u,f,E,I,M,$,ne)}class my{buildKeyframes(n,s,u,f,E,I,M,$,ne,Te=[]){ne=ne||new sf;const Le=new Ag(n,s,ne,f,E,Te,[]);Le.options=$;const Xe=$.delay?Ru($.delay):0;Le.currentTimeline.delayNextStep(Xe),Le.currentTimeline.setStyles([I],null,Le.errors,$),jl(this,u,Le);const Nt=Le.timelines.filter(Vt=>Vt.containsAnimation());if(Nt.length&&M.size){let Vt;for(let dn=Nt.length-1;dn>=0;dn--){const Rn=Nt[dn];if(Rn.element===s){Vt=Rn;break}}Vt&&!Vt.allowOnlyTimelineStyles()&&Vt.setStyles([M],null,Le.errors,$)}return Nt.length?Nt.map(Vt=>Vt.buildKeyframes()):[Sg(s,[],[],[],0,Xe,"",!1)]}visitTrigger(n,s){}visitState(n,s){}visitTransition(n,s){}visitAnimateChild(n,s){const u=s.subInstructions.get(s.element);if(u){const f=s.createSubContext(n.options),E=s.currentTimeline.currentTime,I=this._visitSubInstructions(u,f,f.options);E!=I&&s.transformIntoNewTimeline(I)}s.previousNode=n}visitAnimateRef(n,s){const u=s.createSubContext(n.options);u.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],s,u),this.visitReference(n.animation,u),s.transformIntoNewTimeline(u.currentTimeline.currentTime),s.previousNode=n}_applyAnimationRefDelays(n,s,u){for(const f of n){const E=f?.delay;if(E){const I="number"==typeof E?E:Ru(tf(E,f?.params??{},s.errors));u.delayNextStep(I)}}}_visitSubInstructions(n,s,u){let E=s.currentTimeline.currentTime;const I=null!=u.duration?Ru(u.duration):null,M=null!=u.delay?Ru(u.delay):null;return 0!==I&&n.forEach($=>{const ne=s.appendInstructionToTimeline($,I,M);E=Math.max(E,ne.duration+ne.delay)}),E}visitReference(n,s){s.updateOptions(n.options,!0),jl(this,n.animation,s),s.previousNode=n}visitSequence(n,s){const u=s.subContextCount;let f=s;const E=n.options;if(E&&(E.params||E.delay)&&(f=s.createSubContext(E),f.transformIntoNewTimeline(),null!=E.delay)){6==f.previousNode.type&&(f.currentTimeline.snapshotCurrentStyles(),f.previousNode=mm);const I=Ru(E.delay);f.delayNextStep(I)}n.steps.length&&(n.steps.forEach(I=>jl(this,I,f)),f.currentTimeline.applyStylesToKeyframe(),f.subContextCount>u&&f.transformIntoNewTimeline()),s.previousNode=n}visitGroup(n,s){const u=[];let f=s.currentTimeline.currentTime;const E=n.options&&n.options.delay?Ru(n.options.delay):0;n.steps.forEach(I=>{const M=s.createSubContext(n.options);E&&M.delayNextStep(E),jl(this,I,M),f=Math.max(f,M.currentTimeline.currentTime),u.push(M.currentTimeline)}),u.forEach(I=>s.currentTimeline.mergeTimelineCollectedStyles(I)),s.transformIntoNewTimeline(f),s.previousNode=n}_visitTiming(n,s){if(n.dynamic){const u=n.strValue;return Jf(s.params?tf(u,s.params,s.errors):u,s.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,s){const u=s.currentAnimateTimings=this._visitTiming(n.timings,s),f=s.currentTimeline;u.delay&&(s.incrementTime(u.delay),f.snapshotCurrentStyles());const E=n.style;5==E.type?this.visitKeyframes(E,s):(s.incrementTime(u.duration),this.visitStyle(E,s),f.applyStylesToKeyframe()),s.currentAnimateTimings=null,s.previousNode=n}visitStyle(n,s){const u=s.currentTimeline,f=s.currentAnimateTimings;!f&&u.hasCurrentStyleProperties()&&u.forwardFrame();const E=f&&f.easing||n.easing;n.isEmptyStep?u.applyEmptyStep(E):u.setStyles(n.styles,E,s.errors,s.options),s.previousNode=n}visitKeyframes(n,s){const u=s.currentAnimateTimings,f=s.currentTimeline.duration,E=u.duration,M=s.createSubContext().currentTimeline;M.easing=u.easing,n.styles.forEach($=>{M.forwardTime(($.offset||0)*E),M.setStyles($.styles,$.easing,s.errors,s.options),M.applyStylesToKeyframe()}),s.currentTimeline.mergeTimelineCollectedStyles(M),s.transformIntoNewTimeline(f+E),s.previousNode=n}visitQuery(n,s){const u=s.currentTimeline.currentTime,f=n.options||{},E=f.delay?Ru(f.delay):0;E&&(6===s.previousNode.type||0==u&&s.currentTimeline.hasCurrentStyleProperties())&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=mm);let I=u;const M=s.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!f.optional,s.errors);s.currentQueryTotal=M.length;let $=null;M.forEach((ne,Te)=>{s.currentQueryIndex=Te;const Le=s.createSubContext(n.options,ne);E&&Le.delayNextStep(E),ne===s.element&&($=Le.currentTimeline),jl(this,n.animation,Le),Le.currentTimeline.applyStylesToKeyframe(),I=Math.max(I,Le.currentTimeline.currentTime)}),s.currentQueryIndex=0,s.currentQueryTotal=0,s.transformIntoNewTimeline(I),$&&(s.currentTimeline.mergeTimelineCollectedStyles($),s.currentTimeline.snapshotCurrentStyles()),s.previousNode=n}visitStagger(n,s){const u=s.parentContext,f=s.currentTimeline,E=n.timings,I=Math.abs(E.duration),M=I*(s.currentQueryTotal-1);let $=I*s.currentQueryIndex;switch(E.duration<0?"reverse":E.easing){case"reverse":$=M-$;break;case"full":$=u.currentStaggerTime}const Te=s.currentTimeline;$&&Te.delayNextStep($);const Le=Te.currentTime;jl(this,n.animation,s),s.previousNode=n,u.currentStaggerTime=f.currentTime-Le+(f.startTime-u.currentTimeline.startTime)}}const mm={};class Ag{constructor(n,s,u,f,E,I,M,$){this._driver=n,this.element=s,this.subInstructions=u,this._enterClassName=f,this._leaveClassName=E,this.errors=I,this.timelines=M,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=mm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=$||new rp(this._driver,s,0),M.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,s){if(!n)return;const u=n;let f=this.options;null!=u.duration&&(f.duration=Ru(u.duration)),null!=u.delay&&(f.delay=Ru(u.delay));const E=u.params;if(E){let I=f.params;I||(I=this.options.params={}),Object.keys(E).forEach(M=>{(!s||!I.hasOwnProperty(M))&&(I[M]=tf(E[M],I,this.errors))})}}_copyOptions(){const n={};if(this.options){const s=this.options.params;if(s){const u=n.params={};Object.keys(s).forEach(f=>{u[f]=s[f]})}}return n}createSubContext(n=null,s,u){const f=s||this.element,E=new Ag(this._driver,f,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(f,u||0));return E.previousNode=this.previousNode,E.currentAnimateTimings=this.currentAnimateTimings,E.options=this._copyOptions(),E.updateOptions(n),E.currentQueryIndex=this.currentQueryIndex,E.currentQueryTotal=this.currentQueryTotal,E.parentContext=this,this.subContextCount++,E}transformIntoNewTimeline(n){return this.previousNode=mm,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,s,u){const f={duration:s??n.duration,delay:this.currentTimeline.currentTime+(u??0)+n.delay,easing:""},E=new Lv(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,f,n.stretchStartingKeyframe);return this.timelines.push(E),f}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,s,u,f,E,I){let M=[];if(f&&M.push(this.element),n.length>0){n=(n=n.replace(Ds,"."+this._enterClassName)).replace(tE,"."+this._leaveClassName);let ne=this._driver.query(this.element,n,1!=u);0!==u&&(ne=u<0?ne.slice(ne.length+u,ne.length):ne.slice(0,u)),M.push(...ne)}return!E&&0==M.length&&I.push(function qd(a){return new W.vHH(3014,!1)}()),M}}class rp{constructor(n,s,u,f){this._driver=n,this.element=s,this.startTime=u,this._elementTimelineStylesLookup=f,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(s),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(s,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const s=1===this._keyframes.size&&this._pendingStyles.size;this.duration||s?(this.forwardTime(this.currentTime+n),s&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,s){return this.applyStylesToKeyframe(),new rp(this._driver,n,s||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,s){this._localTimelineStyles.set(n,s),this._globalTimelineStyles.set(n,s),this._styleSummary.set(n,{time:this.currentTime,value:s})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[s,u]of this._globalTimelineStyles)this._backFill.set(s,u||fs.l3),this._currentKeyframe.set(s,fs.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,s,u,f){s&&this._previousKeyframe.set("easing",s);const E=f&&f.params||{},I=function nE(a,n){const s=new Map;let u;return a.forEach(f=>{if("*"===f){u=u||n.keys();for(let E of u)s.set(E,fs.l3)}else pd(f,s)}),s}(n,this._globalTimelineStyles);for(let[M,$]of I){const ne=tf($,E,u);this._pendingStyles.set(M,ne),this._localTimelineStyles.has(M)||this._backFill.set(M,this._globalTimelineStyles.get(M)??fs.l3),this._updateStyle(M,ne)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,s)=>{this._currentKeyframe.set(s,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,s)=>{this._currentKeyframe.has(s)||this._currentKeyframe.set(s,n)}))}snapshotCurrentStyles(){for(let[n,s]of this._localTimelineStyles)this._pendingStyles.set(n,s),this._updateStyle(n,s)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let s in this._currentKeyframe)n.push(s);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((s,u)=>{const f=this._styleSummary.get(u);(!f||s.time>f.time)&&this._updateStyle(u,s.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,s=new Set,u=1===this._keyframes.size&&0===this.duration;let f=[];this._keyframes.forEach((M,$)=>{const ne=pd(M,new Map,this._backFill);ne.forEach((Te,Le)=>{Te===fs.k1?n.add(Le):Te===fs.l3&&s.add(Le)}),u||ne.set("offset",$/this.duration),f.push(ne)});const E=n.size?tp(n.values()):[],I=s.size?tp(s.values()):[];if(u){const M=f[0],$=new Map(M);M.set("offset",0),$.set("offset",1),f=[M,$]}return Sg(this.element,f,E,I,this.duration,this.startTime,this.easing,!1)}}class Lv extends rp{constructor(n,s,u,f,E,I,M=!1){super(n,s,I.delay),this.keyframes=u,this.preStyleProps=f,this.postStyleProps=E,this._stretchStartingKeyframe=M,this.timings={duration:I.duration,delay:I.delay,easing:I.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:s,duration:u,easing:f}=this.timings;if(this._stretchStartingKeyframe&&s){const E=[],I=u+s,M=s/I,$=pd(n[0]);$.set("offset",0),E.push($);const ne=pd(n[0]);ne.set("offset",Vv(M)),E.push(ne);const Te=n.length-1;for(let Le=1;Le<=Te;Le++){let Xe=pd(n[Le]);const Nt=Xe.get("offset");Xe.set("offset",Vv((s+Nt*u)/I)),E.push(Xe)}u=I,s=0,f="",n=E}return Sg(this.element,n,this.preStyleProps,this.postStyleProps,u,s,f,!0)}}function Vv(a,n=3){const s=Math.pow(10,n-1);return Math.round(a*s)/s}class Bv{}const rE=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Uv extends Bv{normalizePropertyName(n,s){return gd(n)}normalizeStyleValue(n,s,u,f){let E="";const I=u.toString().trim();if(rE.has(s)&&0!==u&&"0"!==u)if("number"==typeof u)E="px";else{const M=u.match(/^[+-]?[\d\.]+([a-z]*)$/);M&&0==M[1].length&&f.push(function em(a,n){return new W.vHH(3005,!1)}())}return I+E}}function ip(a,n,s,u,f,E,I,M,$,ne,Te,Le,Xe){return{type:0,element:a,triggerName:n,isRemovalTransition:f,fromState:s,fromStyles:E,toState:u,toStyles:I,timelines:M,queriedElements:$,preStyleProps:ne,postStyleProps:Te,totalTime:Le,errors:Xe}}const gy={};class du{constructor(n,s,u){this._triggerName=n,this.ast=s,this._stateStyles=u}match(n,s,u,f){return function XE(a,n,s,u,f){return a.some(E=>E(n,s,u,f))}(this.ast.matchers,n,s,u,f)}buildStyles(n,s,u){let f=this._stateStyles.get("*");return void 0!==n&&(f=this._stateStyles.get(n?.toString())||f),f?f.buildStyles(s,u):new Map}build(n,s,u,f,E,I,M,$,ne,Te){const Le=[],Xe=this.ast.options&&this.ast.options.params||gy,Vt=this.buildStyles(u,M&&M.params||gy,Le),dn=$&&$.params||gy,Rn=this.buildStyles(f,dn,Le),pr=new Set,Zr=new Map,br=new Map,Qr="void"===f,sa={params:af(dn,Xe),delay:this.ast.options?.delay},Ys=Te?[]:qs(n,s,this.ast.animation,E,I,Vt,Rn,sa,ne,Le);let oa=0;if(Ys.forEach(_c=>{oa=Math.max(_c.duration+_c.delay,oa)}),Le.length)return ip(s,this._triggerName,u,f,Qr,Vt,Rn,[],[],Zr,br,oa,Le);Ys.forEach(_c=>{const Gl=_c.element,ww=Ul(Zr,Gl,new Set);_c.preStyleProps.forEach(mf=>ww.add(mf));const qy=Ul(br,Gl,new Set);_c.postStyleProps.forEach(mf=>qy.add(mf)),Gl!==s&&pr.add(Gl)});const Os=tp(pr.values());return ip(s,this._triggerName,u,f,Qr,Vt,Rn,Ys,Os,Zr,br,oa)}}function af(a,n){const s=ef(n);for(const u in a)a.hasOwnProperty(u)&&null!=a[u]&&(s[u]=a[u]);return s}class xg{constructor(n,s,u){this.styles=n,this.defaultParams=s,this.normalizer=u}buildStyles(n,s){const u=new Map,f=ef(this.defaultParams);return Object.keys(n).forEach(E=>{const I=n[E];null!==I&&(f[E]=I)}),this.styles.styles.forEach(E=>{"string"!=typeof E&&E.forEach((I,M)=>{I&&(I=tf(I,f,s));const $=this.normalizer.normalizePropertyName(M,s);I=this.normalizer.normalizeStyleValue(M,$,I,s),u.set(M,I)})}),u}}class sE{constructor(n,s,u){this.name=n,this.ast=s,this._normalizer=u,this.transitionFactories=[],this.states=new Map,s.states.forEach(f=>{this.states.set(f.name,new xg(f.style,f.options&&f.options.params||{},u))}),Mg(this.states,"true","1"),Mg(this.states,"false","0"),s.transitions.forEach(f=>{this.transitionFactories.push(new du(n,f,this.states))}),this.fallbackTransition=function jv(a,n,s){return new du(a,{type:1,animation:{type:2,steps:[],options:null},matchers:[(I,M)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,s,u,f){return this.transitionFactories.find(I=>I.match(n,s,u,f))||null}matchStyles(n,s,u){return this.fallbackTransition.buildStyles(n,s,u)}}function Mg(a,n,s){a.has(n)?a.has(s)||a.set(s,a.get(n)):a.has(s)&&a.set(n,a.get(s))}const gm=new sf;class Hv{constructor(n,s,u){this.bodyNode=n,this._driver=s,this._normalizer=u,this._animations=new Map,this._playersById=new Map,this.players=[]}register(n,s){const u=[],f=[],E=_d(this._driver,s,u,f);if(u.length)throw function hg(a){return new W.vHH(3503,!1)}();this._animations.set(n,E)}_buildPlayer(n,s,u){const f=n.element,E=mg(0,this._normalizer,0,n.keyframes,s,u);return this._driver.animate(f,E,n.duration,n.delay,n.easing,[],!0)}create(n,s,u={}){const f=[],E=this._animations.get(n);let I;const M=new Map;if(E?(I=qs(this._driver,s,E,wg,fd,new Map,new Map,u,gm,f),I.forEach(Te=>{const Le=Ul(M,Te.element,new Map);Te.postStyleProps.forEach(Xe=>Le.set(Xe,null))})):(f.push(function X_(){return new W.vHH(3300,!1)}()),I=[]),f.length)throw function Mv(a){return new W.vHH(3504,!1)}();M.forEach((Te,Le)=>{Te.forEach((Xe,Nt)=>{Te.set(Nt,this._driver.computeStyle(Le,Nt,fs.l3))})});const ne=uc(I.map(Te=>{const Le=M.get(Te.element);return this._buildPlayer(Te,new Map,Le)}));return this._playersById.set(n,ne),ne.onDestroy(()=>this.destroy(n)),this.players.push(ne),ne}destroy(n){const s=this._getPlayer(n);s.destroy(),this._playersById.delete(n);const u=this.players.indexOf(s);u>=0&&this.players.splice(u,1)}_getPlayer(n){const s=this._playersById.get(n);if(!s)throw function fg(a){return new W.vHH(3301,!1)}();return s}listen(n,s,u,f){const E=Qh(s,"","","");return im(this._getPlayer(n),u,E,f),()=>{}}command(n,s,u,f){if("register"==u)return void this.register(n,f[0]);if("create"==u)return void this.create(n,s,f[0]||{});const E=this._getPlayer(n);switch(u){case"play":E.play();break;case"pause":E.pause();break;case"reset":E.reset();break;case"restart":E.restart();break;case"finish":E.finish();break;case"init":E.init();break;case"setPosition":E.setPosition(parseFloat(f[0]));break;case"destroy":this.destroy(n)}}}const yd="ng-animate-queued",Xd="ng-animate-disabled",yy=[],vy={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vd={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zl="__ng_removed";class Og{get params(){return this.options.params}constructor(n,s=""){this.namespaceId=s;const u=n&&n.hasOwnProperty("value");if(this.value=function wy(a){return a??null}(u?n.value:n),u){const E=ef(n);delete E.value,this.options=E}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const s=n.params;if(s){const u=this.options.params;Object.keys(s).forEach(f=>{null==u[f]&&(u[f]=s[f])})}}}const cl="void",Ey=new Og(cl);class Pg{constructor(n,s,u){this.id=n,this.hostElement=s,this._engine=u,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+n,pc(s,this._hostClassName)}listen(n,s,u,f){if(!this._triggers.has(s))throw function Rv(a,n){return new W.vHH(3302,!1)}();if(null==u||0==u.length)throw function J_(a){return new W.vHH(3303,!1)}();if(!function Wv(a){return"start"==a||"done"==a}(u))throw function K0(a,n){return new W.vHH(3400,!1)}();const E=Ul(this._elementListeners,n,[]),I={name:s,phase:u,callback:f};E.push(I);const M=Ul(this._engine.statesByElement,n,new Map);return M.has(s)||(pc(n,um),pc(n,um+"-"+s),M.set(s,Ey)),()=>{this._engine.afterFlush(()=>{const $=E.indexOf(I);$>=0&&E.splice($,1),this._triggers.has(s)||M.delete(s)})}}register(n,s){return!this._triggers.has(n)&&(this._triggers.set(n,s),!0)}_getTrigger(n){const s=this._triggers.get(n);if(!s)throw function pg(a){return new W.vHH(3401,!1)}();return s}trigger(n,s,u,f=!0){const E=this._getTrigger(s),I=new Jd(this.id,s,n);let M=this._engine.statesByElement.get(n);M||(pc(n,um),pc(n,um+"-"+s),this._engine.statesByElement.set(n,M=new Map));let $=M.get(s);const ne=new Og(u,this.id);if(!(u&&u.hasOwnProperty("value"))&&$&&ne.absorbOptions($.options),M.set(s,ne),$||($=Ey),ne.value!==cl&&$.value===ne.value){if(!function qv(a,n){const s=Object.keys(a),u=Object.keys(n);if(s.length!=u.length)return!1;for(let f=0;f<s.length;f++){const E=s[f];if(!n.hasOwnProperty(E)||a[E]!==n[E])return!1}return!0}($.params,ne.params)){const dn=[],Rn=E.matchStyles($.value,$.params,dn),pr=E.matchStyles(ne.value,ne.params,dn);dn.length?this._engine.reportError(dn):this._engine.afterFlush(()=>{md(n,Rn),hc(n,pr)})}return}const Xe=Ul(this._engine.playersByElement,n,[]);Xe.forEach(dn=>{dn.namespaceId==this.id&&dn.triggerName==s&&dn.queued&&dn.destroy()});let Nt=E.matchTransition($.value,ne.value,n,ne.params),Vt=!1;if(!Nt){if(!f)return;Nt=E.fallbackTransition,Vt=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:s,transition:Nt,fromState:$,toState:ne,player:I,isFallbackTransition:Vt}),Vt||(pc(n,yd),I.onStart(()=>{hu(n,yd)})),I.onDone(()=>{let dn=this.players.indexOf(I);dn>=0&&this.players.splice(dn,1);const Rn=this._engine.playersByElement.get(n);if(Rn){let pr=Rn.indexOf(I);pr>=0&&Rn.splice(pr,1)}}),this.players.push(I),Xe.push(I),I}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(s=>s.delete(n)),this._elementListeners.forEach((s,u)=>{this._elementListeners.set(u,s.filter(f=>f.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const s=this._engine.playersByElement.get(n);s&&(s.forEach(u=>u.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,s){const u=this._engine.driver.query(n,Xh,!0);u.forEach(f=>{if(f[zl])return;const E=this._engine.fetchNamespacesByElement(f);E.size?E.forEach(I=>I.triggerLeaveAnimation(f,s,!1,!0)):this.clearElementCache(f)}),this._engine.afterFlushAnimationsDone(()=>u.forEach(f=>this.clearElementCache(f)))}triggerLeaveAnimation(n,s,u,f){const E=this._engine.statesByElement.get(n),I=new Map;if(E){const M=[];if(E.forEach(($,ne)=>{if(I.set(ne,$.value),this._triggers.has(ne)){const Te=this.trigger(n,ne,cl,f);Te&&M.push(Te)}}),M.length)return this._engine.markElementAsRemoved(this.id,n,!0,s,I),u&&uc(M).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const s=this._elementListeners.get(n),u=this._engine.statesByElement.get(n);if(s&&u){const f=new Set;s.forEach(E=>{const I=E.name;if(f.has(I))return;f.add(I);const $=this._triggers.get(I).fallbackTransition,ne=u.get(I)||Ey,Te=new Og(cl),Le=new Jd(this.id,I,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:I,transition:$,fromState:ne,toState:Te,player:Le,isFallbackTransition:!0})})}}removeNode(n,s){const u=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,s),this.triggerLeaveAnimation(n,s,!0))return;let f=!1;if(u.totalAnimations){const E=u.players.length?u.playersByQueriedElement.get(n):[];if(E&&E.length)f=!0;else{let I=n;for(;I=I.parentNode;)if(u.statesByElement.get(I)){f=!0;break}}}if(this.prepareLeaveAnimationListeners(n),f)u.markElementAsRemoved(this.id,n,!1,s);else{const E=n[zl];(!E||E===vy)&&(u.afterFlush(()=>this.clearElementCache(n)),u.destroyInnerAnimations(n),u._onRemovalComplete(n,s))}}insertNode(n,s){pc(n,this._hostClassName)}drainQueuedTransitions(n){const s=[];return this._queue.forEach(u=>{const f=u.player;if(f.destroyed)return;const E=u.element,I=this._elementListeners.get(E);I&&I.forEach(M=>{if(M.name==u.triggerName){const $=Qh(E,u.triggerName,u.fromState.value,u.toState.value);$._data=n,im(u.player,M.phase,$,M.callback)}}),f.markedForDestroy?this._engine.afterFlush(()=>{f.destroy()}):s.push(u)}),this._queue=[],s.sort((u,f)=>{const E=u.transition.ast.depCount,I=f.transition.ast.depCount;return 0==E||0==I?E-I:this._engine.driver.containsElement(u.element,f.element)?1:-1})}destroy(n){this.players.forEach(s=>s.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}elementContainsData(n){let s=!1;return this._elementListeners.has(n)&&(s=!0),s=!!this._queue.find(u=>u.element===n)||s,s}}class $v{_onRemovalComplete(n,s){this.onRemovalComplete(n,s)}constructor(n,s,u){this.bodyNode=n,this.driver=s,this._normalizer=u,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(f,E)=>{}}get queuedPlayers(){const n=[];return this._namespaceList.forEach(s=>{s.players.forEach(u=>{u.queued&&n.push(u)})}),n}createNamespace(n,s){const u=new Pg(n,s,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,s)?this._balanceNamespaceList(u,s):(this.newHostElements.set(s,u),this.collectEnterElement(s)),this._namespaceLookup[n]=u}_balanceNamespaceList(n,s){const u=this._namespaceList,f=this.namespacesByHostElement;if(u.length-1>=0){let I=!1,M=this.driver.getParentElement(s);for(;M;){const $=f.get(M);if($){const ne=u.indexOf($);u.splice(ne+1,0,n),I=!0;break}M=this.driver.getParentElement(M)}I||u.unshift(n)}else u.push(n);return f.set(s,n),n}register(n,s){let u=this._namespaceLookup[n];return u||(u=this.createNamespace(n,s)),u}registerTrigger(n,s,u){let f=this._namespaceLookup[n];f&&f.register(s,u)&&this.totalAnimations++}destroy(n,s){if(!n)return;const u=this._fetchNamespace(n);this.afterFlush(()=>{this.namespacesByHostElement.delete(u.hostElement),delete this._namespaceLookup[n];const f=this._namespaceList.indexOf(u);f>=0&&this._namespaceList.splice(f,1)}),this.afterFlushAnimationsDone(()=>u.destroy(s))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const s=new Set,u=this.statesByElement.get(n);if(u)for(let f of u.values())if(f.namespaceId){const E=this._fetchNamespace(f.namespaceId);E&&s.add(E)}return s}trigger(n,s,u,f){if(yr(s)){const E=this._fetchNamespace(n);if(E)return E.trigger(s,u,f),!0}return!1}insertNode(n,s,u,f){if(!yr(s))return;const E=s[zl];if(E&&E.setForRemoval){E.setForRemoval=!1,E.setForMove=!0;const I=this.collectedLeaveElements.indexOf(s);I>=0&&this.collectedLeaveElements.splice(I,1)}if(n){const I=this._fetchNamespace(n);I&&I.insertNode(s,u)}f&&this.collectEnterElement(s)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,s){s?this.disabledNodes.has(n)||(this.disabledNodes.add(n),pc(n,Xd)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),hu(n,Xd))}removeNode(n,s,u,f){if(yr(s)){const E=n?this._fetchNamespace(n):null;if(E?E.removeNode(s,f):this.markElementAsRemoved(n,s,!1,f),u){const I=this.namespacesByHostElement.get(s);I&&I.id!==n&&I.removeNode(s,f)}}else this._onRemovalComplete(s,f)}markElementAsRemoved(n,s,u,f,E){this.collectedLeaveElements.push(s),s[zl]={namespaceId:n,setForRemoval:f,hasAnimation:u,removedBeforeQueried:!1,previousTriggersValues:E}}listen(n,s,u,f,E){return yr(s)?this._fetchNamespace(n).listen(s,u,f,E):()=>{}}_buildInstruction(n,s,u,f,E){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,u,f,n.fromState.options,n.toState.options,s,E)}destroyInnerAnimations(n){let s=this.driver.query(n,Xh,!0);s.forEach(u=>this.destroyActiveAnimationsForElement(u)),0!=this.playersByQueriedElement.size&&(s=this.driver.query(n,wl,!0),s.forEach(u=>this.finishActiveQueriedAnimationOnElement(u)))}destroyActiveAnimationsForElement(n){const s=this.playersByElement.get(n);s&&s.forEach(u=>{u.queued?u.markedForDestroy=!0:u.destroy()})}finishActiveQueriedAnimationOnElement(n){const s=this.playersByQueriedElement.get(n);s&&s.forEach(u=>u.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return uc(this.players).onDone(()=>n());n()})}processLeaveNode(n){const s=n[zl];if(s&&s.setForRemoval){if(n[zl]=vy,s.namespaceId){this.destroyInnerAnimations(n);const u=this._fetchNamespace(s.namespaceId);u&&u.clearElementCache(n)}this._onRemovalComplete(n,s.setForRemoval)}n.classList?.contains(Xd)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(u=>{this.markElementAsDisabled(u,!1)})}flush(n=-1){let s=[];if(this.newHostElements.size&&(this.newHostElements.forEach((u,f)=>this._balanceNamespaceList(u,f)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let u=0;u<this.collectedEnterElements.length;u++)pc(this.collectedEnterElements[u],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const u=[];try{s=this._flushAnimations(u,n)}finally{for(let f=0;f<u.length;f++)u[f]()}}else for(let u=0;u<this.collectedLeaveElements.length;u++)this.processLeaveNode(this.collectedLeaveElements[u]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(u=>u()),this._flushFns=[],this._whenQuietFns.length){const u=this._whenQuietFns;this._whenQuietFns=[],s.length?uc(s).onDone(()=>{u.forEach(f=>f())}):u.forEach(f=>f())}}reportError(n){throw function q0(a){return new W.vHH(3402,!1)}()}_flushAnimations(n,s){const u=new sf,f=[],E=new Map,I=[],M=new Map,$=new Map,ne=new Map,Te=new Set;this.disabledNodes.forEach(mr=>{Te.add(mr);const xr=this.driver.query(mr,".ng-animate-queued",!0);for(let Ur=0;Ur<xr.length;Ur++)Te.add(xr[Ur])});const Le=this.bodyNode,Xe=Array.from(this.statesByElement.keys()),Nt=ku(Xe,this.collectedEnterElements),Vt=new Map;let dn=0;Nt.forEach((mr,xr)=>{const Ur=wg+dn++;Vt.set(xr,Ur),mr.forEach(rs=>pc(rs,Ur))});const Rn=[],pr=new Set,Zr=new Set;for(let mr=0;mr<this.collectedLeaveElements.length;mr++){const xr=this.collectedLeaveElements[mr],Ur=xr[zl];Ur&&Ur.setForRemoval&&(Rn.push(xr),pr.add(xr),Ur.hasAnimation?this.driver.query(xr,".ng-star-inserted",!0).forEach(rs=>pr.add(rs)):Zr.add(xr))}const br=new Map,Qr=ku(Xe,Array.from(pr));Qr.forEach((mr,xr)=>{const Ur=fd+dn++;br.set(xr,Ur),mr.forEach(rs=>pc(rs,Ur))}),n.push(()=>{Nt.forEach((mr,xr)=>{const Ur=Vt.get(xr);mr.forEach(rs=>hu(rs,Ur))}),Qr.forEach((mr,xr)=>{const Ur=br.get(xr);mr.forEach(rs=>hu(rs,Ur))}),Rn.forEach(mr=>{this.processLeaveNode(mr)})});const sa=[],Ys=[];for(let mr=this._namespaceList.length-1;mr>=0;mr--)this._namespaceList[mr].drainQueuedTransitions(s).forEach(Ur=>{const rs=Ur.player,Ha=Ur.element;if(sa.push(rs),this.collectedEnterElements.length){const bl=Ha[zl];if(bl&&bl.setForMove){if(bl.previousTriggersValues&&bl.previousTriggersValues.has(Ur.triggerName)){const Sm=bl.previousTriggersValues.get(Ur.triggerName),bd=this.statesByElement.get(Ur.element);if(bd&&bd.has(Ur.triggerName)){const R0=bd.get(Ur.triggerName);R0.value=Sm,bd.set(Ur.triggerName,R0)}}return void rs.destroy()}}const ch=!Le||!this.driver.containsElement(Le,Ha),yc=br.get(Ha),Wl=Vt.get(Ha),ws=this._buildInstruction(Ur,u,Wl,yc,ch);if(ws.errors&&ws.errors.length)return void Ys.push(ws);if(ch)return rs.onStart(()=>md(Ha,ws.fromStyles)),rs.onDestroy(()=>hc(Ha,ws.toStyles)),void f.push(rs);if(Ur.isFallbackTransition)return rs.onStart(()=>md(Ha,ws.fromStyles)),rs.onDestroy(()=>hc(Ha,ws.toStyles)),void f.push(rs);const $E=[];ws.timelines.forEach(bl=>{bl.stretchStartingKeyframe=!0,this.disabledNodes.has(bl.element)||$E.push(bl)}),ws.timelines=$E,u.append(Ha,ws.timelines),I.push({instruction:ws,player:rs,element:Ha}),ws.queriedElements.forEach(bl=>Ul(M,bl,[]).push(rs)),ws.preStyleProps.forEach((bl,Sm)=>{if(bl.size){let bd=$.get(Sm);bd||$.set(Sm,bd=new Set),bl.forEach((R0,WE)=>bd.add(WE))}}),ws.postStyleProps.forEach((bl,Sm)=>{let bd=ne.get(Sm);bd||ne.set(Sm,bd=new Set),bl.forEach((R0,WE)=>bd.add(WE))})});if(Ys.length){const mr=[];Ys.forEach(xr=>{mr.push(function nm(a,n){return new W.vHH(3505,!1)}())}),sa.forEach(xr=>xr.destroy()),this.reportError(mr)}const oa=new Map,Os=new Map;I.forEach(mr=>{const xr=mr.element;u.has(xr)&&(Os.set(xr,xr),this._beforeAnimationBuild(mr.player.namespaceId,mr.instruction,oa))}),f.forEach(mr=>{const xr=mr.element;this._getPreviousPlayers(xr,!1,mr.namespaceId,mr.triggerName,null).forEach(rs=>{Ul(oa,xr,[]).push(rs),rs.destroy()})});const _c=Rn.filter(mr=>th(mr,$,ne)),Gl=new Map;Kv(Gl,this.driver,Zr,ne,fs.l3).forEach(mr=>{th(mr,$,ne)&&_c.push(mr)});const qy=new Map;Nt.forEach((mr,xr)=>{Kv(qy,this.driver,new Set(mr),$,fs.k1)}),_c.forEach(mr=>{const xr=Gl.get(mr),Ur=qy.get(mr);Gl.set(mr,new Map([...Array.from(xr?.entries()??[]),...Array.from(Ur?.entries()??[])]))});const mf=[],HE=[],zE={};I.forEach(mr=>{const{element:xr,player:Ur,instruction:rs}=mr;if(u.has(xr)){if(Te.has(xr))return Ur.onDestroy(()=>hc(xr,rs.toStyles)),Ur.disabled=!0,Ur.overrideTotalTime(rs.totalTime),void f.push(Ur);let Ha=zE;if(Os.size>1){let yc=xr;const Wl=[];for(;yc=yc.parentNode;){const ws=Os.get(yc);if(ws){Ha=ws;break}Wl.push(yc)}Wl.forEach(ws=>Os.set(ws,Ha))}const ch=this._buildAnimation(Ur.namespaceId,rs,oa,E,qy,Gl);if(Ur.setRealPlayer(ch),Ha===zE)mf.push(Ur);else{const yc=this.playersByElement.get(Ha);yc&&yc.length&&(Ur.parentPlayer=uc(yc)),f.push(Ur)}}else md(xr,rs.fromStyles),Ur.onDestroy(()=>hc(xr,rs.toStyles)),HE.push(Ur),Te.has(xr)&&f.push(Ur)}),HE.forEach(mr=>{const xr=E.get(mr.element);if(xr&&xr.length){const Ur=uc(xr);mr.setRealPlayer(Ur)}}),f.forEach(mr=>{mr.parentPlayer?mr.syncPlayerEvents(mr.parentPlayer):mr.destroy()});for(let mr=0;mr<Rn.length;mr++){const xr=Rn[mr],Ur=xr[zl];if(hu(xr,fd),Ur&&Ur.hasAnimation)continue;let rs=[];if(M.size){let ch=M.get(xr);ch&&ch.length&&rs.push(...ch);let yc=this.driver.query(xr,wl,!0);for(let Wl=0;Wl<yc.length;Wl++){let ws=M.get(yc[Wl]);ws&&ws.length&&rs.push(...ws)}}const Ha=rs.filter(ch=>!ch.destroyed);Ha.length?eh(this,xr,Ha):this.processLeaveNode(xr)}return Rn.length=0,mf.forEach(mr=>{this.players.push(mr),mr.onDone(()=>{mr.destroy();const xr=this.players.indexOf(mr);this.players.splice(xr,1)}),mr.play()}),mf}elementContainsData(n,s){let u=!1;const f=s[zl];return f&&f.setForRemoval&&(u=!0),this.playersByElement.has(s)&&(u=!0),this.playersByQueriedElement.has(s)&&(u=!0),this.statesByElement.has(s)&&(u=!0),this._fetchNamespace(n).elementContainsData(s)||u}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,s,u,f,E){let I=[];if(s){const M=this.playersByQueriedElement.get(n);M&&(I=M)}else{const M=this.playersByElement.get(n);if(M){const $=!E||E==cl;M.forEach(ne=>{ne.queued||!$&&ne.triggerName!=f||I.push(ne)})}}return(u||f)&&(I=I.filter(M=>!(u&&u!=M.namespaceId||f&&f!=M.triggerName))),I}_beforeAnimationBuild(n,s,u){const E=s.element,I=s.isRemovalTransition?void 0:n,M=s.isRemovalTransition?void 0:s.triggerName;for(const $ of s.timelines){const ne=$.element,Te=ne!==E,Le=Ul(u,ne,[]);this._getPreviousPlayers(ne,Te,I,M,s.toState).forEach(Nt=>{const Vt=Nt.getRealPlayer();Vt.beforeDestroy&&Vt.beforeDestroy(),Nt.destroy(),Le.push(Nt)})}md(E,s.fromStyles)}_buildAnimation(n,s,u,f,E,I){const M=s.triggerName,$=s.element,ne=[],Te=new Set,Le=new Set,Xe=s.timelines.map(Vt=>{const dn=Vt.element;Te.add(dn);const Rn=dn[zl];if(Rn&&Rn.removedBeforeQueried)return new fs.ZN(Vt.duration,Vt.delay);const pr=dn!==$,Zr=function ps(a){const n=[];return ym(a,n),n}((u.get(dn)||yy).map(oa=>oa.getRealPlayer())).filter(oa=>!!oa.element&&oa.element===dn),br=E.get(dn),Qr=I.get(dn),sa=mg(0,this._normalizer,0,Vt.keyframes,br,Qr),Ys=this._buildPlayer(Vt,sa,Zr);if(Vt.subTimeline&&f&&Le.add(dn),pr){const oa=new Jd(n,M,dn);oa.setRealPlayer(Ys),ne.push(oa)}return Ys});ne.forEach(Vt=>{Ul(this.playersByQueriedElement,Vt.element,[]).push(Vt),Vt.onDone(()=>function Gv(a,n,s){let u=a.get(n);if(u){if(u.length){const f=u.indexOf(s);u.splice(f,1)}0==u.length&&a.delete(n)}return u}(this.playersByQueriedElement,Vt.element,Vt))}),Te.forEach(Vt=>pc(Vt,Qf));const Nt=uc(Xe);return Nt.onDestroy(()=>{Te.forEach(Vt=>hu(Vt,Qf)),hc($,s.toStyles)}),Le.forEach(Vt=>{Ul(f,Vt,[]).push(Nt)}),Nt}_buildPlayer(n,s,u){return s.length>0?this.driver.animate(n.element,s,n.duration,n.delay,n.easing,u):new fs.ZN(n.duration,n.delay)}}class Jd{constructor(n,s,u){this.namespaceId=n,this.triggerName=s,this.element=u,this._player=new fs.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((s,u)=>{s.forEach(f=>im(n,u,void 0,f))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const s=this._player;s.triggerCallback&&n.onStart(()=>s.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,s){Ul(this._queuedCallbacks,n,[]).push(s)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const s=this._player;s.triggerCallback&&s.triggerCallback(n)}}function yr(a){return a&&1===a.nodeType}function sp(a,n){const s=a.style.display;return a.style.display=n??"none",s}function Kv(a,n,s,u,f){const E=[];s.forEach($=>E.push(sp($)));const I=[];u.forEach(($,ne)=>{const Te=new Map;$.forEach(Le=>{const Xe=n.computeStyle(ne,Le,f);Te.set(Le,Xe),(!Xe||0==Xe.length)&&(ne[zl]=vd,I.push(ne))}),a.set(ne,Te)});let M=0;return s.forEach($=>sp($,E[M++])),I}function ku(a,n){const s=new Map;if(a.forEach(M=>s.set(M,[])),0==n.length)return s;const u=1,f=new Set(n),E=new Map;function I(M){if(!M)return u;let $=E.get(M);if($)return $;const ne=M.parentNode;return $=s.has(ne)?ne:f.has(ne)?u:I(ne),E.set(M,$),$}return n.forEach(M=>{const $=I(M);$!==u&&s.get($).push(M)}),s}function pc(a,n){a.classList?.add(n)}function hu(a,n){a.classList?.remove(n)}function eh(a,n,s){uc(s).onDone(()=>a.processLeaveNode(n))}function ym(a,n){for(let s=0;s<a.length;s++){const u=a[s];u instanceof fs.ZE?ym(u.players,n):n.push(u)}}function th(a,n,s){const u=s.get(a);if(!u)return!1;let f=n.get(a);return f?u.forEach(E=>f.add(E)):n.set(a,u),s.delete(a),!0}class by{constructor(n,s,u){this.bodyNode=n,this._driver=s,this._normalizer=u,this._triggerCache={},this.onRemovalComplete=(f,E)=>{},this._transitionEngine=new $v(n,s,u),this._timelineEngine=new Hv(n,s,u),this._transitionEngine.onRemovalComplete=(f,E)=>this.onRemovalComplete(f,E)}registerTrigger(n,s,u,f,E){const I=n+"-"+f;let M=this._triggerCache[I];if(!M){const $=[],ne=[],Te=_d(this._driver,E,$,ne);if($.length)throw function dg(a,n){return new W.vHH(3404,!1)}();M=function iE(a,n,s){return new sE(a,n,s)}(f,Te,this._normalizer),this._triggerCache[I]=M}this._transitionEngine.registerTrigger(s,f,M)}register(n,s){this._transitionEngine.register(n,s)}destroy(n,s){this._transitionEngine.destroy(n,s)}onInsert(n,s,u,f){this._transitionEngine.insertNode(n,s,u,f)}onRemove(n,s,u,f){this._transitionEngine.removeNode(n,s,f||!1,u)}disableAnimations(n,s){this._transitionEngine.markElementAsDisabled(n,s)}process(n,s,u,f){if("@"==u.charAt(0)){const[E,I]=sm(u);this._timelineEngine.command(E,s,I,f)}else this._transitionEngine.trigger(n,s,u,f)}listen(n,s,u,f,E){if("@"==u.charAt(0)){const[I,M]=sm(u);return this._timelineEngine.listen(I,s,M,E)}return this._transitionEngine.listen(n,s,u,f,E)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let kg=(()=>{class a{constructor(s,u,f){this._element=s,this._startStyles=u,this._endStyles=f,this._state=0;let E=a.initialStylesByElement.get(s);E||a.initialStylesByElement.set(s,E=new Map),this._initialStyles=E}start(){this._state<1&&(this._startStyles&&hc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(hc(this._element,this._initialStyles),this._endStyles&&(hc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(a.initialStylesByElement.delete(this._element),this._startStyles&&(md(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(md(this._element,this._endStyles),this._endStyles=null),hc(this._element,this._initialStyles),this._state=3)}}return a.initialStylesByElement=new WeakMap,a})();function Ng(a){let n=null;return a.forEach((s,u)=>{(function vm(a){return"display"===a||"position"===a})(u)&&(n=n||new Map,n.set(u,s))}),n}class Yv{constructor(n,s,u,f){this.element=n,this.keyframes=s,this.options=u,this._specialStyles=f,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=u.duration,this._delay=u.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const s=[];return n.forEach(u=>{s.push(Object.fromEntries(u))}),s}_triggerWebAnimation(n,s,u){return n.animate(this._convertKeyframesToObject(s),u)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((u,f)=>{"offset"!==f&&n.set(f,this._finished?u:cy(this.element,f))}),this.currentSnapshot=n}triggerCallback(n){const s="start"===n?this._onStartFns:this._onDoneFns;s.forEach(u=>u()),s.length=0}}class aE{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}matchesElement(n,s){return!1}containsElement(n,s){return _g(n,s)}getParentElement(n){return lm(n)}query(n,s,u){return sy(n,s,u)}computeStyle(n,s,u){return window.getComputedStyle(n)[s]}animate(n,s,u,f,E,I=[]){const $={duration:u,delay:f,fill:0==f?"both":"forwards"};E&&($.easing=E);const ne=new Map,Te=I.filter(Nt=>Nt instanceof Yv);(function Q0(a,n){return 0===a||0===n})(u,f)&&Te.forEach(Nt=>{Nt.currentSnapshot.forEach((Vt,dn)=>ne.set(dn,Vt))});let Le=function ep(a){return a.length?a[0]instanceof Map?a:a.map(n=>Pv(n)):[]}(s).map(Nt=>pd(Nt));Le=function X0(a,n,s){if(s.size&&n.length){let u=n[0],f=[];if(s.forEach((E,I)=>{u.has(I)||f.push(I),u.set(I,E)}),f.length)for(let E=1;E<n.length;E++){let I=n[E];f.forEach(M=>I.set(M,cy(a,M)))}}return n}(n,Le,ne);const Xe=function oE(a,n){let s=null,u=null;return Array.isArray(n)&&n.length?(s=Ng(n[0]),n.length>1&&(u=Ng(n[n.length-1]))):n instanceof Map&&(s=Ng(n)),s||u?new kg(a,s,u):null}(n,Le);return new Yv(n,Le,$,Xe)}}var Em=j(6895);let wm=(()=>{class a extends fs._j{constructor(s,u){super(),this._nextAnimationId=0,this._renderer=s.createRenderer(u.body,{id:"0",encapsulation:W.ifc.None,styles:[],data:{animation:[]}})}build(s){const u=this._nextAnimationId.toString();this._nextAnimationId++;const f=Array.isArray(s)?(0,fs.vP)(s):s;return Zv(this._renderer,null,u,"register",[f]),new lE(u,this._renderer)}}return a.\u0275fac=function(s){return new(s||a)(W.LFG(W.FYo),W.LFG(Em.K0))},a.\u0275prov=W.Yz7({token:a,factory:a.\u0275fac}),a})();class lE extends fs.LC{constructor(n,s){super(),this._id=n,this._renderer=s}create(n,s){return new Fg(this._id,n,s||{},this._renderer)}}class Fg{constructor(n,s,u,f){this.id=n,this.element=s,this._renderer=f,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",u)}_listen(n,s){return this._renderer.listen(this.element,`@@${this.id}:${n}`,s)}_command(n,...s){return Zv(this._renderer,this.element,this.id,n,s)}onDone(n){this._listen("done",n)}onStart(n){this._listen("start",n)}onDestroy(n){this._listen("destroy",n)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(n){this._command("setPosition",n)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Zv(a,n,s,u,f){return a.setProperty(n,`@@${s}:${u}`,f)}const Lg="@.disabled";let Cy=(()=>{class a{constructor(s,u,f){this.delegate=s,this.engine=u,this._zone=f,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),u.onRemovalComplete=(E,I)=>{const M=I?.parentNode(E);M&&I.removeChild(M,E)}}createRenderer(s,u){const E=this.delegate.createRenderer(s,u);if(!(s&&u&&u.data&&u.data.animation)){let Te=this._rendererCache.get(E);return Te||(Te=new Vg("",E,this.engine,()=>this._rendererCache.delete(E)),this._rendererCache.set(E,Te)),Te}const I=u.id,M=u.id+"-"+this._currentId;this._currentId++,this.engine.register(M,s);const $=Te=>{Array.isArray(Te)?Te.forEach($):this.engine.registerTrigger(I,M,s,Te.name,Te)};return u.data.animation.forEach($),new Qv(this,M,E,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(s,u,f){s>=0&&s<this._microtaskId?this._zone.run(()=>u(f)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(E=>{const[I,M]=E;I(M)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([u,f]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return a.\u0275fac=function(s){return new(s||a)(W.LFG(W.FYo),W.LFG(by),W.LFG(W.R0b))},a.\u0275prov=W.Yz7({token:a,factory:a.\u0275fac}),a})();class Vg{constructor(n,s,u,f){this.namespaceId=n,this.delegate=s,this.engine=u,this._onDestroy=f,this.destroyNode=this.delegate.destroyNode?E=>s.destroyNode(E):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(n,s){return this.delegate.createElement(n,s)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,s){this.delegate.appendChild(n,s),this.engine.onInsert(this.namespaceId,s,n,!1)}insertBefore(n,s,u,f=!0){this.delegate.insertBefore(n,s,u),this.engine.onInsert(this.namespaceId,s,n,f)}removeChild(n,s,u){this.engine.onRemove(this.namespaceId,s,this.delegate,u)}selectRootElement(n,s){return this.delegate.selectRootElement(n,s)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,s,u,f){this.delegate.setAttribute(n,s,u,f)}removeAttribute(n,s,u){this.delegate.removeAttribute(n,s,u)}addClass(n,s){this.delegate.addClass(n,s)}removeClass(n,s){this.delegate.removeClass(n,s)}setStyle(n,s,u,f){this.delegate.setStyle(n,s,u,f)}removeStyle(n,s,u){this.delegate.removeStyle(n,s,u)}setProperty(n,s,u){"@"==s.charAt(0)&&s==Lg?this.disableAnimations(n,!!u):this.delegate.setProperty(n,s,u)}setValue(n,s){this.delegate.setValue(n,s)}listen(n,s,u){return this.delegate.listen(n,s,u)}disableAnimations(n,s){this.engine.disableAnimations(n,s)}}class Qv extends Vg{constructor(n,s,u,f,E){super(s,u,f,E),this.factory=n,this.namespaceId=s}setProperty(n,s,u){"@"==s.charAt(0)?"."==s.charAt(1)&&s==Lg?this.disableAnimations(n,u=void 0===u||!!u):this.engine.process(this.namespaceId,n,s.slice(1),u):this.delegate.setProperty(n,s,u)}listen(n,s,u){if("@"==s.charAt(0)){const f=function op(a){switch(a){case"body":return document.body;case"document":return document;case"window":return window;default:return a}}(n);let E=s.slice(1),I="";return"@"!=E.charAt(0)&&([E,I]=function ap(a){const n=a.indexOf(".");return[a.substring(0,n),a.slice(n+1)]}(E)),this.engine.listen(this.namespaceId,f,E,I,M=>{this.factory.scheduleListenerCallback(M._data||-1,u,M)})}return this.delegate.listen(n,s,u)}}const Xv=[{provide:fs._j,useClass:wm},{provide:Bv,useFactory:function Bg(){return new Uv}},{provide:by,useClass:(()=>{class a extends by{constructor(s,u,f,E){super(s.body,u,f)}ngOnDestroy(){this.flush()}}return a.\u0275fac=function(s){return new(s||a)(W.LFG(Em.K0),W.LFG(yg),W.LFG(Bv),W.LFG(W.z2F))},a.\u0275prov=W.Yz7({token:a,factory:a.\u0275fac}),a})()},{provide:W.FYo,useFactory:function cE(a,n,s){return new Cy(a,n,s)},deps:[_.se,by,W.R0b]}],Dy=[{provide:yg,useFactory:()=>new aE},{provide:W.QbO,useValue:"BrowserAnimations"},...Xv],Sy=[{provide:yg,useClass:Zf},{provide:W.QbO,useValue:"NoopAnimations"},...Xv];let JE=(()=>{class a{static withConfig(s){return{ngModule:a,providers:s.disableAnimations?Sy:Dy}}}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=W.oAB({type:a}),a.\u0275inj=W.cJS({providers:Dy,imports:[_.b2]}),a})();function rh(a){return(rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(a)}function uE(a,n){for(var s=0;s<n.length;s++){var u=n[s];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Jv(a,n,s){return n in a?Object.defineProperty(a,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[n]=s,a}function Yr(a){for(var n=1;n<arguments.length;n++){var s=null!=arguments[n]?arguments[n]:{},u=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(u=u.concat(Object.getOwnPropertySymbols(s).filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable}))),u.forEach(function(f){Jv(a,f,s[f])})}return a}function Ty(a,n){return function bm(a){if(Array.isArray(a))return a}(a)||function t0(a,n){var s=[],u=!0,f=!1,E=void 0;try{for(var M,I=a[Symbol.iterator]();!(u=(M=I.next()).done)&&(s.push(M.value),!n||s.length!==n);u=!0);}catch($){f=!0,E=$}finally{try{!u&&null!=I.return&&I.return()}finally{if(f)throw E}}return s}(a,n)||function fE(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ug={},xy={};try{typeof window<"u"&&(Ug=window),typeof document<"u"&&(xy=document),typeof MutationObserver<"u"&&MutationObserver,typeof performance<"u"&&performance}catch{}var r0=(Ug.navigator||{}).userAgent,My=void 0===r0?"":r0,cp=Ug,To=xy,Nu=!!To.documentElement&&!!To.head&&"function"==typeof To.addEventListener&&"function"==typeof To.createElement,Fu=(~My.indexOf("MSIE")||My.indexOf("Trident/"),"___FONT_AWESOME___"),o0="fa",gE="svg-inline--fa",d0=[1,2,3,4,5,6,7,8,9,10],Oy=d0.concat([11,12,13,14,15,16,17,18,19,20]),sh={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Gg=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",sh.GROUP,sh.SWAP_OPACITY,sh.PRIMARY,sh.SECONDARY].concat(d0.map(function(a){return"".concat(a,"x")})).concat(Oy.map(function(a){return"w-".concat(a)})),cp.FontAwesomeConfig||{});To&&"function"==typeof To.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(a){var n=Ty(a,2),u=n[1],f=function Ny(a){return""===a||"false"!==a&&("true"===a||a)}(function ky(a){var n=To.querySelector("script["+a+"]");if(n)return n.getAttribute(a)}(n[0]));null!=f&&(Gg[u]=f)});var Ly=Yr({},{familyPrefix:o0,replacementClass:gE,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Gg);Ly.autoReplaceSvg||(Ly.observeMutations=!1);var li=Yr({},Ly);cp.FontAwesomeConfig=li;var Hc=cp||{};Hc[Fu]||(Hc[Fu]={}),Hc[Fu].styles||(Hc[Fu].styles={}),Hc[Fu].hooks||(Hc[Fu].hooks={}),Hc[Fu].shims||(Hc[Fu].shims=[]);var ja=Hc[Fu],$l=[];Nu&&((To.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(To.readyState)||To.addEventListener("DOMContentLoaded",function a(){To.removeEventListener("DOMContentLoaded",a),$l.map(function(n){return n()})}));var Lu,pp="pending",df="settled",Ko="fulfilled",Wg="rejected",Im=function(){},hf=typeof global<"u"&&typeof global.process<"u"&&"function"==typeof global.process.emit,oh=typeof setImmediate>"u"?setTimeout:setImmediate,Ed=[];function f0(){for(var a=0;a<Ed.length;a++)Ed[a][0](Ed[a][1]);Ed=[],Lu=!1}function Dm(a,n){Ed.push([a,n]),Lu||(Lu=!0,oh(f0,0))}function wd(a){var n=a.owner,s=n._state,u=n._data,f=a[s],E=a.then;if("function"==typeof f){s=Ko;try{u=f(u)}catch(I){ff(E,I)}}m0(E,u)||(s===Ko&&Vy(E,u),s===Wg&&ff(E,u))}function m0(a,n){var s;try{if(a===n)throw new TypeError("A promises callback cannot return that same promise.");if(n&&("function"==typeof n||"object"===rh(n))){var u=n.then;if("function"==typeof u)return u.call(n,function(f){s||(s=!0,n===f?g0(a,f):Vy(a,f))},function(f){s||(s=!0,ff(a,f))}),!0}}catch(f){return s||ff(a,f),!0}return!1}function Vy(a,n){(a===n||!m0(a,n))&&g0(a,n)}function g0(a,n){a._state===pp&&(a._state=df,a._data=n,Dm(Kg,a))}function ff(a,n){a._state===pp&&(a._state=df,a._data=n,Dm(qg,a))}function bE(a){a._then=a._then.forEach(wd)}function Kg(a){a._state=Ko,bE(a)}function qg(a){a._state=Wg,bE(a),!a._handled&&hf&&global.process.emit("unhandledRejection",a._data,a)}function _0(a){global.process.emit("rejectionHandled",a)}function zc(a){if("function"!=typeof a)throw new TypeError("Promise resolver "+a+" is not a function");if(!(this instanceof zc))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function p0(a,n){function u(f){ff(n,f)}try{a(function s(f){Vy(n,f)},u)}catch(f){u(f)}}(a,this)}zc.prototype={constructor:zc,_state:pp,_then:null,_data:void 0,_handled:!1,then:function(n,s){var u={owner:this,then:new this.constructor(Im),fulfilled:n,rejected:s};return(s||n)&&!this._handled&&(this._handled=!0,this._state===Wg&&hf&&Dm(_0,this)),this._state===Ko||this._state===Wg?Dm(wd,u):this._then.push(u),u.then},catch:function(n){return this.then(null,n)}},zc.all=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to Promise.all().");return new zc(function(n,s){var u=[],f=0;function E($){return f++,function(ne){u[$]=ne,--f||n(u)}}for(var M,I=0;I<a.length;I++)(M=a[I])&&"function"==typeof M.then?M.then(E(I),s):u[I]=M;f||n(u)})},zc.race=function(a){if(!Array.isArray(a))throw new TypeError("You must pass an array to Promise.race().");return new zc(function(n,s){for(var f,u=0;u<a.length;u++)(f=a[u])&&"function"==typeof f.then?f.then(n,s):n(f)})},zc.resolve=function(a){return a&&"object"===rh(a)&&a.constructor===zc?a:new zc(function(n){n(a)})},zc.reject=function(a){return new zc(function(n,s){s(a)})};var Vs=function(n,s,u,f){var $,ne,Te,E=Object.keys(n),I=E.length,M=void 0!==f?function(n,s){return function(u,f,E,I){return n.call(s,u,f,E,I)}}(s,f):s;for(void 0===u?($=1,Te=n[E[0]]):($=0,Te=u);$<I;$++)Te=M(Te,n[ne=E[$]],ne,n);return Te};function Es(a,n){var u=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,f=void 0!==u&&u,E=Object.keys(n).reduce(function(I,M){var $=n[M];return $.icon?I[$.iconName]=$.icon:I[M]=$,I},{});"function"!=typeof ja.hooks.addPack||f?ja.styles[a]=Yr({},ja.styles[a]||{},E):ja.hooks.addPack(a,E),"fas"===a&&Es("fa",n)}var qo=ja.styles,Vu=ja.shims,SE=function(){var n=function(f){return Vs(qo,function(E,I,M){return E[M]=Vs(I,f,{}),E},{})};n(function(u,f,E){return f[3]&&(u[f[3]]=E),u}),n(function(u,f,E){var I=f[2];return u[E]=E,I.forEach(function(M){u[M]=E}),u});var s="far"in qo;Vs(Vu,function(u,f){var I=f[1];return"far"===I&&!s&&(I="fas"),u[f[0]]={prefix:I,iconName:f[2]},u},{})};function Qg(a){this.name="MissingIcon",this.message=a||"Icon unavailable",this.stack=(new Error).stack}SE(),(Qg.prototype=Object.create(Error.prototype)).constructor=Qg;var Xg={fill:"currentColor"},Jg={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},Wy=(Yr({},Xg,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),Yr({},Jg,{attributeName:"opacity"}));Yr({},Xg,{cx:"256",cy:"364",r:"28"}),Yr({},Jg,{attributeName:"r",values:"28;14;28;28;14;28;"}),Yr({},Wy,{values:"1;0;1;1;0;1;"}),Yr({},Xg,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),Yr({},Wy,{values:"1;0;0;0;0;1;"}),Yr({},Xg,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),Yr({},Wy,{values:"0;0;1;1;0;0;"});new(function(){function a(){(function cf(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")})(this,a),this.definitions={}}return function dE(a,n,s){n&&uE(a.prototype,n),s&&uE(a,s)}(a,[{key:"add",value:function(){for(var s=this,u=arguments.length,f=new Array(u),E=0;E<u;E++)f[E]=arguments[E];var I=f.reduce(this._pullDefinitions,{});Object.keys(I).forEach(function(M){s.definitions[M]=Yr({},s.definitions[M]||{},I[M]),Es(M,I[M]),SE()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(s,u){var f=u.prefix&&u.iconName&&u.icon?{0:u}:u;return Object.keys(f).map(function(E){var I=f[E],M=I.prefix,$=I.iconName,ne=I.icon;s[M]||(s[M]={}),s[M][$]=ne}),s}}]),a}());let yw=(()=>{class a{}return a.\u0275fac=function(s){return new(s||a)},a.\u0275mod=W.oAB({type:a}),a.\u0275inj=W.cJS({}),a})();var M0=j(4006),vw=j(529),Ew=j(2478),sb=j(7676);let jE=(()=>{class a{static#e=this.\u0275fac=function(u){return new(u||a)};static#t=this.\u0275mod=W.oAB({type:a,bootstrap:[qe]});static#n=this.\u0275inj=W.cJS({imports:[_.b2,Ft,JE,yw,vw.JF,M0.u5,ze.hO.initializeApp(Se_firebase),Ae.ww,dl.yb,fa,qE,Ew.LD,sb.lN]})}return a})();_.q6().bootstrapModule(jE).catch(a=>console.error(a))},9751:(gn,at,j)=>{j.d(at,{y:()=>Ge});var _=j(930),L=j(727),W=j(8822),Fe=j(9635),Ne=j(2416),Ae=j(576),$e=j(2806);let Ge=(()=>{class ke{constructor(ut){ut&&(this._subscribe=ut)}lift(ut){const Ht=new ke;return Ht.source=this,Ht.operator=ut,Ht}subscribe(ut,Ht,Kt){const pt=function De(ke){return ke&&ke instanceof _.Lv||function Ie(ke){return ke&&(0,Ae.m)(ke.next)&&(0,Ae.m)(ke.error)&&(0,Ae.m)(ke.complete)}(ke)&&(0,L.Nn)(ke)}(ut)?ut:new _.Hp(ut,Ht,Kt);return(0,$e.x)(()=>{const{operator:It,source:Oe}=this;pt.add(It?It.call(pt,Oe):Oe?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(ut){try{return this._subscribe(ut)}catch(Ht){ut.error(Ht)}}forEach(ut,Ht){return new(Ht=Ve(Ht))((Kt,pt)=>{const It=new _.Hp({next:Oe=>{try{ut(Oe)}catch(Ft){pt(Ft),It.unsubscribe()}},error:pt,complete:Kt});this.subscribe(It)})}_subscribe(ut){var Ht;return null===(Ht=this.source)||void 0===Ht?void 0:Ht.subscribe(ut)}[W.L](){return this}pipe(...ut){return(0,Fe.U)(ut)(this)}toPromise(ut){return new(ut=Ve(ut))((Ht,Kt)=>{let pt;this.subscribe(It=>pt=It,It=>Kt(It),()=>Ht(pt))})}}return ke.create=Tt=>new ke(Tt),ke})();function Ve(ke){var Tt;return null!==(Tt=ke??Ne.v.Promise)&&void 0!==Tt?Tt:Promise}},7579:(gn,at,j)=>{j.d(at,{x:()=>$e});var _=j(9751),L=j(727);const Fe=(0,j(3888).d)(Ve=>function(){Ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=j(8737),Ae=j(2806);let $e=(()=>{class Ve extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(De){const ke=new Ge(this,this);return ke.operator=De,ke}_throwIfClosed(){if(this.closed)throw new Fe}next(De){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ke of this.currentObservers)ke.next(De)}})}error(De){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=De;const{observers:ke}=this;for(;ke.length;)ke.shift().error(De)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:De}=this;for(;De.length;)De.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var De;return(null===(De=this.observers)||void 0===De?void 0:De.length)>0}_trySubscribe(De){return this._throwIfClosed(),super._trySubscribe(De)}_subscribe(De){return this._throwIfClosed(),this._checkFinalizedStatuses(De),this._innerSubscribe(De)}_innerSubscribe(De){const{hasError:ke,isStopped:Tt,observers:ut}=this;return ke||Tt?L.Lc:(this.currentObservers=null,ut.push(De),new L.w0(()=>{this.currentObservers=null,(0,Ne.P)(ut,De)}))}_checkFinalizedStatuses(De){const{hasError:ke,thrownError:Tt,isStopped:ut}=this;ke?De.error(Tt):ut&&De.complete()}asObservable(){const De=new _.y;return De.source=this,De}}return Ve.create=(Ie,De)=>new Ge(Ie,De),Ve})();class Ge extends $e{constructor(Ie,De){super(),this.destination=Ie,this.source=De}next(Ie){var De,ke;null===(ke=null===(De=this.destination)||void 0===De?void 0:De.next)||void 0===ke||ke.call(De,Ie)}error(Ie){var De,ke;null===(ke=null===(De=this.destination)||void 0===De?void 0:De.error)||void 0===ke||ke.call(De,Ie)}complete(){var Ie,De;null===(De=null===(Ie=this.destination)||void 0===Ie?void 0:Ie.complete)||void 0===De||De.call(Ie)}_subscribe(Ie){var De,ke;return null!==(ke=null===(De=this.source)||void 0===De?void 0:De.subscribe(Ie))&&void 0!==ke?ke:L.Lc}}},930:(gn,at,j)=>{j.d(at,{Hp:()=>Kt,Lv:()=>ke});var _=j(576),L=j(727),W=j(2416),Fe=j(7849),Ne=j(5032);const Ae=Ve("C",void 0,void 0);function Ve(qe,Se,ze){return{kind:qe,value:Se,error:ze}}var Ie=j(3410),De=j(2806);class ke extends L.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,L.Nn)(Se)&&Se.add(this)):this.destination=Ft}static create(Se,ze,Bt){return new Kt(Se,ze,Bt)}next(Se){this.isStopped?Oe(function Ge(qe){return Ve("N",qe,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Oe(function $e(qe){return Ve("E",void 0,qe)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Oe(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tt=Function.prototype.bind;function ut(qe,Se){return Tt.call(qe,Se)}class Ht{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:ze}=this;if(ze.next)try{ze.next(Se)}catch(Bt){pt(Bt)}}error(Se){const{partialObserver:ze}=this;if(ze.error)try{ze.error(Se)}catch(Bt){pt(Bt)}else pt(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(ze){pt(ze)}}}class Kt extends ke{constructor(Se,ze,Bt){let Ot;if(super(),(0,_.m)(Se)||!Se)Ot={next:Se??void 0,error:ze??void 0,complete:Bt??void 0};else{let nt;this&&W.v.useDeprecatedNextContext?(nt=Object.create(Se),nt.unsubscribe=()=>this.unsubscribe(),Ot={next:Se.next&&ut(Se.next,nt),error:Se.error&&ut(Se.error,nt),complete:Se.complete&&ut(Se.complete,nt)}):Ot=Se}this.destination=new Ht(Ot)}}function pt(qe){W.v.useDeprecatedSynchronousErrorHandling?(0,De.O)(qe):(0,Fe.h)(qe)}function Oe(qe,Se){const{onStoppedNotification:ze}=W.v;ze&&Ie.z.setTimeout(()=>ze(qe,Se))}const Ft={closed:!0,next:Ne.Z,error:function It(qe){throw qe},complete:Ne.Z}},727:(gn,at,j)=>{j.d(at,{Lc:()=>Ae,w0:()=>Ne,Nn:()=>$e});var _=j(576);const W=(0,j(3888).d)(Ve=>function(De){Ve(this),this.message=De?`${De.length} errors occurred during unsubscription:\n${De.map((ke,Tt)=>`${Tt+1}) ${ke.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=De});var Fe=j(8737);class Ne{constructor(Ie){this.initialTeardown=Ie,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ie;if(!this.closed){this.closed=!0;const{_parentage:De}=this;if(De)if(this._parentage=null,Array.isArray(De))for(const ut of De)ut.remove(this);else De.remove(this);const{initialTeardown:ke}=this;if((0,_.m)(ke))try{ke()}catch(ut){Ie=ut instanceof W?ut.errors:[ut]}const{_finalizers:Tt}=this;if(Tt){this._finalizers=null;for(const ut of Tt)try{Ge(ut)}catch(Ht){Ie=Ie??[],Ht instanceof W?Ie=[...Ie,...Ht.errors]:Ie.push(Ht)}}if(Ie)throw new W(Ie)}}add(Ie){var De;if(Ie&&Ie!==this)if(this.closed)Ge(Ie);else{if(Ie instanceof Ne){if(Ie.closed||Ie._hasParent(this))return;Ie._addParent(this)}(this._finalizers=null!==(De=this._finalizers)&&void 0!==De?De:[]).push(Ie)}}_hasParent(Ie){const{_parentage:De}=this;return De===Ie||Array.isArray(De)&&De.includes(Ie)}_addParent(Ie){const{_parentage:De}=this;this._parentage=Array.isArray(De)?(De.push(Ie),De):De?[De,Ie]:Ie}_removeParent(Ie){const{_parentage:De}=this;De===Ie?this._parentage=null:Array.isArray(De)&&(0,Fe.P)(De,Ie)}remove(Ie){const{_finalizers:De}=this;De&&(0,Fe.P)(De,Ie),Ie instanceof Ne&&Ie._removeParent(this)}}Ne.EMPTY=(()=>{const Ve=new Ne;return Ve.closed=!0,Ve})();const Ae=Ne.EMPTY;function $e(Ve){return Ve instanceof Ne||Ve&&"closed"in Ve&&(0,_.m)(Ve.remove)&&(0,_.m)(Ve.add)&&(0,_.m)(Ve.unsubscribe)}function Ge(Ve){(0,_.m)(Ve)?Ve():Ve.unsubscribe()}},2416:(gn,at,j)=>{j.d(at,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9841:(gn,at,j)=>{j.d(at,{a:()=>Ie});var _=j(9751),L=j(4742),W=j(8996),Fe=j(4671),Ne=j(3268),Ae=j(3269),$e=j(1810),Ge=j(5403),Ve=j(9672);function Ie(...Tt){const ut=(0,Ae.yG)(Tt),Ht=(0,Ae.jO)(Tt),{args:Kt,keys:pt}=(0,L.D)(Tt);if(0===Kt.length)return(0,W.D)([],ut);const It=new _.y(function De(Tt,ut,Ht=Fe.y){return Kt=>{ke(ut,()=>{const{length:pt}=Tt,It=new Array(pt);let Oe=pt,Ft=pt;for(let qe=0;qe<pt;qe++)ke(ut,()=>{const Se=(0,W.D)(Tt[qe],ut);let ze=!1;Se.subscribe((0,Ge.x)(Kt,Bt=>{It[qe]=Bt,ze||(ze=!0,Ft--),Ft||Kt.next(Ht(It.slice()))},()=>{--Oe||Kt.complete()}))},Kt)},Kt)}}(Kt,ut,pt?Oe=>(0,$e.n)(pt,Oe):Fe.y));return Ht?It.pipe((0,Ne.Z)(Ht)):It}function ke(Tt,ut,Ht){Tt?(0,Ve.f)(Ht,Tt,ut):ut()}},7272:(gn,at,j)=>{j.d(at,{z:()=>Ne});var _=j(8189),W=j(3269),Fe=j(8996);function Ne(...Ae){return function L(){return(0,_.J)(1)}()((0,Fe.D)(Ae,(0,W.yG)(Ae)))}},9770:(gn,at,j)=>{j.d(at,{P:()=>W});var _=j(9751),L=j(8421);function W(Fe){return new _.y(Ne=>{(0,L.Xf)(Fe()).subscribe(Ne)})}},515:(gn,at,j)=>{j.d(at,{E:()=>L});const L=new(j(9751).y)(Ne=>Ne.complete())},4128:(gn,at,j)=>{j.d(at,{D:()=>Ge});var _=j(9751),L=j(4742),W=j(8421),Fe=j(3269),Ne=j(5403),Ae=j(3268),$e=j(1810);function Ge(...Ve){const Ie=(0,Fe.jO)(Ve),{args:De,keys:ke}=(0,L.D)(Ve),Tt=new _.y(ut=>{const{length:Ht}=De;if(!Ht)return void ut.complete();const Kt=new Array(Ht);let pt=Ht,It=Ht;for(let Oe=0;Oe<Ht;Oe++){let Ft=!1;(0,W.Xf)(De[Oe]).subscribe((0,Ne.x)(ut,qe=>{Ft||(Ft=!0,It--),Kt[Oe]=qe},()=>pt--,void 0,()=>{(!pt||!Ft)&&(It||ut.next(ke?(0,$e.n)(ke,Kt):Kt),ut.complete())}))}});return Ie?Tt.pipe((0,Ae.Z)(Ie)):Tt}},8996:(gn,at,j)=>{j.d(at,{D:()=>Se});var _=j(8421),L=j(5363),W=j(9468),Ae=j(9751),Ge=j(2202),Ve=j(576),Ie=j(9672);function ke(ze,Bt){if(!ze)throw new Error("Iterable cannot be null");return new Ae.y(Ot=>{(0,Ie.f)(Ot,Bt,()=>{const nt=ze[Symbol.asyncIterator]();(0,Ie.f)(Ot,Bt,()=>{nt.next().then(Ye=>{Ye.done?Ot.complete():Ot.next(Ye.value)})},0,!0)})})}var Tt=j(3670),ut=j(8239),Ht=j(1144),Kt=j(6495),pt=j(2206),It=j(4532),Oe=j(3260);function Se(ze,Bt){return Bt?function qe(ze,Bt){if(null!=ze){if((0,Tt.c)(ze))return function Fe(ze,Bt){return(0,_.Xf)(ze).pipe((0,W.R)(Bt),(0,L.Q)(Bt))}(ze,Bt);if((0,Ht.z)(ze))return function $e(ze,Bt){return new Ae.y(Ot=>{let nt=0;return Bt.schedule(function(){nt===ze.length?Ot.complete():(Ot.next(ze[nt++]),Ot.closed||this.schedule())})})}(ze,Bt);if((0,ut.t)(ze))return function Ne(ze,Bt){return(0,_.Xf)(ze).pipe((0,W.R)(Bt),(0,L.Q)(Bt))}(ze,Bt);if((0,pt.D)(ze))return ke(ze,Bt);if((0,Kt.T)(ze))return function De(ze,Bt){return new Ae.y(Ot=>{let nt;return(0,Ie.f)(Ot,Bt,()=>{nt=ze[Ge.h](),(0,Ie.f)(Ot,Bt,()=>{let Ye,zt;try{({value:Ye,done:zt}=nt.next())}catch(xt){return void Ot.error(xt)}zt?Ot.complete():Ot.next(Ye)},0,!0)}),()=>(0,Ve.m)(nt?.return)&&nt.return()})}(ze,Bt);if((0,Oe.L)(ze))return function Ft(ze,Bt){return ke((0,Oe.Q)(ze),Bt)}(ze,Bt)}throw(0,It.z)(ze)}(ze,Bt):(0,_.Xf)(ze)}},8421:(gn,at,j)=>{j.d(at,{Xf:()=>Tt});var _=j(7582),L=j(1144),W=j(8239),Fe=j(9751),Ne=j(3670),Ae=j(2206),$e=j(4532),Ge=j(6495),Ve=j(3260),Ie=j(576),De=j(7849),ke=j(8822);function Tt(qe){if(qe instanceof Fe.y)return qe;if(null!=qe){if((0,Ne.c)(qe))return function ut(qe){return new Fe.y(Se=>{const ze=qe[ke.L]();if((0,Ie.m)(ze.subscribe))return ze.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(qe);if((0,L.z)(qe))return function Ht(qe){return new Fe.y(Se=>{for(let ze=0;ze<qe.length&&!Se.closed;ze++)Se.next(qe[ze]);Se.complete()})}(qe);if((0,W.t)(qe))return function Kt(qe){return new Fe.y(Se=>{qe.then(ze=>{Se.closed||(Se.next(ze),Se.complete())},ze=>Se.error(ze)).then(null,De.h)})}(qe);if((0,Ae.D)(qe))return It(qe);if((0,Ge.T)(qe))return function pt(qe){return new Fe.y(Se=>{for(const ze of qe)if(Se.next(ze),Se.closed)return;Se.complete()})}(qe);if((0,Ve.L)(qe))return function Oe(qe){return It((0,Ve.Q)(qe))}(qe)}throw(0,$e.z)(qe)}function It(qe){return new Fe.y(Se=>{(function Ft(qe,Se){var ze,Bt,Ot,nt;return(0,_.mG)(this,void 0,void 0,function*(){try{for(ze=(0,_.KL)(qe);!(Bt=yield ze.next()).done;)if(Se.next(Bt.value),Se.closed)return}catch(Ye){Ot={error:Ye}}finally{try{Bt&&!Bt.done&&(nt=ze.return)&&(yield nt.call(ze))}finally{if(Ot)throw Ot.error}}Se.complete()})})(qe,Se).catch(ze=>Se.error(ze))})}},6451:(gn,at,j)=>{j.d(at,{T:()=>Ae});var _=j(8189),L=j(8421),W=j(515),Fe=j(3269),Ne=j(8996);function Ae(...$e){const Ge=(0,Fe.yG)($e),Ve=(0,Fe._6)($e,1/0),Ie=$e;return Ie.length?1===Ie.length?(0,L.Xf)(Ie[0]):(0,_.J)(Ve)((0,Ne.D)(Ie,Ge)):W.E}},9646:(gn,at,j)=>{j.d(at,{of:()=>W});var _=j(3269),L=j(8996);function W(...Fe){const Ne=(0,_.yG)(Fe);return(0,L.D)(Fe,Ne)}},5403:(gn,at,j)=>{j.d(at,{x:()=>L});var _=j(930);function L(Fe,Ne,Ae,$e,Ge){return new W(Fe,Ne,Ae,$e,Ge)}class W extends _.Lv{constructor(Ne,Ae,$e,Ge,Ve,Ie){super(Ne),this.onFinalize=Ve,this.shouldUnsubscribe=Ie,this._next=Ae?function(De){try{Ae(De)}catch(ke){Ne.error(ke)}}:super._next,this._error=Ge?function(De){try{Ge(De)}catch(ke){Ne.error(ke)}finally{this.unsubscribe()}}:super._error,this._complete=$e?function(){try{$e()}catch(De){Ne.error(De)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ne;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(Ne=this.onFinalize)||void 0===Ne||Ne.call(this))}}}},4351:(gn,at,j)=>{j.d(at,{b:()=>W});var _=j(5577),L=j(576);function W(Fe,Ne){return(0,L.m)(Ne)?(0,_.z)(Fe,Ne,1):(0,_.z)(Fe,1)}},8372:(gn,at,j)=>{j.d(at,{b:()=>Fe});var _=j(4986),L=j(4482),W=j(5403);function Fe(Ne,Ae=_.z){return(0,L.e)(($e,Ge)=>{let Ve=null,Ie=null,De=null;const ke=()=>{if(Ve){Ve.unsubscribe(),Ve=null;const ut=Ie;Ie=null,Ge.next(ut)}};function Tt(){const ut=De+Ne,Ht=Ae.now();if(Ht<ut)return Ve=this.schedule(void 0,ut-Ht),void Ge.add(Ve);ke()}$e.subscribe((0,W.x)(Ge,ut=>{Ie=ut,De=Ae.now(),Ve||(Ve=Ae.schedule(Tt,Ne),Ge.add(Ve))},()=>{ke(),Ge.complete()},void 0,()=>{Ie=Ve=null}))})}},6590:(gn,at,j)=>{j.d(at,{d:()=>W});var _=j(4482),L=j(5403);function W(Fe){return(0,_.e)((Ne,Ae)=>{let $e=!1;Ne.subscribe((0,L.x)(Ae,Ge=>{$e=!0,Ae.next(Ge)},()=>{$e||Ae.next(Fe),Ae.complete()}))})}},1884:(gn,at,j)=>{j.d(at,{x:()=>Fe});var _=j(4671),L=j(4482),W=j(5403);function Fe(Ae,$e=_.y){return Ae=Ae??Ne,(0,L.e)((Ge,Ve)=>{let Ie,De=!0;Ge.subscribe((0,W.x)(Ve,ke=>{const Tt=$e(ke);(De||!Ae(Ie,Tt))&&(De=!1,Ie=Tt,Ve.next(ke))}))})}function Ne(Ae,$e){return Ae===$e}},9300:(gn,at,j)=>{j.d(at,{h:()=>W});var _=j(4482),L=j(5403);function W(Fe,Ne){return(0,_.e)((Ae,$e)=>{let Ge=0;Ae.subscribe((0,L.x)($e,Ve=>Fe.call(Ne,Ve,Ge++)&&$e.next(Ve)))})}},590:(gn,at,j)=>{j.d(at,{P:()=>$e});var _=j(6805),L=j(9300),W=j(5698),Fe=j(6590),Ne=j(8068),Ae=j(4671);function $e(Ge,Ve){const Ie=arguments.length>=2;return De=>De.pipe(Ge?(0,L.h)((ke,Tt)=>Ge(ke,Tt,De)):Ae.y,(0,W.q)(1),Ie?(0,Fe.d)(Ve):(0,Ne.T)(()=>new _.K))}},4004:(gn,at,j)=>{j.d(at,{U:()=>W});var _=j(4482),L=j(5403);function W(Fe,Ne){return(0,_.e)((Ae,$e)=>{let Ge=0;Ae.subscribe((0,L.x)($e,Ve=>{$e.next(Fe.call(Ne,Ve,Ge++))}))})}},8189:(gn,at,j)=>{j.d(at,{J:()=>W});var _=j(5577),L=j(4671);function W(Fe=1/0){return(0,_.z)(L.y,Fe)}},5577:(gn,at,j)=>{j.d(at,{z:()=>Ge});var _=j(4004),L=j(8421),W=j(4482),Fe=j(9672),Ne=j(5403),$e=j(576);function Ge(Ve,Ie,De=1/0){return(0,$e.m)(Ie)?Ge((ke,Tt)=>(0,_.U)((ut,Ht)=>Ie(ke,ut,Tt,Ht))((0,L.Xf)(Ve(ke,Tt))),De):("number"==typeof Ie&&(De=Ie),(0,W.e)((ke,Tt)=>function Ae(Ve,Ie,De,ke,Tt,ut,Ht,Kt){const pt=[];let It=0,Oe=0,Ft=!1;const qe=()=>{Ft&&!pt.length&&!It&&Ie.complete()},Se=Bt=>It<ke?ze(Bt):pt.push(Bt),ze=Bt=>{ut&&Ie.next(Bt),It++;let Ot=!1;(0,L.Xf)(De(Bt,Oe++)).subscribe((0,Ne.x)(Ie,nt=>{Tt?.(nt),ut?Se(nt):Ie.next(nt)},()=>{Ot=!0},void 0,()=>{if(Ot)try{for(It--;pt.length&&It<ke;){const nt=pt.shift();Ht?(0,Fe.f)(Ie,Ht,()=>ze(nt)):ze(nt)}qe()}catch(nt){Ie.error(nt)}}))};return Ve.subscribe((0,Ne.x)(Ie,Se,()=>{Ft=!0,qe()})),()=>{Kt?.()}}(ke,Tt,Ve,De)))}},5363:(gn,at,j)=>{j.d(at,{Q:()=>Fe});var _=j(9672),L=j(4482),W=j(5403);function Fe(Ne,Ae=0){return(0,L.e)(($e,Ge)=>{$e.subscribe((0,W.x)(Ge,Ve=>(0,_.f)(Ge,Ne,()=>Ge.next(Ve),Ae),()=>(0,_.f)(Ge,Ne,()=>Ge.complete(),Ae),Ve=>(0,_.f)(Ge,Ne,()=>Ge.error(Ve),Ae)))})}},5026:(gn,at,j)=>{j.d(at,{R:()=>Fe});var _=j(4482),L=j(5403);function Fe(Ne,Ae){return(0,_.e)(function W(Ne,Ae,$e,Ge,Ve){return(Ie,De)=>{let ke=$e,Tt=Ae,ut=0;Ie.subscribe((0,L.x)(De,Ht=>{const Kt=ut++;Tt=ke?Ne(Tt,Ht,Kt):(ke=!0,Ht),Ge&&De.next(Tt)},Ve&&(()=>{ke&&De.next(Tt),De.complete()})))}}(Ne,Ae,arguments.length>=2,!0))}},3099:(gn,at,j)=>{j.d(at,{B:()=>Ne});var _=j(8421),L=j(7579),W=j(930),Fe=j(4482);function Ne($e={}){const{connector:Ge=(()=>new L.x),resetOnError:Ve=!0,resetOnComplete:Ie=!0,resetOnRefCountZero:De=!0}=$e;return ke=>{let Tt,ut,Ht,Kt=0,pt=!1,It=!1;const Oe=()=>{ut?.unsubscribe(),ut=void 0},Ft=()=>{Oe(),Tt=Ht=void 0,pt=It=!1},qe=()=>{const Se=Tt;Ft(),Se?.unsubscribe()};return(0,Fe.e)((Se,ze)=>{Kt++,!It&&!pt&&Oe();const Bt=Ht=Ht??Ge();ze.add(()=>{Kt--,0===Kt&&!It&&!pt&&(ut=Ae(qe,De))}),Bt.subscribe(ze),!Tt&&Kt>0&&(Tt=new W.Hp({next:Ot=>Bt.next(Ot),error:Ot=>{It=!0,Oe(),ut=Ae(Ft,Ve,Ot),Bt.error(Ot)},complete:()=>{pt=!0,Oe(),ut=Ae(Ft,Ie),Bt.complete()}}),(0,_.Xf)(Se).subscribe(Tt))})(ke)}}function Ae($e,Ge,...Ve){if(!0===Ge)return void $e();if(!1===Ge)return;const Ie=new W.Hp({next:()=>{Ie.unsubscribe(),$e()}});return(0,_.Xf)(Ge(...Ve)).subscribe(Ie)}},8675:(gn,at,j)=>{j.d(at,{O:()=>Fe});var _=j(7272),L=j(3269),W=j(4482);function Fe(...Ne){const Ae=(0,L.yG)(Ne);return(0,W.e)(($e,Ge)=>{(Ae?(0,_.z)(Ne,$e,Ae):(0,_.z)(Ne,$e)).subscribe(Ge)})}},9468:(gn,at,j)=>{j.d(at,{R:()=>L});var _=j(4482);function L(W,Fe=0){return(0,_.e)((Ne,Ae)=>{Ae.add(W.schedule(()=>Ne.subscribe(Ae),Fe))})}},3900:(gn,at,j)=>{j.d(at,{w:()=>Fe});var _=j(8421),L=j(4482),W=j(5403);function Fe(Ne,Ae){return(0,L.e)(($e,Ge)=>{let Ve=null,Ie=0,De=!1;const ke=()=>De&&!Ve&&Ge.complete();$e.subscribe((0,W.x)(Ge,Tt=>{Ve?.unsubscribe();let ut=0;const Ht=Ie++;(0,_.Xf)(Ne(Tt,Ht)).subscribe(Ve=(0,W.x)(Ge,Kt=>Ge.next(Ae?Ae(Tt,Kt,Ht,ut++):Kt),()=>{Ve=null,ke()}))},()=>{De=!0,ke()}))})}},5698:(gn,at,j)=>{j.d(at,{q:()=>Fe});var _=j(515),L=j(4482),W=j(5403);function Fe(Ne){return Ne<=0?()=>_.E:(0,L.e)((Ae,$e)=>{let Ge=0;Ae.subscribe((0,W.x)($e,Ve=>{++Ge<=Ne&&($e.next(Ve),Ne<=Ge&&$e.complete())}))})}},2722:(gn,at,j)=>{j.d(at,{R:()=>Ne});var _=j(4482),L=j(5403),W=j(8421),Fe=j(5032);function Ne(Ae){return(0,_.e)(($e,Ge)=>{(0,W.Xf)(Ae).subscribe((0,L.x)(Ge,()=>Ge.complete(),Fe.Z)),!Ge.closed&&$e.subscribe(Ge)})}},2529:(gn,at,j)=>{j.d(at,{o:()=>W});var _=j(4482),L=j(5403);function W(Fe,Ne=!1){return(0,_.e)((Ae,$e)=>{let Ge=0;Ae.subscribe((0,L.x)($e,Ve=>{const Ie=Fe(Ve,Ge++);(Ie||Ne)&&$e.next(Ve),!Ie&&$e.complete()}))})}},8505:(gn,at,j)=>{j.d(at,{b:()=>Ne});var _=j(576),L=j(4482),W=j(5403),Fe=j(4671);function Ne(Ae,$e,Ge){const Ve=(0,_.m)(Ae)||$e||Ge?{next:Ae,error:$e,complete:Ge}:Ae;return Ve?(0,L.e)((Ie,De)=>{var ke;null===(ke=Ve.subscribe)||void 0===ke||ke.call(Ve);let Tt=!0;Ie.subscribe((0,W.x)(De,ut=>{var Ht;null===(Ht=Ve.next)||void 0===Ht||Ht.call(Ve,ut),De.next(ut)},()=>{var ut;Tt=!1,null===(ut=Ve.complete)||void 0===ut||ut.call(Ve),De.complete()},ut=>{var Ht;Tt=!1,null===(Ht=Ve.error)||void 0===Ht||Ht.call(Ve,ut),De.error(ut)},()=>{var ut,Ht;Tt&&(null===(ut=Ve.unsubscribe)||void 0===ut||ut.call(Ve)),null===(Ht=Ve.finalize)||void 0===Ht||Ht.call(Ve)}))}):Fe.y}},8068:(gn,at,j)=>{j.d(at,{T:()=>Fe});var _=j(6805),L=j(4482),W=j(5403);function Fe(Ae=Ne){return(0,L.e)(($e,Ge)=>{let Ve=!1;$e.subscribe((0,W.x)(Ge,Ie=>{Ve=!0,Ge.next(Ie)},()=>Ve?Ge.complete():Ge.error(Ae())))})}function Ne(){return new _.K}},4408:(gn,at,j)=>{j.d(at,{o:()=>Ne});var _=j(727);class L extends _.w0{constructor($e,Ge){super()}schedule($e,Ge=0){return this}}const W={setInterval(Ae,$e,...Ge){const{delegate:Ve}=W;return Ve?.setInterval?Ve.setInterval(Ae,$e,...Ge):setInterval(Ae,$e,...Ge)},clearInterval(Ae){const{delegate:$e}=W;return($e?.clearInterval||clearInterval)(Ae)},delegate:void 0};var Fe=j(8737);class Ne extends L{constructor($e,Ge){super($e,Ge),this.scheduler=$e,this.work=Ge,this.pending=!1}schedule($e,Ge=0){var Ve;if(this.closed)return this;this.state=$e;const Ie=this.id,De=this.scheduler;return null!=Ie&&(this.id=this.recycleAsyncId(De,Ie,Ge)),this.pending=!0,this.delay=Ge,this.id=null!==(Ve=this.id)&&void 0!==Ve?Ve:this.requestAsyncId(De,this.id,Ge),this}requestAsyncId($e,Ge,Ve=0){return W.setInterval($e.flush.bind($e,this),Ve)}recycleAsyncId($e,Ge,Ve=0){if(null!=Ve&&this.delay===Ve&&!1===this.pending)return Ge;null!=Ge&&W.clearInterval(Ge)}execute($e,Ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ve=this._execute($e,Ge);if(Ve)return Ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute($e,Ge){let Ie,Ve=!1;try{this.work($e)}catch(De){Ve=!0,Ie=De||new Error("Scheduled action threw falsy error")}if(Ve)return this.unsubscribe(),Ie}unsubscribe(){if(!this.closed){const{id:$e,scheduler:Ge}=this,{actions:Ve}=Ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Fe.P)(Ve,this),null!=$e&&(this.id=this.recycleAsyncId(Ge,$e,null)),this.delay=null,super.unsubscribe()}}}},7565:(gn,at,j)=>{j.d(at,{v:()=>W});var _=j(6063);class L{constructor(Ne,Ae=L.now){this.schedulerActionCtor=Ne,this.now=Ae}schedule(Ne,Ae=0,$e){return new this.schedulerActionCtor(this,Ne).schedule($e,Ae)}}L.now=_.l.now;class W extends L{constructor(Ne,Ae=L.now){super(Ne,Ae),this.actions=[],this._active=!1}flush(Ne){const{actions:Ae}=this;if(this._active)return void Ae.push(Ne);let $e;this._active=!0;do{if($e=Ne.execute(Ne.state,Ne.delay))break}while(Ne=Ae.shift());if(this._active=!1,$e){for(;Ne=Ae.shift();)Ne.unsubscribe();throw $e}}}},4986:(gn,at,j)=>{j.d(at,{P:()=>Fe,z:()=>W});var _=j(4408);const W=new(j(7565).v)(_.o),Fe=W},6063:(gn,at,j)=>{j.d(at,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(gn,at,j)=>{j.d(at,{z:()=>_});const _={setTimeout(L,W,...Fe){const{delegate:Ne}=_;return Ne?.setTimeout?Ne.setTimeout(L,W,...Fe):setTimeout(L,W,...Fe)},clearTimeout(L){const{delegate:W}=_;return(W?.clearTimeout||clearTimeout)(L)},delegate:void 0}},2202:(gn,at,j)=>{j.d(at,{h:()=>L});const L=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gn,at,j)=>{j.d(at,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(gn,at,j)=>{j.d(at,{K:()=>L});const L=(0,j(3888).d)(W=>function(){W(this),this.name="EmptyError",this.message="no elements in sequence"})},3269:(gn,at,j)=>{j.d(at,{_6:()=>Ae,jO:()=>Fe,yG:()=>Ne});var _=j(576),L=j(3532);function W($e){return $e[$e.length-1]}function Fe($e){return(0,_.m)(W($e))?$e.pop():void 0}function Ne($e){return(0,L.K)(W($e))?$e.pop():void 0}function Ae($e,Ge){return"number"==typeof W($e)?$e.pop():Ge}},4742:(gn,at,j)=>{j.d(at,{D:()=>Ne});const{isArray:_}=Array,{getPrototypeOf:L,prototype:W,keys:Fe}=Object;function Ne($e){if(1===$e.length){const Ge=$e[0];if(_(Ge))return{args:Ge,keys:null};if(function Ae($e){return $e&&"object"==typeof $e&&L($e)===W}(Ge)){const Ve=Fe(Ge);return{args:Ve.map(Ie=>Ge[Ie]),keys:Ve}}}return{args:$e,keys:null}}},8737:(gn,at,j)=>{function _(L,W){if(L){const Fe=L.indexOf(W);0<=Fe&&L.splice(Fe,1)}}j.d(at,{P:()=>_})},3888:(gn,at,j)=>{function _(L){const Fe=L(Ne=>{Error.call(Ne),Ne.stack=(new Error).stack});return Fe.prototype=Object.create(Error.prototype),Fe.prototype.constructor=Fe,Fe}j.d(at,{d:()=>_})},1810:(gn,at,j)=>{function _(L,W){return L.reduce((Fe,Ne,Ae)=>(Fe[Ne]=W[Ae],Fe),{})}j.d(at,{n:()=>_})},2806:(gn,at,j)=>{j.d(at,{O:()=>Fe,x:()=>W});var _=j(2416);let L=null;function W(Ne){if(_.v.useDeprecatedSynchronousErrorHandling){const Ae=!L;if(Ae&&(L={errorThrown:!1,error:null}),Ne(),Ae){const{errorThrown:$e,error:Ge}=L;if(L=null,$e)throw Ge}}else Ne()}function Fe(Ne){_.v.useDeprecatedSynchronousErrorHandling&&L&&(L.errorThrown=!0,L.error=Ne)}},9672:(gn,at,j)=>{function _(L,W,Fe,Ne=0,Ae=!1){const $e=W.schedule(function(){Fe(),Ae?L.add(this.schedule(null,Ne)):this.unsubscribe()},Ne);if(L.add($e),!Ae)return $e}j.d(at,{f:()=>_})},4671:(gn,at,j)=>{function _(L){return L}j.d(at,{y:()=>_})},1144:(gn,at,j)=>{j.d(at,{z:()=>_});const _=L=>L&&"number"==typeof L.length&&"function"!=typeof L},2206:(gn,at,j)=>{j.d(at,{D:()=>L});var _=j(576);function L(W){return Symbol.asyncIterator&&(0,_.m)(W?.[Symbol.asyncIterator])}},576:(gn,at,j)=>{function _(L){return"function"==typeof L}j.d(at,{m:()=>_})},3670:(gn,at,j)=>{j.d(at,{c:()=>W});var _=j(8822),L=j(576);function W(Fe){return(0,L.m)(Fe[_.L])}},6495:(gn,at,j)=>{j.d(at,{T:()=>W});var _=j(2202),L=j(576);function W(Fe){return(0,L.m)(Fe?.[_.h])}},8239:(gn,at,j)=>{j.d(at,{t:()=>L});var _=j(576);function L(W){return(0,_.m)(W?.then)}},3260:(gn,at,j)=>{j.d(at,{L:()=>Fe,Q:()=>W});var _=j(7582),L=j(576);function W(Ne){return(0,_.FC)(this,arguments,function*(){const $e=Ne.getReader();try{for(;;){const{value:Ge,done:Ve}=yield(0,_.qq)($e.read());if(Ve)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Ge)}}finally{$e.releaseLock()}})}function Fe(Ne){return(0,L.m)(Ne?.getReader)}},3532:(gn,at,j)=>{j.d(at,{K:()=>L});var _=j(576);function L(W){return W&&(0,_.m)(W.schedule)}},4482:(gn,at,j)=>{j.d(at,{A:()=>L,e:()=>W});var _=j(576);function L(Fe){return(0,_.m)(Fe?.lift)}function W(Fe){return Ne=>{if(L(Ne))return Ne.lift(function(Ae){try{return Fe(Ae,this)}catch($e){this.error($e)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(gn,at,j)=>{j.d(at,{Z:()=>Fe});var _=j(4004);const{isArray:L}=Array;function Fe(Ne){return(0,_.U)(Ae=>function W(Ne,Ae){return L(Ae)?Ne(...Ae):Ne(Ae)}(Ne,Ae))}},5032:(gn,at,j)=>{function _(){}j.d(at,{Z:()=>_})},9635:(gn,at,j)=>{j.d(at,{U:()=>W,z:()=>L});var _=j(4671);function L(...Fe){return W(Fe)}function W(Fe){return 0===Fe.length?_.y:1===Fe.length?Fe[0]:function(Ae){return Fe.reduce(($e,Ge)=>Ge($e),Ae)}}},7849:(gn,at,j)=>{j.d(at,{h:()=>W});var _=j(2416),L=j(3410);function W(Fe){L.z.setTimeout(()=>{const{onUnhandledError:Ne}=_.v;if(!Ne)throw Fe;Ne(Fe)})}},4532:(gn,at,j)=>{function _(L){return new TypeError(`You provided ${null!==L&&"object"==typeof L?"an invalid object":`'${L}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(at,{z:()=>_})},7340:(gn,at,j)=>{j.d(at,{IO:()=>Ht,LC:()=>L,SB:()=>Ve,X$:()=>Fe,ZE:()=>Oe,ZN:()=>It,_j:()=>_,eR:()=>De,jt:()=>Ne,k1:()=>Ft,l3:()=>W,oB:()=>Ge,pV:()=>Tt,vP:()=>$e});class _{}class L{}const W="*";function Fe(qe,Se){return{type:7,name:qe,definitions:Se,options:{}}}function Ne(qe,Se=null){return{type:4,styles:Se,timings:qe}}function $e(qe,Se=null){return{type:2,steps:qe,options:Se}}function Ge(qe){return{type:6,styles:qe,offset:null}}function Ve(qe,Se,ze){return{type:0,name:qe,styles:Se,options:ze}}function De(qe,Se,ze=null){return{type:1,expr:qe,animation:Se,options:ze}}function Tt(qe=null){return{type:9,options:qe}}function Ht(qe,Se,ze=null){return{type:11,selector:qe,animation:Se,options:ze}}function pt(qe){Promise.resolve().then(qe)}class It{constructor(Se=0,ze=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=Se+ze}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Se=>Se()),this._onDoneFns=[])}onStart(Se){this._originalOnStartFns.push(Se),this._onStartFns.push(Se)}onDone(Se){this._originalOnDoneFns.push(Se),this._onDoneFns.push(Se)}onDestroy(Se){this._onDestroyFns.push(Se)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(Se=>Se()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(Se=>Se()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(Se){this._position=this.totalTime?Se*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(Se){const ze="start"==Se?this._onStartFns:this._onDoneFns;ze.forEach(Bt=>Bt()),ze.length=0}}class Oe{constructor(Se){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=Se;let ze=0,Bt=0,Ot=0;const nt=this.players.length;0==nt?pt(()=>this._onFinish()):this.players.forEach(Ye=>{Ye.onDone(()=>{++ze==nt&&this._onFinish()}),Ye.onDestroy(()=>{++Bt==nt&&this._onDestroy()}),Ye.onStart(()=>{++Ot==nt&&this._onStart()})}),this.totalTime=this.players.reduce((Ye,zt)=>Math.max(Ye,zt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(Se=>Se()),this._onDoneFns=[])}init(){this.players.forEach(Se=>Se.init())}onStart(Se){this._onStartFns.push(Se)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(Se=>Se()),this._onStartFns=[])}onDone(Se){this._onDoneFns.push(Se)}onDestroy(Se){this._onDestroyFns.push(Se)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(Se=>Se.play())}pause(){this.players.forEach(Se=>Se.pause())}restart(){this.players.forEach(Se=>Se.restart())}finish(){this._onFinish(),this.players.forEach(Se=>Se.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(Se=>Se.destroy()),this._onDestroyFns.forEach(Se=>Se()),this._onDestroyFns=[])}reset(){this.players.forEach(Se=>Se.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(Se){const ze=Se*this.totalTime;this.players.forEach(Bt=>{const Ot=Bt.totalTime?Math.min(1,ze/Bt.totalTime):1;Bt.setPosition(Ot)})}getPosition(){const Se=this.players.reduce((ze,Bt)=>null===ze||Bt.totalTime>ze.totalTime?Bt:ze,null);return null!=Se?Se.getPosition():0}beforeDestroy(){this.players.forEach(Se=>{Se.beforeDestroy&&Se.beforeDestroy()})}triggerCallback(Se){const ze="start"==Se?this._onStartFns:this._onDoneFns;ze.forEach(Bt=>Bt()),ze.length=0}}const Ft="!"},7253:(gn,at,j)=>{j.d(at,{s1:()=>dt,qm:()=>be,Kd:()=>an,X6:()=>un,yG:()=>Ar});var _=j(6895),L=j(4650),W=j(3353),Fe=j(7579),Ne=j(727),Ae=j(9521),$e=j(8505),Ge=j(8372),Ve=j(9300),Ie=j(4004),De=j(1281),ke=j(9841),Tt=j(7272),ut=j(9751),Ht=j(5698),pt=j(8675),It=j(2722);const Ft=new Set;let qe,Se=(()=>{class we{constructor(ye){this._platform=ye,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Bt}matchMedia(ye){return(this._platform.WEBKIT||this._platform.BLINK)&&function ze(we){if(!Ft.has(we))try{qe||(qe=document.createElement("style"),qe.setAttribute("type","text/css"),document.head.appendChild(qe)),qe.sheet&&(qe.sheet.insertRule(`@media ${we} {body{ }}`,0),Ft.add(we))}catch(re){console.error(re)}}(ye),this._matchMedia(ye)}}return we.\u0275fac=function(ye){return new(ye||we)(L.LFG(W.t4))},we.\u0275prov=L.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();function Bt(we){return{matches:"all"===we||""===we,media:we,addListener:()=>{},removeListener:()=>{}}}let Ot=(()=>{class we{constructor(ye,pe){this._mediaMatcher=ye,this._zone=pe,this._queries=new Map,this._destroySubject=new Fe.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(ye){return nt((0,De.Eq)(ye)).some(he=>this._registerQuery(he).mql.matches)}observe(ye){const he=nt((0,De.Eq)(ye)).map(Re=>this._registerQuery(Re).observable);let oe=(0,ke.a)(he);return oe=(0,Tt.z)(oe.pipe((0,Ht.q)(1)),oe.pipe(function Kt(we){return(0,Ve.h)((re,ye)=>we<=ye)}(1),(0,Ge.b)(0))),oe.pipe((0,Ie.U)(Re=>{const rt={matches:!1,breakpoints:{}};return Re.forEach(({matches:Ut,query:vn})=>{rt.matches=rt.matches||Ut,rt.breakpoints[vn]=Ut}),rt}))}_registerQuery(ye){if(this._queries.has(ye))return this._queries.get(ye);const pe=this._mediaMatcher.matchMedia(ye),oe={observable:new ut.y(Re=>{const rt=Ut=>this._zone.run(()=>Re.next(Ut));return pe.addListener(rt),()=>{pe.removeListener(rt)}}).pipe((0,pt.O)(pe),(0,Ie.U)(({matches:Re})=>({query:ye,matches:Re})),(0,It.R)(this._destroySubject)),mql:pe};return this._queries.set(ye,oe),oe}}return we.\u0275fac=function(ye){return new(ye||we)(L.LFG(Se),L.LFG(L.R0b))},we.\u0275prov=L.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();function nt(we){return we.map(re=>re.split(",")).reduce((re,ye)=>re.concat(ye)).map(re=>re.trim())}class tt{constructor(re){this._items=re,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Fe.x,this._typeaheadSubscription=Ne.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=ye=>ye.disabled,this._pressedLetters=[],this.tabOut=new Fe.x,this.change=new Fe.x,re instanceof L.n_E&&(this._itemChangesSubscription=re.changes.subscribe(ye=>{if(this._activeItem){const he=ye.toArray().indexOf(this._activeItem);he>-1&&he!==this._activeItemIndex&&(this._activeItemIndex=he)}}))}skipPredicate(re){return this._skipPredicateFn=re,this}withWrap(re=!0){return this._wrap=re,this}withVerticalOrientation(re=!0){return this._vertical=re,this}withHorizontalOrientation(re){return this._horizontal=re,this}withAllowedModifierKeys(re){return this._allowedModifierKeys=re,this}withTypeAhead(re=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,$e.b)(ye=>this._pressedLetters.push(ye)),(0,Ge.b)(re),(0,Ve.h)(()=>this._pressedLetters.length>0),(0,Ie.U)(()=>this._pressedLetters.join(""))).subscribe(ye=>{const pe=this._getItemsArray();for(let he=1;he<pe.length+1;he++){const oe=(this._activeItemIndex+he)%pe.length,Re=pe[oe];if(!this._skipPredicateFn(Re)&&0===Re.getLabel().toUpperCase().trim().indexOf(ye)){this.setActiveItem(oe);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(re=!0){return this._homeAndEnd=re,this}withPageUpDown(re=!0,ye=10){return this._pageUpAndDown={enabled:re,delta:ye},this}setActiveItem(re){const ye=this._activeItem;this.updateActiveItem(re),this._activeItem!==ye&&this.change.next(this._activeItemIndex)}onKeydown(re){const ye=re.keyCode,he=["altKey","ctrlKey","metaKey","shiftKey"].every(oe=>!re[oe]||this._allowedModifierKeys.indexOf(oe)>-1);switch(ye){case Ae.Mf:return void this.tabOut.next();case Ae.JH:if(this._vertical&&he){this.setNextItemActive();break}return;case Ae.LH:if(this._vertical&&he){this.setPreviousItemActive();break}return;case Ae.SV:if(this._horizontal&&he){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case Ae.oh:if(this._horizontal&&he){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case Ae.Sd:if(this._homeAndEnd&&he){this.setFirstItemActive();break}return;case Ae.uR:if(this._homeAndEnd&&he){this.setLastItemActive();break}return;case Ae.Ku:if(this._pageUpAndDown.enabled&&he){const oe=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(oe>0?oe:0,1);break}return;case Ae.VM:if(this._pageUpAndDown.enabled&&he){const oe=this._activeItemIndex+this._pageUpAndDown.delta,Re=this._getItemsArray().length;this._setActiveItemByIndex(oe<Re?oe:Re-1,-1);break}return;default:return void((he||(0,Ae.Vb)(re,"shiftKey"))&&(re.key&&1===re.key.length?this._letterKeyStream.next(re.key.toLocaleUpperCase()):(ye>=Ae.A&&ye<=Ae.Z||ye>=Ae.xE&&ye<=Ae.aO)&&this._letterKeyStream.next(String.fromCharCode(ye))))}this._pressedLetters=[],re.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(re){const ye=this._getItemsArray(),pe="number"==typeof re?re:ye.indexOf(re);this._activeItem=ye[pe]??null,this._activeItemIndex=pe}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(re){this._wrap?this._setActiveInWrapMode(re):this._setActiveInDefaultMode(re)}_setActiveInWrapMode(re){const ye=this._getItemsArray();for(let pe=1;pe<=ye.length;pe++){const he=(this._activeItemIndex+re*pe+ye.length)%ye.length;if(!this._skipPredicateFn(ye[he]))return void this.setActiveItem(he)}}_setActiveInDefaultMode(re){this._setActiveItemByIndex(this._activeItemIndex+re,re)}_setActiveItemByIndex(re,ye){const pe=this._getItemsArray();if(pe[re]){for(;this._skipPredicateFn(pe[re]);)if(!pe[re+=ye])return;this.setActiveItem(re)}}_getItemsArray(){return this._items instanceof L.n_E?this._items.toArray():this._items}}class dt extends tt{setActiveItem(re){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(re),this.activeItem&&this.activeItem.setActiveStyles()}}function un(we){return 0===we.buttons||0===we.offsetX&&0===we.offsetY}function Ar(we){const re=we.touches&&we.touches[0]||we.changedTouches&&we.changedTouches[0];return!(!re||-1!==re.identifier||null!=re.radiusX&&1!==re.radiusX||null!=re.radiusY&&1!==re.radiusY)}const gt=new L.OlP("liveAnnouncerElement",{providedIn:"root",factory:function _n(){return null}}),je=new L.OlP("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let At=0,an=(()=>{class we{constructor(ye,pe,he,oe){this._ngZone=pe,this._defaultOptions=oe,this._document=he,this._liveElement=ye||this._createLiveElement()}announce(ye,...pe){const he=this._defaultOptions;let oe,Re;return 1===pe.length&&"number"==typeof pe[0]?Re=pe[0]:[oe,Re]=pe,this.clear(),clearTimeout(this._previousTimeout),oe||(oe=he&&he.politeness?he.politeness:"polite"),null==Re&&he&&(Re=he.duration),this._liveElement.setAttribute("aria-live",oe),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(rt=>this._currentResolve=rt)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=ye,"number"==typeof Re&&(this._previousTimeout=setTimeout(()=>this.clear(),Re)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const ye="cdk-live-announcer-element",pe=this._document.getElementsByClassName(ye),he=this._document.createElement("div");for(let oe=0;oe<pe.length;oe++)pe[oe].remove();return he.classList.add(ye),he.classList.add("cdk-visually-hidden"),he.setAttribute("aria-atomic","true"),he.setAttribute("aria-live","polite"),he.id="cdk-live-announcer-"+At++,this._document.body.appendChild(he),he}_exposeAnnouncerToModals(ye){const pe=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let he=0;he<pe.length;he++){const oe=pe[he],Re=oe.getAttribute("aria-owns");Re?-1===Re.indexOf(ye)&&oe.setAttribute("aria-owns",Re+" "+ye):oe.setAttribute("aria-owns",ye)}}}return we.\u0275fac=function(ye){return new(ye||we)(L.LFG(gt,8),L.LFG(L.R0b),L.LFG(_.K0),L.LFG(je,8))},we.\u0275prov=L.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})();const ct="cdk-high-contrast-black-on-white",vt="cdk-high-contrast-white-on-black",ve="cdk-high-contrast-active";let be=(()=>{class we{constructor(ye,pe){this._platform=ye,this._document=pe,this._breakpointSubscription=(0,L.f3M)(Ot).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const ye=this._document.createElement("div");ye.style.backgroundColor="rgb(1,2,3)",ye.style.position="absolute",this._document.body.appendChild(ye);const pe=this._document.defaultView||window,he=pe&&pe.getComputedStyle?pe.getComputedStyle(ye):null,oe=(he&&he.backgroundColor||"").replace(/ /g,"");switch(ye.remove(),oe){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const ye=this._document.body.classList;ye.remove(ve,ct,vt),this._hasCheckedHighContrastMode=!0;const pe=this.getHighContrastMode();1===pe?ye.add(ve,ct):2===pe&&ye.add(ve,vt)}}}return we.\u0275fac=function(ye){return new(ye||we)(L.LFG(W.t4),L.LFG(_.K0))},we.\u0275prov=L.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})()},445:(gn,at,j)=>{j.d(at,{Is:()=>$e,vT:()=>Ve});var _=j(4650),L=j(6895);const W=new _.OlP("cdk-dir-doc",{providedIn:"root",factory:function Fe(){return(0,_.f3M)(L.K0)}}),Ne=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let $e=(()=>{class Ie{constructor(ke){this.value="ltr",this.change=new _.vpe,ke&&(this.value=function Ae(Ie){const De=Ie?.toLowerCase()||"";return"auto"===De&&typeof navigator<"u"&&navigator?.language?Ne.test(navigator.language)?"rtl":"ltr":"rtl"===De?"rtl":"ltr"}((ke.body?ke.body.dir:null)||(ke.documentElement?ke.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return Ie.\u0275fac=function(ke){return new(ke||Ie)(_.LFG(W,8))},Ie.\u0275prov=_.Yz7({token:Ie,factory:Ie.\u0275fac,providedIn:"root"}),Ie})(),Ve=(()=>{class Ie{}return Ie.\u0275fac=function(ke){return new(ke||Ie)},Ie.\u0275mod=_.oAB({type:Ie}),Ie.\u0275inj=_.cJS({}),Ie})()},1281:(gn,at,j)=>{j.d(at,{Eq:()=>Ne,HM:()=>Ae,Ig:()=>L,fI:()=>$e,su:()=>W});var _=j(4650);function L(Ve){return null!=Ve&&"false"!=`${Ve}`}function W(Ve,Ie=0){return function Fe(Ve){return!isNaN(parseFloat(Ve))&&!isNaN(Number(Ve))}(Ve)?Number(Ve):Ie}function Ne(Ve){return Array.isArray(Ve)?Ve:[Ve]}function Ae(Ve){return null==Ve?"":"string"==typeof Ve?Ve:`${Ve}px`}function $e(Ve){return Ve instanceof _.SBq?Ve.nativeElement:Ve}},9521:(gn,at,j)=>{j.d(at,{A:()=>tt,JH:()=>Ft,JU:()=>Ae,K5:()=>Ne,Ku:()=>Tt,LH:()=>It,L_:()=>ke,MW:()=>Ar,Mf:()=>W,SV:()=>Oe,Sd:()=>Kt,VM:()=>ut,Vb:()=>Ai,Z:()=>un,aO:()=>Kn,b2:()=>Lr,hY:()=>De,jx:()=>$e,oh:()=>pt,uR:()=>Ht,xE:()=>Ot,zL:()=>Ge});const W=9,Ne=13,Ae=16,$e=17,Ge=18,De=27,ke=32,Tt=33,ut=34,Ht=35,Kt=36,pt=37,It=38,Oe=39,Ft=40,Ot=48,Kn=57,tt=65,un=90,Ar=91,Lr=224;function Ai(Tr,...Ts){return Ts.length?Ts.some(Xr=>Tr[Xr]):Tr.altKey||Tr.shiftKey||Tr.ctrlKey||Tr.metaKey}},3353:(gn,at,j)=>{j.d(at,{Mq:()=>ut,Oy:()=>qe,_i:()=>Ht,i$:()=>De,sA:()=>Ft,t4:()=>Fe});var _=j(4650),L=j(6895);let W;try{W=typeof Intl<"u"&&Intl.v8BreakIterator}catch{W=!1}let Ve,ke,Tt,Fe=(()=>{class Se{constructor(Bt){this._platformId=Bt,this.isBrowser=this._platformId?(0,L.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!W)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return Se.\u0275fac=function(Bt){return new(Bt||Se)(_.LFG(_.Lbi))},Se.\u0275prov=_.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})();function De(Se){return function Ie(){if(null==Ve&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ve=!0}))}finally{Ve=Ve||!1}return Ve}()?Se:!!Se.capture}function ut(){if(null==Tt){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Tt=!1,Tt;if("scrollBehavior"in document.documentElement.style)Tt=!0;else{const Se=Element.prototype.scrollTo;Tt=!!Se&&!/\{\s*\[native code\]\s*\}/.test(Se.toString())}}return Tt}function Ht(){if("object"!=typeof document||!document)return 0;if(null==ke){const Se=document.createElement("div"),ze=Se.style;Se.dir="rtl",ze.width="1px",ze.overflow="auto",ze.visibility="hidden",ze.pointerEvents="none",ze.position="absolute";const Bt=document.createElement("div"),Ot=Bt.style;Ot.width="2px",Ot.height="1px",Se.appendChild(Bt),document.body.appendChild(Se),ke=0,0===Se.scrollLeft&&(Se.scrollLeft=1,ke=0===Se.scrollLeft?1:2),Se.remove()}return ke}function Ft(Se){return Se.composedPath?Se.composedPath()[0]:Se.target}function qe(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}},6895:(gn,at,j)=>{j.d(at,{Do:()=>Oe,ED:()=>Vr,EM:()=>ca,HT:()=>Fe,JF:()=>bo,K0:()=>Ae,Mx:()=>xo,NF:()=>la,O5:()=>Xr,PM:()=>cs,RF:()=>As,S$:()=>Kt,V_:()=>Ve,Ye:()=>Ft,b0:()=>It,bD:()=>Ma,ez:()=>qi,mk:()=>dr,n9:()=>Zs,p6:()=>Ar,q:()=>W,sg:()=>Ai,tP:()=>Ei,w_:()=>Ne});var _=j(4650);let L=null;function W(){return L}function Fe(k){L||(L=k)}class Ne{}const Ae=new _.OlP("DocumentToken");let $e=(()=>{class k{historyGo(U){throw new Error("Not implemented")}}return k.\u0275fac=function(U){return new(U||k)},k.\u0275prov=_.Yz7({token:k,factory:function(){return function Ge(){return(0,_.LFG)(Ie)}()},providedIn:"platform"}),k})();const Ve=new _.OlP("Location Initialized");let Ie=(()=>{class k extends $e{constructor(U){super(),this._doc=U,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return W().getBaseHref(this._doc)}onPopState(U){const ae=W().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("popstate",U,!1),()=>ae.removeEventListener("popstate",U)}onHashChange(U){const ae=W().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("hashchange",U,!1),()=>ae.removeEventListener("hashchange",U)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(U){this._location.pathname=U}pushState(U,ae,xe){De()?this._history.pushState(U,ae,xe):this._location.hash=xe}replaceState(U,ae,xe){De()?this._history.replaceState(U,ae,xe):this._location.hash=xe}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return k.\u0275fac=function(U){return new(U||k)(_.LFG(Ae))},k.\u0275prov=_.Yz7({token:k,factory:function(){return function ke(){return new Ie((0,_.LFG)(Ae))}()},providedIn:"platform"}),k})();function De(){return!!window.history.pushState}function Tt(k,J){if(0==k.length)return J;if(0==J.length)return k;let U=0;return k.endsWith("/")&&U++,J.startsWith("/")&&U++,2==U?k+J.substring(1):1==U?k+J:k+"/"+J}function ut(k){const J=k.match(/#|\?|$/),U=J&&J.index||k.length;return k.slice(0,U-("/"===k[U-1]?1:0))+k.slice(U)}function Ht(k){return k&&"?"!==k[0]?"?"+k:k}let Kt=(()=>{class k{historyGo(U){throw new Error("Not implemented")}}return k.\u0275fac=function(U){return new(U||k)},k.\u0275prov=_.Yz7({token:k,factory:function(){return(0,_.f3M)(It)},providedIn:"root"}),k})();const pt=new _.OlP("appBaseHref");let It=(()=>{class k extends Kt{constructor(U,ae){super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=ae??this._platformLocation.getBaseHrefFromDOM()??(0,_.f3M)(Ae).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return Tt(this._baseHref,U)}path(U=!1){const ae=this._platformLocation.pathname+Ht(this._platformLocation.search),xe=this._platformLocation.hash;return xe&&U?`${ae}${xe}`:ae}pushState(U,ae,xe,wt){const kt=this.prepareExternalUrl(xe+Ht(wt));this._platformLocation.pushState(U,ae,kt)}replaceState(U,ae,xe,wt){const kt=this.prepareExternalUrl(xe+Ht(wt));this._platformLocation.replaceState(U,ae,kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return k.\u0275fac=function(U){return new(U||k)(_.LFG($e),_.LFG(pt,8))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})(),Oe=(()=>{class k extends Kt{constructor(U,ae){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=ae&&(this._baseHref=ae)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let ae=this._platformLocation.hash;return null==ae&&(ae="#"),ae.length>0?ae.substring(1):ae}prepareExternalUrl(U){const ae=Tt(this._baseHref,U);return ae.length>0?"#"+ae:ae}pushState(U,ae,xe,wt){let kt=this.prepareExternalUrl(xe+Ht(wt));0==kt.length&&(kt=this._platformLocation.pathname),this._platformLocation.pushState(U,ae,kt)}replaceState(U,ae,xe,wt){let kt=this.prepareExternalUrl(xe+Ht(wt));0==kt.length&&(kt=this._platformLocation.pathname),this._platformLocation.replaceState(U,ae,kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return k.\u0275fac=function(U){return new(U||k)(_.LFG($e),_.LFG(pt,8))},k.\u0275prov=_.Yz7({token:k,factory:k.\u0275fac}),k})(),Ft=(()=>{class k{constructor(U){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const ae=this._locationStrategy.getBaseHref();this._basePath=function Bt(k){if(new RegExp("^(https?:)?//").test(k)){const[,U]=k.split(/\/\/[^\/]+/);return U}return k}(ut(ze(ae))),this._locationStrategy.onPopState(xe=>{this._subject.emit({url:this.path(!0),pop:!0,state:xe.state,type:xe.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,ae=""){return this.path()==this.normalize(U+Ht(ae))}normalize(U){return k.stripTrailingSlash(function Se(k,J){if(!k||!J.startsWith(k))return J;const U=J.substring(k.length);return""===U||["/",";","?","#"].includes(U[0])?U:J}(this._basePath,ze(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,ae="",xe=null){this._locationStrategy.pushState(xe,"",U,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ht(ae)),xe)}replaceState(U,ae="",xe=null){this._locationStrategy.replaceState(xe,"",U,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+Ht(ae)),xe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){this._locationStrategy.historyGo?.(U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ae=>{this._notifyUrlChangeListeners(ae.url,ae.state)})),()=>{const ae=this._urlChangeListeners.indexOf(U);this._urlChangeListeners.splice(ae,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",ae){this._urlChangeListeners.forEach(xe=>xe(U,ae))}subscribe(U,ae,xe){return this._subject.subscribe({next:U,error:ae,complete:xe})}}return k.normalizeQueryParams=Ht,k.joinWithSlash=Tt,k.stripTrailingSlash=ut,k.\u0275fac=function(U){return new(U||k)(_.LFG(Kt))},k.\u0275prov=_.Yz7({token:k,factory:function(){return function qe(){return new Ft((0,_.LFG)(Kt))}()},providedIn:"root"}),k})();function ze(k){return k.replace(/\/index.html$/,"")}var zt=(()=>((zt=zt||{})[zt.Format=0]="Format",zt[zt.Standalone=1]="Standalone",zt))(),xt=(()=>((xt=xt||{})[xt.Narrow=0]="Narrow",xt[xt.Abbreviated=1]="Abbreviated",xt[xt.Wide=2]="Wide",xt[xt.Short=3]="Short",xt))(),kn=(()=>((kn=kn||{})[kn.Short=0]="Short",kn[kn.Medium=1]="Medium",kn[kn.Long=2]="Long",kn[kn.Full=3]="Full",kn))(),nn=(()=>((nn=nn||{})[nn.Decimal=0]="Decimal",nn[nn.Group=1]="Group",nn[nn.List=2]="List",nn[nn.PercentSign=3]="PercentSign",nn[nn.PlusSign=4]="PlusSign",nn[nn.MinusSign=5]="MinusSign",nn[nn.Exponential=6]="Exponential",nn[nn.SuperscriptingExponent=7]="SuperscriptingExponent",nn[nn.PerMille=8]="PerMille",nn[nn.Infinity=9]="Infinity",nn[nn.NaN=10]="NaN",nn[nn.TimeSeparator=11]="TimeSeparator",nn[nn.CurrencyDecimal=12]="CurrencyDecimal",nn[nn.CurrencyGroup=13]="CurrencyGroup",nn))();function dt(k,J){return Tn((0,_.cg1)(k)[_.wAp.DateFormat],J)}function it(k,J){return Tn((0,_.cg1)(k)[_.wAp.TimeFormat],J)}function ln(k,J){return Tn((0,_.cg1)(k)[_.wAp.DateTimeFormat],J)}function $t(k,J){const U=(0,_.cg1)(k),ae=U[_.wAp.NumberSymbols][J];if(typeof ae>"u"){if(J===nn.CurrencyDecimal)return U[_.wAp.NumberSymbols][nn.Decimal];if(J===nn.CurrencyGroup)return U[_.wAp.NumberSymbols][nn.Group]}return ae}function ur(k){if(!k[_.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${k[_.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Tn(k,J){for(let U=J;U>-1;U--)if(typeof k[U]<"u")return k[U];throw new Error("Locale data API: locale data undefined")}function on(k){const[J,U]=k.split(":");return{hours:+J,minutes:+U}}const ci=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Ri={},er=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ir=(()=>((ir=ir||{})[ir.Short=0]="Short",ir[ir.ShortGMT=1]="ShortGMT",ir[ir.Long=2]="Long",ir[ir.Extended=3]="Extended",ir))(),cn=(()=>((cn=cn||{})[cn.FullYear=0]="FullYear",cn[cn.Month=1]="Month",cn[cn.Date=2]="Date",cn[cn.Hours=3]="Hours",cn[cn.Minutes=4]="Minutes",cn[cn.Seconds=5]="Seconds",cn[cn.FractionalSeconds=6]="FractionalSeconds",cn[cn.Day=7]="Day",cn))(),un=(()=>((un=un||{})[un.DayPeriods=0]="DayPeriods",un[un.Days=1]="Days",un[un.Months=2]="Months",un[un.Eras=3]="Eras",un))();function Ar(k,J,U,ae){let xe=function re(k){if(pe(k))return k;if("number"==typeof k&&!isNaN(k))return new Date(k);if("string"==typeof k){if(k=k.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(k)){const[xe,wt=1,kt=1]=k.split("-").map(jn=>+jn);return Kr(xe,wt-1,kt)}const U=parseFloat(k);if(!isNaN(k-U))return new Date(U);let ae;if(ae=k.match(ci))return function ye(k){const J=new Date(0);let U=0,ae=0;const xe=k[8]?J.setUTCFullYear:J.setFullYear,wt=k[8]?J.setUTCHours:J.setHours;k[9]&&(U=Number(k[9]+k[10]),ae=Number(k[9]+k[11])),xe.call(J,Number(k[1]),Number(k[2])-1,Number(k[3]));const kt=Number(k[4]||0)-U,jn=Number(k[5]||0)-ae,_i=Number(k[6]||0),Jr=Math.floor(1e3*parseFloat("0."+(k[7]||0)));return wt.call(J,kt,jn,_i,Jr),J}(ae)}const J=new Date(k);if(!pe(J))throw new Error(`Unable to convert "${k}" into a date`);return J}(k);J=An(U,J)||J;let jn,kt=[];for(;J;){if(jn=er.exec(J),!jn){kt.push(J);break}{kt=kt.concat(jn.slice(1));const Nr=kt.pop();if(!Nr)break;J=Nr}}let _i=xe.getTimezoneOffset();ae&&(_i=be(ae,_i),xe=function we(k,J,U){const ae=U?-1:1,xe=k.getTimezoneOffset();return function He(k,J){return(k=new Date(k.getTime())).setMinutes(k.getMinutes()+J),k}(k,ae*(be(J,xe)-xe))}(xe,ae,!0));let Jr="";return kt.forEach(Nr=>{const Yn=function ve(k){if(vt[k])return vt[k];let J;switch(k){case"G":case"GG":case"GGG":J=je(un.Eras,xt.Abbreviated);break;case"GGGG":J=je(un.Eras,xt.Wide);break;case"GGGGG":J=je(un.Eras,xt.Narrow);break;case"y":J=gt(cn.FullYear,1,0,!1,!0);break;case"yy":J=gt(cn.FullYear,2,0,!0,!0);break;case"yyy":J=gt(cn.FullYear,3,0,!1,!0);break;case"yyyy":J=gt(cn.FullYear,4,0,!1,!0);break;case"Y":J=ct(1);break;case"YY":J=ct(2,!0);break;case"YYY":J=ct(3);break;case"YYYY":J=ct(4);break;case"M":case"L":J=gt(cn.Month,1,1);break;case"MM":case"LL":J=gt(cn.Month,2,1);break;case"MMM":J=je(un.Months,xt.Abbreviated);break;case"MMMM":J=je(un.Months,xt.Wide);break;case"MMMMM":J=je(un.Months,xt.Narrow);break;case"LLL":J=je(un.Months,xt.Abbreviated,zt.Standalone);break;case"LLLL":J=je(un.Months,xt.Wide,zt.Standalone);break;case"LLLLL":J=je(un.Months,xt.Narrow,zt.Standalone);break;case"w":J=le(1);break;case"ww":J=le(2);break;case"W":J=le(1,!0);break;case"d":J=gt(cn.Date,1);break;case"dd":J=gt(cn.Date,2);break;case"c":case"cc":J=gt(cn.Day,1);break;case"ccc":J=je(un.Days,xt.Abbreviated,zt.Standalone);break;case"cccc":J=je(un.Days,xt.Wide,zt.Standalone);break;case"ccccc":J=je(un.Days,xt.Narrow,zt.Standalone);break;case"cccccc":J=je(un.Days,xt.Short,zt.Standalone);break;case"E":case"EE":case"EEE":J=je(un.Days,xt.Abbreviated);break;case"EEEE":J=je(un.Days,xt.Wide);break;case"EEEEE":J=je(un.Days,xt.Narrow);break;case"EEEEEE":J=je(un.Days,xt.Short);break;case"a":case"aa":case"aaa":J=je(un.DayPeriods,xt.Abbreviated);break;case"aaaa":J=je(un.DayPeriods,xt.Wide);break;case"aaaaa":J=je(un.DayPeriods,xt.Narrow);break;case"b":case"bb":case"bbb":J=je(un.DayPeriods,xt.Abbreviated,zt.Standalone,!0);break;case"bbbb":J=je(un.DayPeriods,xt.Wide,zt.Standalone,!0);break;case"bbbbb":J=je(un.DayPeriods,xt.Narrow,zt.Standalone,!0);break;case"B":case"BB":case"BBB":J=je(un.DayPeriods,xt.Abbreviated,zt.Format,!0);break;case"BBBB":J=je(un.DayPeriods,xt.Wide,zt.Format,!0);break;case"BBBBB":J=je(un.DayPeriods,xt.Narrow,zt.Format,!0);break;case"h":J=gt(cn.Hours,1,-12);break;case"hh":J=gt(cn.Hours,2,-12);break;case"H":J=gt(cn.Hours,1);break;case"HH":J=gt(cn.Hours,2);break;case"m":J=gt(cn.Minutes,1);break;case"mm":J=gt(cn.Minutes,2);break;case"s":J=gt(cn.Seconds,1);break;case"ss":J=gt(cn.Seconds,2);break;case"S":J=gt(cn.FractionalSeconds,1);break;case"SS":J=gt(cn.FractionalSeconds,2);break;case"SSS":J=gt(cn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":J=an(ir.Short);break;case"ZZZZZ":J=an(ir.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":J=an(ir.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":J=an(ir.Long);break;default:return null}return vt[k]=J,J}(Nr);Jr+=Yn?Yn(xe,U,_i):"''"===Nr?"'":Nr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Jr}function Kr(k,J,U){const ae=new Date(0);return ae.setFullYear(k,J,U),ae.setHours(0,0,0),ae}function An(k,J){const U=function _e(k){return(0,_.cg1)(k)[_.wAp.LocaleId]}(k);if(Ri[U]=Ri[U]||{},Ri[U][J])return Ri[U][J];let ae="";switch(J){case"shortDate":ae=dt(k,kn.Short);break;case"mediumDate":ae=dt(k,kn.Medium);break;case"longDate":ae=dt(k,kn.Long);break;case"fullDate":ae=dt(k,kn.Full);break;case"shortTime":ae=it(k,kn.Short);break;case"mediumTime":ae=it(k,kn.Medium);break;case"longTime":ae=it(k,kn.Long);break;case"fullTime":ae=it(k,kn.Full);break;case"short":const xe=An(k,"shortTime"),wt=An(k,"shortDate");ae=Fr(ln(k,kn.Short),[xe,wt]);break;case"medium":const kt=An(k,"mediumTime"),jn=An(k,"mediumDate");ae=Fr(ln(k,kn.Medium),[kt,jn]);break;case"long":const _i=An(k,"longTime"),Jr=An(k,"longDate");ae=Fr(ln(k,kn.Long),[_i,Jr]);break;case"full":const Nr=An(k,"fullTime"),Yn=An(k,"fullDate");ae=Fr(ln(k,kn.Full),[Nr,Yn])}return ae&&(Ri[U][J]=ae),ae}function Fr(k,J){return J&&(k=k.replace(/\{([^}]+)}/g,function(U,ae){return null!=J&&ae in J?J[ae]:U})),k}function Hr(k,J,U="-",ae,xe){let wt="";(k<0||xe&&k<=0)&&(xe?k=1-k:(k=-k,wt=U));let kt=String(k);for(;kt.length<J;)kt="0"+kt;return ae&&(kt=kt.slice(kt.length-J)),wt+kt}function gt(k,J,U=0,ae=!1,xe=!1){return function(wt,kt){let jn=function _n(k,J){switch(k){case cn.FullYear:return J.getFullYear();case cn.Month:return J.getMonth();case cn.Date:return J.getDate();case cn.Hours:return J.getHours();case cn.Minutes:return J.getMinutes();case cn.Seconds:return J.getSeconds();case cn.FractionalSeconds:return J.getMilliseconds();case cn.Day:return J.getDay();default:throw new Error(`Unknown DateType value "${k}".`)}}(k,wt);if((U>0||jn>-U)&&(jn+=U),k===cn.Hours)0===jn&&-12===U&&(jn=12);else if(k===cn.FractionalSeconds)return function zr(k,J){return Hr(k,3).substring(0,J)}(jn,J);const _i=$t(kt,nn.MinusSign);return Hr(jn,J,_i,ae,xe)}}function je(k,J,U=zt.Format,ae=!1){return function(xe,wt){return function At(k,J,U,ae,xe,wt){switch(U){case un.Months:return function Ze(k,J,U){const ae=(0,_.cg1)(k),wt=Tn([ae[_.wAp.MonthsFormat],ae[_.wAp.MonthsStandalone]],J);return Tn(wt,U)}(J,xe,ae)[k.getMonth()];case un.Days:return function Qn(k,J,U){const ae=(0,_.cg1)(k),wt=Tn([ae[_.wAp.DaysFormat],ae[_.wAp.DaysStandalone]],J);return Tn(wt,U)}(J,xe,ae)[k.getDay()];case un.DayPeriods:const kt=k.getHours(),jn=k.getMinutes();if(wt){const Jr=function qn(k){const J=(0,_.cg1)(k);return ur(J),(J[_.wAp.ExtraData][2]||[]).map(ae=>"string"==typeof ae?on(ae):[on(ae[0]),on(ae[1])])}(J),Nr=function or(k,J,U){const ae=(0,_.cg1)(k);ur(ae);const wt=Tn([ae[_.wAp.ExtraData][0],ae[_.wAp.ExtraData][1]],J)||[];return Tn(wt,U)||[]}(J,xe,ae),Yn=Jr.findIndex(Oi=>{if(Array.isArray(Oi)){const[di,us]=Oi,Vo=kt>=di.hours&&jn>=di.minutes,po=kt<us.hours||kt===us.hours&&jn<us.minutes;if(di.hours<us.hours){if(Vo&&po)return!0}else if(Vo||po)return!0}else if(Oi.hours===kt&&Oi.minutes===jn)return!0;return!1});if(-1!==Yn)return Nr[Yn]}return function Kn(k,J,U){const ae=(0,_.cg1)(k),wt=Tn([ae[_.wAp.DayPeriodsFormat],ae[_.wAp.DayPeriodsStandalone]],J);return Tn(wt,U)}(J,xe,ae)[kt<12?0:1];case un.Eras:return function lt(k,J){return Tn((0,_.cg1)(k)[_.wAp.Eras],J)}(J,ae)[k.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${U}`)}}(xe,wt,k,J,U,ae)}}function an(k){return function(J,U,ae){const xe=-1*ae,wt=$t(U,nn.MinusSign),kt=xe>0?Math.floor(xe/60):Math.ceil(xe/60);switch(k){case ir.Short:return(xe>=0?"+":"")+Hr(kt,2,wt)+Hr(Math.abs(xe%60),2,wt);case ir.ShortGMT:return"GMT"+(xe>=0?"+":"")+Hr(kt,1,wt);case ir.Long:return"GMT"+(xe>=0?"+":"")+Hr(kt,2,wt)+":"+Hr(Math.abs(xe%60),2,wt);case ir.Extended:return 0===ae?"Z":(xe>=0?"+":"")+Hr(kt,2,wt)+":"+Hr(Math.abs(xe%60),2,wt);default:throw new Error(`Unknown zone width "${k}"`)}}}const xn=0,Et=4;function te(k){return Kr(k.getFullYear(),k.getMonth(),k.getDate()+(Et-k.getDay()))}function le(k,J=!1){return function(U,ae){let xe;if(J){const wt=new Date(U.getFullYear(),U.getMonth(),1).getDay()-1,kt=U.getDate();xe=1+Math.floor((kt+wt)/7)}else{const wt=te(U),kt=function de(k){const J=Kr(k,xn,1).getDay();return Kr(k,0,1+(J<=Et?Et:Et+7)-J)}(wt.getFullYear()),jn=wt.getTime()-kt.getTime();xe=1+Math.round(jn/6048e5)}return Hr(xe,k,$t(ae,nn.MinusSign))}}function ct(k,J=!1){return function(U,ae){return Hr(te(U).getFullYear(),k,$t(ae,nn.MinusSign),J)}}const vt={};function be(k,J){k=k.replace(/:/g,"");const U=Date.parse("Jan 01, 1970 00:00:00 "+k)/6e4;return isNaN(U)?J:U}function pe(k){return k instanceof Date&&!isNaN(k.valueOf())}function xo(k,J){J=encodeURIComponent(J);for(const U of k.split(";")){const ae=U.indexOf("="),[xe,wt]=-1==ae?[U,""]:[U.slice(0,ae),U.slice(ae+1)];if(xe.trim()===J)return decodeURIComponent(wt)}return null}const Bi=/\s+/,hn=[];let dr=(()=>{class k{constructor(U,ae,xe,wt){this._iterableDiffers=U,this._keyValueDiffers=ae,this._ngEl=xe,this._renderer=wt,this.initialClasses=hn,this.stateMap=new Map}set klass(U){this.initialClasses=null!=U?U.trim().split(Bi):hn}set ngClass(U){this.rawClass="string"==typeof U?U.trim().split(Bi):U}ngDoCheck(){for(const ae of this.initialClasses)this._updateState(ae,!0);const U=this.rawClass;if(Array.isArray(U)||U instanceof Set)for(const ae of U)this._updateState(ae,!0);else if(null!=U)for(const ae of Object.keys(U))this._updateState(ae,Boolean(U[ae]));this._applyStateDiff()}_updateState(U,ae){const xe=this.stateMap.get(U);void 0!==xe?(xe.enabled!==ae&&(xe.changed=!0,xe.enabled=ae),xe.touched=!0):this.stateMap.set(U,{enabled:ae,changed:!0,touched:!0})}_applyStateDiff(){for(const U of this.stateMap){const ae=U[0],xe=U[1];xe.changed?(this._toggleClass(ae,xe.enabled),xe.changed=!1):xe.touched||(xe.enabled&&this._toggleClass(ae,!1),this.stateMap.delete(ae)),xe.touched=!1}}_toggleClass(U,ae){(U=U.trim()).length>0&&U.split(Bi).forEach(xe=>{ae?this._renderer.addClass(this._ngEl.nativeElement,xe):this._renderer.removeClass(this._ngEl.nativeElement,xe)})}}return k.\u0275fac=function(U){return new(U||k)(_.Y36(_.ZZ4),_.Y36(_.aQg),_.Y36(_.SBq),_.Y36(_.Qsj))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),k})();class Lr{constructor(J,U,ae,xe){this.$implicit=J,this.ngForOf=U,this.index=ae,this.count=xe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ai=(()=>{class k{set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}constructor(U,ae,xe){this._viewContainer=U,this._template=ae,this._differs=xe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const ae=this._viewContainer;U.forEachOperation((xe,wt,kt)=>{if(null==xe.previousIndex)ae.createEmbeddedView(this._template,new Lr(xe.item,this._ngForOf,-1,-1),null===kt?void 0:kt);else if(null==kt)ae.remove(null===wt?void 0:wt);else if(null!==wt){const jn=ae.get(wt);ae.move(jn,kt),Tr(jn,xe)}});for(let xe=0,wt=ae.length;xe<wt;xe++){const jn=ae.get(xe).context;jn.index=xe,jn.count=wt,jn.ngForOf=this._ngForOf}U.forEachIdentityChange(xe=>{Tr(ae.get(xe.currentIndex),xe)})}static ngTemplateContextGuard(U,ae){return!0}}return k.\u0275fac=function(U){return new(U||k)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),k})();function Tr(k,J){k.context.$implicit=J.item}let Xr=(()=>{class k{constructor(U,ae){this._viewContainer=U,this._context=new nr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ae}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){bs("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){bs("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,ae){return!0}}return k.\u0275fac=function(U){return new(U||k)(_.Y36(_.s_b),_.Y36(_.Rgc))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),k})();class nr{constructor(){this.$implicit=null,this.ngIf=null}}function bs(k,J){if(J&&!J.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,_.AaK)(J)}'.`)}class lo{constructor(J,U){this._viewContainerRef=J,this._templateRef=U,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(J){J&&!this._created?this.create():!J&&this._created&&this.destroy()}}let As=(()=>{class k{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(U){this._ngSwitch=U,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(U){this._defaultViews.push(U)}_matchCase(U){const ae=U==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||ae,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ae}_updateDefaultCases(U){if(this._defaultViews.length>0&&U!==this._defaultUsed){this._defaultUsed=U;for(const ae of this._defaultViews)ae.enforceState(U)}}}return k.\u0275fac=function(U){return new(U||k)},k.\u0275dir=_.lG2({type:k,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),k})(),Zs=(()=>{class k{constructor(U,ae,xe){this.ngSwitch=xe,xe._addCase(),this._view=new lo(U,ae)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return k.\u0275fac=function(U){return new(U||k)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(As,9))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),k})(),Vr=(()=>{class k{constructor(U,ae,xe){xe._addDefault(new lo(U,ae))}}return k.\u0275fac=function(U){return new(U||k)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(As,9))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngSwitchDefault",""]],standalone:!0}),k})(),Ei=(()=>{class k{constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(U){if(U.ngTemplateOutlet||U.ngTemplateOutletInjector){const ae=this._viewContainerRef;if(this._viewRef&&ae.remove(ae.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:xe,ngTemplateOutletContext:wt,ngTemplateOutletInjector:kt}=this;this._viewRef=ae.createEmbeddedView(xe,wt,kt?{injector:kt}:void 0)}else this._viewRef=null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return k.\u0275fac=function(U){return new(U||k)(_.Y36(_.s_b))},k.\u0275dir=_.lG2({type:k,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[_.TTD]}),k})(),qi=(()=>{class k{}return k.\u0275fac=function(U){return new(U||k)},k.\u0275mod=_.oAB({type:k}),k.\u0275inj=_.cJS({}),k})();const Ma="browser",Oo="server";function la(k){return k===Ma}function cs(k){return k===Oo}let ca=(()=>{class k{}return k.\u0275prov=(0,_.Yz7)({token:k,providedIn:"root",factory:()=>new $a((0,_.LFG)(Ae),window)}),k})();class $a{constructor(J,U){this.document=J,this.window=U,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const U=function zs(k,J){const U=k.getElementById(J)||k.getElementsByName(J)[0];if(U)return U;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const ae=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let xe=ae.currentNode;for(;xe;){const wt=xe.shadowRoot;if(wt){const kt=wt.getElementById(J)||wt.querySelector(`[name="${J}"]`);if(kt)return kt}xe=ae.nextNode()}}return null}(this.document,J);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(J){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=J)}}scrollToElement(J){const U=J.getBoundingClientRect(),ae=U.left+this.window.pageXOffset,xe=U.top+this.window.pageYOffset,wt=this.offset();this.window.scrollTo(ae-wt[0],xe-wt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const J=ua(this.window.history)||ua(Object.getPrototypeOf(this.window.history));return!(!J||!J.writable&&!J.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ua(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class bo{}},529:(gn,at,j)=>{j.d(at,{JF:()=>an,eN:()=>_e});var _=j(6895),L=j(4650),W=j(9646),Fe=j(9751),Ne=j(4351),Ae=j(9300),$e=j(4004);class Ge{}class Ve{}class Ie{constructor(te){this.normalizedNames=new Map,this.lazyUpdate=null,te?this.lazyInit="string"==typeof te?()=>{this.headers=new Map,te.split("\n").forEach(le=>{const ct=le.indexOf(":");if(ct>0){const vt=le.slice(0,ct),ve=vt.toLowerCase(),be=le.slice(ct+1).trim();this.maybeSetNormalizedName(vt,ve),this.headers.has(ve)?this.headers.get(ve).push(be):this.headers.set(ve,[be])}})}:()=>{this.headers=new Map,Object.entries(te).forEach(([le,ct])=>{let vt;if(vt="string"==typeof ct?[ct]:"number"==typeof ct?[ct.toString()]:ct.map(ve=>ve.toString()),vt.length>0){const ve=le.toLowerCase();this.headers.set(ve,vt),this.maybeSetNormalizedName(le,ve)}})}:this.headers=new Map}has(te){return this.init(),this.headers.has(te.toLowerCase())}get(te){this.init();const le=this.headers.get(te.toLowerCase());return le&&le.length>0?le[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(te){return this.init(),this.headers.get(te.toLowerCase())||null}append(te,le){return this.clone({name:te,value:le,op:"a"})}set(te,le){return this.clone({name:te,value:le,op:"s"})}delete(te,le){return this.clone({name:te,value:le,op:"d"})}maybeSetNormalizedName(te,le){this.normalizedNames.has(le)||this.normalizedNames.set(le,te)}init(){this.lazyInit&&(this.lazyInit instanceof Ie?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(te=>this.applyUpdate(te)),this.lazyUpdate=null))}copyFrom(te){te.init(),Array.from(te.headers.keys()).forEach(le=>{this.headers.set(le,te.headers.get(le)),this.normalizedNames.set(le,te.normalizedNames.get(le))})}clone(te){const le=new Ie;return le.lazyInit=this.lazyInit&&this.lazyInit instanceof Ie?this.lazyInit:this,le.lazyUpdate=(this.lazyUpdate||[]).concat([te]),le}applyUpdate(te){const le=te.name.toLowerCase();switch(te.op){case"a":case"s":let ct=te.value;if("string"==typeof ct&&(ct=[ct]),0===ct.length)return;this.maybeSetNormalizedName(te.name,le);const vt=("a"===te.op?this.headers.get(le):void 0)||[];vt.push(...ct),this.headers.set(le,vt);break;case"d":const ve=te.value;if(ve){let be=this.headers.get(le);if(!be)return;be=be.filter(He=>-1===ve.indexOf(He)),0===be.length?(this.headers.delete(le),this.normalizedNames.delete(le)):this.headers.set(le,be)}else this.headers.delete(le),this.normalizedNames.delete(le)}}forEach(te){this.init(),Array.from(this.normalizedNames.keys()).forEach(le=>te(this.normalizedNames.get(le),this.headers.get(le)))}}class ke{encodeKey(te){return Kt(te)}encodeValue(te){return Kt(te)}decodeKey(te){return decodeURIComponent(te)}decodeValue(te){return decodeURIComponent(te)}}const ut=/%(\d[a-f0-9])/gi,Ht={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Kt(de){return encodeURIComponent(de).replace(ut,(te,le)=>Ht[le]??te)}function pt(de){return`${de}`}class It{constructor(te={}){if(this.updates=null,this.cloneFrom=null,this.encoder=te.encoder||new ke,te.fromString){if(te.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Tt(de,te){const le=new Map;return de.length>0&&de.replace(/^\?/,"").split("&").forEach(vt=>{const ve=vt.indexOf("="),[be,He]=-1==ve?[te.decodeKey(vt),""]:[te.decodeKey(vt.slice(0,ve)),te.decodeValue(vt.slice(ve+1))],we=le.get(be)||[];we.push(He),le.set(be,we)}),le}(te.fromString,this.encoder)}else te.fromObject?(this.map=new Map,Object.keys(te.fromObject).forEach(le=>{const ct=te.fromObject[le],vt=Array.isArray(ct)?ct.map(pt):[pt(ct)];this.map.set(le,vt)})):this.map=null}has(te){return this.init(),this.map.has(te)}get(te){this.init();const le=this.map.get(te);return le?le[0]:null}getAll(te){return this.init(),this.map.get(te)||null}keys(){return this.init(),Array.from(this.map.keys())}append(te,le){return this.clone({param:te,value:le,op:"a"})}appendAll(te){const le=[];return Object.keys(te).forEach(ct=>{const vt=te[ct];Array.isArray(vt)?vt.forEach(ve=>{le.push({param:ct,value:ve,op:"a"})}):le.push({param:ct,value:vt,op:"a"})}),this.clone(le)}set(te,le){return this.clone({param:te,value:le,op:"s"})}delete(te,le){return this.clone({param:te,value:le,op:"d"})}toString(){return this.init(),this.keys().map(te=>{const le=this.encoder.encodeKey(te);return this.map.get(te).map(ct=>le+"="+this.encoder.encodeValue(ct)).join("&")}).filter(te=>""!==te).join("&")}clone(te){const le=new It({encoder:this.encoder});return le.cloneFrom=this.cloneFrom||this,le.updates=(this.updates||[]).concat(te),le}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(te=>this.map.set(te,this.cloneFrom.map.get(te))),this.updates.forEach(te=>{switch(te.op){case"a":case"s":const le=("a"===te.op?this.map.get(te.param):void 0)||[];le.push(pt(te.value)),this.map.set(te.param,le);break;case"d":if(void 0===te.value){this.map.delete(te.param);break}{let ct=this.map.get(te.param)||[];const vt=ct.indexOf(pt(te.value));-1!==vt&&ct.splice(vt,1),ct.length>0?this.map.set(te.param,ct):this.map.delete(te.param)}}}),this.cloneFrom=this.updates=null)}}class Ft{constructor(){this.map=new Map}set(te,le){return this.map.set(te,le),this}get(te){return this.map.has(te)||this.map.set(te,te.defaultValue()),this.map.get(te)}delete(te){return this.map.delete(te),this}has(te){return this.map.has(te)}keys(){return this.map.keys()}}function Se(de){return typeof ArrayBuffer<"u"&&de instanceof ArrayBuffer}function ze(de){return typeof Blob<"u"&&de instanceof Blob}function Bt(de){return typeof FormData<"u"&&de instanceof FormData}class nt{constructor(te,le,ct,vt){let ve;if(this.url=le,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=te.toUpperCase(),function qe(de){switch(de){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||vt?(this.body=void 0!==ct?ct:null,ve=vt):ve=ct,ve&&(this.reportProgress=!!ve.reportProgress,this.withCredentials=!!ve.withCredentials,ve.responseType&&(this.responseType=ve.responseType),ve.headers&&(this.headers=ve.headers),ve.context&&(this.context=ve.context),ve.params&&(this.params=ve.params)),this.headers||(this.headers=new Ie),this.context||(this.context=new Ft),this.params){const be=this.params.toString();if(0===be.length)this.urlWithParams=le;else{const He=le.indexOf("?");this.urlWithParams=le+(-1===He?"?":He<le.length-1?"&":"")+be}}else this.params=new It,this.urlWithParams=le}serializeBody(){return null===this.body?null:Se(this.body)||ze(this.body)||Bt(this.body)||function Ot(de){return typeof URLSearchParams<"u"&&de instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof It?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Bt(this.body)?null:ze(this.body)?this.body.type||null:Se(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof It?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(te={}){const le=te.method||this.method,ct=te.url||this.url,vt=te.responseType||this.responseType,ve=void 0!==te.body?te.body:this.body,be=void 0!==te.withCredentials?te.withCredentials:this.withCredentials,He=void 0!==te.reportProgress?te.reportProgress:this.reportProgress;let we=te.headers||this.headers,re=te.params||this.params;const ye=te.context??this.context;return void 0!==te.setHeaders&&(we=Object.keys(te.setHeaders).reduce((pe,he)=>pe.set(he,te.setHeaders[he]),we)),te.setParams&&(re=Object.keys(te.setParams).reduce((pe,he)=>pe.set(he,te.setParams[he]),re)),new nt(le,ct,ve,{params:re,headers:we,context:ye,reportProgress:He,responseType:vt,withCredentials:be})}}var Ye=(()=>((Ye=Ye||{})[Ye.Sent=0]="Sent",Ye[Ye.UploadProgress=1]="UploadProgress",Ye[Ye.ResponseHeader=2]="ResponseHeader",Ye[Ye.DownloadProgress=3]="DownloadProgress",Ye[Ye.Response=4]="Response",Ye[Ye.User=5]="User",Ye))();class zt{constructor(te,le=200,ct="OK"){this.headers=te.headers||new Ie,this.status=void 0!==te.status?te.status:le,this.statusText=te.statusText||ct,this.url=te.url||null,this.ok=this.status>=200&&this.status<300}}class xt extends zt{constructor(te={}){super(te),this.type=Ye.ResponseHeader}clone(te={}){return new xt({headers:te.headers||this.headers,status:void 0!==te.status?te.status:this.status,statusText:te.statusText||this.statusText,url:te.url||this.url||void 0})}}class kn extends zt{constructor(te={}){super(te),this.type=Ye.Response,this.body=void 0!==te.body?te.body:null}clone(te={}){return new kn({body:void 0!==te.body?te.body:this.body,headers:te.headers||this.headers,status:void 0!==te.status?te.status:this.status,statusText:te.statusText||this.statusText,url:te.url||this.url||void 0})}}class nn extends zt{constructor(te){super(te,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${te.url||"(unknown url)"}`:`Http failure response for ${te.url||"(unknown url)"}: ${te.status} ${te.statusText}`,this.error=te.error||null}}function Mr(de,te){return{body:te,headers:de.headers,context:de.context,observe:de.observe,params:de.params,reportProgress:de.reportProgress,responseType:de.responseType,withCredentials:de.withCredentials}}let _e=(()=>{class de{constructor(le){this.handler=le}request(le,ct,vt={}){let ve;if(le instanceof nt)ve=le;else{let we,re;we=vt.headers instanceof Ie?vt.headers:new Ie(vt.headers),vt.params&&(re=vt.params instanceof It?vt.params:new It({fromObject:vt.params})),ve=new nt(le,ct,void 0!==vt.body?vt.body:null,{headers:we,context:vt.context,params:re,reportProgress:vt.reportProgress,responseType:vt.responseType||"json",withCredentials:vt.withCredentials})}const be=(0,W.of)(ve).pipe((0,Ne.b)(we=>this.handler.handle(we)));if(le instanceof nt||"events"===vt.observe)return be;const He=be.pipe((0,Ae.h)(we=>we instanceof kn));switch(vt.observe||"body"){case"body":switch(ve.responseType){case"arraybuffer":return He.pipe((0,$e.U)(we=>{if(null!==we.body&&!(we.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return we.body}));case"blob":return He.pipe((0,$e.U)(we=>{if(null!==we.body&&!(we.body instanceof Blob))throw new Error("Response is not a Blob.");return we.body}));case"text":return He.pipe((0,$e.U)(we=>{if(null!==we.body&&"string"!=typeof we.body)throw new Error("Response is not a string.");return we.body}));default:return He.pipe((0,$e.U)(we=>we.body))}case"response":return He;default:throw new Error(`Unreachable: unhandled observe type ${vt.observe}}`)}}delete(le,ct={}){return this.request("DELETE",le,ct)}get(le,ct={}){return this.request("GET",le,ct)}head(le,ct={}){return this.request("HEAD",le,ct)}jsonp(le,ct){return this.request("JSONP",le,{params:(new It).append(ct,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(le,ct={}){return this.request("OPTIONS",le,ct)}patch(le,ct,vt={}){return this.request("PATCH",le,Mr(vt,ct))}post(le,ct,vt={}){return this.request("POST",le,Mr(vt,ct))}put(le,ct,vt={}){return this.request("PUT",le,Mr(vt,ct))}}return de.\u0275fac=function(le){return new(le||de)(L.LFG(Ge))},de.\u0275prov=L.Yz7({token:de,factory:de.\u0275fac}),de})();function Kn(de,te){return te(de)}function Qn(de,te){return(le,ct)=>te.intercept(le,{handle:vt=>de(vt,ct)})}const lt=new L.OlP("HTTP_INTERCEPTORS"),st=new L.OlP("HTTP_INTERCEPTOR_FNS");function tt(){let de=null;return(te,le)=>(null===de&&(de=((0,L.f3M)(lt,{optional:!0})??[]).reduceRight(Qn,Kn)),de(te,le))}let dt=(()=>{class de extends Ge{constructor(le,ct){super(),this.backend=le,this.injector=ct,this.chain=null}handle(le){if(null===this.chain){const ct=Array.from(new Set(this.injector.get(st)));this.chain=ct.reduceRight((vt,ve)=>function Ze(de,te,le){return(ct,vt)=>le.runInContext(()=>te(ct,ve=>de(ve,vt)))}(vt,ve,this.injector),Kn)}return this.chain(le,ct=>this.backend.handle(ct))}}return de.\u0275fac=function(le){return new(le||de)(L.LFG(Ve),L.LFG(L.lqb))},de.\u0275prov=L.Yz7({token:de,factory:de.\u0275fac}),de})();const or=/^\)\]\}',?\n/;let Tn=(()=>{class de{constructor(le){this.xhrFactory=le}handle(le){if("JSONP"===le.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Fe.y(ct=>{const vt=this.xhrFactory.build();if(vt.open(le.method,le.urlWithParams),le.withCredentials&&(vt.withCredentials=!0),le.headers.forEach((oe,Re)=>vt.setRequestHeader(oe,Re.join(","))),le.headers.has("Accept")||vt.setRequestHeader("Accept","application/json, text/plain, */*"),!le.headers.has("Content-Type")){const oe=le.detectContentTypeHeader();null!==oe&&vt.setRequestHeader("Content-Type",oe)}if(le.responseType){const oe=le.responseType.toLowerCase();vt.responseType="json"!==oe?oe:"text"}const ve=le.serializeBody();let be=null;const He=()=>{if(null!==be)return be;const oe=vt.statusText||"OK",Re=new Ie(vt.getAllResponseHeaders()),rt=function Dr(de){return"responseURL"in de&&de.responseURL?de.responseURL:/^X-Request-URL:/m.test(de.getAllResponseHeaders())?de.getResponseHeader("X-Request-URL"):null}(vt)||le.url;return be=new xt({headers:Re,status:vt.status,statusText:oe,url:rt}),be},we=()=>{let{headers:oe,status:Re,statusText:rt,url:Ut}=He(),vn=null;204!==Re&&(vn=typeof vt.response>"u"?vt.responseText:vt.response),0===Re&&(Re=vn?200:0);let _r=Re>=200&&Re<300;if("json"===le.responseType&&"string"==typeof vn){const ii=vn;vn=vn.replace(or,"");try{vn=""!==vn?JSON.parse(vn):null}catch(Wi){vn=ii,_r&&(_r=!1,vn={error:Wi,text:vn})}}_r?(ct.next(new kn({body:vn,headers:oe,status:Re,statusText:rt,url:Ut||void 0})),ct.complete()):ct.error(new nn({error:vn,headers:oe,status:Re,statusText:rt,url:Ut||void 0}))},re=oe=>{const{url:Re}=He(),rt=new nn({error:oe,status:vt.status||0,statusText:vt.statusText||"Unknown Error",url:Re||void 0});ct.error(rt)};let ye=!1;const pe=oe=>{ye||(ct.next(He()),ye=!0);let Re={type:Ye.DownloadProgress,loaded:oe.loaded};oe.lengthComputable&&(Re.total=oe.total),"text"===le.responseType&&vt.responseText&&(Re.partialText=vt.responseText),ct.next(Re)},he=oe=>{let Re={type:Ye.UploadProgress,loaded:oe.loaded};oe.lengthComputable&&(Re.total=oe.total),ct.next(Re)};return vt.addEventListener("load",we),vt.addEventListener("error",re),vt.addEventListener("timeout",re),vt.addEventListener("abort",re),le.reportProgress&&(vt.addEventListener("progress",pe),null!==ve&&vt.upload&&vt.upload.addEventListener("progress",he)),vt.send(ve),ct.next({type:Ye.Sent}),()=>{vt.removeEventListener("error",re),vt.removeEventListener("abort",re),vt.removeEventListener("load",we),vt.removeEventListener("timeout",re),le.reportProgress&&(vt.removeEventListener("progress",pe),null!==ve&&vt.upload&&vt.upload.removeEventListener("progress",he)),vt.readyState!==vt.DONE&&vt.abort()}})}}return de.\u0275fac=function(le){return new(le||de)(L.LFG(_.JF))},de.\u0275prov=L.Yz7({token:de,factory:de.\u0275fac}),de})();const on=new L.OlP("XSRF_ENABLED"),Li=new L.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),ci=new L.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Ri{}let er=(()=>{class de{constructor(le,ct,vt){this.doc=le,this.platform=ct,this.cookieName=vt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const le=this.doc.cookie||"";return le!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,_.Mx)(le,this.cookieName),this.lastCookieString=le),this.lastToken}}return de.\u0275fac=function(le){return new(le||de)(L.LFG(_.K0),L.LFG(L.Lbi),L.LFG(Li))},de.\u0275prov=L.Yz7({token:de,factory:de.\u0275fac}),de})();function ir(de,te){const le=de.url.toLowerCase();if(!(0,L.f3M)(on)||"GET"===de.method||"HEAD"===de.method||le.startsWith("http://")||le.startsWith("https://"))return te(de);const ct=(0,L.f3M)(Ri).getToken(),vt=(0,L.f3M)(ci);return null!=ct&&!de.headers.has(vt)&&(de=de.clone({headers:de.headers.set(vt,ct)})),te(de)}var un=(()=>((un=un||{})[un.Interceptors=0]="Interceptors",un[un.LegacyInterceptors=1]="LegacyInterceptors",un[un.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",un[un.NoXsrfProtection=3]="NoXsrfProtection",un[un.JsonpSupport=4]="JsonpSupport",un[un.RequestsMadeViaParent=5]="RequestsMadeViaParent",un))();function Ar(de,te){return{\u0275kind:de,\u0275providers:te}}function Kr(...de){const te=[_e,Tn,dt,{provide:Ge,useExisting:dt},{provide:Ve,useExisting:Tn},{provide:st,useValue:ir,multi:!0},{provide:on,useValue:!0},{provide:Ri,useClass:er}];for(const le of de)te.push(...le.\u0275providers);return(0,L.MR2)(te)}const Fr=new L.OlP("LEGACY_INTERCEPTOR_FN");let an=(()=>{class de{}return de.\u0275fac=function(le){return new(le||de)},de.\u0275mod=L.oAB({type:de}),de.\u0275inj=L.cJS({providers:[Kr(Ar(un.LegacyInterceptors,[{provide:Fr,useFactory:tt},{provide:st,useExisting:Fr,multi:!0}]))]}),de})()},4650:(gn,at,j)=>{j.d(at,{$8M:()=>vr,$WT:()=>$r,$Z:()=>Nf,AFp:()=>vw,AaK:()=>Ge,AsE:()=>Ds,CHM:()=>ko,CRH:()=>ME,CZH:()=>M0,CqO:()=>am,D6c:()=>tC,DdM:()=>fu,EJc:()=>M,EpF:()=>sm,F$t:()=>_g,F4k:()=>ty,FYo:()=>Mf,FiY:()=>Vi,Gf:()=>C0,GfV:()=>Um,Gpc:()=>De,Gre:()=>Lv,Hsn:()=>sy,Ikx:()=>yy,JOm:()=>yo,KtG:()=>No,LFG:()=>an,Lbi:()=>n,Lck:()=>h0,MAs:()=>ey,MMx:()=>Im,MR2:()=>O0,NdJ:()=>lm,O4$:()=>Qo,OlP:()=>tn,Oqu:()=>py,P3R:()=>Th,PXZ:()=>WE,Q6J:()=>nm,QGY:()=>om,QbO:()=>u,Qsj:()=>f_,R0b:()=>Os,RDi:()=>wp,Rgc:()=>Br,SBq:()=>rd,Sil:()=>Xe,Suo:()=>sw,TTD:()=>Po,TgZ:()=>Zh,Udp:()=>uy,VKq:()=>By,W1O:()=>RE,X6Q:()=>Lb,XFs:()=>on,Xpm:()=>_r,Xts:()=>Tu,Y36:()=>Bc,YKP:()=>fp,YNc:()=>pg,Yjl:()=>tr,Yz7:()=>$t,Z0I:()=>cr,ZZ4:()=>Xw,_Bn:()=>$l,_UZ:()=>mg,_Vd:()=>iu,_c5:()=>Jb,_uU:()=>sf,aQg:()=>Jw,c2e:()=>f,cJS:()=>Cn,cg1:()=>Pg,dDg:()=>rs,dqk:()=>er,eFA:()=>ab,eJc:()=>Xg,ekj:()=>dy,eoX:()=>Ha,f3M:()=>Et,g9A:()=>a,h0i:()=>Wo,hGG:()=>eC,hij:()=>Tg,iGM:()=>xE,ifc:()=>we,ip1:()=>yw,jDz:()=>oh,kL8:()=>Jd,kcU:()=>Qi,lG2:()=>Bn,lqb:()=>nd,lri:()=>xr,n5z:()=>Bu,n_E:()=>vi,oAB:()=>mt,oJD:()=>sl,oxw:()=>Ov,q4F:()=>Rf,qLn:()=>sd,qOj:()=>Hf,qZA:()=>uc,rWj:()=>Ur,sBO:()=>Vb,s_b:()=>Vu,soG:()=>I,tBr:()=>Na,tb:()=>bl,tp0:()=>mo,uIk:()=>Z_,vHH:()=>pt,vpe:()=>Pn,wAp:()=>yr,xp6:()=>ld,z2F:()=>bw,zSh:()=>xp,zs3:()=>Hd});var _=j(7579),L=j(727),W=j(9751),Fe=j(6451),Ne=j(3099);function Ae(r){for(let o in r)if(r[o]===Ae)return o;throw Error("Could not find renamed property on target object.")}function $e(r,o){for(const c in o)o.hasOwnProperty(c)&&!r.hasOwnProperty(c)&&(r[c]=o[c])}function Ge(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(Ge).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const o=r.toString();if(null==o)return""+o;const c=o.indexOf("\n");return-1===c?o:o.substring(0,c)}function Ve(r,o){return null==r||""===r?null===o?"":o:null==o||""===o?r:r+" "+o}const Ie=Ae({__forward_ref__:Ae});function De(r){return r.__forward_ref__=De,r.toString=function(){return Ge(this())},r}function ke(r){return Tt(r)?r():r}function Tt(r){return"function"==typeof r&&r.hasOwnProperty(Ie)&&r.__forward_ref__===De}function ut(r){return r&&!!r.\u0275providers}const Kt="https://g.co/ng/security#xss";class pt extends Error{constructor(o,c){super(It(o,c)),this.code=o}}function It(r,o){return`NG0${Math.abs(r)}${o?": "+o.trim():""}`}function Oe(r){return"string"==typeof r?r:null==r?"":String(r)}function Bt(r,o){throw new pt(-201,!1)}function st(r,o){null==r&&function tt(r,o,c,h){throw new Error(`ASSERTION ERROR: ${r}`+(null==h?"":` [Expected=> ${c} ${h} ${o} <=Actual]`))}(o,r,null,"!=")}function $t(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function Cn(r){return{providers:r.providers||[],imports:r.imports||[]}}function zn(r){return sr(r,qn)||sr(r,Dr)}function cr(r){return null!==zn(r)}function sr(r,o){return r.hasOwnProperty(o)?r[o]:null}function ur(r){return r&&(r.hasOwnProperty(or)||r.hasOwnProperty(Tn))?r[or]:null}const qn=Ae({\u0275prov:Ae}),or=Ae({\u0275inj:Ae}),Dr=Ae({ngInjectableDef:Ae}),Tn=Ae({ngInjectorDef:Ae});var on=(()=>((on=on||{})[on.Default=0]="Default",on[on.Host=1]="Host",on[on.Self=2]="Self",on[on.SkipSelf=4]="SkipSelf",on[on.Optional=8]="Optional",on))();let Cr;function jr(r){const o=Cr;return Cr=r,o}function ci(r,o,c){const h=zn(r);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&on.Optional?null:void 0!==o?o:void Bt(Ge(r))}const er=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ar={},Kr="__NG_DI_FLAG__",An="ngTempTokenPath",Fr="ngTokenPath",Hr=/\n/gm,zr="\u0275",gt="__source";let _n;function je(r){const o=_n;return _n=r,o}function At(r,o=on.Default){if(void 0===_n)throw new pt(-203,!1);return null===_n?ci(r,void 0,o):_n.get(r,o&on.Optional?null:void 0,o)}function an(r,o=on.Default){return(function Li(){return Cr}()||At)(ke(r),o)}function Et(r,o=on.Default){return an(r,de(o))}function de(r){return typeof r>"u"||"number"==typeof r?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function te(r){const o=[];for(let c=0;c<r.length;c++){const h=ke(r[c]);if(Array.isArray(h)){if(0===h.length)throw new pt(900,!1);let p,v=on.Default;for(let D=0;D<h.length;D++){const P=h[D],B=ct(P);"number"==typeof B?-1===B?p=P.token:v|=B:p=P}o.push(an(p,v))}else o.push(an(h))}return o}function le(r,o){return r[Kr]=o,r.prototype[Kr]=o,r}function ct(r){return r[Kr]}function be(r){return{toString:r}.toString()}var He=(()=>((He=He||{})[He.OnPush=0]="OnPush",He[He.Default=1]="Default",He))(),we=(()=>{return(r=we||(we={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",we;var r})();const re={},ye=[],pe=Ae({\u0275cmp:Ae}),he=Ae({\u0275dir:Ae}),oe=Ae({\u0275pipe:Ae}),Re=Ae({\u0275mod:Ae}),rt=Ae({\u0275fac:Ae}),Ut=Ae({__NG_ELEMENT_ID__:Ae});let vn=0;function _r(r){return be(()=>{const o=aa(r),c={...o,decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===He.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&r.dependencies||null,getStandaloneInjector:null,data:r.data||{},encapsulation:r.encapsulation||we.Emulated,id:"c"+vn++,styles:r.styles||ye,_:null,schemas:r.schemas||null,tView:null};Ao(c);const h=r.dependencies;return c.directiveDefs=xo(h,!1),c.pipeDefs=xo(h,!0),c})}function Wi(r){return En(r)||Sr(r)}function ht(r){return null!==r}function mt(r){return be(()=>({type:r.type,bootstrap:r.bootstrap||ye,declarations:r.declarations||ye,imports:r.imports||ye,exports:r.exports||ye,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function Nn(r,o){if(null==r)return re;const c={};for(const h in r)if(r.hasOwnProperty(h)){let p=r[h],v=p;Array.isArray(p)&&(v=p[1],p=p[0]),c[p]=h,o&&(o[p]=v)}return c}function Bn(r){return be(()=>{const o=aa(r);return Ao(o),o})}function tr(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function En(r){return r[pe]||null}function Sr(r){return r[he]||null}function Rr(r){return r[oe]||null}function $r(r){const o=En(r)||Sr(r)||Rr(r);return null!==o&&o.standalone}function Ti(r,o){const c=r[Re]||null;if(!c&&!0===o)throw new Error(`Type ${Ge(r)} does not have '\u0275mod' property.`);return c}function aa(r){const o={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:o,exportAs:r.exportAs||null,standalone:!0===r.standalone,selectors:r.selectors||ye,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Nn(r.inputs,o),outputs:Nn(r.outputs)}}function Ao(r){r.features?.forEach(o=>o(r))}function xo(r,o){if(!r)return null;const c=o?Rr:Wi;return()=>("function"==typeof r?r():r).map(h=>c(h)).filter(ht)}const Bi=0,hn=1,dr=2,mi=3,is=4,gr=5,Lr=6,Ai=7,Tr=8,Ts=9,Xr=10,nr=11,bs=12,lo=13,As=14,Zs=15,Vr=16,Mo=17,Cs=18,Ki=19,Qs=20,Ei=21,si=22,Xs=1,Qe=2,We=7,ft=8,Ct=9,Wt=10;function lr(r){return Array.isArray(r)&&"object"==typeof r[Xs]}function fr(r){return Array.isArray(r)&&!0===r[Xs]}function kr(r){return 0!=(4&r.flags)}function Ui(r){return r.componentOffset>-1}function $i(r){return 1==(1&r.flags)}function gi(r){return!!r.template}function Sa(r){return 0!=(256&r[dr])}function ss(r,o){return r.hasOwnProperty(rt)?r[rt]:null}class Hs{constructor(o,c,h){this.previousValue=o,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function Po(){return ca}function ca(r){return r.type.prototype.ngOnChanges&&(r.setInput=ua),$a}function $a(){const r=da(this),o=r?.current;if(o){const c=r.previous;if(c===re)r.previous=o;else for(let h in o)c[h]=o[h];r.current=null,this.ngOnChanges(o)}}function ua(r,o,c,h){const p=this.declaredInputs[c],v=da(r)||function bo(r,o){return r[zs]=o}(r,{previous:re,current:null}),D=v.current||(v.current={}),P=v.previous,B=P[p];D[p]=new Hs(B&&B.currentValue,o,P===re),r[h]=o}Po.ngInherit=!0;const zs="__ngSimpleChanges__";function da(r){return r[zs]||null}const os=function(r,o,c){},Yi="svg";function V(r){for(;Array.isArray(r);)r=r[Bi];return r}function Y(r,o){return V(o[r])}function me(r,o){return V(o[r.index])}function Mt(r,o){return r.data[o]}function Jt(r,o){const c=o[r];return lr(c)?c:c[Bi]}function Un(r){return 64==(64&r[dr])}function ji(r,o){return null==o?null:r[o]}function wi(r){r[Cs]=0}function Hi(r,o){r[gr]+=o;let c=r,h=r[mi];for(;null!==h&&(1===o&&1===c[gr]||-1===o&&0===c[gr]);)h[gr]+=o,c=h,h=h[mi]}const Vn={lFrame:no(null),bindingsEnabled:!0};function Lt(){return Vn.bindingsEnabled}function Pt(){return Vn.lFrame.lView}function Er(){return Vn.lFrame.tView}function ko(r){return Vn.lFrame.contextLView=r,r[Tr]}function No(r){return Vn.lFrame.contextLView=null,r}function Zi(){let r=Wa();for(;null!==r&&64===r.type;)r=r.parent;return r}function Wa(){return Vn.lFrame.currentTNode}function eo(r,o){const c=Vn.lFrame;c.currentTNode=r,c.isParent=o}function Zo(){return Vn.lFrame.isParent}function vc(){Vn.lFrame.isParent=!1}function ts(){const r=Vn.lFrame;let o=r.bindingRootIndex;return-1===o&&(o=r.bindingRootIndex=r.tView.bindingStartIndex),o}function Co(){return Vn.lFrame.bindingIndex++}function uo(r){const o=Vn.lFrame,c=o.bindingIndex;return o.bindingIndex=o.bindingIndex+r,c}function Kl(r,o){const c=Vn.lFrame;c.bindingIndex=c.bindingRootIndex=r,_s(o)}function _s(r){Vn.lFrame.currentDirectiveIndex=r}function qa(){return Vn.lFrame.currentQueryIndex}function fl(r){Vn.lFrame.currentQueryIndex=r}function $c(r){const o=r[hn];return 2===o.type?o.declTNode:1===o.type?r[Lr]:null}function Lo(r,o,c){if(c&on.SkipSelf){let p=o,v=r;for(;!(p=p.parent,null!==p||c&on.Host||(p=$c(v),null===p||(v=v[Zs],10&p.type))););if(null===p)return!1;o=p,r=v}const h=Vn.lFrame=Ya();return h.currentTNode=o,h.lView=r,!0}function Ra(r){const o=Ya(),c=r[hn];Vn.lFrame=o,o.currentTNode=c.firstChild,o.lView=r,o.tView=c,o.contextLView=r,o.bindingIndex=c.bindingStartIndex,o.inI18n=!1}function Ya(){const r=Vn.lFrame,o=null===r?null:r.child;return null===o?no(r):o}function no(r){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=o),o}function Za(){const r=Vn.lFrame;return Vn.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Gc=Za;function ql(){const r=Za();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Di(){return Vn.lFrame.selectedIndex}function $s(r){Vn.lFrame.selectedIndex=r}function Gi(){const r=Vn.lFrame;return Mt(r.tView,r.selectedIndex)}function Qo(){Vn.lFrame.currentNamespace=Yi}function Qi(){!function wc(){Vn.lFrame.currentNamespace=null}()}function Xo(r,o){for(let c=o.directiveStart,h=o.directiveEnd;c<h;c++){const v=r.data[c].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:P,ngAfterViewInit:B,ngAfterViewChecked:ee,ngOnDestroy:ue}=v;D&&(r.contentHooks??(r.contentHooks=[])).push(-c,D),P&&((r.contentHooks??(r.contentHooks=[])).push(c,P),(r.contentCheckHooks??(r.contentCheckHooks=[])).push(c,P)),B&&(r.viewHooks??(r.viewHooks=[])).push(-c,B),ee&&((r.viewHooks??(r.viewHooks=[])).push(c,ee),(r.viewCheckHooks??(r.viewCheckHooks=[])).push(c,ee)),null!=ue&&(r.destroyHooks??(r.destroyHooks=[])).push(c,ue)}}function ho(r,o,c){J(r,o,3,c)}function fo(r,o,c,h){(3&r[dr])===c&&J(r,o,c,h)}function k(r,o){let c=r[dr];(3&c)===o&&(c&=2047,c+=1,r[dr]=c)}function J(r,o,c,h){const v=h??-1,D=o.length-1;let P=0;for(let B=void 0!==h?65535&r[Cs]:0;B<D;B++)if("number"==typeof o[B+1]){if(P=o[B],null!=h&&P>=h)break}else o[B]<0&&(r[Cs]+=65536),(P<v||-1==v)&&(U(r,c,o,B),r[Cs]=(4294901760&r[Cs])+B+2),B++}function U(r,o,c,h){const p=c[h]<0,v=c[h+1],P=r[p?-c[h]:c[h]];if(p){if(r[dr]>>11<r[Cs]>>16&&(3&r[dr])===o){r[dr]+=2048,os(4,P,v);try{v.call(P)}finally{os(5,P,v)}}}else{os(4,P,v);try{v.call(P)}finally{os(5,P,v)}}}const ae=-1;class xe{constructor(o,c,h){this.factory=o,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function di(r,o,c){let h=0;for(;h<c.length;){const p=c[h];if("number"==typeof p){if(0!==p)break;h++;const v=c[h++],D=c[h++],P=c[h++];r.setAttribute(o,D,P,v)}else{const v=p,D=c[++h];Vo(v)?r.setProperty(o,v,D):r.setAttribute(o,v,D),h++}}return h}function us(r){return 3===r||4===r||6===r}function Vo(r){return 64===r.charCodeAt(0)}function po(r,o){if(null!==o&&0!==o.length)if(null===r||0===r.length)r=o.slice();else{let c=-1;for(let h=0;h<o.length;h++){const p=o[h];"number"==typeof p?c=p:0===c||ma(r,c,p,null,-1===c||2===c?o[++h]:null)}}return r}function ma(r,o,c,h,p){let v=0,D=r.length;if(-1===o)D=-1;else for(;v<r.length;){const P=r[v++];if("number"==typeof P){if(P===o){D=-1;break}if(P>o){D=v-1;break}}}for(;v<r.length;){const P=r[v];if("number"==typeof P)break;if(P===c){if(null===h)return void(null!==p&&(r[v+1]=p));if(h===r[v+1])return void(r[v+2]=p)}v++,null!==h&&v++,null!==p&&v++}-1!==D&&(r.splice(D,0,o),v=D+1),r.splice(v++,0,c),null!==h&&r.splice(v++,0,h),null!==p&&r.splice(v++,0,p)}function ys(r){return r!==ae}function ro(r){return 32767&r}function Bo(r,o){let c=function ks(r){return r>>16}(r),h=o;for(;c>0;)h=h[Zs],c--;return h}let Il=!0;function pl(r){const o=Il;return Il=r,o}const ns=255,ga=5;let Uo=0;const _a={};function sn(r,o){const c=io(r,o);if(-1!==c)return c;const h=o[hn];h.firstCreatePass&&(r.injectorIndex=o.length,Xi(h.data,r),Xi(o,null),Xi(h.blueprint,null));const p=Kc(r,o),v=r.injectorIndex;if(ys(p)){const D=ro(p),P=Bo(p,o),B=P[hn].data;for(let ee=0;ee<8;ee++)o[v+ee]=P[D+ee]|B[D+ee]}return o[v+8]=p,v}function Xi(r,o){r.push(0,0,0,0,0,0,0,0,o)}function io(r,o){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===o[r.injectorIndex+8]?-1:r.injectorIndex}function Kc(r,o){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let c=0,h=null,p=o;for(;null!==p;){if(h=Tl(p),null===h)return ae;if(c++,p=p[Zs],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return ae}function en(r,o,c){!function Qa(r,o,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(Ut)&&(h=c[Ut]),null==h&&(h=c[Ut]=Uo++);const p=h&ns;o.data[r+(p>>ga)]|=1<<p}(r,o,c)}function Dl(r,o,c){if(c&on.Optional||void 0!==r)return r;Bt()}function Sn(r,o,c,h){if(c&on.Optional&&void 0===h&&(h=null),!(c&(on.Self|on.Host))){const p=r[Ts],v=jr(void 0);try{return p?p.get(o,h,c&on.Optional):ci(o,h,c&on.Optional)}finally{jr(v)}}return Dl(h,0,c)}function Rt(r,o,c,h=on.Default,p){if(null!==r){if(1024&o[dr]){const D=function Oa(r,o,c,h,p){let v=r,D=o;for(;null!==v&&null!==D&&1024&D[dr]&&!(256&D[dr]);){const P=qt(v,D,c,h|on.Self,_a);if(P!==_a)return P;let B=v.parent;if(!B){const ee=D[Ei];if(ee){const ue=ee.get(c,_a,h);if(ue!==_a)return ue}B=Tl(D),D=D[Zs]}v=B}return p}(r,o,c,h,_a);if(D!==_a)return D}const v=qt(r,o,c,h,_a);if(v!==_a)return v}return Sn(o,c,h,p)}function qt(r,o,c,h,p){const v=function Sl(r){if("string"==typeof r)return r.charCodeAt(0)||0;const o=r.hasOwnProperty(Ut)?r[Ut]:void 0;return"number"==typeof o?o>=0?o&ns:Ql:o}(c);if("function"==typeof v){if(!Lo(o,r,h))return h&on.Host?Dl(p,0,h):Sn(o,c,h,p);try{const D=v(h);if(null!=D||h&on.Optional)return D;Bt()}finally{Gc()}}else if("number"==typeof v){let D=null,P=io(r,o),B=ae,ee=h&on.Host?o[Vr][Lr]:null;for((-1===P||h&on.SkipSelf)&&(B=-1===P?Kc(r,o):o[P+8],B!==ae&&Gs(h,!1)?(D=o[hn],P=ro(B),o=Bo(B,o)):P=-1);-1!==P;){const ue=o[hn];if(qc(v,P,ue.data)){const Me=fi(P,o,c,D,h,ee);if(Me!==_a)return Me}B=o[P+8],B!==ae&&Gs(h,o[hn].data[P+8]===ee)&&qc(v,P,o)?(D=ue,P=ro(B),o=Bo(B,o)):P=-1}}return p}function fi(r,o,c,h,p,v){const D=o[hn],P=D.data[r+8],ue=Zl(P,D,c,null==h?Ui(P)&&Il:h!=D&&0!=(3&P.type),p&on.Host&&v===P);return null!==ue?ds(o,D,ue,P):_a}function Zl(r,o,c,h,p){const v=r.providerIndexes,D=o.data,P=1048575&v,B=r.directiveStart,ue=v>>20,et=p?P+ue:r.directiveEnd;for(let St=h?P:P+ue;St<et;St++){const Yt=D[St];if(St<B&&c===Yt||St>=B&&Yt.type===c)return St}if(p){const St=D[B];if(St&&gi(St)&&St.type===c)return B}return null}function ds(r,o,c,h){let p=r[c];const v=o.data;if(function wt(r){return r instanceof xe}(p)){const D=p;D.resolving&&function qe(r,o){const c=o?`. Dependency path: ${o.join(" > ")} > ${r}`:"";throw new pt(-200,`Circular dependency in DI detected for ${r}${c}`)}(function Ft(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Oe(r)}(v[c]));const P=pl(D.canSeeViewProviders);D.resolving=!0;const B=D.injectImpl?jr(D.injectImpl):null;Lo(r,h,on.Default);try{p=r[c]=D.factory(void 0,v,r,h),o.firstCreatePass&&c>=h.directiveStart&&function Ps(r,o,c){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:v}=o.type.prototype;if(h){const D=ca(o);(c.preOrderHooks??(c.preOrderHooks=[])).push(r,D),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(r,D)}p&&(c.preOrderHooks??(c.preOrderHooks=[])).push(0-r,p),v&&((c.preOrderHooks??(c.preOrderHooks=[])).push(r,v),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(r,v))}(c,v[c],o)}finally{null!==B&&jr(B),pl(P),D.resolving=!1,Gc()}}return p}function qc(r,o,c){return!!(c[o+(r>>ga)]&1<<r)}function Gs(r,o){return!(r&on.Self||r&on.Host&&o)}class Xa{constructor(o,c){this._tNode=o,this._lView=c}get(o,c,h){return Rt(this._tNode,this._lView,o,de(h),c)}}function Ql(){return new Xa(Zi(),Pt())}function Bu(r){return be(()=>{const o=r.prototype.constructor,c=o[rt]||bc(o),h=Object.prototype;let p=Object.getPrototypeOf(r.prototype).constructor;for(;p&&p!==h;){const v=p[rt]||bc(p);if(v&&v!==c)return v;p=Object.getPrototypeOf(p)}return v=>new v})}function bc(r){return Tt(r)?()=>{const o=bc(ke(r));return o&&o()}:ss(r)}function Tl(r){const o=r[hn],c=o.type;return 2===c?o.declTNode:1===c?r[Lr]:null}function vr(r){return function Jn(r,o){if("class"===o)return r.classes;if("style"===o)return r.styles;const c=r.attrs;if(c){const h=c.length;let p=0;for(;p<h;){const v=c[p];if(us(v))break;if(0===v)p+=2;else if("number"==typeof v)for(p++;p<h&&"string"==typeof c[p];)p++;else{if(v===o)return c[p+1];p+=2}}}return null}(Zi(),r)}const Cc="__parameters__";function Gr(r,o,c){return be(()=>{const h=function jo(r){return function(...c){if(r){const h=r(...c);for(const p in h)this[p]=h[p]}}}(o);function p(...v){if(this instanceof p)return h.apply(this,v),this;const D=new p(...v);return P.annotation=D,P;function P(B,ee,ue){const Me=B.hasOwnProperty(Cc)?B[Cc]:Object.defineProperty(B,Cc,{value:[]})[Cc];for(;Me.length<=ue;)Me.push(null);return(Me[ue]=Me[ue]||[]).push(D),B}}return c&&(p.prototype=Object.create(c.prototype)),p.prototype.ngMetadataName=r,p.annotationCls=p,p})}class tn{constructor(o,c){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=$t({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function _t(r,o){r.forEach(c=>Array.isArray(c)?_t(c,o):o(c))}function Yc(r,o,c){o>=r.length?r.push(c):r.splice(o,0,c)}function Ws(r,o){return o>=r.length-1?r.pop():r.splice(o,1)[0]}function S(r,o){const c=[];for(let h=0;h<r;h++)c.push(o);return c}function ie(r,o,c){let h=Je(r,o);return h>=0?r[1|h]=c:(h=~h,function N(r,o,c,h){let p=r.length;if(p==o)r.push(c,h);else if(1===p)r.push(h,r[0]),r[0]=c;else{for(p--,r.push(r[p-1],r[p]);p>o;)r[p]=r[p-2],p--;r[o]=c,r[o+1]=h}}(r,h,o,c)),h}function ge(r,o){const c=Je(r,o);if(c>=0)return r[1|c]}function Je(r,o){return function pn(r,o,c){let h=0,p=r.length>>c;for(;p!==h;){const v=h+(p-h>>1),D=r[v<<c];if(o===D)return v<<c;D>o?p=v:h=v+1}return~(p<<c)}(r,o,1)}const Na=le(Gr("Inject",r=>({token:r})),-1),Vi=le(Gr("Optional"),8),mo=le(Gr("SkipSelf"),4);var yo=(()=>((yo=yo||{})[yo.Important=1]="Important",yo[yo.DashCase=2]="DashCase",yo))();const Rl=new Map;let wr=0;const ot="__ngContext__";function Dt(r,o){lr(o)?(r[ot]=o[Qs],function Ol(r){Rl.set(r[Qs],r)}(o)):r[ot]=o}let va;function ic(r,o){return va(r,o)}function $u(r){const o=r[mi];return fr(o)?o[mi]:o}function eu(r){return Sc(r[lo])}function sc(r){return Sc(r[is])}function Sc(r){for(;null!==r&&!fr(r);)r=r[is];return r}function Tc(r,o,c,h,p){if(null!=h){let v,D=!1;fr(h)?v=h:lr(h)&&(D=!0,h=h[Bi]);const P=V(h);0===r&&null!==c?null==p?bh(o,c,P):Fl(o,c,P,p||null,!0):1===r&&null!==c?Fl(o,c,P,p||null,!0):2===r?function yl(r,o,c){const h=xd(r,o);h&&function Ch(r,o,c,h){r.removeChild(o,c,h)}(r,h,o,c)}(o,P,D):3===r&&o.destroyNode(P),null!=v&&function xm(r,o,c,h,p){const v=c[We];v!==V(c)&&Tc(o,r,h,v,p);for(let P=Wt;P<c.length;P++){const B=c[P];vl(B[hn],B,r,o,h,v)}}(o,r,v,c,p)}}function Eh(r,o,c){return r.createElement(o,c)}function wf(r,o){const c=r[Ct],h=c.indexOf(o),p=o[mi];512&o[dr]&&(o[dr]&=-513,Hi(p,-1)),c.splice(h,1)}function yu(r,o){if(r.length<=Wt)return;const c=Wt+o,h=r[c];if(h){const p=h[Mo];null!==p&&p!==r&&wf(p,h),o>0&&(r[c-1][is]=h[is]);const v=Ws(r,Wt+o);!function t_(r,o){vl(r,o,o[nr],2,null,null),o[Bi]=null,o[Lr]=null}(h[hn],h);const D=v[Ki];null!==D&&D.detachView(v[hn]),h[mi]=null,h[is]=null,h[dr]&=-65}return h}function Ad(r,o){if(!(128&o[dr])){const c=o[nr];c.destroyNode&&vl(r,o,c,3,null,null),function Pl(r){let o=r[lo];if(!o)return gl(r[hn],r);for(;o;){let c=null;if(lr(o))c=o[lo];else{const h=o[Wt];h&&(c=h)}if(!c){for(;o&&!o[is]&&o!==r;)lr(o)&&gl(o[hn],o),o=o[mi];null===o&&(o=r),lr(o)&&gl(o[hn],o),c=o&&o[is]}o=c}}(o)}}function gl(r,o){if(!(128&o[dr])){o[dr]&=-65,o[dr]|=128,function Nl(r,o){let c;if(null!=r&&null!=(c=r.destroyHooks))for(let h=0;h<c.length;h+=2){const p=o[c[h]];if(!(p instanceof xe)){const v=c[h+1];if(Array.isArray(v))for(let D=0;D<v.length;D+=2){const P=p[v[D]],B=v[D+1];os(4,P,B);try{B.call(P)}finally{os(5,P,B)}}else{os(4,p,v);try{v.call(p)}finally{os(5,p,v)}}}}}(r,o),function kl(r,o){const c=r.cleanup,h=o[Ai];let p=-1;if(null!==c)for(let v=0;v<c.length-1;v+=2)if("string"==typeof c[v]){const D=c[v+3];D>=0?h[p=D]():h[p=-D].unsubscribe(),v+=2}else{const D=h[p=c[v+1]];c[v].call(D)}if(null!==h){for(let v=p+1;v<h.length;v++)(0,h[v])();o[Ai]=null}}(r,o),1===o[hn].type&&o[nr].destroy();const c=o[Mo];if(null!==c&&fr(o[mi])){c!==o[mi]&&wf(c,o);const h=o[Ki];null!==h&&h.detachView(r)}!function x(r){Rl.delete(r[Qs])}(o)}}function Wu(r,o,c){return function wh(r,o,c){let h=o;for(;null!==h&&40&h.type;)h=(o=h).parent;if(null===h)return c[Bi];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:v}=r.data[h.directiveStart+p];if(v===we.None||v===we.Emulated)return null}return me(h,c)}}(r,o.parent,c)}function Fl(r,o,c,h,p){r.insertBefore(o,c,h,p)}function bh(r,o,c){r.appendChild(o,c)}function Ac(r,o,c,h,p){null!==h?Fl(r,o,c,h,p):bh(r,o,c)}function xd(r,o){return r.parentNode(o)}function Ll(r,o,c){return Eu(r,o,c)}let ai,rl,Ku,qu,Eu=function vu(r,o,c){return 40&r.type?me(r,c):null};function _l(r,o,c,h){const p=Wu(r,h,o),v=o[nr],P=Ll(h.parent||o[Lr],h,o);if(null!=p)if(Array.isArray(c))for(let B=0;B<c.length;B++)Ac(v,p,c[B],P,!1);else Ac(v,p,c,P,!1);void 0!==ai&&ai(v,h,o,c,p)}function xc(r,o){if(null!==o){const c=o.type;if(3&c)return me(o,r);if(4&c)return Mc(-1,r[o.index]);if(8&c){const h=o.child;if(null!==h)return xc(r,h);{const p=r[o.index];return fr(p)?Mc(-1,p):V(p)}}if(32&c)return ic(o,r)()||V(r[o.index]);{const h=bf(r,o);return null!==h?Array.isArray(h)?h[0]:xc($u(r[Vr]),h):xc(r,o.next)}}return null}function bf(r,o){return null!==o?r[Vr][Lr].projection[o.projection]:null}function Mc(r,o){const c=Wt+r+1;if(c<o.length){const h=o[c],p=h[hn].firstChild;if(null!==p)return xc(h,p)}return o[We]}function Ih(r,o,c,h,p,v,D){for(;null!=c;){const P=h[c.index],B=c.type;if(D&&0===o&&(P&&Dt(V(P),h),c.flags|=2),32!=(32&c.flags))if(8&B)Ih(r,o,c.child,h,p,v,!1),Tc(o,r,p,P,v);else if(32&B){const ee=ic(c,h);let ue;for(;ue=ee();)Tc(o,r,p,ue,v);Tc(o,r,p,P,v)}else 16&B?La(r,o,h,c,p,v):Tc(o,r,p,P,v);c=D?c.projectionNext:c.next}}function vl(r,o,c,h,p,v){Ih(c,h,r.firstChild,o,p,v,!1)}function La(r,o,c,h,p,v){const D=c[Vr],B=D[Lr].projection[h.projection];if(Array.isArray(B))for(let ee=0;ee<B.length;ee++)Tc(o,r,p,B[ee],v);else Ih(r,o,B,D[mi],p,v,!0)}function Rc(r,o,c){""===c?r.removeAttribute(o,"class"):r.setAttribute(o,"class",c)}function vp(r,o,c){const{mergedAttrs:h,classes:p,styles:v}=c;null!==h&&di(r,o,h),null!==p&&Rc(r,o,p),null!==v&&function Mm(r,o,c){r.setAttribute(o,"style",c)}(r,o,v)}function Oc(r){return function If(){if(void 0===rl&&(rl=null,er.trustedTypes))try{rl=er.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return rl}()?.createHTML(r)||r}function wp(r){Ku=r}function Rd(){if(void 0===qu&&(qu=null,er.trustedTypes))try{qu=er.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch{}return qu}function ta(r){return Rd()?.createHTML(r)||r}function Dh(r){return Rd()?.createScriptURL(r)||r}class Pc{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kt})`}}function wa(r){return r instanceof Pc?r.changingThisBreaksApplicationSecurity:r}function Cu(r,o){const c=function Yu(r){return r instanceof Pc&&r.getTypeName()||null}(r);if(null!=c&&c!==o){if("ResourceURL"===c&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${c} (see ${Kt})`)}return c===o}class Cp{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const c=(new window.DOMParser).parseFromString(Oc(o),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(o):(c.removeChild(c.firstChild),c)}catch{return null}}}class il{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const c=this.inertDocument.createElement("template");return c.innerHTML=Oc(o),c}}const Sf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function oc(r){return(r=String(r)).match(Sf)?r:"unsafe:"+r}function na(r){const o={};for(const c of r.split(","))o[c]=!0;return o}function Du(...r){const o={};for(const c of r)for(const h in c)c.hasOwnProperty(h)&&(o[h]=!0);return o}const Ip=na("area,br,col,hr,img,wbr"),Dp=na("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zu=na("rp,rt"),y=Du(Ip,Du(Dp,na("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Du(Zu,na("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Du(Zu,Dp)),T=na("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Pe=Du(T,na("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),na("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yt=na("script,style,template");class rn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let c=o.firstChild,h=!0;for(;c;)if(c.nodeType===Node.ELEMENT_NODE?h=this.startElement(c):c.nodeType===Node.TEXT_NODE?this.chars(c.nodeValue):this.sanitizedSomething=!0,h&&c.firstChild)c=c.firstChild;else for(;c;){c.nodeType===Node.ELEMENT_NODE&&this.endElement(c);let p=this.checkClobberedElement(c,c.nextSibling);if(p){c=p;break}c=this.checkClobberedElement(c,c.parentNode)}return this.buf.join("")}startElement(o){const c=o.nodeName.toLowerCase();if(!y.hasOwnProperty(c))return this.sanitizedSomething=!0,!yt.hasOwnProperty(c);this.buf.push("<"),this.buf.push(c);const h=o.attributes;for(let p=0;p<h.length;p++){const v=h.item(p),D=v.name,P=D.toLowerCase();if(!Pe.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let B=v.value;T[P]&&(B=oc(B)),this.buf.push(" ",D,'="',Wn(B),'"')}return this.buf.push(">"),!0}endElement(o){const c=o.nodeName.toLowerCase();y.hasOwnProperty(c)&&!Ip.hasOwnProperty(c)&&(this.buf.push("</"),this.buf.push(c),this.buf.push(">"))}chars(o){this.buf.push(Wn(o))}checkClobberedElement(o,c){if(c&&(o.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return c}}const wn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hn=/([^\#-~ |!])/g;function Wn(r){return r.replace(/&/g,"&amp;").replace(wn,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Hn,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ls;function Qu(r){return"content"in r&&function Tf(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var hs=(()=>((hs=hs||{})[hs.NONE=0]="NONE",hs[hs.HTML=1]="HTML",hs[hs.STYLE=2]="STYLE",hs[hs.SCRIPT=3]="SCRIPT",hs[hs.URL=4]="URL",hs[hs.RESOURCE_URL=5]="RESOURCE_URL",hs))();function sl(r){const o=Sp();return o?ta(o.sanitize(hs.HTML,r)||""):Cu(r,"HTML")?ta(wa(r)):function El(r,o){let c=null;try{ls=ls||function Iu(r){const o=new il(r);return function Sh(){try{return!!(new window.DOMParser).parseFromString(Oc(""),"text/html")}catch{return!1}}()?new Cp(o):o}(r);let h=o?String(o):"";c=ls.getInertBodyElement(h);let p=5,v=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=v,v=c.innerHTML,c=ls.getInertBodyElement(h)}while(h!==v);return Oc((new rn).sanitizeChildren(Qu(c)||c))}finally{if(c){const h=Qu(c)||c;for(;h.firstChild;)h.removeChild(h.firstChild)}}}(function bp(){return void 0!==Ku?Ku:typeof document<"u"?document:void 0}(),Oe(r))}function Su(r){const o=Sp();return o?o.sanitize(hs.URL,r)||"":Cu(r,"URL")?wa(r):oc(Oe(r))}function ac(r){const o=Sp();if(o)return Dh(o.sanitize(hs.RESOURCE_URL,r)||"");if(Cu(r,"ResourceURL"))return Dh(wa(r));throw new pt(904,!1)}function Th(r,o,c){return function km(r,o){return"src"===o&&("embed"===r||"frame"===r||"iframe"===r||"media"===r||"script"===r)||"href"===o&&("base"===r||"link"===r)?ac:Su}(o,c)(r)}function Sp(){const r=Pt();return r&&r[bs]}const Tu=new tn("ENVIRONMENT_INITIALIZER"),Fd=new tn("INJECTOR",-1),Ah=new tn("INJECTOR_DEF_TYPES");class s_{get(o,c=Ar){if(c===Ar){const h=new Error(`NullInjectorError: No provider for ${Ge(o)}!`);throw h.name="NullInjectorError",h}return c}}function O0(r){return{\u0275providers:r}}function Ks(...r){return{\u0275providers:Tp(0,r),\u0275fromNgModule:!0}}function Tp(r,...o){const c=[],h=new Set;let p;return _t(o,v=>{const D=v;ed(D,c,[],h)&&(p||(p=[]),p.push(D))}),void 0!==p&&o_(p,c),c}function o_(r,o){for(let c=0;c<r.length;c++){const{providers:p}=r[c];Ap(p,v=>{o.push(v)})}}function ed(r,o,c,h){if(!(r=ke(r)))return!1;let p=null,v=ur(r);const D=!v&&En(r);if(v||D){if(D&&!D.standalone)return!1;p=r}else{const B=r.ngModule;if(v=ur(B),!v)return!1;p=B}const P=h.has(p);if(D){if(P)return!1;if(h.add(p),D.dependencies){const B="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const ee of B)ed(ee,o,c,h)}}else{if(!v)return!1;{if(null!=v.imports&&!P){let ee;h.add(p);try{_t(v.imports,ue=>{ed(ue,o,c,h)&&(ee||(ee=[]),ee.push(ue))})}finally{}void 0!==ee&&o_(ee,o)}if(!P){const ee=ss(p)||(()=>new p);o.push({provide:p,useFactory:ee,deps:ye},{provide:Ah,useValue:p,multi:!0},{provide:Tu,useValue:()=>an(p),multi:!0})}const B=v.providers;null==B||P||Ap(B,ue=>{o.push(ue)})}}return p!==r&&void 0!==r.providers}function Ap(r,o){for(let c of r)ut(c)&&(c=c.\u0275providers),Array.isArray(c)?Ap(c,o):o(c)}const xh=Ae({provide:String,useValue:Ae});function Ld(r){return null!==r&&"object"==typeof r&&xh in r}function Nc(r){return"function"==typeof r}const xp=new tn("Set Injector scope."),Au={},Mp={};let a_;function td(){return void 0===a_&&(a_=new s_),a_}class nd{}class l_ extends nd{get destroyed(){return this._destroyed}constructor(o,c,h,p){super(),this.parent=c,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rp(o,D=>this.processProvider(D)),this.records.set(Fd,Mh(void 0,this)),p.has("environment")&&this.records.set(nd,Mh(void 0,this));const v=this.records.get(xp);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Ah.multi,ye,on.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const c=je(this),h=jr(void 0);try{return o()}finally{je(c),jr(h)}}get(o,c=Ar,h=on.Default){this.assertNotDestroyed(),h=de(h);const p=je(this),v=jr(void 0);try{if(!(h&on.SkipSelf)){let P=this.records.get(o);if(void 0===P){const B=function d_(r){return"function"==typeof r||"object"==typeof r&&r instanceof tn}(o)&&zn(o);P=B&&this.injectableDefInScope(B)?Mh(c_(o),Au):null,this.records.set(o,P)}if(null!=P)return this.hydrate(o,P)}return(h&on.Self?td():this.parent).get(o,c=h&on.Optional&&c===Ar?null:c)}catch(D){if("NullInjectorError"===D.name){if((D[An]=D[An]||[]).unshift(Ge(o)),p)throw D;return function vt(r,o,c,h){const p=r[An];throw o[gt]&&p.unshift(o[gt]),r.message=function ve(r,o,c,h=null){r=r&&"\n"===r.charAt(0)&&r.charAt(1)==zr?r.slice(2):r;let p=Ge(o);if(Array.isArray(o))p=o.map(Ge).join(" -> ");else if("object"==typeof o){let v=[];for(let D in o)if(o.hasOwnProperty(D)){let P=o[D];v.push(D+":"+("string"==typeof P?JSON.stringify(P):Ge(P)))}p=`{${v.join(", ")}}`}return`${c}${h?"("+h+")":""}[${p}]: ${r.replace(Hr,"\n  ")}`}("\n"+r.message,p,c,h),r[Fr]=p,r[An]=null,r}(D,o,"R3InjectorError",this.source)}throw D}finally{jr(v),je(p)}}resolveInjectorInitializers(){const o=je(this),c=jr(void 0);try{const h=this.get(Tu.multi,ye,on.Self);for(const p of h)p()}finally{je(o),jr(c)}}toString(){const o=[],c=this.records;for(const h of c.keys())o.push(Ge(h));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pt(205,!1)}processProvider(o){let c=Nc(o=ke(o))?o:ke(o&&o.provide);const h=function u_(r){return Ld(r)?Mh(void 0,r.useValue):Mh(Jy(r),Au)}(o);if(Nc(o)||!0!==o.multi)this.records.get(c);else{let p=this.records.get(c);p||(p=Mh(void 0,Au,!0),p.factory=()=>te(p.multi),this.records.set(c,p)),c=o,p.multi.push(o)}this.records.set(c,h)}hydrate(o,c){return c.value===Au&&(c.value=Mp,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Af(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(o){if(!o.providedIn)return!1;const c=ke(o.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function c_(r){const o=zn(r),c=null!==o?o.factory:ss(r);if(null!==c)return c;if(r instanceof tn)throw new pt(204,!1);if(r instanceof Function)return function Vm(r){const o=r.length;if(o>0)throw S(o,"?"),new pt(204,!1);const c=function Dn(r){return r&&(r[qn]||r[Dr])||null}(r);return null!==c?()=>c.factory(r):()=>new r}(r);throw new pt(204,!1)}function Jy(r,o,c){let h;if(Nc(r)){const p=ke(r);return ss(p)||c_(p)}if(Ld(r))h=()=>ke(r.useValue);else if(function Fm(r){return!(!r||!r.useFactory)}(r))h=()=>r.useFactory(...te(r.deps||[]));else if(function Nm(r){return!(!r||!r.useExisting)}(r))h=()=>an(ke(r.useExisting));else{const p=ke(r&&(r.useClass||r.provide));if(!function Vd(r){return!!r.deps}(r))return ss(p)||c_(p);h=()=>new p(...te(r.deps))}return h}function Mh(r,o,c=!1){return{factory:r,value:o,multi:c?[]:void 0}}function Rp(r,o){for(const c of r)Array.isArray(c)?Rp(c,o):c&&ut(c)?Rp(c.\u0275providers,o):o(c)}class Bm{}class Fc{}class Pp{resolveComponentFactory(o){throw function Op(r){const o=Error(`No component factory found for ${Ge(r)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=r,o}(o)}}let iu=(()=>{class r{}return r.NULL=new Pp,r})();function xu(){return lc(Zi(),Pt())}function lc(r,o){return new rd(me(r,o))}let rd=(()=>{class r{constructor(c){this.nativeElement=c}}return r.__NG_ELEMENT_ID__=xu,r})();function xf(r){return r instanceof rd?r.nativeElement:r}class Mf{}let f_=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function ev(){const r=Pt(),c=Jt(Zi().index,r);return(lr(c)?c:r)[nr]}(),r})(),tv=(()=>{class r{}return r.\u0275prov=$t({token:r,providedIn:"root",factory:()=>null}),r})();class Um{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Rf=new Um("15.2.10"),kp={},Of="ngOriginalError";function Ca(r){return r[Of]}class sd{constructor(){this._console=console}handleError(o){const c=this._findOriginalError(o);this._console.error("ERROR",o),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(o){let c=o&&Ca(o);for(;c&&Ca(c);)c=Ca(c);return c||null}}function ad(r){return r instanceof Function?r():r}function jm(r,o,c){let h=r.length;for(;;){const p=r.indexOf(o,c);if(-1===p)return p;if(0===p||r.charCodeAt(p-1)<=32){const v=o.length;if(p+v===h||r.charCodeAt(p+v)<=32)return p}c=p+1}}const y_="ng-template";function Hm(r,o,c){let h=0,p=!0;for(;h<r.length;){let v=r[h++];if("string"==typeof v&&p){const D=r[h++];if(c&&"class"===v&&-1!==jm(D.toLowerCase(),o,0))return!0}else{if(1===v){for(;h<r.length&&"string"==typeof(v=r[h++]);)if(v.toLowerCase()===o)return!0;return!1}"number"==typeof v&&(p=!1)}}return!1}function v_(r){return 4===r.type&&r.value!==y_}function Oh(r,o,c){return o===(4!==r.type||c?r.value:y_)}function Lp(r,o,c){let h=4;const p=r.attrs||[],v=function Vp(r){for(let o=0;o<r.length;o++)if(us(r[o]))return o;return r.length}(p);let D=!1;for(let P=0;P<o.length;P++){const B=o[P];if("number"!=typeof B){if(!D)if(4&h){if(h=2|1&h,""!==B&&!Oh(r,B,c)||""===B&&1===o.length){if(Lc(h))return!1;D=!0}}else{const ee=8&h?B:o[++P];if(8&h&&null!==r.attrs){if(!Hm(r.attrs,ee,c)){if(Lc(h))return!1;D=!0}continue}const Me=sv(8&h?"class":B,p,v_(r),c);if(-1===Me){if(Lc(h))return!1;D=!0;continue}if(""!==ee){let et;et=Me>v?"":p[Me+1].toLowerCase();const St=8&h?et:null;if(St&&-1!==jm(St,ee,0)||2&h&&ee!==et){if(Lc(h))return!1;D=!0}}}}else{if(!D&&!Lc(h)&&!Lc(B))return!1;if(D&&Lc(B))continue;D=!1,h=B|1&h}}return Lc(h)||D}function Lc(r){return 0==(1&r)}function sv(r,o,c,h){if(null===o)return-1;let p=0;if(h||!c){let v=!1;for(;p<o.length;){const D=o[p];if(D===r)return p;if(3===D||6===D)v=!0;else{if(1===D||2===D){let P=o[++p];for(;"string"==typeof P;)P=o[++p];continue}if(4===D)break;if(0===D){p+=4;continue}}p+=v?1:2}return-1}return function zm(r,o){let c=r.indexOf(4);if(c>-1)for(c++;c<r.length;){const h=r[c];if("number"==typeof h)return-1;if(h===o)return c;c++}return-1}(o,r)}function jd(r,o,c=!1){for(let h=0;h<o.length;h++)if(Lp(r,o[h],c))return!0;return!1}function ov(r,o){e:for(let c=0;c<o.length;c++){const h=o[c];if(r.length===h.length){for(let p=0;p<r.length;p++)if(r[p]!==h[p])continue e;return!0}}return!1}function Va(r,o){return r?":not("+o.trim()+")":o}function av(r){let o=r[0],c=1,h=2,p="",v=!1;for(;c<r.length;){let D=r[c];if("string"==typeof D)if(2&h){const P=r[++c];p+="["+D+(P.length>0?'="'+P+'"':"")+"]"}else 8&h?p+="."+D:4&h&&(p+=" "+D);else""!==p&&!Lc(D)&&(o+=Va(v,p),p=""),h=D,v=v||!Lc(h);c++}return""!==p&&(o+=Va(v,p)),o}const ni={};function ld(r){cd(Er(),Pt(),Di()+r,!1)}function cd(r,o,c,h){if(!h)if(3==(3&o[dr])){const v=r.preOrderCheckHooks;null!==v&&ho(o,v,c)}else{const v=r.preOrderHooks;null!==v&&fo(o,v,0,c)}$s(c)}function cv(r,o=null,c=null,h){const p=Wm(r,o,c,h);return p.resolveInjectorInitializers(),p}function Wm(r,o=null,c=null,h,p=new Set){const v=[c||ye,Ks(r)];return h=h||("object"==typeof r?void 0:Ge(r)),new l_(v,o||td(),h||null,p)}let Hd=(()=>{class r{static create(c,h){if(Array.isArray(c))return cv({name:""},h,c,"");{const p=c.name??"";return cv({name:p},c.parent,c.providers,p)}}}return r.THROW_IF_NOT_FOUND=Ar,r.NULL=new s_,r.\u0275prov=$t({token:r,providedIn:"any",factory:()=>an(Fd)}),r.__NG_ELEMENT_ID__=-1,r})();function Bc(r,o=on.Default){const c=Pt();return null===c?an(r,o):Rt(Zi(),c,ke(r),o)}function Nf(){throw new Error("invalid")}function Gp(r,o){const c=r.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const v=c[h+1];if(-1!==v){const D=r.data[v];fl(c[h]),D.contentQueries(2,o[v],v)}}}function Wp(r,o,c,h,p,v,D,P,B,ee,ue){const Me=o.blueprint.slice();return Me[Bi]=p,Me[dr]=76|h,(null!==ue||r&&1024&r[dr])&&(Me[dr]|=1024),wi(Me),Me[mi]=Me[Zs]=r,Me[Tr]=c,Me[Xr]=D||r&&r[Xr],Me[nr]=P||r&&r[nr],Me[bs]=B||r&&r[bs]||null,Me[Ts]=ee||r&&r[Ts]||null,Me[Lr]=v,Me[Qs]=function vf(){return wr++}(),Me[Ei]=ue,Me[Vr]=2==o.type?r[Vr]:Me,Me}function Gd(r,o,c,h,p){let v=r.data[o];if(null===v)v=function Jm(r,o,c,h,p){const v=Wa(),D=Zo(),B=r.data[o]=function T_(r,o,c,h,p,v){return{type:c,index:h,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?v:v&&v.parent,c,o,h,p);return null===r.firstChild&&(r.firstChild=B),null!==v&&(D?null==v.child&&null!==B.parent&&(v.child=B):null===v.next&&(v.next=B,B.prev=v)),B}(r,o,c,h,p),function Ka(){return Vn.lFrame.inI18n}()&&(v.flags|=32);else if(64&v.type){v.type=c,v.value=h,v.attrs=p;const D=function ul(){const r=Vn.lFrame,o=r.currentTNode;return r.isParent?o:o.parent}();v.injectorIndex=null===D?-1:D.injectorIndex}return eo(v,!0),v}function ol(r,o,c,h){if(0===c)return-1;const p=o.length;for(let v=0;v<c;v++)o.push(h),r.blueprint.push(h),r.data.push(null);return p}function eg(r,o,c){Ra(o);try{const h=r.viewQuery;null!==h&&og(1,h,c);const p=r.template;null!==p&&Bh(r,o,p,1,c),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Gp(r,o),r.staticViewQueries&&og(2,r.viewQuery,c);const v=r.components;null!==v&&function Xm(r,o){for(let c=0;c<o.length;c++)N_(r,o[c])}(o,v)}catch(h){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),h}finally{o[dr]&=-5,ql()}}function dd(r,o,c,h){const p=o[dr];if(128!=(128&p)){Ra(o);try{wi(o),function Fo(r){return Vn.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==c&&Bh(r,o,c,2,h);const D=3==(3&p);if(D){const ee=r.preOrderCheckHooks;null!==ee&&ho(o,ee,null)}else{const ee=r.preOrderHooks;null!==ee&&fo(o,ee,0,null),k(o,0)}if(function U0(r){for(let o=eu(r);null!==o;o=sc(o)){if(!o[Qe])continue;const c=o[Ct];for(let h=0;h<c.length;h++){const p=c[h];512&p[dr]||Hi(p[mi],1),p[dr]|=512}}}(o),function k_(r){for(let o=eu(r);null!==o;o=sc(o))for(let c=Wt;c<o.length;c++){const h=o[c],p=h[hn];Un(h)&&dd(p,h,p.template,h[Tr])}}(o),null!==r.contentQueries&&Gp(r,o),D){const ee=r.contentCheckHooks;null!==ee&&ho(o,ee)}else{const ee=r.contentHooks;null!==ee&&fo(o,ee,1),k(o,1)}!function $p(r,o){const c=r.hostBindingOpCodes;if(null!==c)try{for(let h=0;h<c.length;h++){const p=c[h];if(p<0)$s(~p);else{const v=p,D=c[++h],P=c[++h];Kl(D,v),P(2,o[v])}}}finally{$s(-1)}}(r,o);const P=r.components;null!==P&&function I_(r,o){for(let c=0;c<o.length;c++)j0(r,o[c])}(o,P);const B=r.viewQuery;if(null!==B&&og(2,B,h),D){const ee=r.viewCheckHooks;null!==ee&&ho(o,ee)}else{const ee=r.viewHooks;null!==ee&&fo(o,ee,2),k(o,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),o[dr]&=-41,512&o[dr]&&(o[dr]&=-513,Hi(o[mi],-1))}finally{ql()}}}function Bh(r,o,c,h,p){const v=Di(),D=2&h;try{$s(-1),D&&o.length>si&&cd(r,o,si,!1),os(D?2:0,p),c(h,p)}finally{$s(v),os(D?3:1,p)}}function Kp(r,o,c){if(kr(o)){const p=o.directiveEnd;for(let v=o.directiveStart;v<p;v++){const D=r.data[v];D.contentQueries&&D.contentQueries(1,c[v],v)}}}function Uh(r,o,c){Lt()&&(function Ff(r,o,c,h){const p=c.directiveStart,v=c.directiveEnd;Ui(c)&&function P_(r,o,c){const h=me(o,r),p=D_(c),v=r[Xr],D=Bf(r,Wp(r,p,null,c.onPush?32:16,h,o,v,v.createRenderer(h,c),null,null,null));r[o.index]=D}(o,c,r.data[p+c.componentOffset]),r.firstCreatePass||sn(c,o),Dt(h,o);const D=c.initialInputs;for(let P=p;P<v;P++){const B=r.data[P],ee=ds(o,r,P,c);Dt(ee,o),null!==D&&wv(0,P-p,ee,B,0,D),gi(B)&&(Jt(c.index,o)[Tr]=ds(o,r,P,c))}}(r,o,c,me(c,o)),64==(64&c.flags)&&Yp(r,o,c))}function tg(r,o,c=me){const h=o.localNames;if(null!==h){let p=o.index+1;for(let v=0;v<h.length;v+=2){const D=h[v+1],P=-1===D?c(o,r):r[D];r[p++]=P}}}function D_(r){const o=r.tView;return null===o||o.incompleteFirstPass?r.tView=ng(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):o}function ng(r,o,c,h,p,v,D,P,B,ee){const ue=si+h,Me=ue+p,et=function F0(r,o){const c=[];for(let h=0;h<o;h++)c.push(h<r?null:ni);return c}(ue,Me),St="function"==typeof ee?ee():ee;return et[hn]={type:r,blueprint:et,template:c,queries:null,viewQuery:P,declTNode:o,data:et.slice().fill(null,ue),bindingStartIndex:ue,expandoStartIndex:Me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:B,consts:St,incompleteFirstPass:!1}}function mv(r,o,c,h){const p=Zp(o);null===c?p.push(h):(p.push(c),r.firstCreatePass&&hd(r).push(h,p.length-1))}function A_(r,o,c,h){for(let p in r)if(r.hasOwnProperty(p)){c=null===c?{}:c;const v=r[p];null===h?x_(c,o,p,v):h.hasOwnProperty(p)&&x_(c,o,h[p],v)}return c}function x_(r,o,c,h){r.hasOwnProperty(c)?r[c].push(o,h):r[c]=[o,h]}function Ba(r,o,c,h,p,v,D,P){const B=me(o,c);let ue,ee=o.inputs;!P&&null!=ee&&(ue=ee[h])?(Qp(r,c,ue,h,p),Ui(o)&&function ig(r,o){const c=Jt(o,r);16&c[dr]||(c[dr]|=32)}(c,o.index)):3&o.type&&(h=function rg(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(h),p=null!=D?D(p,o.value||"",h):p,v.setProperty(B,h,p))}function qp(r,o,c,h){if(Lt()){const p=null===h?null:{"":-1},v=function yv(r,o){const c=r.directiveRegistry;let h=null,p=null;if(c)for(let v=0;v<c.length;v++){const D=c[v];if(jd(o,D.selectors,!1))if(h||(h=[]),gi(D))if(null!==D.findHostDirectiveDefs){const P=[];p=p||new Map,D.findHostDirectiveDefs(D,P,p),h.unshift(...P,D),Ia(r,o,P.length)}else h.unshift(D),Ia(r,o,0);else p=p||new Map,D.findHostDirectiveDefs?.(D,h,p),h.push(D)}return null===h?null:[h,p]}(r,c);let D,P;null===v?D=P=null:[D,P]=v,null!==D&&O_(r,o,c,D,p,P),p&&function V0(r,o,c){if(o){const h=r.localNames=[];for(let p=0;p<o.length;p+=2){const v=c[o[p+1]];if(null==v)throw new pt(-301,!1);h.push(o[p],v)}}}(c,h,p)}c.mergedAttrs=po(c.mergedAttrs,c.attrs)}function O_(r,o,c,h,p,v){for(let ee=0;ee<h.length;ee++)en(sn(c,o),r,h[ee].type);!function sg(r,o,c){r.flags|=1,r.directiveStart=o,r.directiveEnd=o+c,r.providerIndexes=o}(c,r.data.length,h.length);for(let ee=0;ee<h.length;ee++){const ue=h[ee];ue.providersResolver&&ue.providersResolver(ue)}let D=!1,P=!1,B=ol(r,o,h.length,null);for(let ee=0;ee<h.length;ee++){const ue=h[ee];c.mergedAttrs=po(c.mergedAttrs,ue.hostAttrs),Lf(r,c,o,B,ue),vv(B,ue,p),null!==ue.contentQueries&&(c.flags|=4),(null!==ue.hostBindings||null!==ue.hostAttrs||0!==ue.hostVars)&&(c.flags|=64);const Me=ue.type.prototype;!D&&(Me.ngOnChanges||Me.ngOnInit||Me.ngDoCheck)&&((r.preOrderHooks??(r.preOrderHooks=[])).push(c.index),D=!0),!P&&(Me.ngOnChanges||Me.ngDoCheck)&&((r.preOrderCheckHooks??(r.preOrderCheckHooks=[])).push(c.index),P=!0),B++}!function M_(r,o,c){const p=o.directiveEnd,v=r.data,D=o.attrs,P=[];let B=null,ee=null;for(let ue=o.directiveStart;ue<p;ue++){const Me=v[ue],et=c?c.get(Me):null,Yt=et?et.outputs:null;B=A_(Me.inputs,ue,B,et?et.inputs:null),ee=A_(Me.outputs,ue,ee,Yt);const In=null===B||null===D||v_(o)?null:B0(B,ue,D);P.push(In)}null!==B&&(B.hasOwnProperty("class")&&(o.flags|=8),B.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=P,o.inputs=B,o.outputs=ee}(r,c,v)}function Yp(r,o,c){const h=c.directiveStart,p=c.directiveEnd,v=c.index,D=function Ec(){return Vn.lFrame.currentDirectiveIndex}();try{$s(v);for(let P=h;P<p;P++){const B=r.data[P],ee=o[P];_s(P),(null!==B.hostBindings||0!==B.hostVars||null!==B.hostAttrs)&&L0(B,ee)}}finally{$s(-1),_s(D)}}function L0(r,o){null!==r.hostBindings&&r.hostBindings(1,o)}function Ia(r,o,c){o.componentOffset=c,(r.components??(r.components=[])).push(o.index)}function vv(r,o,c){if(c){if(o.exportAs)for(let h=0;h<o.exportAs.length;h++)c[o.exportAs[h]]=r;gi(o)&&(c[""]=r)}}function Lf(r,o,c,h,p){r.data[h]=p;const v=p.factory||(p.factory=ss(p.type)),D=new xe(v,gi(p),Bc);r.blueprint[h]=D,c[h]=D,function au(r,o,c,h,p){const v=p.hostBindings;if(v){let D=r.hostBindingOpCodes;null===D&&(D=r.hostBindingOpCodes=[]);const P=~o.index;(function _v(r){let o=r.length;for(;o>0;){const c=r[--o];if("number"==typeof c&&c<0)return c}return 0})(D)!=P&&D.push(P),D.push(c,h,v)}}(r,o,h,ol(r,c,p.hostVars,ni),p)}function lu(r,o,c,h,p,v){const D=me(r,o);!function Ev(r,o,c,h,p,v,D){if(null==v)r.removeAttribute(o,p,c);else{const P=null==D?Oe(v):D(v,h||"",p);r.setAttribute(o,p,P,c)}}(o[nr],D,v,r.value,c,h,p)}function wv(r,o,c,h,p,v){const D=v[o];if(null!==D){const P=h.setInput;for(let B=0;B<D.length;){const ee=D[B++],ue=D[B++],Me=D[B++];null!==P?h.setInput(c,Me,ee,ue):c[ue]=Me}}}function B0(r,o,c){let h=null,p=0;for(;p<c.length;){const v=c[p];if(0!==v)if(5!==v){if("number"==typeof v)break;if(r.hasOwnProperty(v)){null===h&&(h=[]);const D=r[v];for(let P=0;P<D.length;P+=2)if(D[P]===o){h.push(v,D[P+1],c[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function bv(r,o,c,h){return[r,!0,!1,o,null,0,h,c,null,null]}function j0(r,o){const c=Jt(o,r);if(Un(c)){const h=c[hn];48&c[dr]?dd(h,c,h.template,c[Tr]):c[gr]>0&&jh(c)}}function jh(r){for(let h=eu(r);null!==h;h=sc(h))for(let p=Wt;p<h.length;p++){const v=h[p];if(Un(v))if(512&v[dr]){const D=v[hn];dd(D,v,D.template,v[Tr])}else v[gr]>0&&jh(v)}const c=r[hn].components;if(null!==c)for(let h=0;h<c.length;h++){const p=Jt(c[h],r);Un(p)&&p[gr]>0&&jh(p)}}function N_(r,o){const c=Jt(o,r),h=c[hn];(function Vf(r,o){for(let c=o.length;c<r.blueprint.length;c++)o.push(r.blueprint[c])})(h,c),eg(h,c,c[Tr])}function Bf(r,o){return r[lo]?r[As][is]=o:r[lo]=o,r[As]=o,o}function Uf(r){for(;r;){r[dr]|=32;const o=$u(r);if(Sa(r)&&!o)return r;r=o}return null}function Hh(r,o,c,h=!0){const p=o[Xr];p.begin&&p.begin();try{dd(r,o,r.template,c)}catch(D){throw h&&Dv(o,D),D}finally{p.end&&p.end()}}function og(r,o,c){fl(0),o(r,c)}function Zp(r){return r[Ai]||(r[Ai]=[])}function hd(r){return r.cleanup||(r.cleanup=[])}function Dv(r,o){const c=r[Ts],h=c?c.get(sd,null):null;h&&h.handleError(o)}function Qp(r,o,c,h,p){for(let v=0;v<c.length;){const D=c[v++],P=c[v++],B=o[D],ee=r.data[D];null!==ee.setInput?ee.setInput(B,p,h,P):B[P]=p}}function al(r,o,c){const h=Y(o,r);!function yp(r,o,c){r.setValue(o,c)}(r[nr],h,c)}function vo(r,o,c){let h=c?r.styles:null,p=c?r.classes:null,v=0;if(null!==o)for(let D=0;D<o.length;D++){const P=o[D];"number"==typeof P?v=P:1==v?p=Ve(p,P):2==v&&(h=Ve(h,P+": "+o[++D]+";"))}c?r.styles=h:r.stylesWithoutHost=h,c?r.classes=p:r.classesWithoutHost=p}function ll(r,o,c,h,p=!1){for(;null!==c;){const v=o[c.index];if(null!==v&&h.push(V(v)),fr(v))for(let P=Wt;P<v.length;P++){const B=v[P],ee=B[hn].firstChild;null!==ee&&ll(B[hn],B,ee,h)}const D=c.type;if(8&D)ll(r,o,c.child,h);else if(32&D){const P=ic(c,o);let B;for(;B=P();)h.push(B)}else if(16&D){const P=bf(o,c);if(Array.isArray(P))h.push(...P);else{const B=$u(o[Vr]);ll(B[hn],B,P,h,!0)}}c=p?c.projectionNext:c.next}return h}class cu{get rootNodes(){const o=this._lView,c=o[hn];return ll(c,o,c.firstChild,[])}constructor(o,c){this._lView=o,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Tr]}set context(o){this._lView[Tr]=o}get destroyed(){return 128==(128&this._lView[dr])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[mi];if(fr(o)){const c=o[ft],h=c?c.indexOf(this):-1;h>-1&&(yu(o,h),Ws(c,h))}this._attachedToViewContainer=!1}Ad(this._lView[hn],this._lView)}onDestroy(o){mv(this._lView[hn],this._lView,null,o)}markForCheck(){Uf(this._cdRefInjectingView||this._lView)}detach(){this._lView[dr]&=-65}reattach(){this._lView[dr]|=64}detectChanges(){Hh(this._lView[hn],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function n_(r,o){vl(r,o,o[nr],2,null,null)}(this._lView[hn],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new pt(902,!1);this._appRef=o}}class ag extends cu{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Hh(o[hn],o,o[Tr],!1)}checkNoChanges(){}get context(){return null}}class lg extends iu{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const c=En(o);return new Xp(c,this.ngModule)}}function L_(r){const o=[];for(let c in r)r.hasOwnProperty(c)&&o.push({propName:r[c],templateName:c});return o}class V_{constructor(o,c){this.injector=o,this.parentInjector=c}get(o,c,h){h=de(h);const p=this.injector.get(o,kp,h);return p!==kp||c===kp?p:this.parentInjector.get(o,c,h)}}class Xp extends Fc{get inputs(){return L_(this.componentDef.inputs)}get outputs(){return L_(this.componentDef.outputs)}constructor(o,c){super(),this.componentDef=o,this.ngModule=c,this.componentType=o.type,this.selector=function Bp(r){return r.map(av).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!c}create(o,c,h,p){let v=(p=p||this.ngModule)instanceof nd?p:p?.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const D=v?new V_(o,v):o,P=D.get(Mf,null);if(null===P)throw new pt(407,!1);const B=D.get(tv,null),ee=P.createRenderer(null,this.componentDef),ue=this.componentDef.selectors[0][0]||"div",Me=h?function S_(r,o,c){return r.selectRootElement(o,c===we.ShadowDom)}(ee,h,this.componentDef.encapsulation):Eh(ee,ue,function jf(r){const o=r.toLowerCase();return"svg"===o?Yi:"math"===o?"math":null}(ue)),et=this.componentDef.onPush?288:272,St=ng(0,null,null,1,0,null,null,null,null,null),Yt=Wp(null,St,null,et,null,null,P,ee,B,D,null);let In,Gn;Ra(Yt);try{const hr=this.componentDef;let Wr,fn=null;hr.findHostDirectiveDefs?(Wr=[],fn=new Map,hr.findHostDirectiveDefs(hr,Wr,fn),Wr.push(hr)):Wr=[hr];const pi=function B_(r,o){const c=r[hn],h=si;return r[h]=o,Gd(c,h,2,"#host",null)}(Yt,Me),Yo=function Av(r,o,c,h,p,v,D,P){const B=p[hn];!function zh(r,o,c,h){for(const p of r)o.mergedAttrs=po(o.mergedAttrs,p.hostAttrs);null!==o.mergedAttrs&&(vo(o,o.mergedAttrs,!0),null!==c&&vp(h,c,o))}(h,r,o,D);const ee=v.createRenderer(o,c),ue=Wp(p,D_(c),null,c.onPush?32:16,p[r.index],r,v,ee,P||null,null,null);return B.firstCreatePass&&Ia(B,r,h.length-1),Bf(p,ue),p[r.index]=ue}(pi,Me,hr,Wr,Yt,P,ee);Gn=Mt(St,si),Me&&function cg(r,o,c,h){if(h)di(r,c,["ng-version",Rf.full]);else{const{attrs:p,classes:v}=function $m(r){const o=[],c=[];let h=1,p=2;for(;h<r.length;){let v=r[h];if("string"==typeof v)2===p?""!==v&&o.push(v,r[++h]):8===p&&c.push(v);else{if(!Lc(p))break;p=v}h++}return{attrs:o,classes:c}}(o.selectors[0]);p&&di(r,c,p),v&&v.length>0&&Rc(r,c,v.join(" "))}}(ee,hr,Me,h),void 0!==c&&function z0(r,o,c){const h=r.projection=[];for(let p=0;p<o.length;p++){const v=c[p];h.push(null!=v?Array.from(v):null)}}(Gn,this.ngContentSelectors,c),In=function H0(r,o,c,h,p,v){const D=Zi(),P=p[hn],B=me(D,p);O_(P,p,D,c,null,h);for(let ue=0;ue<c.length;ue++)Dt(ds(p,P,D.directiveStart+ue,D),p);Yp(P,p,D),B&&Dt(B,p);const ee=ds(p,P,D.directiveStart+D.componentOffset,D);if(r[Tr]=p[Tr]=ee,null!==v)for(const ue of v)ue(ee,o);return Kp(P,D,r),ee}(Yo,hr,Wr,fn,Yt,[U_]),eg(St,Yt,null)}finally{ql()}return new Sv(this.componentType,In,lc(Gn,Yt),Yt,Gn)}}class Sv extends Bm{constructor(o,c,h,p,v){super(),this.location=h,this._rootLView=p,this._tNode=v,this.instance=c,this.hostView=this.changeDetectorRef=new ag(p),this.componentType=o}setInput(o,c){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[o])){const v=this._rootLView;Qp(v[hn],v,p,o,c),Uf(Jt(this._tNode.index,v))}}get injector(){return new Xa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function U_(){const r=Zi();Xo(Pt()[hn],r)}function Hf(r){let o=function j_(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),c=!0;const h=[r];for(;o;){let p;if(gi(r))p=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new pt(903,!1);p=o.\u0275dir}if(p){if(c){h.push(p);const D=r;D.inputs=Jp(r.inputs),D.declaredInputs=Jp(r.declaredInputs),D.outputs=Jp(r.outputs);const P=p.hostBindings;P&&$h(r,P);const B=p.viewQuery,ee=p.contentQueries;if(B&&z_(r,B),ee&&$_(r,ee),$e(r.inputs,p.inputs),$e(r.declaredInputs,p.declaredInputs),$e(r.outputs,p.outputs),gi(p)&&p.data.animation){const ue=r.data;ue.animation=(ue.animation||[]).concat(p.data.animation)}}const v=p.features;if(v)for(let D=0;D<v.length;D++){const P=v[D];P&&P.ngInherit&&P(r),P===Hf&&(c=!1)}}o=Object.getPrototypeOf(o)}!function H_(r){let o=0,c=null;for(let h=r.length-1;h>=0;h--){const p=r[h];p.hostVars=o+=p.hostVars,p.hostAttrs=po(p.hostAttrs,c=po(c,p.hostAttrs))}}(h)}function Jp(r){return r===re?{}:r===ye?[]:r}function z_(r,o){const c=r.viewQuery;r.viewQuery=c?(h,p)=>{o(h,p),c(h,p)}:o}function $_(r,o){const c=r.contentQueries;r.contentQueries=c?(h,p,v)=>{o(h,p,v),c(h,p,v)}:o}function $h(r,o){const c=r.hostBindings;r.hostBindings=c?(h,p)=>{o(h,p),c(h,p)}:o}function Kh(r){return!!q_(r)&&(Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r)}function q_(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Uc(r,o,c){return r[o]=c}function Ua(r,o,c){return!Object.is(r[o],c)&&(r[o]=c,!0)}function Z_(r,o,c,h){const p=Pt();return Ua(p,Co(),o)&&(Er(),lu(Gi(),p,r,o,c,h)),Z_}function $f(r,o,c,h){return Ua(r,Co(),c)?o+Oe(c)+h:ni}function Gf(r,o,c,h,p,v){const P=function qh(r,o,c,h){const p=Ua(r,o,c);return Ua(r,o+1,h)||p}(r,function to(){return Vn.lFrame.bindingIndex}(),c,p);return uo(2),P?o+Oe(c)+h+Oe(p)+v:ni}function pg(r,o,c,h,p,v,D,P){const B=Pt(),ee=Er(),ue=r+si,Me=ee.firstCreatePass?function K0(r,o,c,h,p,v,D,P,B){const ee=o.consts,ue=Gd(o,r,4,D||null,ji(ee,P));qp(o,c,ue,ji(ee,B)),Xo(o,ue);const Me=ue.tView=ng(2,ue,h,p,v,o.directiveRegistry,o.pipeRegistry,null,o.schemas,ee);return null!==o.queries&&(o.queries.template(o,ue),Me.queries=o.queries.embeddedTView(ue)),ue}(ue,ee,B,o,c,h,p,v,D):ee.data[ue];eo(Me,!1);const et=B[nr].createComment("");_l(ee,B,et,Me),Dt(et,B),Bf(B,B[ue]=bv(et,B,et,Me)),$i(Me)&&Uh(ee,B,Me),null!=D&&tg(B,Me,P)}function ey(r){return function Xt(r,o){return r[o]}(function Cd(){return Vn.lFrame.contextLView}(),si+r)}function nm(r,o,c){const h=Pt();return Ua(h,Co(),o)&&Ba(Er(),Gi(),h,r,o,h[nr],c,!1),nm}function rm(r,o,c,h,p){const D=p?"class":"style";Qp(r,c,o.inputs[D],D,h)}function Zh(r,o,c,h){const p=Pt(),v=Er(),D=si+r,P=p[nr],B=v.firstCreatePass?function Yf(r,o,c,h,p,v){const D=o.consts,B=Gd(o,r,2,h,ji(D,p));return qp(o,c,B,ji(D,v)),null!==B.attrs&&vo(B,B.attrs,!1),null!==B.mergedAttrs&&vo(B,B.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,B),B}(D,v,p,o,c,h):v.data[D],ee=p[D]=Eh(P,o,function bi(){return Vn.lFrame.currentNamespace}()),ue=$i(B);return eo(B,!0),vp(P,ee,B),32!=(32&B.flags)&&_l(v,p,ee,B),0===function z(){return Vn.lFrame.elementDepthCount}()&&Dt(ee,p),function H(){Vn.lFrame.elementDepthCount++}(),ue&&(Uh(v,p,B),Kp(v,B,p)),null!==h&&tg(p,B),Zh}function uc(){let r=Zi();Zo()?vc():(r=r.parent,eo(r,!1));const o=r;!function fe(){Vn.lFrame.elementDepthCount--}();const c=Er();return c.firstCreatePass&&(Xo(c,r),kr(r)&&c.queries.elementEnd(r)),null!=o.classesWithoutHost&&function Jr(r){return 0!=(8&r.flags)}(o)&&rm(c,o,Pt(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Nr(r){return 0!=(16&r.flags)}(o)&&rm(c,o,Pt(),o.stylesWithoutHost,!1),uc}function mg(r,o,c,h){return Zh(r,o,c,h),uc(),mg}function sm(){return Pt()}function om(r){return!!r&&"function"==typeof r.then}function ty(r){return!!r&&"function"==typeof r.subscribe}const am=ty;function lm(r,o,c,h){const p=Pt(),v=Er(),D=Zi();return function Mu(r,o,c,h,p,v,D){const P=$i(h),ee=r.firstCreatePass&&hd(r),ue=o[Tr],Me=Zp(o);let et=!0;if(3&h.type||D){const In=me(h,o),Gn=D?D(In):In,hr=Me.length,Wr=D?pi=>D(V(pi[h.index])):h.index;let fn=null;if(!D&&P&&(fn=function Y0(r,o,c,h){const p=r.cleanup;if(null!=p)for(let v=0;v<p.length-1;v+=2){const D=p[v];if(D===c&&p[v+1]===h){const P=o[Ai],B=p[v+2];return P.length>B?P[B]:null}"string"==typeof D&&(v+=2)}return null}(r,o,p,h.index)),null!==fn)(fn.__ngLastListenerFn__||fn).__ngNextListenerFn__=v,fn.__ngLastListenerFn__=v,et=!1;else{v=gg(h,o,ue,v,!1);const pi=c.listen(Gn,p,v);Me.push(v,pi),ee&&ee.push(p,Wr,hr,hr+1)}}else v=gg(h,o,ue,v,!1);const St=h.outputs;let Yt;if(et&&null!==St&&(Yt=St[p])){const In=Yt.length;if(In)for(let Gn=0;Gn<In;Gn+=2){const Yo=o[Yt[Gn]][Yt[Gn+1]].subscribe(v),za=Me.length;Me.push(v,Yo),ee&&ee.push(p,h.index,za,-(za+1))}}}(v,p,p[nr],D,r,o,h),lm}function ry(r,o,c,h){try{return os(6,o,c),!1!==c(h)}catch(p){return Dv(r,p),!1}finally{os(7,o,c)}}function gg(r,o,c,h,p){return function v(D){if(D===Function)return h;Uf(r.componentOffset>-1?Jt(r.index,o):o);let B=ry(o,c,h,D),ee=v.__ngNextListenerFn__;for(;ee;)B=ry(o,c,ee,D)&&B,ee=ee.__ngNextListenerFn__;return p&&!1===B&&(D.preventDefault(),D.returnValue=!1),B}}function Ov(r=1){return function Wc(r){return(Vn.lFrame.contextLView=function Io(r,o){for(;r>0;)o=o[Zs],r--;return o}(r,Vn.lFrame.contextLView))[Tr]}(r)}function iy(r,o){let c=null;const h=function Ph(r){const o=r.attrs;if(null!=o){const c=o.indexOf(5);if(!(1&c))return o[c+1]}return null}(r);for(let p=0;p<o.length;p++){const v=o[p];if("*"!==v){if(null===h?jd(r,v,!0):ov(h,v))return p}else c=p}return c}function _g(r){const o=Pt()[Vr][Lr];if(!o.projection){const h=o.projection=S(r?r.length:1,null),p=h.slice();let v=o.child;for(;null!==v;){const D=r?iy(v,r):0;null!==D&&(p[D]?p[D].projectionNext=v:h[D]=v,p[D]=v),v=v.next}}}function sy(r,o=0,c){const h=Pt(),p=Er(),v=Gd(p,si+r,16,null,c||null);null===v.projection&&(v.projection=o),vc(),32!=(32&v.flags)&&function Cf(r,o,c){La(o[nr],0,o,c,Wu(r,c,o),Ll(c.parent||o[Lr],c,o))}(p,h,v)}function Qf(r,o){return r<<17|o<<2}function wl(r){return r>>17&32767}function Jf(r){return 2|r}function Jh(r){return(131068&r)>>2}function ef(r,o){return-131069&r|o<<2}function ep(r){return 1|r}function hc(r,o,c,h,p){const v=r[c+1],D=null===o;let P=h?wl(v):Jh(v),B=!1;for(;0!==P&&(!1===B||D);){const ue=r[P+1];md(r[P],o)&&(B=!0,r[P+1]=h?ep(ue):Jf(ue)),P=h?wl(ue):Jh(ue)}B&&(r[c+1]=h?Jf(v):ep(v))}function md(r,o){return null===r||null==o||(Array.isArray(r)?r[1]:r)===o||!(!Array.isArray(r)||"string"!=typeof o)&&Je(r,o)>=0}const Rs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Cg(r){return r.substring(Rs.key,Rs.keyEnd)}function tf(r,o){const c=Rs.textEnd;return c===o?-1:(o=Rs.keyEnd=function Q0(r,o,c){for(;o<c&&r.charCodeAt(o)>32;)o++;return o}(r,Rs.key=o,c),Zd(r,o,c))}function Zd(r,o,c){for(;o<c&&r.charCodeAt(o)<=32;)o++;return o}function uy(r,o,c){return fc(r,o,c,!1),uy}function dy(r,o){return fc(r,o,null,!0),dy}function Hl(r,o){for(let c=function dm(r){return function gd(r){Rs.key=0,Rs.keyEnd=0,Rs.value=0,Rs.valueEnd=0,Rs.textEnd=r.length}(r),tf(r,Zd(r,0,Rs.textEnd))}(o);c>=0;c=tf(o,c))ie(r,Cg(o),!0)}function fc(r,o,c,h){const p=Pt(),v=Er(),D=uo(2);v.firstUpdatePass&&np(v,r,D,h),o!==ni&&Ua(p,D,o)&&Fv(v,v.data[Di()],p,p[nr],r,p[D+1]=function pm(r,o){return null==r||""===r||("string"==typeof o?r+=o:"object"==typeof r&&(r=Ge(wa(r)))),r}(o,c),h,D)}function hy(r,o){return o>=r.expandoStartIndex}function np(r,o,c,h){const p=r.data;if(null===p[c+1]){const v=p[Di()],D=hy(r,c);Sg(v,h)&&null===o&&!D&&(o=!1),o=function nf(r,o,c,h){const p=function hl(r){const o=Vn.lFrame.currentDirectiveIndex;return-1===o?null:r[o]}(r);let v=h?o.residualClasses:o.residualStyles;if(null===p)0===(h?o.classBindings:o.styleBindings)&&(c=rf(c=_d(null,r,o,c,h),o.attrs,h),v=null);else{const D=o.directiveStylingLast;if(-1===D||r[D]!==p)if(c=_d(p,r,o,c,h),null===v){let B=function Mi(r,o,c){const h=c?o.classBindings:o.styleBindings;if(0!==Jh(h))return r[wl(h)]}(r,o,h);void 0!==B&&Array.isArray(B)&&(B=_d(null,r,o,B[1],h),B=rf(B,o.attrs,h),function fy(r,o,c,h){r[wl(c?o.classBindings:o.styleBindings)]=h}(r,o,h,B))}else v=function kv(r,o,c){let h;const p=o.directiveEnd;for(let v=1+o.directiveStylingLast;v<p;v++)h=rf(h,r[v].hostAttrs,c);return rf(h,o.attrs,c)}(r,o,h)}return void 0!==v&&(h?o.residualClasses=v:o.residualStyles=v),c}(p,v,o,h),function bg(r,o,c,h,p,v){let D=v?o.classBindings:o.styleBindings,P=wl(D),B=Jh(D);r[h]=c;let ue,ee=!1;if(Array.isArray(c)?(ue=c[1],(null===ue||Je(c,ue)>0)&&(ee=!0)):ue=c,p)if(0!==B){const et=wl(r[P+1]);r[h+1]=Qf(et,P),0!==et&&(r[et+1]=ef(r[et+1],h)),r[P+1]=function Xf(r,o){return 131071&r|o<<17}(r[P+1],h)}else r[h+1]=Qf(P,0),0!==P&&(r[P+1]=ef(r[P+1],h)),P=h;else r[h+1]=Qf(B,0),0===P?P=h:r[B+1]=ef(r[B+1],h),B=h;ee&&(r[h+1]=Jf(r[h+1])),hc(r,ue,h,!0),hc(r,ue,h,!1),function ay(r,o,c,h,p){const v=p?r.residualClasses:r.residualStyles;null!=v&&"string"==typeof o&&Je(v,o)>=0&&(c[h+1]=ep(c[h+1]))}(o,ue,r,h,v),D=Qf(P,B),v?o.classBindings=D:o.styleBindings=D}(p,v,o,c,D,h)}}function _d(r,o,c,h,p){let v=null;const D=c.directiveEnd;let P=c.directiveStylingLast;for(-1===P?P=c.directiveStart:P++;P<D&&(v=o[P],h=rf(h,v.hostAttrs,p),v!==r);)P++;return null!==r&&(c.directiveStylingLast=P),h}function rf(r,o,c){const h=c?1:2;let p=-1;if(null!==o)for(let v=0;v<o.length;v++){const D=o[v];"number"==typeof D?p=D:p===h&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),ie(r,D,!!c||o[++v]))}return void 0===r?null:r}function Fv(r,o,c,h,p,v,D,P){if(!(3&o.type))return;const B=r.data,ee=B[P+1],ue=function Pv(r){return 1==(1&r)}(ee)?fm(B,o,c,p,Jh(ee),D):void 0;uu(ue)||(uu(v)||function Ru(r){return 2==(2&r)}(ee)&&(v=fm(B,null,c,p,P,D)),function ea(r,o,c,h,p){if(o)p?r.addClass(c,h):r.removeClass(c,h);else{let v=-1===h.indexOf("-")?void 0:yo.DashCase;null==p?r.removeStyle(c,h,v):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),v|=yo.Important),r.setStyle(c,h,p,v))}}(h,D,Y(Di(),c),p,v))}function fm(r,o,c,h,p,v){const D=null===o;let P;for(;p>0;){const B=r[p],ee=Array.isArray(B),ue=ee?B[1]:B,Me=null===ue;let et=c[p+1];et===ni&&(et=Me?ye:void 0);let St=Me?ge(et,h):ue===h?et:void 0;if(ee&&!uu(St)&&(St=ge(B,h)),uu(St)&&(P=St,D))return P;const Yt=r[p+1];p=D?wl(Yt):Jh(Yt)}if(null!==o){let B=v?o.residualClasses:o.residualStyles;null!=B&&(P=ge(B,h))}return P}function uu(r){return void 0!==r}function Sg(r,o){return 0!=(r.flags&(o?8:16))}function sf(r,o=""){const c=Pt(),h=Er(),p=r+si,v=h.firstCreatePass?Gd(h,p,1,o,null):h.data[p],D=c[p]=function Gu(r,o){return r.createText(o)}(c[nr],o);_l(h,c,D,v),eo(v,!1)}function py(r){return Tg("",r,""),py}function Tg(r,o,c){const h=Pt(),p=$f(h,r,o,c);return p!==ni&&al(h,Di(),p),Tg}function Ds(r,o,c,h,p){const v=Pt(),D=Gf(v,r,o,c,h,p);return D!==ni&&al(v,Di(),D),Ds}function Lv(r,o,c){!function jc(r,o,c,h){const p=Er(),v=uo(2);p.firstUpdatePass&&np(p,null,v,h);const D=Pt();if(c!==ni&&Ua(D,v,c)){const P=p.data[Di()];if(Sg(P,h)&&!hy(p,v)){let B=h?P.classesWithoutHost:P.stylesWithoutHost;null!==B&&(c=Ve(B,c||"")),rm(p,P,D,c,h)}else!function Nv(r,o,c,h,p,v,D,P){p===ni&&(p=ye);let B=0,ee=0,ue=0<p.length?p[0]:null,Me=0<v.length?v[0]:null;for(;null!==ue||null!==Me;){const et=B<p.length?p[B+1]:void 0,St=ee<v.length?v[ee+1]:void 0;let In,Yt=null;ue===Me?(B+=2,ee+=2,et!==St&&(Yt=Me,In=St)):null===Me||null!==ue&&ue<Me?(B+=2,Yt=ue):(ee+=2,Yt=Me,In=St),null!==Yt&&Fv(r,o,c,h,Yt,In,D,P),ue=B<p.length?p[B]:null,Me=ee<v.length?v[ee]:null}}(p,P,D,D[nr],D[v+1],D[v+1]=function Ls(r,o,c){if(null==c||""===c)return ye;const h=[],p=wa(c);if(Array.isArray(p))for(let v=0;v<p.length;v++)r(h,p[v],!0);else if("object"==typeof p)for(const v in p)p.hasOwnProperty(v)&&r(h,v,p[v]);else"string"==typeof p&&o(h,p);return h}(r,o,c),h,v)}}(ie,Hl,$f(Pt(),r,o,c),!0)}function yy(r,o,c){const h=Pt();return Ua(h,Co(),o)&&Ba(Er(),Gi(),h,r,o,h[nr],c,!0),yy}const vd=void 0;var Og=["en",[["a","p"],["AM","PM"],vd],[["AM","PM"],vd,vd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vd,"{1} 'at' {0}",vd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zl(r){const c=Math.floor(Math.abs(r)),h=r.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let cl={};function Pg(r){const o=function Wv(r){return r.toLowerCase().replace(/_/g,"-")}(r);let c=Gv(o);if(c)return c;const h=o.split("-")[0];if(c=Gv(h),c)return c;if("en"===h)return Og;throw new pt(701,!1)}function Jd(r){return Pg(r)[yr.PluralCase]}function Gv(r){return r in cl||(cl[r]=er.ng&&er.ng.common&&er.ng.common.locales&&er.ng.common.locales[r]),cl[r]}var yr=(()=>((yr=yr||{})[yr.LocaleId=0]="LocaleId",yr[yr.DayPeriodsFormat=1]="DayPeriodsFormat",yr[yr.DayPeriodsStandalone=2]="DayPeriodsStandalone",yr[yr.DaysFormat=3]="DaysFormat",yr[yr.DaysStandalone=4]="DaysStandalone",yr[yr.MonthsFormat=5]="MonthsFormat",yr[yr.MonthsStandalone=6]="MonthsStandalone",yr[yr.Eras=7]="Eras",yr[yr.FirstDayOfWeek=8]="FirstDayOfWeek",yr[yr.WeekendRange=9]="WeekendRange",yr[yr.DateFormat=10]="DateFormat",yr[yr.TimeFormat=11]="TimeFormat",yr[yr.DateTimeFormat=12]="DateTimeFormat",yr[yr.NumberSymbols=13]="NumberSymbols",yr[yr.NumberFormats=14]="NumberFormats",yr[yr.CurrencyCode=15]="CurrencyCode",yr[yr.CurrencySymbol=16]="CurrencySymbol",yr[yr.CurrencyName=17]="CurrencyName",yr[yr.Currencies=18]="Currencies",yr[yr.Directionality=19]="Directionality",yr[yr.PluralCase=20]="PluralCase",yr[yr.ExtraData=21]="ExtraData",yr))();const ku="en-US";let qv=ku;function ky(r,o,c,h,p){if(r=ke(r),Array.isArray(r))for(let v=0;v<r.length;v++)ky(r[v],o,c,h,p);else{const v=Er(),D=Pt();let P=Nc(r)?r:ke(r.provide),B=Jy(r);const ee=Zi(),ue=1048575&ee.providerIndexes,Me=ee.directiveStart,et=ee.providerIndexes>>20;if(Nc(r)||!r.multi){const St=new xe(B,p,Bc),Yt=hp(P,o,p?ue:ue+et,Me);-1===Yt?(en(sn(ee,D),v,P),Ny(v,r,o.length),o.push(P),ee.directiveStart++,ee.directiveEnd++,p&&(ee.providerIndexes+=1048576),c.push(St),D.push(St)):(c[Yt]=St,D[Yt]=St)}else{const St=hp(P,o,ue+et,Me),Yt=hp(P,o,ue,ue+et),Gn=Yt>=0&&c[Yt];if(p&&!Gn||!p&&!(St>=0&&c[St])){en(sn(ee,D),v,P);const hr=function ja(r,o,c,h,p){const v=new xe(r,c,Bc);return v.multi=[],v.index=o,v.componentProviders=0,Fy(v,p,h&&!c),v}(p?li:Ly,c.length,p,h,B);!p&&Gn&&(c[Yt].providerFactory=hr),Ny(v,r,o.length,0),o.push(P),ee.directiveStart++,ee.directiveEnd++,p&&(ee.providerIndexes+=1048576),c.push(hr),D.push(hr)}else Ny(v,r,St>-1?St:Yt,Fy(c[p?Yt:St],B,!p&&h));!p&&h&&Gn&&c[Yt].componentProviders++}}}function Ny(r,o,c,h){const p=Nc(o),v=function Lm(r){return!!r.useClass}(o);if(p||v){const B=(v?ke(o.useClass):o).prototype.ngOnDestroy;if(B){const ee=r.destroyHooks||(r.destroyHooks=[]);if(!p&&o.multi){const ue=ee.indexOf(c);-1===ue?ee.push(c,[h,B]):ee[ue+1].push(h,B)}else ee.push(c,B)}}}function Fy(r,o,c){return c&&r.componentProviders++,r.multi.push(o)-1}function hp(r,o,c,h){for(let p=c;p<h;p++)if(o[p]===r)return p;return-1}function Ly(r,o,c,h){return Hc(this.multi,[])}function li(r,o,c,h){const p=this.multi;let v;if(this.providerFactory){const D=this.providerFactory.componentProviders,P=ds(c,c[hn],this.providerFactory.index,h);v=P.slice(0,D),Hc(p,v);for(let B=D;B<P.length;B++)v.push(P[B])}else v=[],Hc(p,v);return v}function Hc(r,o){for(let c=0;c<r.length;c++)o.push((0,r[c])());return o}function $l(r,o=[]){return c=>{c.providersResolver=(h,p)=>function Gg(r,o,c){const h=Er();if(h.firstCreatePass){const p=gi(r);ky(c,h.data,h.blueprint,p,!0),ky(o,h.data,h.blueprint,p,!1)}}(h,p?p(r):r,o)}}class Wo{}class fp{}function h0(r,o){return new df(r,o??null)}class df extends Wo{constructor(o,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new lg(this);const h=Ti(o);this._bootstrapComponents=ad(h.bootstrap),this._r3Injector=Wm(o,c,[{provide:Wo,useValue:this},{provide:iu,useValue:this.componentFactoryResolver}],Ge(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ko extends fp{constructor(o){super(),this.moduleType=o}create(o){return new df(this.moduleType,o)}}class Wg extends Wo{constructor(o,c,h){super(),this.componentFactoryResolver=new lg(this),this.instance=null;const p=new l_([...o,{provide:Wo,useValue:this},{provide:iu,useValue:this.componentFactoryResolver}],c||td(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Im(r,o,c=null){return new Wg(r,o,c).injector}let hf=(()=>{class r{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const h=Tp(0,c.type),p=h.length>0?Im([h],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,p)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return r.\u0275prov=$t({token:r,providedIn:"environment",factory:()=>new r(an(nd))}),r})();function oh(r){r.getStandaloneInjector=o=>o.get(hf).getOrCreateStandaloneInjector(r)}function fu(r,o,c){const h=ts()+r,p=Pt();return p[h]===ni?Uc(p,h,c?o.call(c):o()):function em(r,o){return r[o]}(p,h)}function By(r,o,c,h){return function i(r,o,c,h,p,v){const D=o+c;return Ua(r,D,p)?Uc(r,D+1,v?h.call(v,p):h(p)):function lh(r,o){const c=r[o];return c===ni?void 0:c}(r,D+1)}(Pt(),ts(),r,o,c,h)}function Mn(r){return o=>{setTimeout(r,void 0,o)}}const Pn=class mn extends _.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,c,h){let p=o,v=c||(()=>null),D=h;if(o&&"object"==typeof o){const B=o;p=B.next?.bind(B),v=B.error?.bind(B),D=B.complete?.bind(B)}this.__isAsync&&(v=Mn(v),p&&(p=Mn(p)),D&&(D=Mn(D)));const P=super.subscribe({next:p,error:v,complete:D});return o instanceof L.w0&&o.add(P),P}};function ri(){return this._results[Symbol.iterator]()}class vi{get changes(){return this._changes||(this._changes=new Pn)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=vi.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=ri)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,c){return this._results.reduce(o,c)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,c){const h=this;h.dirty=!1;const p=function zo(r){return r.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function ka(r,o,c){if(r.length!==o.length)return!1;for(let h=0;h<r.length;h++){let p=r[h],v=o[h];if(c&&(p=c(p),v=c(v)),v!==p)return!1}return!0}(h._results,p,c))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Br=(()=>{class r{}return r.__NG_ELEMENT_ID__=Es,r})();const Vs=Br,Ss=class extends Vs{constructor(o,c,h){super(),this._declarationLView=o,this._declarationTContainer=c,this.elementRef=h}createEmbeddedView(o,c){const h=this._declarationTContainer.tView,p=Wp(this._declarationLView,h,o,16,null,h.declTNode,null,null,null,null,c||null);p[Mo]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[Ki];return null!==D&&(p[Ki]=D.createEmbeddedView(h)),eg(h,p,o),new cu(p)}};function Es(){return qo(Zi(),Pt())}function qo(r,o){return 4&r.type?new Ss(o,r,lc(r,o)):null}let Vu=(()=>{class r{}return r.__NG_ELEMENT_ID__=zy,r})();function zy(){return rw(Zi(),Pt())}const nw=Vu,DE=class extends nw{constructor(o,c,h){super(),this._lContainer=o,this._hostTNode=c,this._hostLView=h}get element(){return lc(this._hostTNode,this._hostLView)}get injector(){return new Xa(this._hostTNode,this._hostLView)}get parentInjector(){const o=Kc(this._hostTNode,this._hostLView);if(ys(o)){const c=Bo(o,this._hostLView),h=ro(o);return new Xa(c[hn].data[h+8],c)}return new Xa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const c=SE(this._lContainer);return null!==c&&c[o]||null}get length(){return this._lContainer.length-Wt}createEmbeddedView(o,c,h){let p,v;"number"==typeof h?p=h:null!=h&&(p=h.index,v=h.injector);const D=o.createEmbeddedView(c||{},v);return this.insert(D,p),D}createComponent(o,c,h,p,v){const D=o&&!function xl(r){return"function"==typeof r}(o);let P;if(D)P=c;else{const Me=c||{};P=Me.index,h=Me.injector,p=Me.projectableNodes,v=Me.environmentInjector||Me.ngModuleRef}const B=D?o:new Xp(En(o)),ee=h||this.parentInjector;if(!v&&null==B.ngModule){const et=(D?ee:this.parentInjector).get(nd,null);et&&(v=et)}const ue=B.create(ee,p,void 0,v);return this.insert(ue.hostView,P),ue}insert(o,c){const h=o._lView,p=h[hn];if(function Pr(r){return fr(r[mi])}(h)){const ue=this.indexOf(o);if(-1!==ue)this.detach(ue);else{const Me=h[mi],et=new DE(Me,Me[Lr],Me[mi]);et.detach(et.indexOf(o))}}const v=this._adjustIndex(c),D=this._lContainer;!function tu(r,o,c,h){const p=Wt+h,v=c.length;h>0&&(c[p-1][is]=o),h<v-Wt?(o[is]=c[p],Yc(c,Wt+h,o)):(c.push(o),o[is]=null),o[mi]=c;const D=o[Mo];null!==D&&c!==D&&function Ef(r,o){const c=r[Ct];o[Vr]!==o[mi][mi][Vr]&&(r[Qe]=!0),null===c?r[Ct]=[o]:c.push(o)}(D,o);const P=o[Ki];null!==P&&P.insertView(r),o[dr]|=64}(p,h,D,v);const P=Mc(v,D),B=h[nr],ee=xd(B,D[We]);return null!==ee&&function Am(r,o,c,h,p,v){h[Bi]=p,h[Lr]=o,vl(r,h,c,1,p,v)}(p,D[Lr],B,h,ee,P),o.attachToViewContainerRef(),Yc(v0(D),v,o),o}move(o,c){return this.insert(o,c)}indexOf(o){const c=SE(this._lContainer);return null!==c?c.indexOf(o):-1}remove(o){const c=this._adjustIndex(o,-1),h=yu(this._lContainer,c);h&&(Ws(v0(this._lContainer),c),Ad(h[hn],h))}detach(o){const c=this._adjustIndex(o,-1),h=yu(this._lContainer,c);return h&&null!=Ws(v0(this._lContainer),c)?new cu(h):null}_adjustIndex(o,c=0){return o??this.length+c}};function SE(r){return r[ft]}function v0(r){return r[ft]||(r[ft]=[])}function rw(r,o){let c;const h=o[r.index];if(fr(h))c=h;else{let p;if(8&r.type)p=V(h);else{const v=o[nr];p=v.createComment("");const D=me(r,o);Fl(v,xd(v,D),p,function Md(r,o){return r.nextSibling(o)}(v,D),!1)}o[r.index]=c=bv(h,o,p,r),Bf(o,c)}return new DE(c,r,o)}class TE{constructor(o){this.queryList=o,this.matches=null}clone(){return new TE(this.queryList)}setDirty(){this.queryList.setDirty()}}class AE{constructor(o=[]){this.queries=o}createEmbeddedView(o){const c=o.queries;if(null!==c){const h=null!==o.contentQueries?o.contentQueries[0]:c.length,p=[];for(let v=0;v<h;v++){const D=c.getByIndex(v);p.push(this.queries[D.indexInDeclarationView].clone())}return new AE(p)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let c=0;c<this.queries.length;c++)null!==lw(o,c).matches&&this.queries[c].setDirty()}}class E0{constructor(o,c,h=null){this.predicate=o,this.flags=c,this.read=h}}class $y{constructor(o=[]){this.queries=o}elementStart(o,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(o,c)}elementEnd(o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(o)}embeddedTView(o){let c=null;for(let h=0;h<this.length;h++){const p=null!==c?c.length:0,v=this.getByIndex(h).embeddedTView(o,p);v&&(v.indexInDeclarationView=h,null!==c?c.push(v):c=[v])}return null!==c?new $y(c):null}template(o,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(o,c)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class w0{constructor(o,c=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(o,c){this.isApplyingToNode(c)&&this.matchTNode(o,c)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,c){this.elementStart(o,c)}embeddedTView(o,c){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,c),new w0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=o.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(o,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const v=h[p];this.matchTNodeWithReadOption(o,c,Yg(c,v)),this.matchTNodeWithReadOption(o,c,Zl(c,o,v,!1,!1))}else h===Br?4&c.type&&this.matchTNodeWithReadOption(o,c,-1):this.matchTNodeWithReadOption(o,c,Zl(c,o,h,!1,!1))}matchTNodeWithReadOption(o,c,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===rd||p===Vu||p===Br&&4&c.type)this.addMatch(c.index,-2);else{const v=Zl(c,o,p,!1,!1);null!==v&&this.addMatch(c.index,v)}else this.addMatch(c.index,h)}}addMatch(o,c){null===this.matches?this.matches=[o,c]:this.matches.push(o,c)}}function Yg(r,o){const c=r.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===o)return c[h+1];return null}function iw(r,o,c,h){return-1===c?function Tw(r,o){return 11&r.type?lc(r,o):4&r.type?qo(r,o):null}(o,r):-2===c?function Aw(r,o,c){return c===rd?lc(o,r):c===Br?qo(o,r):c===Vu?rw(o,r):void 0}(r,o,h):ds(r,r[hn],c,o)}function Gy(r,o,c,h){const p=o[Ki].queries[h];if(null===p.matches){const v=r.data,D=c.matches,P=[];for(let B=0;B<D.length;B+=2){const ee=D[B];P.push(ee<0?null:iw(o,v[ee],D[B+1],c.metadata.read))}p.matches=P}return p.matches}function b0(r,o,c,h){const p=r.queries.getByIndex(c),v=p.matches;if(null!==v){const D=Gy(r,o,p,c);for(let P=0;P<v.length;P+=2){const B=v[P];if(B>0)h.push(D[P/2]);else{const ee=v[P+1],ue=o[-B];for(let Me=Wt;Me<ue.length;Me++){const et=ue[Me];et[Mo]===et[mi]&&b0(et[hn],et,ee,h)}if(null!==ue[Ct]){const Me=ue[Ct];for(let et=0;et<Me.length;et++){const St=Me[et];b0(St[hn],St,ee,h)}}}}}return h}function xE(r){const o=Pt(),c=Er(),h=qa();fl(h+1);const p=lw(c,h);if(r.dirty&&function Fn(r){return 4==(4&r[dr])}(o)===(2==(2&p.metadata.flags))){if(null===p.matches)r.reset([]);else{const v=p.crossesNgTemplate?b0(c,o,h,[]):Gy(c,o,p,h);r.reset(v,xf),r.notifyOnChanges()}return!0}return!1}function C0(r,o,c){const h=Er();h.firstCreatePass&&(aw(h,new E0(r,o,c),-1),2==(2&o)&&(h.staticViewQueries=!0)),ow(h,Pt(),o)}function sw(r,o,c,h){const p=Er();if(p.firstCreatePass){const v=Zi();aw(p,new E0(o,c,h),v.index),function xw(r,o){const c=r.contentQueries||(r.contentQueries=[]);o!==(c.length?c[c.length-1]:-1)&&c.push(r.queries.length-1,o)}(p,r),2==(2&c)&&(p.staticContentQueries=!0)}ow(p,Pt(),c)}function ME(){return function I0(r,o){return r[Ki].queries[o].queryList}(Pt(),qa())}function ow(r,o,c){const h=new vi(4==(4&c));mv(r,o,h,h.destroy),null===o[Ki]&&(o[Ki]=new AE),o[Ki].queries.push(new TE(h))}function aw(r,o,c){null===r.queries&&(r.queries=new $y),r.queries.track(new w0(o,c))}function lw(r,o){return r.queries.getByIndex(o)}function RE(r,o){return qo(r,o)}function Xg(r){return!!Ti(r)}function UE(...r){}const yw=new tn("Application Initializer");let M0=(()=>{class r{constructor(c){this.appInits=c,this.resolve=UE,this.reject=UE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const c=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const v=this.appInits[p]();if(om(v))c.push(v);else if(am(v)){const D=new Promise((P,B)=>{v.subscribe({complete:P,error:B})});c.push(D)}}Promise.all(c).then(()=>{h()}).catch(p=>{this.reject(p)}),0===c.length&&h(),this.initialized=!0}}return r.\u0275fac=function(c){return new(c||r)(an(yw,8))},r.\u0275prov=$t({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const vw=new tn("AppId",{providedIn:"root",factory:function Ew(){return`${jE()}${jE()}${jE()}`}});function jE(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const a=new tn("Platform Initializer"),n=new tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),u=new tn("AnimationModuleType");let f=(()=>{class r{log(c){console.log(c)}warn(c){console.warn(c)}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=$t({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const I=new tn("LocaleId",{providedIn:"root",factory:()=>Et(I,on.Optional|on.SkipSelf)||function E(){return typeof $localize<"u"&&$localize.locale||ku}()}),M=new tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Le{constructor(o,c){this.ngModuleFactory=o,this.componentFactories=c}}let Xe=(()=>{class r{compileModuleSync(c){return new Ko(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),v=ad(Ti(c).declarations).reduce((D,P)=>{const B=En(P);return B&&D.push(new Xp(B)),D},[]);return new Le(h,v)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=$t({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Qr=(()=>Promise.resolve(0))();function sa(r){typeof Zone>"u"?Qr.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Os{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pn(!1),this.onMicrotaskEmpty=new Pn(!1),this.onStable=new Pn(!1),this.onError=new Pn(!1),typeof Zone>"u")throw new pt(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&c,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function Ys(){let r=er.requestAnimationFrame,o=er.cancelAnimationFrame;if(typeof Zone<"u"&&r&&o){const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c);const h=o[Zone.__symbol__("OriginalDelegate")];h&&(o=h)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function qy(r){const o=()=>{!function ww(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(er,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,mf(r),r.isCheckStableRunning=!0,Gl(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),mf(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,p,v,D,P)=>{try{return HE(r),c.invokeTask(p,v,D,P)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||r.shouldCoalesceRunChangeDetection)&&o(),zE(r)}},onInvoke:(c,h,p,v,D,P,B)=>{try{return HE(r),c.invoke(p,v,D,P,B)}finally{r.shouldCoalesceRunChangeDetection&&o(),zE(r)}},onHasTask:(c,h,p,v)=>{c.hasTask(p,v),h===p&&("microTask"==v.change?(r._hasPendingMicrotasks=v.microTask,mf(r),Gl(r)):"macroTask"==v.change&&(r.hasPendingMacrotasks=v.macroTask))},onHandleError:(c,h,p,v)=>(c.handleError(p,v),r.runOutsideAngular(()=>r.onError.emit(v)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Os.isInAngularZone())throw new pt(909,!1)}static assertNotInAngularZone(){if(Os.isInAngularZone())throw new pt(909,!1)}run(o,c,h){return this._inner.run(o,c,h)}runTask(o,c,h,p){const v=this._inner,D=v.scheduleEventTask("NgZoneEvent: "+p,o,_c,UE,UE);try{return v.runTask(D,c,h)}finally{v.cancelTask(D)}}runGuarded(o,c,h){return this._inner.runGuarded(o,c,h)}runOutsideAngular(o){return this._outer.run(o)}}const _c={};function Gl(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function mf(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function HE(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function zE(r){r._nesting--,Gl(r)}class mr{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pn,this.onMicrotaskEmpty=new Pn,this.onStable=new Pn,this.onError=new Pn}run(o,c,h){return o.apply(c,h)}runGuarded(o,c,h){return o.apply(c,h)}runOutsideAngular(o){return o()}runTask(o,c,h,p){return o.apply(c,h)}}const xr=new tn(""),Ur=new tn("");let yc,rs=(()=>{class r{constructor(c,h,p){this._ngZone=c,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,yc||(function ch(r){yc=r}(p),p.addToWindow(h)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Os.assertNotInAngularZone(),sa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sa(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,p){let v=-1;h&&h>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==v),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:v,updateCb:p})}whenStable(c,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,h,p){return[]}}return r.\u0275fac=function(c){return new(c||r)(an(Os),an(Ha),an(Ur))},r.\u0275prov=$t({token:r,factory:r.\u0275fac}),r})(),Ha=(()=>{class r{constructor(){this._applications=new Map}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return yc?.findTestabilityInTree(this,c,h)??null}}return r.\u0275fac=function(c){return new(c||r)},r.\u0275prov=$t({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();const Wl=!1;let ws=null;const $E=new tn("AllowMultipleToken"),GE=new tn("PlatformDestroyListeners"),bl=new tn("appBootstrapListener");class WE{constructor(o,c){this.name=o,this.token=c}}function ab(r,o,c=[]){const h=`Platform: ${o}`,p=new tn(h);return(v=[])=>{let D=Kw();if(!D||D.injector.get($E,!1)){const P=[...c,...v,{provide:p,useValue:!0}];r?r(P):function Pb(r){if(ws&&!ws.get($E,!1))throw new pt(400,!1);ws=r;const o=r.get(cb);(function ob(r){const o=r.get(a,null);o&&o.forEach(c=>c())})(r)}(function lb(r=[],o){return Hd.create({name:o,providers:[{provide:xp,useValue:"platform"},{provide:GE,useValue:new Set([()=>ws=null])},...r]})}(P,h))}return function Nb(r){const o=Kw();if(!o)throw new pt(401,!1);return o}()}}function Kw(){return ws?.get(cb)??null}let cb=(()=>{class r{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const p=function db(r,o){let c;return c="noop"===r?new mr:("zone.js"===r?void 0:r)||new Os(o),c}(h?.ngZone,function ub(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(h)),v=[{provide:Os,useValue:p}];return p.run(()=>{const D=Hd.create({providers:v,parent:this.injector,name:c.moduleType.name}),P=c.create(D),B=P.injector.get(sd,null);if(!B)throw new pt(402,!1);return p.runOutsideAngular(()=>{const ee=p.onError.subscribe({next:ue=>{B.handleError(ue)}});P.onDestroy(()=>{Cw(this._modules,P),ee.unsubscribe()})}),function hb(r,o,c){try{const h=c();return om(h)?h.catch(p=>{throw o.runOutsideAngular(()=>r.handleError(p)),p}):h}catch(h){throw o.runOutsideAngular(()=>r.handleError(h)),h}}(B,p,()=>{const ee=P.injector.get(M0);return ee.runInitializers(),ee.donePromise.then(()=>(function th(r){st(r,"Expected localeId to be defined"),"string"==typeof r&&(qv=r.toLowerCase().replace(/_/g,"-"))}(P.injector.get(I,ku)||ku),this._moduleDoBootstrap(P),P))})})}bootstrapModule(c,h=[]){const p=fb({},h);return function Sm(r,o,c){const h=new Ko(c);return Promise.resolve(h)}(0,0,c).then(v=>this.bootstrapModuleFactory(v,p))}_moduleDoBootstrap(c){const h=c.injector.get(bw);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!c.instance.ngDoBootstrap)throw new pt(-403,!1);c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pt(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const c=this._injector.get(GE,null);c&&(c.forEach(h=>h()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(c){return new(c||r)(an(Hd))},r.\u0275prov=$t({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function fb(r,o){return Array.isArray(o)?o.reduce(fb,r):{...r,...o}}let bw=(()=>{class r{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,h,p){this._zone=c,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new W.y(P=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{P.next(this._stable),P.complete()})}),D=new W.y(P=>{let B;this._zone.runOutsideAngular(()=>{B=this._zone.onStable.subscribe(()=>{Os.assertNotInAngularZone(),sa(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,P.next(!0))})})});const ee=this._zone.onUnstable.subscribe(()=>{Os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{P.next(!1)}))});return()=>{B.unsubscribe(),ee.unsubscribe()}});this.isStable=(0,Fe.T)(v,D.pipe((0,Ne.B)()))}bootstrap(c,h){const p=c instanceof Fc;if(!this._injector.get(M0).done){!p&&$r(c);throw new pt(405,Wl)}let D;D=p?c:this._injector.get(iu).resolveComponentFactory(c),this.componentTypes.push(D.componentType);const P=function R0(r){return r.isBoundToModule}(D)?void 0:this._injector.get(Wo),ee=D.create(Hd.NULL,[],h||D.selector,P),ue=ee.location.nativeElement,Me=ee.injector.get(xr,null);return Me?.registerApplication(ue),ee.onDestroy(()=>{this.detachView(ee.hostView),Cw(this.components,ee),Me?.unregisterApplication(ue)}),this._loadComponent(ee),ee}tick(){if(this._runningTick)throw new pt(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;Cw(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const h=this._injector.get(bl,[]);h.push(...this._bootstrapListeners),h.forEach(p=>p(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Cw(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new pt(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(c){return new(c||r)(an(Os),an(nd),an(sd))},r.\u0275prov=$t({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Cw(r,o){const c=r.indexOf(o);c>-1&&r.splice(c,1)}function Lb(){return!1}let Vb=(()=>{class r{}return r.__NG_ELEMENT_ID__=Bb,r})();function Bb(r){return function Ub(r,o,c){if(Ui(r)&&!c){const h=Jt(r.index,o);return new cu(h,h)}return 47&r.type?new cu(o[Vr],o):null}(Zi(),Pt(),16==(16&r))}class yb{constructor(){}supports(o){return Kh(o)}create(o){return new Wb(o)}}const Gb=(r,o)=>o;class Wb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Gb}forEachItem(o){let c;for(c=this._itHead;null!==c;c=c._next)o(c)}forEachOperation(o){let c=this._itHead,h=this._removalsHead,p=0,v=null;for(;c||h;){const D=!h||c&&c.currentIndex<Eb(h,p,v)?c:h,P=Eb(D,p,v),B=D.currentIndex;if(D===h)p--,h=h._nextRemoved;else if(c=c._next,null==D.previousIndex)p++;else{v||(v=[]);const ee=P-p,ue=B-p;if(ee!=ue){for(let et=0;et<ee;et++){const St=et<v.length?v[et]:v[et]=0,Yt=St+et;ue<=Yt&&Yt<ee&&(v[et]=St+1)}v[D.previousIndex]=ue-ee}}P!==B&&o(D,P,B)}}forEachPreviousItem(o){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachMovedItem(o){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}forEachIdentityChange(o){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)o(c)}diff(o){if(null==o&&(o=[]),!Kh(o))throw new pt(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let p,v,D,c=this._itHead,h=!1;if(Array.isArray(o)){this.length=o.length;for(let P=0;P<this.length;P++)v=o[P],D=this._trackByFn(P,v),null!==c&&Object.is(c.trackById,D)?(h&&(c=this._verifyReinsertion(c,v,D,P)),Object.is(c.item,v)||this._addIdentityChange(c,v)):(c=this._mismatch(c,v,D,P),h=!0),c=c._next}else p=0,function W0(r,o){if(Array.isArray(r))for(let c=0;c<r.length;c++)o(r[c]);else{const c=r[Symbol.iterator]();let h;for(;!(h=c.next()).done;)o(h.value)}}(o,P=>{D=this._trackByFn(p,P),null!==c&&Object.is(c.trackById,D)?(h&&(c=this._verifyReinsertion(c,P,D,p)),Object.is(c.item,P)||this._addIdentityChange(c,P)):(c=this._mismatch(c,P,D,p),h=!0),c=c._next,p++}),this.length=p;return this._truncate(c),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,c,h,p){let v;return null===o?v=this._itTail:(v=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._reinsertAfter(o,v,p)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(o.item,c)||this._addIdentityChange(o,c),this._moveAfter(o,v,p)):o=this._addAfter(new Kb(c,h),v,p),o}_verifyReinsertion(o,c,h,p){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==v?o=this._reinsertAfter(v,o._prev,p):o.currentIndex!=p&&(o.currentIndex=p,this._addToMoves(o,p)),o}_truncate(o){for(;null!==o;){const c=o._next;this._addToRemovals(this._unlink(o)),o=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const p=o._prevRemoved,v=o._nextRemoved;return null===p?this._removalsHead=v:p._nextRemoved=v,null===v?this._removalsTail=p:v._prevRemoved=p,this._insertAfter(o,c,h),this._addToMoves(o,h),o}_moveAfter(o,c,h){return this._unlink(o),this._insertAfter(o,c,h),this._addToMoves(o,h),o}_addAfter(o,c,h){return this._insertAfter(o,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,c,h){const p=null===c?this._itHead:c._next;return o._next=p,o._prev=c,null===p?this._itTail=o:p._prev=o,null===c?this._itHead=o:c._next=o,null===this._linkedRecords&&(this._linkedRecords=new vb),this._linkedRecords.put(o),o.currentIndex=h,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const c=o._prev,h=o._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,o}_addToMoves(o,c){return o.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new vb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,c){return o.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Kb{constructor(o,c){this.item=o,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qb{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,o))return h;return null}remove(o){const c=o._prevDup,h=o._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class vb{constructor(){this.map=new Map}put(o){const c=o.trackById;let h=this.map.get(c);h||(h=new qb,this.map.set(c,h)),h.add(o)}get(o,c){const p=this.map.get(o);return p?p.get(o,c):null}remove(o){const c=o.trackById;return this.map.get(c).remove(o)&&this.map.delete(c),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Eb(r,o,c){const h=r.previousIndex;if(null===h)return h;let p=0;return c&&h<c.length&&(p=c[h]),h+o+p}class wb{constructor(){}supports(o){return o instanceof Map||q_(o)}create(){return new Yb}}class Yb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let c;for(c=this._mapHead;null!==c;c=c._next)o(c)}forEachPreviousItem(o){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)o(c)}forEachChangedItem(o){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)o(c)}forEachAddedItem(o){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)o(c)}forEachRemovedItem(o){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)o(c)}diff(o){if(o){if(!(o instanceof Map||q_(o)))throw new pt(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(o,(h,p)=>{if(c&&c.key===p)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const v=this._getOrCreateRecordForKey(p,h);c=this._insertBeforeOrAppend(c,v)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,c){if(o){const h=o._prev;return c._next=o,c._prev=h,o._prev=c,h&&(h._next=c),o===this._mapHead&&(this._mapHead=c),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(o,c){if(this._records.has(o)){const p=this._records.get(o);this._maybeAddToChanges(p,c);const v=p._prev,D=p._next;return v&&(v._next=D),D&&(D._prev=v),p._next=null,p._prev=null,p}const h=new Zb(o);return this._records.set(o,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,c){Object.is(c,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=c,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,c){o instanceof Map?o.forEach(c):Object.keys(o).forEach(h=>c(o[h],h))}}class Zb{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bb(){return new Xw([new yb])}let Xw=(()=>{class r{constructor(c){this.factories=c}static create(c,h){if(null!=h){const p=h.factories.slice();c=c.concat(p)}return new r(c)}static extend(c){return{provide:r,useFactory:h=>r.create(c,h||bb()),deps:[[r,new mo,new Vi]]}}find(c){const h=this.factories.find(p=>p.supports(c));if(null!=h)return h;throw new pt(901,!1)}}return r.\u0275prov=$t({token:r,providedIn:"root",factory:bb}),r})();function Cb(){return new Jw([new wb])}let Jw=(()=>{class r{constructor(c){this.factories=c}static create(c,h){if(h){const p=h.factories.slice();c=c.concat(p)}return new r(c)}static extend(c){return{provide:r,useFactory:h=>r.create(c,h||Cb()),deps:[[r,new mo,new Vi]]}}find(c){const h=this.factories.find(p=>p.supports(c));if(h)return h;throw new pt(901,!1)}}return r.\u0275prov=$t({token:r,providedIn:"root",factory:Cb}),r})();const Jb=ab(null,"core",[]);let eC=(()=>{class r{constructor(c){}}return r.\u0275fac=function(c){return new(c||r)(an(bw))},r.\u0275mod=mt({type:r}),r.\u0275inj=Cn({}),r})();function tC(r){return"boolean"==typeof r?r:null!=r&&"false"!==r}},4006:(gn,at,j)=>{j.d(at,{EJ:()=>co,F:()=>Lr,Fj:()=>ut,JJ:()=>Tn,Kr:()=>wo,On:()=>Ei,Wl:()=>Ie,YN:()=>Aa,a5:()=>ur,kI:()=>qe,sg:()=>gi,u5:()=>Vn});var _=j(4650),L=j(6895),W=j(8996),Fe=j(4128),Ne=j(4004);let Ae=(()=>{class q{constructor(H,fe){this._renderer=H,this._elementRef=fe,this.onChange=Lt=>{},this.onTouched=()=>{}}setProperty(H,fe){this._renderer.setProperty(this._elementRef.nativeElement,H,fe)}registerOnTouched(H){this.onTouched=H}registerOnChange(H){this.onChange=H}setDisabledState(H){this.setProperty("disabled",H)}}return q.\u0275fac=function(H){return new(H||q)(_.Y36(_.Qsj),_.Y36(_.SBq))},q.\u0275dir=_.lG2({type:q}),q})(),$e=(()=>{class q extends Ae{}return q.\u0275fac=function(){let z;return function(fe){return(z||(z=_.n5z(q)))(fe||q)}}(),q.\u0275dir=_.lG2({type:q,features:[_.qOj]}),q})();const Ge=new _.OlP("NgValueAccessor"),Ve={provide:Ge,useExisting:(0,_.Gpc)(()=>Ie),multi:!0};let Ie=(()=>{class q extends $e{writeValue(H){this.setProperty("checked",H)}}return q.\u0275fac=function(){let z;return function(fe){return(z||(z=_.n5z(q)))(fe||q)}}(),q.\u0275dir=_.lG2({type:q,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(H,fe){1&H&&_.NdJ("change",function(On){return fe.onChange(On.target.checked)})("blur",function(){return fe.onTouched()})},features:[_._Bn([Ve]),_.qOj]}),q})();const De={provide:Ge,useExisting:(0,_.Gpc)(()=>ut),multi:!0},Tt=new _.OlP("CompositionEventMode");let ut=(()=>{class q extends Ae{constructor(H,fe,Lt){super(H,fe),this._compositionMode=Lt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ke(){const q=(0,L.q)()?(0,L.q)().getUserAgent():"";return/android (\d+)/.test(q.toLowerCase())}())}writeValue(H){this.setProperty("value",H??"")}_handleInput(H){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(H)}_compositionStart(){this._composing=!0}_compositionEnd(H){this._composing=!1,this._compositionMode&&this.onChange(H)}}return q.\u0275fac=function(H){return new(H||q)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Tt,8))},q.\u0275dir=_.lG2({type:q,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(H,fe){1&H&&_.NdJ("input",function(On){return fe._handleInput(On.target.value)})("blur",function(){return fe.onTouched()})("compositionstart",function(){return fe._compositionStart()})("compositionend",function(On){return fe._compositionEnd(On.target.value)})},features:[_._Bn([De]),_.qOj]}),q})();const Ht=!1;function Kt(q){return null==q||("string"==typeof q||Array.isArray(q))&&0===q.length}function pt(q){return null!=q&&"number"==typeof q.length}const It=new _.OlP("NgValidators"),Oe=new _.OlP("NgAsyncValidators"),Ft=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class qe{static min(z){return function Se(q){return z=>{if(Kt(z.value)||Kt(q))return null;const H=parseFloat(z.value);return!isNaN(H)&&H<q?{min:{min:q,actual:z.value}}:null}}(z)}static max(z){return function ze(q){return z=>{if(Kt(z.value)||Kt(q))return null;const H=parseFloat(z.value);return!isNaN(H)&&H>q?{max:{max:q,actual:z.value}}:null}}(z)}static required(z){return function Bt(q){return Kt(q.value)?{required:!0}:null}(z)}static requiredTrue(z){return function Ot(q){return!0===q.value?null:{required:!0}}(z)}static email(z){return function nt(q){return Kt(q.value)||Ft.test(q.value)?null:{email:!0}}(z)}static minLength(z){return function Ye(q){return z=>Kt(z.value)||!pt(z.value)?null:z.value.length<q?{minlength:{requiredLength:q,actualLength:z.value.length}}:null}(z)}static maxLength(z){return function zt(q){return z=>pt(z.value)&&z.value.length>q?{maxlength:{requiredLength:q,actualLength:z.value.length}}:null}(z)}static pattern(z){return function xt(q){if(!q)return kn;let z,H;return"string"==typeof q?(H="","^"!==q.charAt(0)&&(H+="^"),H+=q,"$"!==q.charAt(q.length-1)&&(H+="$"),z=new RegExp(H)):(H=q.toString(),z=q),fe=>{if(Kt(fe.value))return null;const Lt=fe.value;return z.test(Lt)?null:{pattern:{requiredPattern:H,actualValue:Lt}}}}(z)}static nullValidator(z){return null}static compose(z){return lt(z)}static composeAsync(z){return tt(z)}}function kn(q){return null}function nn(q){return null!=q}function Mr(q){const z=(0,_.QGY)(q)?(0,W.D)(q):q;if(Ht&&!(0,_.CqO)(z)){let H="Expected async validator to return Promise or Observable.";throw"object"==typeof q&&(H+=" Are you using a synchronous validator where an async validator is expected?"),new _.vHH(-1101,H)}return z}function _e(q){let z={};return q.forEach(H=>{z=null!=H?{...z,...H}:z}),0===Object.keys(z).length?null:z}function Kn(q,z){return z.map(H=>H(q))}function Ze(q){return q.map(z=>function Qn(q){return!q.validate}(z)?z:H=>z.validate(H))}function lt(q){if(!q)return null;const z=q.filter(nn);return 0==z.length?null:function(H){return _e(Kn(H,z))}}function st(q){return null!=q?lt(Ze(q)):null}function tt(q){if(!q)return null;const z=q.filter(nn);return 0==z.length?null:function(H){const fe=Kn(H,z).map(Mr);return(0,Fe.D)(fe).pipe((0,Ne.U)(_e))}}function dt(q){return null!=q?tt(Ze(q)):null}function it(q,z){return null===q?[z]:Array.isArray(q)?[...q,z]:[q,z]}function ln(q){return q._rawValidators}function $t(q){return q._rawAsyncValidators}function Ln(q){return q?Array.isArray(q)?q:[q]:[]}function Cn(q,z){return Array.isArray(q)?q.includes(z):q===z}function zn(q,z){const H=Ln(z);return Ln(q).forEach(Lt=>{Cn(H,Lt)||H.push(Lt)}),H}function cr(q,z){return Ln(z).filter(H=>!Cn(q,H))}class sr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(z){this._rawValidators=z||[],this._composedValidatorFn=st(this._rawValidators)}_setAsyncValidators(z){this._rawAsyncValidators=z||[],this._composedAsyncValidatorFn=dt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(z){this._onDestroyCallbacks.push(z)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(z=>z()),this._onDestroyCallbacks=[]}reset(z){this.control&&this.control.reset(z)}hasError(z,H){return!!this.control&&this.control.hasError(z,H)}getError(z,H){return this.control?this.control.getError(z,H):null}}class Dn extends sr{get formDirective(){return null}get path(){return null}}class ur extends sr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qn{constructor(z){this._cd=z}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Tn=(()=>{class q extends qn{constructor(H){super(H)}}return q.\u0275fac=function(H){return new(H||q)(_.Y36(ur,2))},q.\u0275dir=_.lG2({type:q,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(H,fe){2&H&&_.ekj("ng-untouched",fe.isUntouched)("ng-touched",fe.isTouched)("ng-pristine",fe.isPristine)("ng-dirty",fe.isDirty)("ng-valid",fe.isValid)("ng-invalid",fe.isInvalid)("ng-pending",fe.isPending)},features:[_.qOj]}),q})();function Hr(q,z){return q?`with name: '${z}'`:`at index: ${z}`}const je=!1,At="VALID",an="INVALID",xn="PENDING",Et="DISABLED";function de(q){return(vt(q)?q.validators:q)||null}function le(q,z){return(vt(z)?z.asyncValidators:q)||null}function vt(q){return null!=q&&!Array.isArray(q)&&"object"==typeof q}class He{constructor(z,H){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(z),this._assignAsyncValidators(H)}get validator(){return this._composedValidatorFn}set validator(z){this._rawValidators=this._composedValidatorFn=z}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(z){this._rawAsyncValidators=this._composedAsyncValidatorFn=z}get parent(){return this._parent}get valid(){return this.status===At}get invalid(){return this.status===an}get pending(){return this.status==xn}get disabled(){return this.status===Et}get enabled(){return this.status!==Et}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(z){this._assignValidators(z)}setAsyncValidators(z){this._assignAsyncValidators(z)}addValidators(z){this.setValidators(zn(z,this._rawValidators))}addAsyncValidators(z){this.setAsyncValidators(zn(z,this._rawAsyncValidators))}removeValidators(z){this.setValidators(cr(z,this._rawValidators))}removeAsyncValidators(z){this.setAsyncValidators(cr(z,this._rawAsyncValidators))}hasValidator(z){return Cn(this._rawValidators,z)}hasAsyncValidator(z){return Cn(this._rawAsyncValidators,z)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(z={}){this.touched=!0,this._parent&&!z.onlySelf&&this._parent.markAsTouched(z)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(z=>z.markAllAsTouched())}markAsUntouched(z={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(H=>{H.markAsUntouched({onlySelf:!0})}),this._parent&&!z.onlySelf&&this._parent._updateTouched(z)}markAsDirty(z={}){this.pristine=!1,this._parent&&!z.onlySelf&&this._parent.markAsDirty(z)}markAsPristine(z={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(H=>{H.markAsPristine({onlySelf:!0})}),this._parent&&!z.onlySelf&&this._parent._updatePristine(z)}markAsPending(z={}){this.status=xn,!1!==z.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!z.onlySelf&&this._parent.markAsPending(z)}disable(z={}){const H=this._parentMarkedDirty(z.onlySelf);this.status=Et,this.errors=null,this._forEachChild(fe=>{fe.disable({...z,onlySelf:!0})}),this._updateValue(),!1!==z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...z,skipPristineCheck:H}),this._onDisabledChange.forEach(fe=>fe(!0))}enable(z={}){const H=this._parentMarkedDirty(z.onlySelf);this.status=At,this._forEachChild(fe=>{fe.enable({...z,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:z.emitEvent}),this._updateAncestors({...z,skipPristineCheck:H}),this._onDisabledChange.forEach(fe=>fe(!1))}_updateAncestors(z){this._parent&&!z.onlySelf&&(this._parent.updateValueAndValidity(z),z.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(z){this._parent=z}getRawValue(){return this.value}updateValueAndValidity(z={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===At||this.status===xn)&&this._runAsyncValidator(z.emitEvent)),!1!==z.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!z.onlySelf&&this._parent.updateValueAndValidity(z)}_updateTreeValidity(z={emitEvent:!0}){this._forEachChild(H=>H._updateTreeValidity(z)),this.updateValueAndValidity({onlySelf:!0,emitEvent:z.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Et:At}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(z){if(this.asyncValidator){this.status=xn,this._hasOwnPendingAsyncValidator=!0;const H=Mr(this.asyncValidator(this));this._asyncValidationSubscription=H.subscribe(fe=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(fe,{emitEvent:z})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(z,H={}){this.errors=z,this._updateControlsErrors(!1!==H.emitEvent)}get(z){let H=z;return null==H||(Array.isArray(H)||(H=H.split(".")),0===H.length)?null:H.reduce((fe,Lt)=>fe&&fe._find(Lt),this)}getError(z,H){const fe=H?this.get(H):this;return fe&&fe.errors?fe.errors[z]:null}hasError(z,H){return!!this.getError(z,H)}get root(){let z=this;for(;z._parent;)z=z._parent;return z}_updateControlsErrors(z){this.status=this._calculateStatus(),z&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(z)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Et:this.errors?an:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xn)?xn:this._anyControlsHaveStatus(an)?an:At}_anyControlsHaveStatus(z){return this._anyControls(H=>H.status===z)}_anyControlsDirty(){return this._anyControls(z=>z.dirty)}_anyControlsTouched(){return this._anyControls(z=>z.touched)}_updatePristine(z={}){this.pristine=!this._anyControlsDirty(),this._parent&&!z.onlySelf&&this._parent._updatePristine(z)}_updateTouched(z={}){this.touched=this._anyControlsTouched(),this._parent&&!z.onlySelf&&this._parent._updateTouched(z)}_registerOnCollectionChange(z){this._onCollectionChange=z}_setUpdateStrategy(z){vt(z)&&null!=z.updateOn&&(this._updateOn=z.updateOn)}_parentMarkedDirty(z){return!z&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(z){return null}_assignValidators(z){this._rawValidators=Array.isArray(z)?z.slice():z,this._composedValidatorFn=function te(q){return Array.isArray(q)?st(q):q||null}(this._rawValidators)}_assignAsyncValidators(z){this._rawAsyncValidators=Array.isArray(z)?z.slice():z,this._composedAsyncValidatorFn=function ct(q){return Array.isArray(q)?dt(q):q||null}(this._rawAsyncValidators)}}class we extends He{constructor(z,H,fe){super(de(H),le(fe,H)),this.controls=z,this._initObservables(),this._setUpdateStrategy(H),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(z,H){return this.controls[z]?this.controls[z]:(this.controls[z]=H,H.setParent(this),H._registerOnCollectionChange(this._onCollectionChange),H)}addControl(z,H,fe={}){this.registerControl(z,H),this.updateValueAndValidity({emitEvent:fe.emitEvent}),this._onCollectionChange()}removeControl(z,H={}){this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),delete this.controls[z],this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}setControl(z,H,fe={}){this.controls[z]&&this.controls[z]._registerOnCollectionChange(()=>{}),delete this.controls[z],H&&this.registerControl(z,H),this.updateValueAndValidity({emitEvent:fe.emitEvent}),this._onCollectionChange()}contains(z){return this.controls.hasOwnProperty(z)&&this.controls[z].enabled}setValue(z,H={}){(function be(q,z,H){q._forEachChild((fe,Lt)=>{if(void 0===H[Lt])throw new _.vHH(1002,je?function _n(q,z){return`Must supply a value for form control ${Hr(q,z)}`}(z,Lt):"")})})(this,!0,z),Object.keys(z).forEach(fe=>{(function ve(q,z,H){const fe=q.controls;if(!(z?Object.keys(fe):fe).length)throw new _.vHH(1e3,je?function zr(q){return`\n    There are no form controls registered with this ${q?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(z):"");if(!fe[H])throw new _.vHH(1001,je?function gt(q,z){return`Cannot find form control ${Hr(q,z)}`}(z,H):"")})(this,!0,fe),this.controls[fe].setValue(z[fe],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H)}patchValue(z,H={}){null!=z&&(Object.keys(z).forEach(fe=>{const Lt=this.controls[fe];Lt&&Lt.patchValue(z[fe],{onlySelf:!0,emitEvent:H.emitEvent})}),this.updateValueAndValidity(H))}reset(z={},H={}){this._forEachChild((fe,Lt)=>{fe.reset(z[Lt],{onlySelf:!0,emitEvent:H.emitEvent})}),this._updatePristine(H),this._updateTouched(H),this.updateValueAndValidity(H)}getRawValue(){return this._reduceChildren({},(z,H,fe)=>(z[fe]=H.getRawValue(),z))}_syncPendingControls(){let z=this._reduceChildren(!1,(H,fe)=>!!fe._syncPendingControls()||H);return z&&this.updateValueAndValidity({onlySelf:!0}),z}_forEachChild(z){Object.keys(this.controls).forEach(H=>{const fe=this.controls[H];fe&&z(fe,H)})}_setUpControls(){this._forEachChild(z=>{z.setParent(this),z._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(z){for(const[H,fe]of Object.entries(this.controls))if(this.contains(H)&&z(fe))return!0;return!1}_reduceValue(){return this._reduceChildren({},(H,fe,Lt)=>((fe.enabled||this.disabled)&&(H[Lt]=fe.value),H))}_reduceChildren(z,H){let fe=z;return this._forEachChild((Lt,On)=>{fe=H(fe,Lt,On)}),fe}_allControlsDisabled(){for(const z of Object.keys(this.controls))if(this.controls[z].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(z){return this.controls.hasOwnProperty(z)?this.controls[z]:null}}const oe=new _.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Re}),Re="always";function Ut(q,z,H=Re){Wi(q,z),z.valueAccessor.writeValue(q.value),(q.disabled||"always"===H)&&z.valueAccessor.setDisabledState?.(q.disabled),function mt(q,z){z.valueAccessor.registerOnChange(H=>{q._pendingValue=H,q._pendingChange=!0,q._pendingDirty=!0,"change"===q.updateOn&&Nn(q,z)})}(q,z),function Bn(q,z){const H=(fe,Lt)=>{z.valueAccessor.writeValue(fe),Lt&&z.viewToModelUpdate(fe)};q.registerOnChange(H),z._registerOnDestroy(()=>{q._unregisterOnChange(H)})}(q,z),function Qt(q,z){z.valueAccessor.registerOnTouched(()=>{q._pendingTouched=!0,"blur"===q.updateOn&&q._pendingChange&&Nn(q,z),"submit"!==q.updateOn&&q.markAsTouched()})}(q,z),function ii(q,z){if(z.valueAccessor.setDisabledState){const H=fe=>{z.valueAccessor.setDisabledState(fe)};q.registerOnDisabledChange(H),z._registerOnDestroy(()=>{q._unregisterOnDisabledChange(H)})}}(q,z)}function vn(q,z,H=!0){const fe=()=>{};z.valueAccessor&&(z.valueAccessor.registerOnChange(fe),z.valueAccessor.registerOnTouched(fe)),ht(q,z),q&&(z._invokeOnDestroyCallbacks(),q._registerOnCollectionChange(()=>{}))}function _r(q,z){q.forEach(H=>{H.registerOnValidatorChange&&H.registerOnValidatorChange(z)})}function Wi(q,z){const H=ln(q);null!==z.validator?q.setValidators(it(H,z.validator)):"function"==typeof H&&q.setValidators([H]);const fe=$t(q);null!==z.asyncValidator?q.setAsyncValidators(it(fe,z.asyncValidator)):"function"==typeof fe&&q.setAsyncValidators([fe]);const Lt=()=>q.updateValueAndValidity();_r(z._rawValidators,Lt),_r(z._rawAsyncValidators,Lt)}function ht(q,z){let H=!1;if(null!==q){if(null!==z.validator){const Lt=ln(q);if(Array.isArray(Lt)&&Lt.length>0){const On=Lt.filter(as=>as!==z.validator);On.length!==Lt.length&&(H=!0,q.setValidators(On))}}if(null!==z.asyncValidator){const Lt=$t(q);if(Array.isArray(Lt)&&Lt.length>0){const On=Lt.filter(as=>as!==z.asyncValidator);On.length!==Lt.length&&(H=!0,q.setAsyncValidators(On))}}}const fe=()=>{};return _r(z._rawValidators,fe),_r(z._rawAsyncValidators,fe),H}function Nn(q,z){q._pendingDirty&&q.markAsDirty(),q.setValue(q._pendingValue,{emitModelToViewChange:!1}),z.viewToModelUpdate(q._pendingValue),q._pendingChange=!1}function tr(q,z){Wi(q,z)}function Bi(q,z){q._syncPendingControls(),z.forEach(H=>{const fe=H.control;"submit"===fe.updateOn&&fe._pendingChange&&(H.viewToModelUpdate(fe._pendingValue),fe._pendingChange=!1)})}const is={provide:Dn,useExisting:(0,_.Gpc)(()=>Lr)},gr=(()=>Promise.resolve())();let Lr=(()=>{class q extends Dn{constructor(H,fe,Lt){super(),this.callSetDisabledState=Lt,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _.vpe,this.form=new we({},st(H),dt(fe))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(H){gr.then(()=>{const fe=this._findContainer(H.path);H.control=fe.registerControl(H.name,H.control),Ut(H.control,H,this.callSetDisabledState),H.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(H)})}getControl(H){return this.form.get(H.path)}removeControl(H){gr.then(()=>{const fe=this._findContainer(H.path);fe&&fe.removeControl(H.name),this._directives.delete(H)})}addFormGroup(H){gr.then(()=>{const fe=this._findContainer(H.path),Lt=new we({});tr(Lt,H),fe.registerControl(H.name,Lt),Lt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(H){gr.then(()=>{const fe=this._findContainer(H.path);fe&&fe.removeControl(H.name)})}getFormGroup(H){return this.form.get(H.path)}updateModel(H,fe){gr.then(()=>{this.form.get(H.path).setValue(fe)})}setValue(H){this.control.setValue(H)}onSubmit(H){return this.submitted=!0,Bi(this.form,this._directives),this.ngSubmit.emit(H),"dialog"===H?.target?.method}onReset(){this.resetForm()}resetForm(H){this.form.reset(H),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(H){return H.pop(),H.length?this.form.get(H):this.form}}return q.\u0275fac=function(H){return new(H||q)(_.Y36(It,10),_.Y36(Oe,10),_.Y36(oe,8))},q.\u0275dir=_.lG2({type:q,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(H,fe){1&H&&_.NdJ("submit",function(On){return fe.onSubmit(On)})("reset",function(){return fe.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([is]),_.qOj]}),q})();function Ai(q,z){const H=q.indexOf(z);H>-1&&q.splice(H,1)}function Tr(q){return"object"==typeof q&&null!==q&&2===Object.keys(q).length&&"value"in q&&"disabled"in q}const Ts=class extends He{constructor(z=null,H,fe){super(de(H),le(fe,H)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(z),this._setUpdateStrategy(H),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vt(H)&&(H.nonNullable||H.initialValueIsDefault)&&(this.defaultValue=Tr(z)?z.value:z)}setValue(z,H={}){this.value=this._pendingValue=z,this._onChange.length&&!1!==H.emitModelToViewChange&&this._onChange.forEach(fe=>fe(this.value,!1!==H.emitViewToModelChange)),this.updateValueAndValidity(H)}patchValue(z,H={}){this.setValue(z,H)}reset(z=this.defaultValue,H={}){this._applyFormState(z),this.markAsPristine(H),this.markAsUntouched(H),this.setValue(this.value,H),this._pendingChange=!1}_updateValue(){}_anyControls(z){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(z){this._onChange.push(z)}_unregisterOnChange(z){Ai(this._onChange,z)}registerOnDisabledChange(z){this._onDisabledChange.push(z)}_unregisterOnDisabledChange(z){Ai(this._onDisabledChange,z)}_forEachChild(z){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(z){Tr(z)?(this.value=this._pendingValue=z.value,z.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=z}},Ki={provide:ur,useExisting:(0,_.Gpc)(()=>Ei)},Qs=(()=>Promise.resolve())();let Ei=(()=>{class q extends ur{constructor(H,fe,Lt,On,as,Pt){super(),this._changeDetectorRef=as,this.callSetDisabledState=Pt,this.control=new Ts,this._registered=!1,this.update=new _.vpe,this._parent=H,this._setValidators(fe),this._setAsyncValidators(Lt),this.valueAccessor=function hn(q,z){if(!z)return null;let H,fe,Lt;return Array.isArray(z),z.forEach(On=>{On.constructor===ut?H=On:function xo(q){return Object.getPrototypeOf(q.constructor)===$e}(On)?fe=On:Lt=On}),Lt||fe||H||null}(0,On)}ngOnChanges(H){if(this._checkForErrors(),!this._registered||"name"in H){if(this._registered&&(this._checkName(),this.formDirective)){const fe=H.name.previousValue;this.formDirective.removeControl({name:fe,path:this._getPath(fe)})}this._setUpControl()}"isDisabled"in H&&this._updateDisabled(H),function Ao(q,z){if(!q.hasOwnProperty("model"))return!1;const H=q.model;return!!H.isFirstChange()||!Object.is(z,H.currentValue)}(H,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(H){this.viewModel=H,this.update.emit(H)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ut(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(H){Qs.then(()=>{this.control.setValue(H,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(H){const fe=H.isDisabled.currentValue,Lt=0!==fe&&(0,_.D6c)(fe);Qs.then(()=>{Lt&&!this.control.disabled?this.control.disable():!Lt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(H){return this._parent?function rt(q,z){return[...z.path,q]}(H,this._parent):[H]}}return q.\u0275fac=function(H){return new(H||q)(_.Y36(Dn,9),_.Y36(It,10),_.Y36(Oe,10),_.Y36(Ge,10),_.Y36(_.sBO,8),_.Y36(oe,8))},q.\u0275dir=_.lG2({type:q,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[_._Bn([Ki]),_.qOj,_.TTD]}),q})(),ft=(()=>{class q{}return q.\u0275fac=function(H){return new(H||q)},q.\u0275mod=_.oAB({type:q}),q.\u0275inj=_.cJS({}),q})();const $i={provide:Dn,useExisting:(0,_.Gpc)(()=>gi)};let gi=(()=>{class q extends Dn{constructor(H,fe,Lt){super(),this.callSetDisabledState=Lt,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(H),this._setAsyncValidators(fe)}ngOnChanges(H){this._checkFormPresent(),H.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ht(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(H){const fe=this.form.get(H.path);return Ut(fe,H,this.callSetDisabledState),fe.updateValueAndValidity({emitEvent:!1}),this.directives.push(H),fe}getControl(H){return this.form.get(H.path)}removeControl(H){vn(H.control||null,H,!1),function dr(q,z){const H=q.indexOf(z);H>-1&&q.splice(H,1)}(this.directives,H)}addFormGroup(H){this._setUpFormContainer(H)}removeFormGroup(H){this._cleanUpFormContainer(H)}getFormGroup(H){return this.form.get(H.path)}addFormArray(H){this._setUpFormContainer(H)}removeFormArray(H){this._cleanUpFormContainer(H)}getFormArray(H){return this.form.get(H.path)}updateModel(H,fe){this.form.get(H.path).setValue(fe)}onSubmit(H){return this.submitted=!0,Bi(this.form,this.directives),this.ngSubmit.emit(H),"dialog"===H?.target?.method}onReset(){this.resetForm()}resetForm(H){this.form.reset(H),this.submitted=!1}_updateDomValue(){this.directives.forEach(H=>{const fe=H.control,Lt=this.form.get(H.path);fe!==Lt&&(vn(fe||null,H),(q=>q instanceof Ts)(Lt)&&(Ut(Lt,H,this.callSetDisabledState),H.control=Lt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(H){const fe=this.form.get(H.path);tr(fe,H),fe.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(H){if(this.form){const fe=this.form.get(H.path);fe&&function En(q,z){return ht(q,z)}(fe,H)&&fe.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wi(this.form,this),this._oldForm&&ht(this._oldForm,this)}_checkFormPresent(){}}return q.\u0275fac=function(H){return new(H||q)(_.Y36(It,10),_.Y36(Oe,10),_.Y36(oe,8))},q.\u0275dir=_.lG2({type:q,selectors:[["","formGroup",""]],hostBindings:function(H,fe){1&H&&_.NdJ("submit",function(On){return fe.onSubmit(On)})("reset",function(){return fe.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([$i]),_.qOj,_.TTD]}),q})();const Ta={provide:Ge,useExisting:(0,_.Gpc)(()=>co),multi:!0};function gs(q,z){return null==q?`${z}`:(z&&"object"==typeof z&&(z="Object"),`${q}: ${z}`.slice(0,50))}let co=(()=>{class q extends $e{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(H){this._compareWith=H}writeValue(H){this.value=H;const Lt=gs(this._getOptionId(H),H);this.setProperty("value",Lt)}registerOnChange(H){this.onChange=fe=>{this.value=this._getOptionValue(fe),H(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(H){for(const fe of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(fe),H))return fe;return null}_getOptionValue(H){const fe=function Cl(q){return q.split(":")[0]}(H);return this._optionMap.has(fe)?this._optionMap.get(fe):H}}return q.\u0275fac=function(){let z;return function(fe){return(z||(z=_.n5z(q)))(fe||q)}}(),q.\u0275dir=_.lG2({type:q,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(H,fe){1&H&&_.NdJ("change",function(On){return fe.onChange(On.target.value)})("blur",function(){return fe.onTouched()})},inputs:{compareWith:"compareWith"},features:[_._Bn([Ta]),_.qOj]}),q})(),Aa=(()=>{class q{constructor(H,fe,Lt){this._element=H,this._renderer=fe,this._select=Lt,this._select&&(this.id=this._select._registerOption())}set ngValue(H){null!=this._select&&(this._select._optionMap.set(this.id,H),this._setElementValue(gs(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._setElementValue(H),this._select&&this._select.writeValue(this._select.value)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return q.\u0275fac=function(H){return new(H||q)(_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(co,9))},q.\u0275dir=_.lG2({type:q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),q})();const xa={provide:Ge,useExisting:(0,_.Gpc)(()=>Oo),multi:!0};function js(q,z){return null==q?`${z}`:("string"==typeof z&&(z=`'${z}'`),z&&"object"==typeof z&&(z="Object"),`${q}: ${z}`.slice(0,50))}let Oo=(()=>{class q extends $e{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(H){this._compareWith=H}writeValue(H){let fe;if(this.value=H,Array.isArray(H)){const Lt=H.map(On=>this._getOptionId(On));fe=(On,as)=>{On._setSelected(Lt.indexOf(as.toString())>-1)}}else fe=(Lt,On)=>{Lt._setSelected(!1)};this._optionMap.forEach(fe)}registerOnChange(H){this.onChange=fe=>{const Lt=[],On=fe.selectedOptions;if(void 0!==On){const as=On;for(let Pt=0;Pt<as.length;Pt++){const ko=this._getOptionValue(as[Pt].value);Lt.push(ko)}}else{const as=fe.options;for(let Pt=0;Pt<as.length;Pt++){const Er=as[Pt];if(Er.selected){const ko=this._getOptionValue(Er.value);Lt.push(ko)}}}this.value=Lt,H(Lt)}}_registerOption(H){const fe=(this._idCounter++).toString();return this._optionMap.set(fe,H),fe}_getOptionId(H){for(const fe of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(fe)._value,H))return fe;return null}_getOptionValue(H){const fe=function qi(q){return q.split(":")[0]}(H);return this._optionMap.has(fe)?this._optionMap.get(fe)._value:H}}return q.\u0275fac=function(){let z;return function(fe){return(z||(z=_.n5z(q)))(fe||q)}}(),q.\u0275dir=_.lG2({type:q,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(H,fe){1&H&&_.NdJ("change",function(On){return fe.onChange(On.target)})("blur",function(){return fe.onTouched()})},inputs:{compareWith:"compareWith"},features:[_._Bn([xa]),_.qOj]}),q})(),wo=(()=>{class q{constructor(H,fe,Lt){this._element=H,this._renderer=fe,this._select=Lt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(H){null!=this._select&&(this._value=H,this._setElementValue(js(this.id,H)),this._select.writeValue(this._select.value))}set value(H){this._select?(this._value=H,this._setElementValue(js(this.id,H)),this._select.writeValue(this._select.value)):this._setElementValue(H)}_setElementValue(H){this._renderer.setProperty(this._element.nativeElement,"value",H)}_setSelected(H){this._renderer.setProperty(this._element.nativeElement,"selected",H)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return q.\u0275fac=function(H){return new(H||q)(_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(Oo,9))},q.\u0275dir=_.lG2({type:q,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),q})(),Mt=(()=>{class q{}return q.\u0275fac=function(H){return new(H||q)},q.\u0275mod=_.oAB({type:q}),q.\u0275inj=_.cJS({imports:[ft]}),q})(),Vn=(()=>{class q{static withConfig(H){return{ngModule:q,providers:[{provide:oe,useValue:H.callSetDisabledState??Re}]}}}return q.\u0275fac=function(H){return new(H||q)},q.\u0275mod=_.oAB({type:q}),q.\u0275inj=_.cJS({imports:[Mt]}),q})()},3238:(gn,at,j)=>{j.d(at,{rD:()=>Ln,K7:()=>Fr,HF:()=>un,BQ:()=>ze,ey:()=>je,Ng:()=>xn,CB:()=>At,jH:()=>an,Kr:()=>xt,Id:()=>Ye,FD:()=>nn,sb:()=>kn});var _=j(4650),L=j(7253),W=j(445),Ne=j(6895),Ae=j(3353),$e=j(1281),Ge=j(7579),Ve=j(9521);const ke=["text"];function Tt(Et,de){if(1&Et&&_._UZ(0,"mat-pseudo-checkbox",6),2&Et){const te=_.oxw();_.Q6J("state",te.selected?"checked":"unchecked")("disabled",te.disabled)}}function ut(Et,de){if(1&Et&&_._UZ(0,"mat-pseudo-checkbox",7),2&Et){const te=_.oxw();_.Q6J("disabled",te.disabled)}}function Ht(Et,de){if(1&Et&&(_.TgZ(0,"span",8),_._uU(1),_.qZA()),2&Et){const te=_.oxw();_.xp6(1),_.hij("(",te.group.label,")")}}const Kt=[[["mat-icon"]],"*"],pt=["mat-icon","*"],Se=new _.OlP("mat-sanity-checks",{providedIn:"root",factory:function qe(){return!0}});let ze=(()=>{class Et{constructor(te,le,ct){this._sanityChecks=le,this._document=ct,this._hasDoneGlobalChecks=!1,te._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(te){return!(0,Ae.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[te])}}return Et.\u0275fac=function(te){return new(te||Et)(_.LFG(L.qm),_.LFG(Se,8),_.LFG(Ne.K0))},Et.\u0275mod=_.oAB({type:Et}),Et.\u0275inj=_.cJS({imports:[W.vT,W.vT]}),Et})();function Ye(Et){return class extends Et{get disabled(){return this._disabled}set disabled(de){this._disabled=(0,$e.Ig)(de)}constructor(...de){super(...de),this._disabled=!1}}}function xt(Et){return class extends Et{get disableRipple(){return this._disableRipple}set disableRipple(de){this._disableRipple=(0,$e.Ig)(de)}constructor(...de){super(...de),this._disableRipple=!1}}}function kn(Et,de=0){return class extends Et{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(te){this._tabIndex=null!=te?(0,$e.su)(te):this.defaultTabIndex}constructor(...te){super(...te),this._tabIndex=de,this.defaultTabIndex=de}}}function nn(Et){return class extends Et{updateErrorState(){const de=this.errorState,vt=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);vt!==de&&(this.errorState=vt,this.stateChanges.next())}constructor(...de){super(...de),this.errorState=!1}}}let Ln=(()=>{class Et{isErrorState(te,le){return!!(te&&te.invalid&&(te.touched||le&&le.submitted))}}return Et.\u0275fac=function(te){return new(te||Et)},Et.\u0275prov=_.Yz7({token:Et,factory:Et.\u0275fac,providedIn:"root"}),Et})();class Dn{constructor(de,te,le,ct=!1){this._renderer=de,this.element=te,this.config=le,this._animationForciblyDisabledThroughCss=ct,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ur=(0,Ae.i$)({passive:!0,capture:!0});class qn{constructor(){this._events=new Map,this._delegateEventHandler=de=>{const te=(0,Ae.sA)(de);te&&this._events.get(de.type)?.forEach((le,ct)=>{(ct===te||ct.contains(te))&&le.forEach(vt=>vt.handleEvent(de))})}}addHandler(de,te,le,ct){const vt=this._events.get(te);if(vt){const ve=vt.get(le);ve?ve.add(ct):vt.set(le,new Set([ct]))}else this._events.set(te,new Map([[le,new Set([ct])]])),de.runOutsideAngular(()=>{document.addEventListener(te,this._delegateEventHandler,ur)})}removeHandler(de,te,le){const ct=this._events.get(de);if(!ct)return;const vt=ct.get(te);vt&&(vt.delete(le),0===vt.size&&ct.delete(te),0===ct.size&&(this._events.delete(de),document.removeEventListener(de,this._delegateEventHandler,ur)))}}const or={enterDuration:225,exitDuration:150},Tn=(0,Ae.i$)({passive:!0,capture:!0}),on=["mousedown","touchstart"],Cr=["mouseup","mouseleave","touchend","touchcancel"];class Li{constructor(de,te,le,ct){this._target=de,this._ngZone=te,this._platform=ct,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,ct.isBrowser&&(this._containerElement=(0,$e.fI)(le))}fadeInRipple(de,te,le={}){const ct=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),vt={...or,...le.animation};le.centered&&(de=ct.left+ct.width/2,te=ct.top+ct.height/2);const ve=le.radius||function jr(Et,de,te){const le=Math.max(Math.abs(Et-te.left),Math.abs(Et-te.right)),ct=Math.max(Math.abs(de-te.top),Math.abs(de-te.bottom));return Math.sqrt(le*le+ct*ct)}(de,te,ct),be=de-ct.left,He=te-ct.top,we=vt.enterDuration,re=document.createElement("div");re.classList.add("mat-ripple-element"),re.style.left=be-ve+"px",re.style.top=He-ve+"px",re.style.height=2*ve+"px",re.style.width=2*ve+"px",null!=le.color&&(re.style.backgroundColor=le.color),re.style.transitionDuration=`${we}ms`,this._containerElement.appendChild(re);const ye=window.getComputedStyle(re),he=ye.transitionDuration,oe="none"===ye.transitionProperty||"0s"===he||"0s, 0s"===he||0===ct.width&&0===ct.height,Re=new Dn(this,re,le,oe);re.style.transform="scale3d(1, 1, 1)",Re.state=0,le.persistent||(this._mostRecentTransientRipple=Re);let rt=null;return!oe&&(we||vt.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const Ut=()=>this._finishRippleTransition(Re),vn=()=>this._destroyRipple(Re);re.addEventListener("transitionend",Ut),re.addEventListener("transitioncancel",vn),rt={onTransitionEnd:Ut,onTransitionCancel:vn}}),this._activeRipples.set(Re,rt),(oe||!we)&&this._finishRippleTransition(Re),Re}fadeOutRipple(de){if(2===de.state||3===de.state)return;const te=de.element,le={...or,...de.config.animation};te.style.transitionDuration=`${le.exitDuration}ms`,te.style.opacity="0",de.state=2,(de._animationForciblyDisabledThroughCss||!le.exitDuration)&&this._finishRippleTransition(de)}fadeOutAll(){this._getActiveRipples().forEach(de=>de.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(de=>{de.config.persistent||de.fadeOut()})}setupTriggerEvents(de){const te=(0,$e.fI)(de);!this._platform.isBrowser||!te||te===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=te,on.forEach(le=>{Li._eventManager.addHandler(this._ngZone,le,te,this)}))}handleEvent(de){"mousedown"===de.type?this._onMousedown(de):"touchstart"===de.type?this._onTouchStart(de):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Cr.forEach(te=>{this._triggerElement.addEventListener(te,this,Tn)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(de){0===de.state?this._startFadeOutTransition(de):2===de.state&&this._destroyRipple(de)}_startFadeOutTransition(de){const te=de===this._mostRecentTransientRipple,{persistent:le}=de.config;de.state=1,!le&&(!te||!this._isPointerDown)&&de.fadeOut()}_destroyRipple(de){const te=this._activeRipples.get(de)??null;this._activeRipples.delete(de),this._activeRipples.size||(this._containerRect=null),de===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),de.state=3,null!==te&&(de.element.removeEventListener("transitionend",te.onTransitionEnd),de.element.removeEventListener("transitioncancel",te.onTransitionCancel)),de.element.remove()}_onMousedown(de){const te=(0,L.X6)(de),le=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!te&&!le&&(this._isPointerDown=!0,this.fadeInRipple(de.clientX,de.clientY,this._target.rippleConfig))}_onTouchStart(de){if(!this._target.rippleDisabled&&!(0,L.yG)(de)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const te=de.changedTouches;for(let le=0;le<te.length;le++)this.fadeInRipple(te[le].clientX,te[le].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(de=>{!de.config.persistent&&(1===de.state||de.config.terminateOnPointerUp&&0===de.state)&&de.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const de=this._triggerElement;de&&(on.forEach(te=>Li._eventManager.removeHandler(te,de,this)),this._pointerUpEventsRegistered&&Cr.forEach(te=>de.removeEventListener(te,this,Tn)))}}Li._eventManager=new qn;const ci=new _.OlP("mat-ripple-global-options");let Ri=(()=>{class Et{get disabled(){return this._disabled}set disabled(te){te&&this.fadeOutAllNonPersistent(),this._disabled=te,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(te){this._trigger=te,this._setupTriggerEventsIfEnabled()}constructor(te,le,ct,vt,ve){this._elementRef=te,this._animationMode=ve,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=vt||{},this._rippleRenderer=new Li(this,le,te,ct)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(te,le=0,ct){return"number"==typeof te?this._rippleRenderer.fadeInRipple(te,le,{...this.rippleConfig,...ct}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...te})}}return Et.\u0275fac=function(te){return new(te||Et)(_.Y36(_.SBq),_.Y36(_.R0b),_.Y36(Ae.t4),_.Y36(ci,8),_.Y36(_.QbO,8))},Et.\u0275dir=_.lG2({type:Et,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(te,le){2&te&&_.ekj("mat-ripple-unbounded",le.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),Et})(),er=(()=>{class Et{}return Et.\u0275fac=function(te){return new(te||Et)},Et.\u0275mod=_.oAB({type:Et}),Et.\u0275inj=_.cJS({imports:[ze,ze]}),Et})(),ir=(()=>{class Et{constructor(te){this._animationMode=te,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return Et.\u0275fac=function(te){return new(te||Et)(_.Y36(_.QbO,8))},Et.\u0275cmp=_.Xpm({type:Et,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(te,le){2&te&&_.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===le.state)("mat-pseudo-checkbox-checked","checked"===le.state)("mat-pseudo-checkbox-disabled",le.disabled)("mat-pseudo-checkbox-minimal","minimal"===le.appearance)("mat-pseudo-checkbox-full","full"===le.appearance)("_mat-animation-noopable","NoopAnimations"===le._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(te,le){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),Et})(),cn=(()=>{class Et{}return Et.\u0275fac=function(te){return new(te||Et)},Et.\u0275mod=_.oAB({type:Et}),Et.\u0275inj=_.cJS({imports:[ze]}),Et})();const un=new _.OlP("MAT_OPTION_PARENT_COMPONENT"),Fr=new _.OlP("MatOptgroup");let zr=0;class gt{constructor(de,te=!1){this.source=de,this.isUserInput=te}}let _n=(()=>{class Et{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(te){this._disabled=(0,$e.Ig)(te)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(te,le,ct,vt){this._element=te,this._changeDetectorRef=le,this._parent=ct,this.group=vt,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+zr++,this.onSelectionChange=new _.vpe,this._stateChanges=new Ge.x}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(te,le){const ct=this._getHostElement();"function"==typeof ct.focus&&ct.focus(le)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(te){(te.keyCode===Ve.K5||te.keyCode===Ve.L_)&&!(0,Ve.Vb)(te)&&(this._selectViaInteraction(),te.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const te=this.viewValue;te!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=te)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(te=!1){this.onSelectionChange.emit(new gt(this,te))}}return Et.\u0275fac=function(te){_.$Z()},Et.\u0275dir=_.lG2({type:Et,viewQuery:function(te,le){if(1&te&&_.Gf(ke,7),2&te){let ct;_.iGM(ct=_.CRH())&&(le._text=ct.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),Et})(),je=(()=>{class Et extends _n{constructor(te,le,ct,vt){super(te,le,ct,vt)}}return Et.\u0275fac=function(te){return new(te||Et)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(un,8),_.Y36(Fr,8))},Et.\u0275cmp=_.Xpm({type:Et,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(te,le){1&te&&_.NdJ("click",function(){return le._selectViaInteraction()})("keydown",function(vt){return le._handleKeydown(vt)}),2&te&&(_.Ikx("id",le.id),_.uIk("aria-selected",le.selected)("aria-disabled",le.disabled.toString()),_.ekj("mdc-list-item--selected",le.selected)("mat-mdc-option-multiple",le.multiple)("mat-mdc-option-active",le.active)("mdc-list-item--disabled",le.disabled))},exportAs:["matOption"],features:[_.qOj],ngContentSelectors:pt,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(te,le){1&te&&(_.F$t(Kt),_.YNc(0,Tt,1,2,"mat-pseudo-checkbox",0),_.Hsn(1),_.TgZ(2,"span",1,2),_.Hsn(4,1),_.qZA(),_.YNc(5,ut,1,1,"mat-pseudo-checkbox",3),_.YNc(6,Ht,2,1,"span",4),_._UZ(7,"div",5)),2&te&&(_.Q6J("ngIf",le.multiple),_.xp6(5),_.Q6J("ngIf",!le.multiple&&le.selected&&!le.hideSingleSelectionIndicator),_.xp6(1),_.Q6J("ngIf",le.group&&le.group._inert),_.xp6(1),_.Q6J("matRippleTrigger",le._getHostElement())("matRippleDisabled",le.disabled||le.disableRipple))},dependencies:[Ri,Ne.O5,ir],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),Et})();function At(Et,de,te){if(te.length){let le=de.toArray(),ct=te.toArray(),vt=0;for(let ve=0;ve<Et+1;ve++)le[ve].group&&le[ve].group===ct[vt]&&vt++;return vt}return 0}function an(Et,de,te,le){return Et<te?Et:Et+de>te+le?Math.max(0,Et-le+de):te}let xn=(()=>{class Et{}return Et.\u0275fac=function(te){return new(te||Et)},Et.\u0275mod=_.oAB({type:Et}),Et.\u0275inj=_.cJS({imports:[er,Ne.ez,ze,cn]}),Et})()},7676:(gn,at,j)=>{j.d(at,{G_:()=>ir,KE:()=>Hr,Eo:()=>jr,lN:()=>zr,hX:()=>it});var _=j(4650),L=j(445),W=j(3353),Fe=j(7579),Ne=j(6451),Ae=j(2722),$e=j(6895),Ge=j(1281),Ve=j(7340),Ie=j(9751),De=j(8372);let ke=(()=>{class gt{create(je){return typeof MutationObserver>"u"?null:new MutationObserver(je)}}return gt.\u0275fac=function(je){return new(je||gt)},gt.\u0275prov=_.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt})(),Tt=(()=>{class gt{constructor(je){this._mutationObserverFactory=je,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((je,At)=>this._cleanupObserver(At))}observe(je){const At=(0,Ge.fI)(je);return new Ie.y(an=>{const Et=this._observeElement(At).subscribe(an);return()=>{Et.unsubscribe(),this._unobserveElement(At)}})}_observeElement(je){if(this._observedElements.has(je))this._observedElements.get(je).count++;else{const At=new Fe.x,an=this._mutationObserverFactory.create(xn=>At.next(xn));an&&an.observe(je,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(je,{observer:an,stream:At,count:1})}return this._observedElements.get(je).stream}_unobserveElement(je){this._observedElements.has(je)&&(this._observedElements.get(je).count--,this._observedElements.get(je).count||this._cleanupObserver(je))}_cleanupObserver(je){if(this._observedElements.has(je)){const{observer:At,stream:an}=this._observedElements.get(je);At&&At.disconnect(),an.complete(),this._observedElements.delete(je)}}}return gt.\u0275fac=function(je){return new(je||gt)(_.LFG(ke))},gt.\u0275prov=_.Yz7({token:gt,factory:gt.\u0275fac,providedIn:"root"}),gt})(),ut=(()=>{class gt{get disabled(){return this._disabled}set disabled(je){this._disabled=(0,Ge.Ig)(je),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(je){this._debounce=(0,Ge.su)(je),this._subscribe()}constructor(je,At,an){this._contentObserver=je,this._elementRef=At,this._ngZone=an,this.event=new _.vpe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const je=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?je.pipe((0,De.b)(this.debounce)):je).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return gt.\u0275fac=function(je){return new(je||gt)(_.Y36(Tt),_.Y36(_.SBq),_.Y36(_.R0b))},gt.\u0275dir=_.lG2({type:gt,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),gt})(),Ht=(()=>{class gt{}return gt.\u0275fac=function(je){return new(je||gt)},gt.\u0275mod=_.oAB({type:gt}),gt.\u0275inj=_.cJS({providers:[ke]}),gt})();var Kt=j(3238);const pt=["matFormFieldNotchedOutline",""],It=["*"],Oe=["textField"],Ft=["iconPrefixContainer"],qe=["textPrefixContainer"];function Se(gt,_n){1&gt&&_._UZ(0,"span",19)}function ze(gt,_n){if(1&gt){const je=_.EpF();_.TgZ(0,"label",17),_.NdJ("cdkObserveContent",function(){_.CHM(je);const an=_.oxw(2);return _.KtG(an._refreshOutlineNotchWidth())}),_.Hsn(1,1),_.YNc(2,Se,1,0,"span",18),_.qZA()}if(2&gt){const je=_.oxw(2);_.Q6J("floating",je._shouldLabelFloat())("cdkObserveContentDisabled",!je._hasOutline())("id",je._labelId),_.uIk("for",je._control.id)("aria-owns",je._control.id),_.xp6(2),_.Q6J("ngIf",!je.hideRequiredMarker&&je._control.required)}}function Bt(gt,_n){if(1&gt&&_.YNc(0,ze,3,6,"label",16),2&gt){const je=_.oxw();_.Q6J("ngIf",je._hasFloatingLabel())}}function Ot(gt,_n){1&gt&&_._UZ(0,"div",20)}function nt(gt,_n){}function Ye(gt,_n){if(1&gt&&_.YNc(0,nt,0,0,"ng-template",22),2&gt){_.oxw(2);const je=_.MAs(1);_.Q6J("ngTemplateOutlet",je)}}function zt(gt,_n){if(1&gt&&(_.TgZ(0,"div",21),_.YNc(1,Ye,1,1,"ng-template",9),_.qZA()),2&gt){const je=_.oxw();_.Q6J("matFormFieldNotchedOutlineOpen",je._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",je._labelWidth),_.xp6(1),_.Q6J("ngIf",!je._forceDisplayInfixLabel())}}function xt(gt,_n){1&gt&&(_.TgZ(0,"div",23,24),_.Hsn(2,2),_.qZA())}function kn(gt,_n){1&gt&&(_.TgZ(0,"div",25,26),_.Hsn(2,3),_.qZA())}function nn(gt,_n){}function Mr(gt,_n){if(1&gt&&_.YNc(0,nn,0,0,"ng-template",22),2&gt){_.oxw();const je=_.MAs(1);_.Q6J("ngTemplateOutlet",je)}}function _e(gt,_n){1&gt&&(_.TgZ(0,"div",27),_.Hsn(1,4),_.qZA())}function Kn(gt,_n){1&gt&&(_.TgZ(0,"div",28),_.Hsn(1,5),_.qZA())}function Qn(gt,_n){1&gt&&_._UZ(0,"div",29)}function Ze(gt,_n){if(1&gt&&(_.TgZ(0,"div",30),_.Hsn(1,6),_.qZA()),2&gt){const je=_.oxw();_.Q6J("@transitionMessages",je._subscriptAnimationState)}}function lt(gt,_n){if(1&gt&&(_.TgZ(0,"mat-hint",34),_._uU(1),_.qZA()),2&gt){const je=_.oxw(2);_.Q6J("id",je._hintLabelId),_.xp6(1),_.Oqu(je.hintLabel)}}function st(gt,_n){if(1&gt&&(_.TgZ(0,"div",31),_.YNc(1,lt,2,2,"mat-hint",32),_.Hsn(2,7),_._UZ(3,"div",33),_.Hsn(4,8),_.qZA()),2&gt){const je=_.oxw();_.Q6J("@transitionMessages",je._subscriptAnimationState),_.xp6(1),_.Q6J("ngIf",je.hintLabel)}}const tt=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],dt=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let it=(()=>{class gt{}return gt.\u0275fac=function(je){return new(je||gt)},gt.\u0275dir=_.lG2({type:gt,selectors:[["mat-label"]]}),gt})();const $t=new _.OlP("MatError");let Cn=0,zn=(()=>{class gt{constructor(){this.align="start",this.id="mat-mdc-hint-"+Cn++}}return gt.\u0275fac=function(je){return new(je||gt)},gt.\u0275dir=_.lG2({type:gt,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(je,At){2&je&&(_.Ikx("id",At.id),_.uIk("align",null),_.ekj("mat-mdc-form-field-hint-end","end"===At.align))},inputs:{align:"align",id:"id"}}),gt})();const cr=new _.OlP("MatPrefix"),Dn=new _.OlP("MatSuffix");let qn=(()=>{class gt{constructor(je){this._elementRef=je,this.floating=!1}getWidth(){return function or(gt){if(null!==gt.offsetParent)return gt.scrollWidth;const je=gt.cloneNode(!0);je.style.setProperty("position","absolute"),je.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(je);const At=je.scrollWidth;return je.remove(),At}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return gt.\u0275fac=function(je){return new(je||gt)(_.Y36(_.SBq))},gt.\u0275dir=_.lG2({type:gt,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(je,At){2&je&&_.ekj("mdc-floating-label--float-above",At.floating)},inputs:{floating:"floating"}}),gt})();const Dr="mdc-line-ripple--active",Tn="mdc-line-ripple--deactivating";let on=(()=>{class gt{constructor(je,At){this._elementRef=je,this._handleTransitionEnd=an=>{const xn=this._elementRef.nativeElement.classList,Et=xn.contains(Tn);"opacity"===an.propertyName&&Et&&xn.remove(Dr,Tn)},At.runOutsideAngular(()=>{je.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const je=this._elementRef.nativeElement.classList;je.remove(Tn),je.add(Dr)}deactivate(){this._elementRef.nativeElement.classList.add(Tn)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return gt.\u0275fac=function(je){return new(je||gt)(_.Y36(_.SBq),_.Y36(_.R0b))},gt.\u0275dir=_.lG2({type:gt,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),gt})(),Cr=(()=>{class gt{constructor(je,At){this._elementRef=je,this._ngZone=At,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const je=this._elementRef.nativeElement.querySelector(".mdc-floating-label");je?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(je.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>je.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return gt.\u0275fac=function(je){return new(je||gt)(_.Y36(_.SBq),_.Y36(_.R0b))},gt.\u0275cmp=_.Xpm({type:gt,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(je,At){2&je&&_.ekj("mdc-notched-outline--notched",At.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:pt,ngContentSelectors:It,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(je,At){1&je&&(_.F$t(),_._UZ(0,"div",0),_.TgZ(1,"div",1),_.Hsn(2),_.qZA(),_._UZ(3,"div",2)),2&je&&(_.xp6(1),_.Udp("width",At._getNotchWidth()))},encapsulation:2,changeDetection:0}),gt})();const Li={transitionMessages:(0,Ve.X$)("transitionMessages",[(0,Ve.SB)("enter",(0,Ve.oB)({opacity:1,transform:"translateY(0%)"})),(0,Ve.eR)("void => enter",[(0,Ve.oB)({opacity:0,transform:"translateY(-5px)"}),(0,Ve.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let jr=(()=>{class gt{}return gt.\u0275fac=function(je){return new(je||gt)},gt.\u0275dir=_.lG2({type:gt}),gt})();const ir=new _.OlP("MatFormField"),cn=new _.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let un=0,Hr=(()=>{class gt{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(je){this._hideRequiredMarker=(0,Ge.Ig)(je)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(je){je!==this._floatLabel&&(this._floatLabel=je,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(je){const At=this._appearance;this._appearance=je||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==At&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(je){this._subscriptSizing=je||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(je){this._hintLabel=je,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(je){this._explicitFormFieldControl=je}constructor(je,At,an,xn,Et,de,te,le){this._elementRef=je,this._changeDetectorRef=At,this._ngZone=an,this._dir=xn,this._platform=Et,this._defaults=de,this._animationMode=te,this._document=le,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+un++,this._hintLabelId="mat-mdc-hint-"+un++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Fe.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,de&&(de.appearance&&(this.appearance=de.appearance),this._hideRequiredMarker=Boolean(de?.hideRequiredMarker),de.color&&(this.color=de.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const je=this._control;je.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${je.controlType}`),je.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),je.ngControl&&je.ngControl.valueChanges&&je.ngControl.valueChanges.pipe((0,Ae.R)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(je=>!je._isText),this._hasTextPrefix=!!this._prefixChildren.find(je=>je._isText),this._hasIconSuffix=!!this._suffixChildren.find(je=>!je._isText),this._hasTextSuffix=!!this._suffixChildren.find(je=>je._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,Ne.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Ae.R)(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe((0,Ae.R)(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(je){const At=this._control?this._control.ngControl:null;return At&&At[je]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let je=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&je.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const At=this._hintChildren?this._hintChildren.find(xn=>"start"===xn.align):null,an=this._hintChildren?this._hintChildren.find(xn=>"end"===xn.align):null;At?je.push(At.id):this._hintLabel&&je.push(this._hintLabelId),an&&je.push(an.id)}else this._errorChildren&&je.push(...this._errorChildren.map(At=>At.id));this._control.setDescribedByIds(je)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const je=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(je.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const At=this._iconPrefixContainer?.nativeElement,an=this._textPrefixContainer?.nativeElement,xn=At?.getBoundingClientRect().width??0,Et=an?.getBoundingClientRect().width??0;je.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${xn+Et}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const je=this._elementRef.nativeElement;if(je.getRootNode){const At=je.getRootNode();return At&&At!==je}return document.documentElement.contains(je)}}return gt.\u0275fac=function(je){return new(je||gt)(_.Y36(_.SBq),_.Y36(_.sBO),_.Y36(_.R0b),_.Y36(L.Is),_.Y36(W.t4),_.Y36(cn,8),_.Y36(_.QbO,8),_.Y36($e.K0))},gt.\u0275cmp=_.Xpm({type:gt,selectors:[["mat-form-field"]],contentQueries:function(je,At,an){if(1&je&&(_.Suo(an,it,5),_.Suo(an,it,7),_.Suo(an,jr,5),_.Suo(an,cr,5),_.Suo(an,Dn,5),_.Suo(an,$t,5),_.Suo(an,zn,5)),2&je){let xn;_.iGM(xn=_.CRH())&&(At._labelChildNonStatic=xn.first),_.iGM(xn=_.CRH())&&(At._labelChildStatic=xn.first),_.iGM(xn=_.CRH())&&(At._formFieldControl=xn.first),_.iGM(xn=_.CRH())&&(At._prefixChildren=xn),_.iGM(xn=_.CRH())&&(At._suffixChildren=xn),_.iGM(xn=_.CRH())&&(At._errorChildren=xn),_.iGM(xn=_.CRH())&&(At._hintChildren=xn)}},viewQuery:function(je,At){if(1&je&&(_.Gf(Oe,5),_.Gf(Ft,5),_.Gf(qe,5),_.Gf(qn,5),_.Gf(Cr,5),_.Gf(on,5)),2&je){let an;_.iGM(an=_.CRH())&&(At._textField=an.first),_.iGM(an=_.CRH())&&(At._iconPrefixContainer=an.first),_.iGM(an=_.CRH())&&(At._textPrefixContainer=an.first),_.iGM(an=_.CRH())&&(At._floatingLabel=an.first),_.iGM(an=_.CRH())&&(At._notchedOutline=an.first),_.iGM(an=_.CRH())&&(At._lineRipple=an.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(je,At){2&je&&_.ekj("mat-mdc-form-field-label-always-float",At._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",At._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",At._hasIconSuffix)("mat-form-field-invalid",At._control.errorState)("mat-form-field-disabled",At._control.disabled)("mat-form-field-autofilled",At._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===At._animationMode)("mat-form-field-appearance-fill","fill"==At.appearance)("mat-form-field-appearance-outline","outline"==At.appearance)("mat-form-field-hide-placeholder",At._hasFloatingLabel()&&!At._shouldLabelFloat())("mat-focused",At._control.focused)("mat-primary","accent"!==At.color&&"warn"!==At.color)("mat-accent","accent"===At.color)("mat-warn","warn"===At.color)("ng-untouched",At._shouldForward("untouched"))("ng-touched",At._shouldForward("touched"))("ng-pristine",At._shouldForward("pristine"))("ng-dirty",At._shouldForward("dirty"))("ng-valid",At._shouldForward("valid"))("ng-invalid",At._shouldForward("invalid"))("ng-pending",At._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[_._Bn([{provide:ir,useExisting:gt}])],ngContentSelectors:dt,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(je,At){1&je&&(_.F$t(tt),_.YNc(0,Bt,1,1,"ng-template",null,0,_.W1O),_.TgZ(2,"div",1,2),_.NdJ("click",function(xn){return At._control.onContainerClick&&At._control.onContainerClick(xn)}),_.YNc(4,Ot,1,0,"div",3),_.TgZ(5,"div",4),_.YNc(6,zt,2,3,"div",5),_.YNc(7,xt,3,0,"div",6),_.YNc(8,kn,3,0,"div",7),_.TgZ(9,"div",8),_.YNc(10,Mr,1,1,"ng-template",9),_.Hsn(11),_.qZA(),_.YNc(12,_e,2,0,"div",10),_.YNc(13,Kn,2,0,"div",11),_.qZA(),_.YNc(14,Qn,1,0,"div",12),_.qZA(),_.TgZ(15,"div",13),_.YNc(16,Ze,2,1,"div",14),_.YNc(17,st,5,2,"div",15),_.qZA()),2&je&&(_.xp6(2),_.ekj("mdc-text-field--filled",!At._hasOutline())("mdc-text-field--outlined",At._hasOutline())("mdc-text-field--no-label",!At._hasFloatingLabel())("mdc-text-field--disabled",At._control.disabled)("mdc-text-field--invalid",At._control.errorState),_.xp6(2),_.Q6J("ngIf",!At._hasOutline()&&!At._control.disabled),_.xp6(2),_.Q6J("ngIf",At._hasOutline()),_.xp6(1),_.Q6J("ngIf",At._hasIconPrefix),_.xp6(1),_.Q6J("ngIf",At._hasTextPrefix),_.xp6(2),_.Q6J("ngIf",!At._hasOutline()||At._forceDisplayInfixLabel()),_.xp6(2),_.Q6J("ngIf",At._hasTextSuffix),_.xp6(1),_.Q6J("ngIf",At._hasIconSuffix),_.xp6(1),_.Q6J("ngIf",!At._hasOutline()),_.xp6(1),_.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===At.subscriptSizing),_.Q6J("ngSwitch",At._getDisplayedMessages()),_.xp6(1),_.Q6J("ngSwitchCase","error"),_.xp6(1),_.Q6J("ngSwitchCase","hint"))},dependencies:[$e.O5,$e.tP,$e.RF,$e.n9,ut,zn,qn,Cr,on],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[Li.transitionMessages]},changeDetection:0}),gt})(),zr=(()=>{class gt{}return gt.\u0275fac=function(je){return new(je||gt)},gt.\u0275mod=_.oAB({type:gt}),gt.\u0275inj=_.cJS({imports:[Kt.BQ,$e.ez,Ht,Kt.BQ]}),gt})()},2478:(gn,at,j)=>{j.d(at,{gD:()=>os,LD:()=>Yi});var _=j(1281),L=j(4650),W=j(7579),Fe=j(9646),Ne=j(9751),Ae=j(8421),$e=j(5577),Ge=j(1144),Ve=j(576),Ie=j(3268);const De=["addListener","removeListener"],ke=["addEventListener","removeEventListener"],Tt=["on","off"];function ut(Ee,V,R,Y){if((0,Ve.m)(R)&&(Y=R,R=void 0),Y)return ut(Ee,V,R).pipe((0,Ie.Z)(Y));const[me,Be]=function It(Ee){return(0,Ve.m)(Ee.addEventListener)&&(0,Ve.m)(Ee.removeEventListener)}(Ee)?ke.map(Mt=>Xt=>Ee[Mt](V,Xt,R)):function Kt(Ee){return(0,Ve.m)(Ee.addListener)&&(0,Ve.m)(Ee.removeListener)}(Ee)?De.map(Ht(Ee,V)):function pt(Ee){return(0,Ve.m)(Ee.on)&&(0,Ve.m)(Ee.off)}(Ee)?Tt.map(Ht(Ee,V)):[];if(!me&&(0,Ge.z)(Ee))return(0,$e.z)(Mt=>ut(Mt,V,R))((0,Ae.Xf)(Ee));if(!me)throw new TypeError("Invalid event target");return new Ne.y(Mt=>{const Xt=(...Jt)=>Mt.next(1<Jt.length?Jt:Jt[0]);return me(Xt),()=>Be(Xt)})}function Ht(Ee,V){return R=>Y=>Ee[R](V,Y)}var Oe=j(4408),Ft=j(727);const qe={schedule(Ee){let V=requestAnimationFrame,R=cancelAnimationFrame;const{delegate:Y}=qe;Y&&(V=Y.requestAnimationFrame,R=Y.cancelAnimationFrame);const me=V(Be=>{R=void 0,Ee(Be)});return new Ft.w0(()=>R?.(me))},requestAnimationFrame(...Ee){const{delegate:V}=qe;return(V?.requestAnimationFrame||requestAnimationFrame)(...Ee)},cancelAnimationFrame(...Ee){const{delegate:V}=qe;return(V?.cancelAnimationFrame||cancelAnimationFrame)(...Ee)},delegate:void 0};var ze=j(7565);const Ot=new class Bt extends ze.v{flush(V){this._active=!0;const R=this._scheduled;this._scheduled=void 0;const{actions:Y}=this;let me;V=V||Y.shift();do{if(me=V.execute(V.state,V.delay))break}while((V=Y[0])&&V.id===R&&Y.shift());if(this._active=!1,me){for(;(V=Y[0])&&V.id===R&&Y.shift();)V.unsubscribe();throw me}}}(class Se extends Oe.o{constructor(V,R){super(V,R),this.scheduler=V,this.work=R}requestAsyncId(V,R,Y=0){return null!==Y&&Y>0?super.requestAsyncId(V,R,Y):(V.actions.push(this),V._scheduled||(V._scheduled=qe.requestAnimationFrame(()=>V.flush(void 0))))}recycleAsyncId(V,R,Y=0){var me;if(null!=Y?Y>0:this.delay>0)return super.recycleAsyncId(V,R,Y);const{actions:Be}=V;null!=R&&(null===(me=Be[Be.length-1])||void 0===me?void 0:me.id)!==R&&(qe.cancelAnimationFrame(R),V._scheduled=void 0)}});let zt,Ye=1;const xt={};function kn(Ee){return Ee in xt&&(delete xt[Ee],!0)}const nn={setImmediate(Ee){const V=Ye++;return xt[V]=!0,zt||(zt=Promise.resolve()),zt.then(()=>kn(V)&&Ee()),V},clearImmediate(Ee){kn(Ee)}},{setImmediate:_e,clearImmediate:Kn}=nn,Qn={setImmediate(...Ee){const{delegate:V}=Qn;return(V?.setImmediate||_e)(...Ee)},clearImmediate(Ee){const{delegate:V}=Qn;return(V?.clearImmediate||Kn)(Ee)},delegate:void 0},st=new class lt extends ze.v{flush(V){this._active=!0;const R=this._scheduled;this._scheduled=void 0;const{actions:Y}=this;let me;V=V||Y.shift();do{if(me=V.execute(V.state,V.delay))break}while((V=Y[0])&&V.id===R&&Y.shift());if(this._active=!1,me){for(;(V=Y[0])&&V.id===R&&Y.shift();)V.unsubscribe();throw me}}}(class Ze extends Oe.o{constructor(V,R){super(V,R),this.scheduler=V,this.work=R}requestAsyncId(V,R,Y=0){return null!==Y&&Y>0?super.requestAsyncId(V,R,Y):(V.actions.push(this),V._scheduled||(V._scheduled=Qn.setImmediate(V.flush.bind(V,void 0))))}recycleAsyncId(V,R,Y=0){var me;if(null!=Y?Y>0:this.delay>0)return super.recycleAsyncId(V,R,Y);const{actions:Be}=V;null!=R&&(null===(me=Be[Be.length-1])||void 0===me?void 0:me.id)!==R&&(Qn.clearImmediate(R),V._scheduled===R&&(V._scheduled=void 0))}});var dt=j(4986),it=j(4482),ln=j(5403),Ln=j(3532);function cr(Ee,V=dt.z){return function $t(Ee){return(0,it.e)((V,R)=>{let Y=!1,me=null,Be=null,Mt=!1;const Xt=()=>{if(Be?.unsubscribe(),Be=null,Y){Y=!1;const Fn=me;me=null,R.next(Fn)}Mt&&R.complete()},Jt=()=>{Be=null,Mt&&R.complete()};V.subscribe((0,ln.x)(R,Fn=>{Y=!0,me=Fn,Be||(0,Ae.Xf)(Ee(Fn)).subscribe(Be=(0,ln.x)(R,Xt,Jt))},()=>{Mt=!0,(!Y||!Be||Be.closed)&&R.complete()}))})}(()=>function zn(Ee=0,V,R=dt.P){let Y=-1;return null!=V&&((0,Ln.K)(V)?R=V:Y=V),new Ne.y(me=>{let Be=function Cn(Ee){return Ee instanceof Date&&!isNaN(Ee)}(Ee)?+Ee-R.now():Ee;Be<0&&(Be=0);let Mt=0;return R.schedule(function(){me.closed||(me.next(Mt++),0<=Y?this.schedule(void 0,Y):me.complete())},Be)})}(Ee,V))}var sr=j(9300),Dn=j(2722),ur=j(8675),qn=j(3353),or=j(6895),Dr=j(445);const Tn=["contentWrapper"],on=["*"],Cr=new L.OlP("VIRTUAL_SCROLL_STRATEGY");let er=(()=>{class Ee{constructor(R,Y,me){this._ngZone=R,this._platform=Y,this._scrolled=new W.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=me}register(R){this.scrollContainers.has(R)||this.scrollContainers.set(R,R.elementScrolled().subscribe(()=>this._scrolled.next(R)))}deregister(R){const Y=this.scrollContainers.get(R);Y&&(Y.unsubscribe(),this.scrollContainers.delete(R))}scrolled(R=20){return this._platform.isBrowser?new Ne.y(Y=>{this._globalSubscription||this._addGlobalListener();const me=R>0?this._scrolled.pipe(cr(R)).subscribe(Y):this._scrolled.subscribe(Y);return this._scrolledCount++,()=>{me.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,Fe.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((R,Y)=>this.deregister(Y)),this._scrolled.complete()}ancestorScrolled(R,Y){const me=this.getAncestorScrollContainers(R);return this.scrolled(Y).pipe((0,sr.h)(Be=>!Be||me.indexOf(Be)>-1))}getAncestorScrollContainers(R){const Y=[];return this.scrollContainers.forEach((me,Be)=>{this._scrollableContainsElement(Be,R)&&Y.push(Be)}),Y}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(R,Y){let me=(0,_.fI)(Y),Be=R.getElementRef().nativeElement;do{if(me==Be)return!0}while(me=me.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ut(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG(L.R0b),L.LFG(qn.t4),L.LFG(or.K0,8))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),ir=(()=>{class Ee{constructor(R,Y,me,Be){this.elementRef=R,this.scrollDispatcher=Y,this.ngZone=me,this.dir=Be,this._destroyed=new W.x,this._elementScrolled=new Ne.y(Mt=>this.ngZone.runOutsideAngular(()=>ut(this.elementRef.nativeElement,"scroll").pipe((0,Dn.R)(this._destroyed)).subscribe(Mt)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(R){const Y=this.elementRef.nativeElement,me=this.dir&&"rtl"==this.dir.value;null==R.left&&(R.left=me?R.end:R.start),null==R.right&&(R.right=me?R.start:R.end),null!=R.bottom&&(R.top=Y.scrollHeight-Y.clientHeight-R.bottom),me&&0!=(0,qn._i)()?(null!=R.left&&(R.right=Y.scrollWidth-Y.clientWidth-R.left),2==(0,qn._i)()?R.left=R.right:1==(0,qn._i)()&&(R.left=R.right?-R.right:R.right)):null!=R.right&&(R.left=Y.scrollWidth-Y.clientWidth-R.right),this._applyScrollToOptions(R)}_applyScrollToOptions(R){const Y=this.elementRef.nativeElement;(0,qn.Mq)()?Y.scrollTo(R):(null!=R.top&&(Y.scrollTop=R.top),null!=R.left&&(Y.scrollLeft=R.left))}measureScrollOffset(R){const Y="left",Be=this.elementRef.nativeElement;if("top"==R)return Be.scrollTop;if("bottom"==R)return Be.scrollHeight-Be.clientHeight-Be.scrollTop;const Mt=this.dir&&"rtl"==this.dir.value;return"start"==R?R=Mt?"right":Y:"end"==R&&(R=Mt?Y:"right"),Mt&&2==(0,qn._i)()?R==Y?Be.scrollWidth-Be.clientWidth-Be.scrollLeft:Be.scrollLeft:Mt&&1==(0,qn._i)()?R==Y?Be.scrollLeft+Be.scrollWidth-Be.clientWidth:-Be.scrollLeft:R==Y?Be.scrollLeft:Be.scrollWidth-Be.clientWidth-Be.scrollLeft}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.Y36(L.SBq),L.Y36(er),L.Y36(L.R0b),L.Y36(Dr.Is,8))},Ee.\u0275dir=L.lG2({type:Ee,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),Ee})(),un=(()=>{class Ee{constructor(R,Y,me){this._platform=R,this._change=new W.x,this._changeListener=Be=>{this._change.next(Be)},this._document=me,Y.runOutsideAngular(()=>{if(R.isBrowser){const Be=this._getWindow();Be.addEventListener("resize",this._changeListener),Be.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const R=this._getWindow();R.removeEventListener("resize",this._changeListener),R.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const R={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),R}getViewportRect(){const R=this.getViewportScrollPosition(),{width:Y,height:me}=this.getViewportSize();return{top:R.top,left:R.left,bottom:R.top+me,right:R.left+Y,height:me,width:Y}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const R=this._document,Y=this._getWindow(),me=R.documentElement,Be=me.getBoundingClientRect();return{top:-Be.top||R.body.scrollTop||Y.scrollY||me.scrollTop||0,left:-Be.left||R.body.scrollLeft||Y.scrollX||me.scrollLeft||0}}change(R=20){return R>0?this._change.pipe(cr(R)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const R=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:R.innerWidth,height:R.innerHeight}:{width:0,height:0}}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG(qn.t4),L.LFG(L.R0b),L.LFG(or.K0,8))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();const Ar=new L.OlP("VIRTUAL_SCROLLABLE");let Kr=(()=>{class Ee extends ir{constructor(R,Y,me,Be){super(R,Y,me,Be)}measureViewportSize(R){const Y=this.elementRef.nativeElement;return"horizontal"===R?Y.clientWidth:Y.clientHeight}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.Y36(L.SBq),L.Y36(er),L.Y36(L.R0b),L.Y36(Dr.Is,8))},Ee.\u0275dir=L.lG2({type:Ee,features:[L.qOj]}),Ee})();const Fr=typeof requestAnimationFrame<"u"?Ot:st;let Hr=(()=>{class Ee extends Kr{get orientation(){return this._orientation}set orientation(R){this._orientation!==R&&(this._orientation=R,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(R){this._appendOnly=(0,_.Ig)(R)}constructor(R,Y,me,Be,Mt,Xt,Jt,Fn){super(R,Xt,me,Mt),this.elementRef=R,this._changeDetectorRef=Y,this._scrollStrategy=Be,this.scrollable=Fn,this._platform=(0,L.f3M)(qn.t4),this._detachedSubject=new W.x,this._renderedRangeSubject=new W.x,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Ne.y(Un=>this._scrollStrategy.scrolledIndexChange.subscribe(Pr=>Promise.resolve().then(()=>this.ngZone.run(()=>Un.next(Pr))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Ft.w0.EMPTY,this._viewportChanges=Jt.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,ur.O)(null),cr(0,Fr)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(R){this.ngZone.runOutsideAngular(()=>{this._forOf=R,this._forOf.dataStream.pipe((0,Dn.R)(this._detachedSubject)).subscribe(Y=>{const me=Y.length;me!==this._dataLength&&(this._dataLength=me,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(R){return this.getElementRef().nativeElement.getBoundingClientRect()[R]}setTotalContentSize(R){this._totalContentSize!==R&&(this._totalContentSize=R,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(R){(function An(Ee,V){return Ee.start==V.start&&Ee.end==V.end})(this._renderedRange,R)||(this.appendOnly&&(R={start:0,end:Math.max(this._renderedRange.end,R.end)}),this._renderedRangeSubject.next(this._renderedRange=R),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(R,Y="to-start"){R=this.appendOnly&&"to-start"===Y?0:R;const Be="horizontal"==this.orientation,Mt=Be?"X":"Y";let Jt=`translate${Mt}(${Number((Be&&this.dir&&"rtl"==this.dir.value?-1:1)*R)}px)`;this._renderedContentOffset=R,"to-end"===Y&&(Jt+=` translate${Mt}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=Jt&&(this._renderedContentTransform=Jt,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(R,Y="auto"){const me={behavior:Y};"horizontal"===this.orientation?me.start=R:me.top=R,this.scrollable.scrollTo(me)}scrollToIndex(R,Y="auto"){this._scrollStrategy.scrollToIndex(R,Y)}measureScrollOffset(R){let Y;return Y=this.scrollable==this?me=>super.measureScrollOffset(me):me=>this.scrollable.measureScrollOffset(me),Math.max(0,Y(R??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(R){let Y;const Mt="rtl"==this.dir?.value;Y="start"==R?Mt?"right":"left":"end"==R?Mt?"left":"right":R||("horizontal"===this.orientation?"left":"top");const Xt=this.scrollable.measureBoundingClientRectWithScrollOffset(Y);return this.elementRef.nativeElement.getBoundingClientRect()[Y]-Xt}measureRenderedContentSize(){const R=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?R.offsetWidth:R.offsetHeight}measureRangeSize(R){return this._forOf?this._forOf.measureRangeSize(R,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(R){R&&this._runAfterChangeDetection.push(R),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const R=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const Y of R)Y()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.Y36(L.SBq),L.Y36(L.sBO),L.Y36(L.R0b),L.Y36(Cr,8),L.Y36(Dr.Is,8),L.Y36(er),L.Y36(un),L.Y36(Ar,8))},Ee.\u0275cmp=L.Xpm({type:Ee,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(R,Y){if(1&R&&L.Gf(Tn,7),2&R){let me;L.iGM(me=L.CRH())&&(Y._contentWrapper=me.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(R,Y){2&R&&L.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===Y.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==Y.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[L._Bn([{provide:ir,useFactory:(V,R)=>V||R,deps:[[new L.FiY,new L.tBr(Ar)],Ee]}]),L.qOj,L.jDz],ngContentSelectors:on,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(R,Y){1&R&&(L.F$t(),L.TgZ(0,"div",0,1),L.Hsn(2),L.qZA(),L._UZ(3,"div",2)),2&R&&(L.xp6(3),L.Udp("width",Y._totalContentWidth)("height",Y._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),Ee})(),At=(()=>{class Ee{}return Ee.\u0275fac=function(R){return new(R||Ee)},Ee.\u0275mod=L.oAB({type:Ee}),Ee.\u0275inj=L.cJS({}),Ee})(),an=(()=>{class Ee{}return Ee.\u0275fac=function(R){return new(R||Ee)},Ee.\u0275mod=L.oAB({type:Ee}),Ee.\u0275inj=L.cJS({imports:[Dr.vT,At,Hr,Dr.vT,At]}),Ee})();var xn=j(5698),Et=j(2529);class be{attach(V){return this._attachedHost=V,V.attach(this)}detach(){let V=this._attachedHost;null!=V&&(this._attachedHost=null,V.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(V){this._attachedHost=V}}class He extends be{constructor(V,R,Y,me,Be){super(),this.component=V,this.viewContainerRef=R,this.injector=Y,this.componentFactoryResolver=me,this.projectableNodes=Be}}class we extends be{constructor(V,R,Y,me){super(),this.templateRef=V,this.viewContainerRef=R,this.context=Y,this.injector=me}get origin(){return this.templateRef.elementRef}attach(V,R=this.context){return this.context=R,super.attach(V)}detach(){return this.context=void 0,super.detach()}}class re extends be{constructor(V){super(),this.element=V instanceof L.SBq?V.nativeElement:V}}class ye{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(V){return V instanceof He?(this._attachedPortal=V,this.attachComponentPortal(V)):V instanceof we?(this._attachedPortal=V,this.attachTemplatePortal(V)):this.attachDomPortal&&V instanceof re?(this._attachedPortal=V,this.attachDomPortal(V)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(V){this._disposeFn=V}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class he extends ye{constructor(V,R,Y,me,Be){super(),this.outletElement=V,this._componentFactoryResolver=R,this._appRef=Y,this._defaultInjector=me,this.attachDomPortal=Mt=>{const Xt=Mt.element,Jt=this._document.createComment("dom-portal");Xt.parentNode.insertBefore(Jt,Xt),this.outletElement.appendChild(Xt),this._attachedPortal=Mt,super.setDisposeFn(()=>{Jt.parentNode&&Jt.parentNode.replaceChild(Xt,Jt)})},this._document=Be}attachComponentPortal(V){const Y=(V.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(V.component);let me;return V.viewContainerRef?(me=V.viewContainerRef.createComponent(Y,V.viewContainerRef.length,V.injector||V.viewContainerRef.injector,V.projectableNodes||void 0),this.setDisposeFn(()=>me.destroy())):(me=Y.create(V.injector||this._defaultInjector||L.zs3.NULL),this._appRef.attachView(me.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(me.hostView),me.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(me)),this._attachedPortal=V,me}attachTemplatePortal(V){let R=V.viewContainerRef,Y=R.createEmbeddedView(V.templateRef,V.context,{injector:V.injector});return Y.rootNodes.forEach(me=>this.outletElement.appendChild(me)),Y.detectChanges(),this.setDisposeFn(()=>{let me=R.indexOf(Y);-1!==me&&R.remove(me)}),this._attachedPortal=V,Y}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(V){return V.hostView.rootNodes[0]}}let _r=(()=>{class Ee{}return Ee.\u0275fac=function(R){return new(R||Ee)},Ee.\u0275mod=L.oAB({type:Ee}),Ee.\u0275inj=L.cJS({}),Ee})();var Wi=j(6451),ht=j(9521);const mt=(0,qn.Mq)();class Qt{constructor(V,R){this._viewportRuler=V,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=R}attach(){}enable(){if(this._canBeEnabled()){const V=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=V.style.left||"",this._previousHTMLStyles.top=V.style.top||"",V.style.left=(0,_.HM)(-this._previousScrollPosition.left),V.style.top=(0,_.HM)(-this._previousScrollPosition.top),V.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const V=this._document.documentElement,Y=V.style,me=this._document.body.style,Be=Y.scrollBehavior||"",Mt=me.scrollBehavior||"";this._isEnabled=!1,Y.left=this._previousHTMLStyles.left,Y.top=this._previousHTMLStyles.top,V.classList.remove("cdk-global-scrollblock"),mt&&(Y.scrollBehavior=me.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),mt&&(Y.scrollBehavior=Be,me.scrollBehavior=Mt)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const R=this._document.body,Y=this._viewportRuler.getViewportSize();return R.scrollHeight>Y.height||R.scrollWidth>Y.width}}class Bn{constructor(V,R,Y,me){this._scrollDispatcher=V,this._ngZone=R,this._viewportRuler=Y,this._config=me,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(V){this._overlayRef=V}enable(){if(this._scrollSubscription)return;const V=this._scrollDispatcher.scrolled(0).pipe((0,sr.h)(R=>!R||!this._overlayRef.overlayElement.contains(R.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=V.subscribe(()=>{const R=this._viewportRuler.getViewportScrollPosition().top;Math.abs(R-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=V.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class tr{enable(){}disable(){}attach(){}}function En(Ee,V){return V.some(R=>Ee.bottom<R.top||Ee.top>R.bottom||Ee.right<R.left||Ee.left>R.right)}function Sr(Ee,V){return V.some(R=>Ee.top<R.top||Ee.bottom>R.bottom||Ee.left<R.left||Ee.right>R.right)}class Rr{constructor(V,R,Y,me){this._scrollDispatcher=V,this._viewportRuler=R,this._ngZone=Y,this._config=me,this._scrollSubscription=null}attach(V){this._overlayRef=V}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const R=this._overlayRef.overlayElement.getBoundingClientRect(),{width:Y,height:me}=this._viewportRuler.getViewportSize();En(R,[{width:Y,height:me,bottom:me,right:Y,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let $r=(()=>{class Ee{constructor(R,Y,me,Be){this._scrollDispatcher=R,this._viewportRuler=Y,this._ngZone=me,this.noop=()=>new tr,this.close=Mt=>new Bn(this._scrollDispatcher,this._ngZone,this._viewportRuler,Mt),this.block=()=>new Qt(this._viewportRuler,this._document),this.reposition=Mt=>new Rr(this._scrollDispatcher,this._viewportRuler,this._ngZone,Mt),this._document=Be}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG(er),L.LFG(un),L.LFG(L.R0b),L.LFG(or.K0))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();class Ti{constructor(V){if(this.scrollStrategy=new tr,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,V){const R=Object.keys(V);for(const Y of R)void 0!==V[Y]&&(this[Y]=V[Y])}}}class xo{constructor(V,R){this.connectionPair=V,this.scrollableViewProperties=R}}let dr=(()=>{class Ee{constructor(R){this._attachedOverlays=[],this._document=R}ngOnDestroy(){this.detach()}add(R){this.remove(R),this._attachedOverlays.push(R)}remove(R){const Y=this._attachedOverlays.indexOf(R);Y>-1&&this._attachedOverlays.splice(Y,1),0===this._attachedOverlays.length&&this.detach()}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG(or.K0))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),mi=(()=>{class Ee extends dr{constructor(R,Y){super(R),this._ngZone=Y,this._keydownListener=me=>{const Be=this._attachedOverlays;for(let Mt=Be.length-1;Mt>-1;Mt--)if(Be[Mt]._keydownEvents.observers.length>0){const Xt=Be[Mt]._keydownEvents;this._ngZone?this._ngZone.run(()=>Xt.next(me)):Xt.next(me);break}}}add(R){super.add(R),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG(or.K0),L.LFG(L.R0b,8))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),is=(()=>{class Ee extends dr{constructor(R,Y,me){super(R),this._platform=Y,this._ngZone=me,this._cursorStyleIsSet=!1,this._pointerDownListener=Be=>{this._pointerDownEventTarget=(0,qn.sA)(Be)},this._clickListener=Be=>{const Mt=(0,qn.sA)(Be),Xt="click"===Be.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:Mt;this._pointerDownEventTarget=null;const Jt=this._attachedOverlays.slice();for(let Fn=Jt.length-1;Fn>-1;Fn--){const Un=Jt[Fn];if(Un._outsidePointerEvents.observers.length<1||!Un.hasAttached())continue;if(Un.overlayElement.contains(Mt)||Un.overlayElement.contains(Xt))break;const Pr=Un._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>Pr.next(Be)):Pr.next(Be)}}}add(R){if(super.add(R),!this._isAttached){const Y=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(Y)):this._addEventListeners(Y),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=Y.style.cursor,Y.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const R=this._document.body;R.removeEventListener("pointerdown",this._pointerDownListener,!0),R.removeEventListener("click",this._clickListener,!0),R.removeEventListener("auxclick",this._clickListener,!0),R.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(R.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(R){R.addEventListener("pointerdown",this._pointerDownListener,!0),R.addEventListener("click",this._clickListener,!0),R.addEventListener("auxclick",this._clickListener,!0),R.addEventListener("contextmenu",this._clickListener,!0)}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG(or.K0),L.LFG(qn.t4),L.LFG(L.R0b,8))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),gr=(()=>{class Ee{constructor(R,Y){this._platform=Y,this._document=R}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const R="cdk-overlay-container";if(this._platform.isBrowser||(0,qn.Oy)()){const me=this._document.querySelectorAll(`.${R}[platform="server"], .${R}[platform="test"]`);for(let Be=0;Be<me.length;Be++)me[Be].remove()}const Y=this._document.createElement("div");Y.classList.add(R),(0,qn.Oy)()?Y.setAttribute("platform","test"):this._platform.isBrowser||Y.setAttribute("platform","server"),this._document.body.appendChild(Y),this._containerElement=Y}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG(or.K0),L.LFG(qn.t4))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();class Lr{constructor(V,R,Y,me,Be,Mt,Xt,Jt,Fn,Un=!1){this._portalOutlet=V,this._host=R,this._pane=Y,this._config=me,this._ngZone=Be,this._keyboardDispatcher=Mt,this._document=Xt,this._location=Jt,this._outsideClickDispatcher=Fn,this._animationsDisabled=Un,this._backdropElement=null,this._backdropClick=new W.x,this._attachments=new W.x,this._detachments=new W.x,this._locationChanges=Ft.w0.EMPTY,this._backdropClickHandler=Pr=>this._backdropClick.next(Pr),this._backdropTransitionendHandler=Pr=>{this._disposeBackdrop(Pr.target)},this._keydownEvents=new W.x,this._outsidePointerEvents=new W.x,me.scrollStrategy&&(this._scrollStrategy=me.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=me.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(V){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const R=this._portalOutlet.attach(V);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,xn.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof R?.onDestroy&&R.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),R}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const V=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),V}dispose(){const V=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,V&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(V){V!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=V,this.hasAttached()&&(V.attach(this),this.updatePosition()))}updateSize(V){this._config={...this._config,...V},this._updateElementSize()}setDirection(V){this._config={...this._config,direction:V},this._updateElementDirection()}addPanelClass(V){this._pane&&this._toggleClasses(this._pane,V,!0)}removePanelClass(V){this._pane&&this._toggleClasses(this._pane,V,!1)}getDirection(){const V=this._config.direction;return V?"string"==typeof V?V:V.value:"ltr"}updateScrollStrategy(V){V!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=V,this.hasAttached()&&(V.attach(this),V.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const V=this._pane.style;V.width=(0,_.HM)(this._config.width),V.height=(0,_.HM)(this._config.height),V.minWidth=(0,_.HM)(this._config.minWidth),V.minHeight=(0,_.HM)(this._config.minHeight),V.maxWidth=(0,_.HM)(this._config.maxWidth),V.maxHeight=(0,_.HM)(this._config.maxHeight)}_togglePointerEvents(V){this._pane.style.pointerEvents=V?"":"none"}_attachBackdrop(){const V="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(V)})}):this._backdropElement.classList.add(V)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const V=this._backdropElement;if(V){if(this._animationsDisabled)return void this._disposeBackdrop(V);V.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{V.addEventListener("transitionend",this._backdropTransitionendHandler)}),V.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(V)},500))}}_toggleClasses(V,R,Y){const me=(0,_.Eq)(R||[]).filter(Be=>!!Be);me.length&&(Y?V.classList.add(...me):V.classList.remove(...me))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const V=this._ngZone.onStable.pipe((0,Dn.R)((0,Wi.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),V.unsubscribe())})})}_disposeScrollStrategy(){const V=this._scrollStrategy;V&&(V.disable(),V.detach&&V.detach())}_disposeBackdrop(V){V&&(V.removeEventListener("click",this._backdropClickHandler),V.removeEventListener("transitionend",this._backdropTransitionendHandler),V.remove(),this._backdropElement===V&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Ai="cdk-overlay-connected-position-bounding-box",Tr=/([A-Za-z%]+)$/;class Ts{get positions(){return this._preferredPositions}constructor(V,R,Y,me,Be){this._viewportRuler=R,this._document=Y,this._platform=me,this._overlayContainer=Be,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new W.x,this._resizeSubscription=Ft.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(V)}attach(V){this._validatePositions(),V.hostElement.classList.add(Ai),this._overlayRef=V,this._boundingBox=V.hostElement,this._pane=V.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const V=this._originRect,R=this._overlayRect,Y=this._viewportRect,me=this._containerRect,Be=[];let Mt;for(let Xt of this._preferredPositions){let Jt=this._getOriginPoint(V,me,Xt),Fn=this._getOverlayPoint(Jt,R,Xt),Un=this._getOverlayFit(Fn,R,Y,Xt);if(Un.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Xt,Jt);this._canFitWithFlexibleDimensions(Un,Fn,Y)?Be.push({position:Xt,origin:Jt,overlayRect:R,boundingBoxRect:this._calculateBoundingBoxRect(Jt,Xt)}):(!Mt||Mt.overlayFit.visibleArea<Un.visibleArea)&&(Mt={overlayFit:Un,overlayPoint:Fn,originPoint:Jt,position:Xt,overlayRect:R})}if(Be.length){let Xt=null,Jt=-1;for(const Fn of Be){const Un=Fn.boundingBoxRect.width*Fn.boundingBoxRect.height*(Fn.position.weight||1);Un>Jt&&(Jt=Un,Xt=Fn)}return this._isPushed=!1,void this._applyPosition(Xt.position,Xt.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(Mt.position,Mt.originPoint);this._applyPosition(Mt.position,Mt.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Xr(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Ai),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const V=this._lastPosition;if(V){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const R=this._getOriginPoint(this._originRect,this._containerRect,V);this._applyPosition(V,R)}else this.apply()}withScrollableContainers(V){return this._scrollables=V,this}withPositions(V){return this._preferredPositions=V,-1===V.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(V){return this._viewportMargin=V,this}withFlexibleDimensions(V=!0){return this._hasFlexibleDimensions=V,this}withGrowAfterOpen(V=!0){return this._growAfterOpen=V,this}withPush(V=!0){return this._canPush=V,this}withLockedPosition(V=!0){return this._positionLocked=V,this}setOrigin(V){return this._origin=V,this}withDefaultOffsetX(V){return this._offsetX=V,this}withDefaultOffsetY(V){return this._offsetY=V,this}withTransformOriginOn(V){return this._transformOriginSelector=V,this}_getOriginPoint(V,R,Y){let me,Be;if("center"==Y.originX)me=V.left+V.width/2;else{const Mt=this._isRtl()?V.right:V.left,Xt=this._isRtl()?V.left:V.right;me="start"==Y.originX?Mt:Xt}return R.left<0&&(me-=R.left),Be="center"==Y.originY?V.top+V.height/2:"top"==Y.originY?V.top:V.bottom,R.top<0&&(Be-=R.top),{x:me,y:Be}}_getOverlayPoint(V,R,Y){let me,Be;return me="center"==Y.overlayX?-R.width/2:"start"===Y.overlayX?this._isRtl()?-R.width:0:this._isRtl()?0:-R.width,Be="center"==Y.overlayY?-R.height/2:"top"==Y.overlayY?0:-R.height,{x:V.x+me,y:V.y+Be}}_getOverlayFit(V,R,Y,me){const Be=bs(R);let{x:Mt,y:Xt}=V,Jt=this._getOffset(me,"x"),Fn=this._getOffset(me,"y");Jt&&(Mt+=Jt),Fn&&(Xt+=Fn);let ji=0-Xt,wi=Xt+Be.height-Y.height,Hi=this._subtractOverflows(Be.width,0-Mt,Mt+Be.width-Y.width),Vn=this._subtractOverflows(Be.height,ji,wi),ui=Hi*Vn;return{visibleArea:ui,isCompletelyWithinViewport:Be.width*Be.height===ui,fitsInViewportVertically:Vn===Be.height,fitsInViewportHorizontally:Hi==Be.width}}_canFitWithFlexibleDimensions(V,R,Y){if(this._hasFlexibleDimensions){const me=Y.bottom-R.y,Be=Y.right-R.x,Mt=nr(this._overlayRef.getConfig().minHeight),Xt=nr(this._overlayRef.getConfig().minWidth);return(V.fitsInViewportVertically||null!=Mt&&Mt<=me)&&(V.fitsInViewportHorizontally||null!=Xt&&Xt<=Be)}return!1}_pushOverlayOnScreen(V,R,Y){if(this._previousPushAmount&&this._positionLocked)return{x:V.x+this._previousPushAmount.x,y:V.y+this._previousPushAmount.y};const me=bs(R),Be=this._viewportRect,Mt=Math.max(V.x+me.width-Be.width,0),Xt=Math.max(V.y+me.height-Be.height,0),Jt=Math.max(Be.top-Y.top-V.y,0),Fn=Math.max(Be.left-Y.left-V.x,0);let Un=0,Pr=0;return Un=me.width<=Be.width?Fn||-Mt:V.x<this._viewportMargin?Be.left-Y.left-V.x:0,Pr=me.height<=Be.height?Jt||-Xt:V.y<this._viewportMargin?Be.top-Y.top-V.y:0,this._previousPushAmount={x:Un,y:Pr},{x:V.x+Un,y:V.y+Pr}}_applyPosition(V,R){if(this._setTransformOrigin(V),this._setOverlayElementStyles(R,V),this._setBoundingBoxStyles(R,V),V.panelClass&&this._addPanelClasses(V.panelClass),this._lastPosition=V,this._positionChanges.observers.length){const Y=this._getScrollVisibility(),me=new xo(V,Y);this._positionChanges.next(me)}this._isInitialRender=!1}_setTransformOrigin(V){if(!this._transformOriginSelector)return;const R=this._boundingBox.querySelectorAll(this._transformOriginSelector);let Y,me=V.overlayY;Y="center"===V.overlayX?"center":this._isRtl()?"start"===V.overlayX?"right":"left":"start"===V.overlayX?"left":"right";for(let Be=0;Be<R.length;Be++)R[Be].style.transformOrigin=`${Y} ${me}`}_calculateBoundingBoxRect(V,R){const Y=this._viewportRect,me=this._isRtl();let Be,Mt,Xt,Un,Pr,ji;if("top"===R.overlayY)Mt=V.y,Be=Y.height-Mt+this._viewportMargin;else if("bottom"===R.overlayY)Xt=Y.height-V.y+2*this._viewportMargin,Be=Y.height-Xt+this._viewportMargin;else{const wi=Math.min(Y.bottom-V.y+Y.top,V.y),Hi=this._lastBoundingBoxSize.height;Be=2*wi,Mt=V.y-wi,Be>Hi&&!this._isInitialRender&&!this._growAfterOpen&&(Mt=V.y-Hi/2)}if("end"===R.overlayX&&!me||"start"===R.overlayX&&me)ji=Y.width-V.x+this._viewportMargin,Un=V.x-this._viewportMargin;else if("start"===R.overlayX&&!me||"end"===R.overlayX&&me)Pr=V.x,Un=Y.right-V.x;else{const wi=Math.min(Y.right-V.x+Y.left,V.x),Hi=this._lastBoundingBoxSize.width;Un=2*wi,Pr=V.x-wi,Un>Hi&&!this._isInitialRender&&!this._growAfterOpen&&(Pr=V.x-Hi/2)}return{top:Mt,left:Pr,bottom:Xt,right:ji,width:Un,height:Be}}_setBoundingBoxStyles(V,R){const Y=this._calculateBoundingBoxRect(V,R);!this._isInitialRender&&!this._growAfterOpen&&(Y.height=Math.min(Y.height,this._lastBoundingBoxSize.height),Y.width=Math.min(Y.width,this._lastBoundingBoxSize.width));const me={};if(this._hasExactPosition())me.top=me.left="0",me.bottom=me.right=me.maxHeight=me.maxWidth="",me.width=me.height="100%";else{const Be=this._overlayRef.getConfig().maxHeight,Mt=this._overlayRef.getConfig().maxWidth;me.height=(0,_.HM)(Y.height),me.top=(0,_.HM)(Y.top),me.bottom=(0,_.HM)(Y.bottom),me.width=(0,_.HM)(Y.width),me.left=(0,_.HM)(Y.left),me.right=(0,_.HM)(Y.right),me.alignItems="center"===R.overlayX?"center":"end"===R.overlayX?"flex-end":"flex-start",me.justifyContent="center"===R.overlayY?"center":"bottom"===R.overlayY?"flex-end":"flex-start",Be&&(me.maxHeight=(0,_.HM)(Be)),Mt&&(me.maxWidth=(0,_.HM)(Mt))}this._lastBoundingBoxSize=Y,Xr(this._boundingBox.style,me)}_resetBoundingBoxStyles(){Xr(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Xr(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(V,R){const Y={},me=this._hasExactPosition(),Be=this._hasFlexibleDimensions,Mt=this._overlayRef.getConfig();if(me){const Un=this._viewportRuler.getViewportScrollPosition();Xr(Y,this._getExactOverlayY(R,V,Un)),Xr(Y,this._getExactOverlayX(R,V,Un))}else Y.position="static";let Xt="",Jt=this._getOffset(R,"x"),Fn=this._getOffset(R,"y");Jt&&(Xt+=`translateX(${Jt}px) `),Fn&&(Xt+=`translateY(${Fn}px)`),Y.transform=Xt.trim(),Mt.maxHeight&&(me?Y.maxHeight=(0,_.HM)(Mt.maxHeight):Be&&(Y.maxHeight="")),Mt.maxWidth&&(me?Y.maxWidth=(0,_.HM)(Mt.maxWidth):Be&&(Y.maxWidth="")),Xr(this._pane.style,Y)}_getExactOverlayY(V,R,Y){let me={top:"",bottom:""},Be=this._getOverlayPoint(R,this._overlayRect,V);return this._isPushed&&(Be=this._pushOverlayOnScreen(Be,this._overlayRect,Y)),"bottom"===V.overlayY?me.bottom=this._document.documentElement.clientHeight-(Be.y+this._overlayRect.height)+"px":me.top=(0,_.HM)(Be.y),me}_getExactOverlayX(V,R,Y){let Mt,me={left:"",right:""},Be=this._getOverlayPoint(R,this._overlayRect,V);return this._isPushed&&(Be=this._pushOverlayOnScreen(Be,this._overlayRect,Y)),Mt=this._isRtl()?"end"===V.overlayX?"left":"right":"end"===V.overlayX?"right":"left","right"===Mt?me.right=this._document.documentElement.clientWidth-(Be.x+this._overlayRect.width)+"px":me.left=(0,_.HM)(Be.x),me}_getScrollVisibility(){const V=this._getOriginRect(),R=this._pane.getBoundingClientRect(),Y=this._scrollables.map(me=>me.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Sr(V,Y),isOriginOutsideView:En(V,Y),isOverlayClipped:Sr(R,Y),isOverlayOutsideView:En(R,Y)}}_subtractOverflows(V,...R){return R.reduce((Y,me)=>Y-Math.max(me,0),V)}_getNarrowedViewportRect(){const V=this._document.documentElement.clientWidth,R=this._document.documentElement.clientHeight,Y=this._viewportRuler.getViewportScrollPosition();return{top:Y.top+this._viewportMargin,left:Y.left+this._viewportMargin,right:Y.left+V-this._viewportMargin,bottom:Y.top+R-this._viewportMargin,width:V-2*this._viewportMargin,height:R-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(V,R){return"x"===R?null==V.offsetX?this._offsetX:V.offsetX:null==V.offsetY?this._offsetY:V.offsetY}_validatePositions(){}_addPanelClasses(V){this._pane&&(0,_.Eq)(V).forEach(R=>{""!==R&&-1===this._appliedPanelClasses.indexOf(R)&&(this._appliedPanelClasses.push(R),this._pane.classList.add(R))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(V=>{this._pane.classList.remove(V)}),this._appliedPanelClasses=[])}_getOriginRect(){const V=this._origin;if(V instanceof L.SBq)return V.nativeElement.getBoundingClientRect();if(V instanceof Element)return V.getBoundingClientRect();const R=V.width||0,Y=V.height||0;return{top:V.y,bottom:V.y+Y,left:V.x,right:V.x+R,height:Y,width:R}}}function Xr(Ee,V){for(let R in V)V.hasOwnProperty(R)&&(Ee[R]=V[R]);return Ee}function nr(Ee){if("number"!=typeof Ee&&null!=Ee){const[V,R]=Ee.split(Tr);return R&&"px"!==R?null:parseFloat(V)}return Ee||null}function bs(Ee){return{top:Math.floor(Ee.top),right:Math.floor(Ee.right),bottom:Math.floor(Ee.bottom),left:Math.floor(Ee.left),width:Math.floor(Ee.width),height:Math.floor(Ee.height)}}const Zs="cdk-global-overlay-wrapper";class Vr{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(V){const R=V.getConfig();this._overlayRef=V,this._width&&!R.width&&V.updateSize({width:this._width}),this._height&&!R.height&&V.updateSize({height:this._height}),V.hostElement.classList.add(Zs),this._isDisposed=!1}top(V=""){return this._bottomOffset="",this._topOffset=V,this._alignItems="flex-start",this}left(V=""){return this._xOffset=V,this._xPosition="left",this}bottom(V=""){return this._topOffset="",this._bottomOffset=V,this._alignItems="flex-end",this}right(V=""){return this._xOffset=V,this._xPosition="right",this}start(V=""){return this._xOffset=V,this._xPosition="start",this}end(V=""){return this._xOffset=V,this._xPosition="end",this}width(V=""){return this._overlayRef?this._overlayRef.updateSize({width:V}):this._width=V,this}height(V=""){return this._overlayRef?this._overlayRef.updateSize({height:V}):this._height=V,this}centerHorizontally(V=""){return this.left(V),this._xPosition="center",this}centerVertically(V=""){return this.top(V),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const V=this._overlayRef.overlayElement.style,R=this._overlayRef.hostElement.style,Y=this._overlayRef.getConfig(),{width:me,height:Be,maxWidth:Mt,maxHeight:Xt}=Y,Jt=!("100%"!==me&&"100vw"!==me||Mt&&"100%"!==Mt&&"100vw"!==Mt),Fn=!("100%"!==Be&&"100vh"!==Be||Xt&&"100%"!==Xt&&"100vh"!==Xt),Un=this._xPosition,Pr=this._xOffset,ji="rtl"===this._overlayRef.getConfig().direction;let wi="",Hi="",Vn="";Jt?Vn="flex-start":"center"===Un?(Vn="center",ji?Hi=Pr:wi=Pr):ji?"left"===Un||"end"===Un?(Vn="flex-end",wi=Pr):("right"===Un||"start"===Un)&&(Vn="flex-start",Hi=Pr):"left"===Un||"start"===Un?(Vn="flex-start",wi=Pr):("right"===Un||"end"===Un)&&(Vn="flex-end",Hi=Pr),V.position=this._cssPosition,V.marginLeft=Jt?"0":wi,V.marginTop=Fn?"0":this._topOffset,V.marginBottom=this._bottomOffset,V.marginRight=Jt?"0":Hi,R.justifyContent=Vn,R.alignItems=Fn?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const V=this._overlayRef.overlayElement.style,R=this._overlayRef.hostElement,Y=R.style;R.classList.remove(Zs),Y.justifyContent=Y.alignItems=V.marginTop=V.marginBottom=V.marginLeft=V.marginRight=V.position="",this._overlayRef=null,this._isDisposed=!0}}let Mo=(()=>{class Ee{constructor(R,Y,me,Be){this._viewportRuler=R,this._document=Y,this._platform=me,this._overlayContainer=Be}global(){return new Vr}flexibleConnectedTo(R){return new Ts(R,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG(un),L.LFG(or.K0),L.LFG(qn.t4),L.LFG(gr))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})(),Cs=0,Ki=(()=>{class Ee{constructor(R,Y,me,Be,Mt,Xt,Jt,Fn,Un,Pr,ji,wi){this.scrollStrategies=R,this._overlayContainer=Y,this._componentFactoryResolver=me,this._positionBuilder=Be,this._keyboardDispatcher=Mt,this._injector=Xt,this._ngZone=Jt,this._document=Fn,this._directionality=Un,this._location=Pr,this._outsideClickDispatcher=ji,this._animationsModuleType=wi}create(R){const Y=this._createHostElement(),me=this._createPaneElement(Y),Be=this._createPortalOutlet(me),Mt=new Ti(R);return Mt.direction=Mt.direction||this._directionality.value,new Lr(Be,Y,me,Mt,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(R){const Y=this._document.createElement("div");return Y.id="cdk-overlay-"+Cs++,Y.classList.add("cdk-overlay-pane"),R.appendChild(Y),Y}_createHostElement(){const R=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(R),R}_createPortalOutlet(R){return this._appRef||(this._appRef=this._injector.get(L.z2F)),new he(R,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.LFG($r),L.LFG(gr),L.LFG(L._Vd),L.LFG(Mo),L.LFG(mi),L.LFG(L.zs3),L.LFG(L.R0b),L.LFG(or.K0),L.LFG(Dr.Is),L.LFG(or.Ye),L.LFG(is),L.LFG(L.QbO,8))},Ee.\u0275prov=L.Yz7({token:Ee,factory:Ee.\u0275fac,providedIn:"root"}),Ee})();const Qs=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],Ei=new L.OlP("cdk-connected-overlay-scroll-strategy");let si=(()=>{class Ee{constructor(R){this.elementRef=R}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.Y36(L.SBq))},Ee.\u0275dir=L.lG2({type:Ee,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),Ee})(),ms=(()=>{class Ee{get offsetX(){return this._offsetX}set offsetX(R){this._offsetX=R,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(R){this._offsetY=R,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(R){this._hasBackdrop=(0,_.Ig)(R)}get lockPosition(){return this._lockPosition}set lockPosition(R){this._lockPosition=(0,_.Ig)(R)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(R){this._flexibleDimensions=(0,_.Ig)(R)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(R){this._growAfterOpen=(0,_.Ig)(R)}get push(){return this._push}set push(R){this._push=(0,_.Ig)(R)}constructor(R,Y,me,Be,Mt){this._overlay=R,this._dir=Mt,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Ft.w0.EMPTY,this._attachSubscription=Ft.w0.EMPTY,this._detachSubscription=Ft.w0.EMPTY,this._positionSubscription=Ft.w0.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new L.vpe,this.positionChange=new L.vpe,this.attach=new L.vpe,this.detach=new L.vpe,this.overlayKeydown=new L.vpe,this.overlayOutsideClick=new L.vpe,this._templatePortal=new we(Y,me),this._scrollStrategyFactory=Be,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(R){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),R.origin&&this.open&&this._position.apply()),R.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Qs);const R=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=R.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=R.detachments().subscribe(()=>this.detach.emit()),R.keydownEvents().subscribe(Y=>{this.overlayKeydown.next(Y),Y.keyCode===ht.hY&&!this.disableClose&&!(0,ht.Vb)(Y)&&(Y.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(Y=>{this.overlayOutsideClick.next(Y)})}_buildConfig(){const R=this._position=this.positionStrategy||this._createPositionStrategy(),Y=new Ti({direction:this._dir,positionStrategy:R,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(Y.width=this.width),(this.height||0===this.height)&&(Y.height=this.height),(this.minWidth||0===this.minWidth)&&(Y.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(Y.minHeight=this.minHeight),this.backdropClass&&(Y.backdropClass=this.backdropClass),this.panelClass&&(Y.panelClass=this.panelClass),Y}_updatePositionStrategy(R){const Y=this.positions.map(me=>({originX:me.originX,originY:me.originY,overlayX:me.overlayX,overlayY:me.overlayY,offsetX:me.offsetX||this.offsetX,offsetY:me.offsetY||this.offsetY,panelClass:me.panelClass||void 0}));return R.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(Y).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const R=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(R),R}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof si?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(R=>{this.backdropClick.emit(R)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,Et.o)(()=>this.positionChange.observers.length>0)).subscribe(R=>{this.positionChange.emit(R),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.Y36(Ki),L.Y36(L.Rgc),L.Y36(L.s_b),L.Y36(Ei),L.Y36(Dr.Is,8))},Ee.\u0275dir=L.lG2({type:Ee,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[L.TTD]}),Ee})();const Qe={provide:Ei,deps:[Ki],useFactory:function Xs(Ee){return()=>Ee.scrollStrategies.reposition()}};let We=(()=>{class Ee{}return Ee.\u0275fac=function(R){return new(R||Ee)},Ee.\u0275mod=L.oAB({type:Ee}),Ee.\u0275inj=L.cJS({providers:[Ki,Qe],imports:[Dr.vT,_r,an,an]}),Ee})();var Ct=j(3238),Wt=j(7676),Xn=j(7253);class gi{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(V=!1,R,Y=!0,me){this._multiple=V,this._emitChanges=Y,this.compareWith=me,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new W.x,R&&R.length&&(V?R.forEach(Be=>this._markSelected(Be)):this._markSelected(R[0]),this._selectedToEmit.length=0)}select(...V){this._verifyValueAssignment(V),V.forEach(Y=>this._markSelected(Y));const R=this._hasQueuedChanges();return this._emitChangeEvent(),R}deselect(...V){this._verifyValueAssignment(V),V.forEach(Y=>this._unmarkSelected(Y));const R=this._hasQueuedChanges();return this._emitChangeEvent(),R}setSelection(...V){this._verifyValueAssignment(V);const R=this.selected,Y=new Set(V);V.forEach(Be=>this._markSelected(Be)),R.filter(Be=>!Y.has(Be)).forEach(Be=>this._unmarkSelected(Be));const me=this._hasQueuedChanges();return this._emitChangeEvent(),me}toggle(V){return this.isSelected(V)?this.deselect(V):this.select(V)}clear(V=!0){this._unmarkAll();const R=this._hasQueuedChanges();return V&&this._emitChangeEvent(),R}isSelected(V){return this._selection.has(this._getConcreteValue(V))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(V){this._multiple&&this.selected&&this._selected.sort(V)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(V){V=this._getConcreteValue(V),this.isSelected(V)||(this._multiple||this._unmarkAll(),this.isSelected(V)||this._selection.add(V),this._emitChanges&&this._selectedToEmit.push(V))}_unmarkSelected(V){V=this._getConcreteValue(V),this.isSelected(V)&&(this._selection.delete(V),this._emitChanges&&this._deselectedToEmit.push(V))}_unmarkAll(){this.isEmpty()||this._selection.forEach(V=>this._unmarkSelected(V))}_verifyValueAssignment(V){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(V){if(this.compareWith){for(let R of this._selection)if(this.compareWith(V,R))return R;return V}return V}}var Eo=j(4006),es=j(9770),Ro=j(3900),Us=j(4004),Ta=j(1884),gs=j(7340);const Cl=["trigger"],co=["panel"];function Aa(Ee,V){if(1&Ee&&(L.TgZ(0,"span",10),L._uU(1),L.qZA()),2&Ee){const R=L.oxw();L.xp6(1),L.Oqu(R.placeholder)}}function xa(Ee,V){if(1&Ee&&(L.TgZ(0,"span",14),L._uU(1),L.qZA()),2&Ee){const R=L.oxw(2);L.xp6(1),L.Oqu(R.triggerValue)}}function js(Ee,V){1&Ee&&L.Hsn(0,0,["*ngSwitchCase","true"])}function qi(Ee,V){if(1&Ee&&(L.TgZ(0,"span",11),L.YNc(1,xa,2,1,"span",12),L.YNc(2,js,1,0,"ng-content",13),L.qZA()),2&Ee){const R=L.oxw();L.Q6J("ngSwitch",!!R.customTrigger),L.xp6(2),L.Q6J("ngSwitchCase",!0)}}function Ma(Ee,V){if(1&Ee){const R=L.EpF();L.O4$(),L.kcU(),L.TgZ(0,"div",15,16),L.NdJ("@transformPanel.done",function(me){L.CHM(R);const Be=L.oxw();return L.KtG(Be._panelDoneAnimatingStream.next(me.toState))})("keydown",function(me){L.CHM(R);const Be=L.oxw();return L.KtG(Be._handleKeydown(me))}),L.Hsn(2,1),L.qZA()}if(2&Ee){const R=L.oxw();L.Gre("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",R._getPanelTheme(),""),L.Q6J("ngClass",R.panelClass)("@transformPanel","showing"),L.uIk("id",R.id+"-panel")("aria-multiselectable",R.multiple)("aria-label",R.ariaLabel||null)("aria-labelledby",R._getPanelAriaLabelledby())}}const Oo=[[["mat-select-trigger"]],"*"],wo=["mat-select-trigger","*"],Ii={transformPanelWrap:(0,gs.X$)("transformPanelWrap",[(0,gs.eR)("* => void",(0,gs.IO)("@transformPanel",[(0,gs.pV)()],{optional:!0}))]),transformPanel:(0,gs.X$)("transformPanel",[(0,gs.SB)("void",(0,gs.oB)({opacity:0,transform:"scale(1, 0.8)"})),(0,gs.eR)("void => showing",(0,gs.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,gs.oB)({opacity:1,transform:"scale(1, 1)"}))),(0,gs.eR)("* => void",(0,gs.jt)("100ms linear",(0,gs.oB)({opacity:0})))])};let Hs=0;const Po=new L.OlP("mat-select-scroll-strategy"),$a=new L.OlP("MAT_SELECT_CONFIG"),ua={provide:Po,deps:[Ki],useFactory:function ca(Ee){return()=>Ee.scrollStrategies.reposition()}},zs=new L.OlP("MatSelectTrigger");class da{constructor(V,R){this.source=V,this.value=R}}const bo=(0,Ct.Kr)((0,Ct.sb)((0,Ct.Id)((0,Ct.FD)(class{constructor(Ee,V,R,Y,me){this._elementRef=Ee,this._defaultErrorStateMatcher=V,this._parentForm=R,this._parentFormGroup=Y,this.ngControl=me,this.stateChanges=new W.x}}))));let Ga=(()=>{class Ee extends bo{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(R){this._placeholder=R,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Eo.kI.required)??!1}set required(R){this._required=(0,_.Ig)(R),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(R){this._multiple=(0,_.Ig)(R)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(R){this._disableOptionCentering=(0,_.Ig)(R)}get compareWith(){return this._compareWith}set compareWith(R){this._compareWith=R,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(R){this._assignValue(R)&&this._onChange(R)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(R){this._typeaheadDebounceInterval=(0,_.su)(R)}get id(){return this._id}set id(R){this._id=R||this._uid,this.stateChanges.next()}constructor(R,Y,me,Be,Mt,Xt,Jt,Fn,Un,Pr,ji,wi,Hi,Vn){super(Mt,Be,Jt,Fn,Pr),this._viewportRuler=R,this._changeDetectorRef=Y,this._ngZone=me,this._dir=Xt,this._parentFormField=Un,this._liveAnnouncer=Hi,this._defaultOptions=Vn,this._panelOpen=!1,this._compareWith=(ui,q)=>ui===q,this._uid="mat-select-"+Hs++,this._triggerAriaLabelledBy=null,this._destroy=new W.x,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+Hs++,this._panelDoneAnimatingStream=new W.x,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=(0,es.P)(()=>{const ui=this.options;return ui?ui.changes.pipe((0,ur.O)(ui),(0,Ro.w)(()=>(0,Wi.T)(...ui.map(q=>q.onSelectionChange)))):this._ngZone.onStable.pipe((0,xn.q)(1),(0,Ro.w)(()=>this.optionSelectionChanges))}),this.openedChange=new L.vpe,this._openedStream=this.openedChange.pipe((0,sr.h)(ui=>ui),(0,Us.U)(()=>{})),this._closedStream=this.openedChange.pipe((0,sr.h)(ui=>!ui),(0,Us.U)(()=>{})),this.selectionChange=new L.vpe,this.valueChange=new L.vpe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=Vn?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=Vn.typeaheadDebounceInterval),this._scrollStrategyFactory=wi,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(ji)||0,this.id=this.id}ngOnInit(){this._selectionModel=new gi(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe((0,Ta.x)(),(0,Dn.R)(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe((0,Dn.R)(this._destroy)).subscribe(R=>{R.added.forEach(Y=>Y.select()),R.removed.forEach(Y=>Y.deselect())}),this.options.changes.pipe((0,ur.O)(null),(0,Dn.R)(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const R=this._getTriggerAriaLabelledby(),Y=this.ngControl;if(R!==this._triggerAriaLabelledBy){const me=this._elementRef.nativeElement;this._triggerAriaLabelledBy=R,R?me.setAttribute("aria-labelledby",R):me.removeAttribute("aria-labelledby")}Y&&(this._previousControl!==Y.control&&(void 0!==this._previousControl&&null!==Y.disabled&&Y.disabled!==this.disabled&&(this.disabled=Y.disabled),this._previousControl=Y.control),this.updateErrorState())}ngOnChanges(R){(R.disabled||R.userAriaDescribedBy)&&this.stateChanges.next(),R.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(R){this._assignValue(R)}registerOnChange(R){this._onChange=R}registerOnTouched(R){this._onTouched=R}setDisabledState(R){this.disabled=R,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const R=this._selectionModel.selected.map(Y=>Y.viewValue);return this._isRtl()&&R.reverse(),R.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(R){this.disabled||(this.panelOpen?this._handleOpenKeydown(R):this._handleClosedKeydown(R))}_handleClosedKeydown(R){const Y=R.keyCode,me=Y===ht.JH||Y===ht.LH||Y===ht.oh||Y===ht.SV,Be=Y===ht.K5||Y===ht.L_,Mt=this._keyManager;if(!Mt.isTyping()&&Be&&!(0,ht.Vb)(R)||(this.multiple||R.altKey)&&me)R.preventDefault(),this.open();else if(!this.multiple){const Xt=this.selected;Mt.onKeydown(R);const Jt=this.selected;Jt&&Xt!==Jt&&this._liveAnnouncer.announce(Jt.viewValue,1e4)}}_handleOpenKeydown(R){const Y=this._keyManager,me=R.keyCode,Be=me===ht.JH||me===ht.LH,Mt=Y.isTyping();if(Be&&R.altKey)R.preventDefault(),this.close();else if(Mt||me!==ht.K5&&me!==ht.L_||!Y.activeItem||(0,ht.Vb)(R))if(!Mt&&this._multiple&&me===ht.A&&R.ctrlKey){R.preventDefault();const Xt=this.options.some(Jt=>!Jt.disabled&&!Jt.selected);this.options.forEach(Jt=>{Jt.disabled||(Xt?Jt.select():Jt.deselect())})}else{const Xt=Y.activeItemIndex;Y.onKeydown(R),this._multiple&&Be&&R.shiftKey&&Y.activeItem&&Y.activeItemIndex!==Xt&&Y.activeItem._selectViaInteraction()}else R.preventDefault(),Y.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe((0,xn.q)(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(R){if(this.options.forEach(Y=>Y.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&R)Array.isArray(R),R.forEach(Y=>this._selectOptionByValue(Y)),this._sortValues();else{const Y=this._selectOptionByValue(R);Y?this._keyManager.updateActiveItem(Y):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(R){const Y=this.options.find(me=>{if(this._selectionModel.isSelected(me))return!1;try{return null!=me.value&&this._compareWith(me.value,R)}catch{return!1}});return Y&&this._selectionModel.select(Y),Y}_assignValue(R){return!!(R!==this._value||this._multiple&&Array.isArray(R))&&(this.options&&this._setSelectionByValue(R),this._value=R,!0)}_initKeyManager(){this._keyManager=new Xn.s1(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const R=(0,Wi.T)(this.options.changes,this._destroy);this.optionSelectionChanges.pipe((0,Dn.R)(R)).subscribe(Y=>{this._onSelect(Y.source,Y.isUserInput),Y.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),(0,Wi.T)(...this.options.map(Y=>Y._stateChanges)).pipe((0,Dn.R)(R)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(R,Y){const me=this._selectionModel.isSelected(R);null!=R.value||this._multiple?(me!==R.selected&&(R.selected?this._selectionModel.select(R):this._selectionModel.deselect(R)),Y&&this._keyManager.setActiveItem(R),this.multiple&&(this._sortValues(),Y&&this.focus())):(R.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(R.value)),me!==this._selectionModel.isSelected(R)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const R=this.options.toArray();this._selectionModel.sort((Y,me)=>this.sortComparator?this.sortComparator(Y,me,R):R.indexOf(Y)-R.indexOf(me)),this.stateChanges.next()}}_propagateChanges(R){let Y=null;Y=this.multiple?this.selected.map(me=>me.value):this.selected?this.selected.value:R,this._value=Y,this.valueChange.emit(Y),this._onChange(Y),this.selectionChange.emit(this._getChangeEvent(Y)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(R){this._elementRef.nativeElement.focus(R)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const R=this._parentFormField?.getLabelId();return this.ariaLabelledby?(R?R+" ":"")+this.ariaLabelledby:R}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const R=this._parentFormField?.getLabelId();let Y=(R?R+" ":"")+this._valueId;return this.ariaLabelledby&&(Y+=" "+this.ariaLabelledby),Y}_panelDoneAnimating(R){this.openedChange.emit(R)}setDescribedByIds(R){R.length?this._elementRef.nativeElement.setAttribute("aria-describedby",R.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return Ee.\u0275fac=function(R){return new(R||Ee)(L.Y36(un),L.Y36(L.sBO),L.Y36(L.R0b),L.Y36(Ct.rD),L.Y36(L.SBq),L.Y36(Dr.Is,8),L.Y36(Eo.F,8),L.Y36(Eo.sg,8),L.Y36(Wt.G_,8),L.Y36(Eo.a5,10),L.$8M("tabindex"),L.Y36(Po),L.Y36(Xn.Kd),L.Y36($a,8))},Ee.\u0275dir=L.lG2({type:Ee,viewQuery:function(R,Y){if(1&R&&(L.Gf(Cl,5),L.Gf(co,5),L.Gf(ms,5)),2&R){let me;L.iGM(me=L.CRH())&&(Y.trigger=me.first),L.iGM(me=L.CRH())&&(Y.panel=me.first),L.iGM(me=L.CRH())&&(Y._overlayDir=me.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[L.qOj,L.TTD]}),Ee})(),os=(()=>{class Ee extends Ga{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe((0,Dn.R)(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(R){const Y=this.options.toArray()[R];if(Y){const me=this.panel.nativeElement,Be=(0,Ct.CB)(R,this.options,this.optionGroups),Mt=Y._getHostElement();me.scrollTop=0===R&&1===Be?0:(0,Ct.jH)(Mt.offsetTop,Mt.offsetHeight,me.scrollTop,me.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(R){return new da(this,R)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof si?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(R){this._hideSingleSelectionIndicator=(0,_.Ig)(R),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const R of this.options)R._changeDetectorRef.markForCheck()}}return Ee.\u0275fac=function(){let V;return function(Y){return(V||(V=L.n5z(Ee)))(Y||Ee)}}(),Ee.\u0275cmp=L.Xpm({type:Ee,selectors:[["mat-select"]],contentQueries:function(R,Y,me){if(1&R&&(L.Suo(me,zs,5),L.Suo(me,Ct.ey,5),L.Suo(me,Ct.K7,5)),2&R){let Be;L.iGM(Be=L.CRH())&&(Y.customTrigger=Be.first),L.iGM(Be=L.CRH())&&(Y.options=Be),L.iGM(Be=L.CRH())&&(Y.optionGroups=Be)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(R,Y){1&R&&L.NdJ("keydown",function(Be){return Y._handleKeydown(Be)})("focus",function(){return Y._onFocus()})("blur",function(){return Y._onBlur()}),2&R&&(L.uIk("id",Y.id)("tabindex",Y.tabIndex)("aria-controls",Y.panelOpen?Y.id+"-panel":null)("aria-expanded",Y.panelOpen)("aria-label",Y.ariaLabel||null)("aria-required",Y.required.toString())("aria-disabled",Y.disabled.toString())("aria-invalid",Y.errorState)("aria-activedescendant",Y._getAriaActiveDescendant()),L.ekj("mat-mdc-select-disabled",Y.disabled)("mat-mdc-select-invalid",Y.errorState)("mat-mdc-select-required",Y.required)("mat-mdc-select-empty",Y.empty)("mat-mdc-select-multiple",Y.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[L._Bn([{provide:Wt.Eo,useExisting:Ee},{provide:Ct.HF,useExisting:Ee}]),L.qOj],ngContentSelectors:wo,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(R,Y){if(1&R&&(L.F$t(Oo),L.TgZ(0,"div",0,1),L.NdJ("click",function(){return Y.toggle()}),L.TgZ(3,"div",2),L.YNc(4,Aa,2,1,"span",3),L.YNc(5,qi,3,2,"span",4),L.qZA(),L.TgZ(6,"div",5)(7,"div",6),L.O4$(),L.TgZ(8,"svg",7),L._UZ(9,"path",8),L.qZA()()()(),L.YNc(10,Ma,3,9,"ng-template",9),L.NdJ("backdropClick",function(){return Y.close()})("attach",function(){return Y._onAttached()})("detach",function(){return Y.close()})),2&R){const me=L.MAs(1);L.uIk("aria-owns",Y.panelOpen?Y.id+"-panel":null),L.xp6(3),L.Q6J("ngSwitch",Y.empty),L.uIk("id",Y._valueId),L.xp6(1),L.Q6J("ngSwitchCase",!0),L.xp6(1),L.Q6J("ngSwitchCase",!1),L.xp6(5),L.Q6J("cdkConnectedOverlayPanelClass",Y._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",Y._scrollStrategy)("cdkConnectedOverlayOrigin",Y._preferredOverlayOrigin||me)("cdkConnectedOverlayOpen",Y.panelOpen)("cdkConnectedOverlayPositions",Y._positions)("cdkConnectedOverlayWidth",Y._overlayWidth)}},dependencies:[or.mk,or.RF,or.n9,or.ED,ms,si],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Ii.transformPanel]},changeDetection:0}),Ee})(),Yi=(()=>{class Ee{}return Ee.\u0275fac=function(R){return new(R||Ee)},Ee.\u0275mod=L.oAB({type:Ee}),Ee.\u0275inj=L.cJS({providers:[ua],imports:[or.ez,We,Ct.Ng,Ct.BQ,At,Wt.lN,Ct.Ng,Ct.BQ]}),Ee})()},1481:(gn,at,j)=>{j.d(at,{Dx:()=>ir,b2:()=>Li,q6:()=>Dr,se:()=>nn});var _=j(6895),L=j(4650);class W extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Fe extends W{static makeCurrent(){(0,_.HT)(new Fe)}onAndCancel(he,oe,Re){return he.addEventListener(oe,Re,!1),()=>{he.removeEventListener(oe,Re,!1)}}dispatchEvent(he,oe){he.dispatchEvent(oe)}remove(he){he.parentNode&&he.parentNode.removeChild(he)}createElement(he,oe){return(oe=oe||this.getDefaultDocument()).createElement(he)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(he){return he.nodeType===Node.ELEMENT_NODE}isShadowRoot(he){return he instanceof DocumentFragment}getGlobalEventTarget(he,oe){return"window"===oe?window:"document"===oe?he:"body"===oe?he.body:null}getBaseHref(he){const oe=function Ae(){return Ne=Ne||document.querySelector("base"),Ne?Ne.getAttribute("href"):null}();return null==oe?null:function Ge(pe){$e=$e||document.createElement("a"),$e.setAttribute("href",pe);const he=$e.pathname;return"/"===he.charAt(0)?he:`/${he}`}(oe)}resetBaseElement(){Ne=null}getUserAgent(){return window.navigator.userAgent}getCookie(he){return(0,_.Mx)(document.cookie,he)}}let $e,Ne=null;const Ve=new L.OlP("TRANSITION_ID"),De=[{provide:L.ip1,useFactory:function Ie(pe,he,oe){return()=>{oe.get(L.CZH).donePromise.then(()=>{const Re=(0,_.q)(),rt=he.querySelectorAll(`style[ng-transition="${pe}"]`);for(let Ut=0;Ut<rt.length;Ut++)Re.remove(rt[Ut])})}},deps:[Ve,_.K0,L.zs3],multi:!0}];let Tt=(()=>{class pe{build(){return new XMLHttpRequest}}return pe.\u0275fac=function(oe){return new(oe||pe)},pe.\u0275prov=L.Yz7({token:pe,factory:pe.\u0275fac}),pe})();const ut=new L.OlP("EventManagerPlugins");let Ht=(()=>{class pe{constructor(oe,Re){this._zone=Re,this._eventNameToPlugin=new Map,oe.forEach(rt=>{rt.manager=this}),this._plugins=oe.slice().reverse()}addEventListener(oe,Re,rt){return this._findPluginFor(Re).addEventListener(oe,Re,rt)}addGlobalEventListener(oe,Re,rt){return this._findPluginFor(Re).addGlobalEventListener(oe,Re,rt)}getZone(){return this._zone}_findPluginFor(oe){const Re=this._eventNameToPlugin.get(oe);if(Re)return Re;const rt=this._plugins;for(let Ut=0;Ut<rt.length;Ut++){const vn=rt[Ut];if(vn.supports(oe))return this._eventNameToPlugin.set(oe,vn),vn}throw new Error(`No event manager plugin found for event ${oe}`)}}return pe.\u0275fac=function(oe){return new(oe||pe)(L.LFG(ut),L.LFG(L.R0b))},pe.\u0275prov=L.Yz7({token:pe,factory:pe.\u0275fac}),pe})();class Kt{constructor(he){this._doc=he}addGlobalEventListener(he,oe,Re){const rt=(0,_.q)().getGlobalEventTarget(this._doc,he);if(!rt)throw new Error(`Unsupported event target ${rt} for event ${oe}`);return this.addEventListener(rt,oe,Re)}}let pt=(()=>{class pe{constructor(){this.usageCount=new Map}addStyles(oe){for(const Re of oe)1===this.changeUsageCount(Re,1)&&this.onStyleAdded(Re)}removeStyles(oe){for(const Re of oe)0===this.changeUsageCount(Re,-1)&&this.onStyleRemoved(Re)}onStyleRemoved(oe){}onStyleAdded(oe){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(oe,Re){const rt=this.usageCount;let Ut=rt.get(oe)??0;return Ut+=Re,Ut>0?rt.set(oe,Ut):rt.delete(oe),Ut}ngOnDestroy(){for(const oe of this.getAllStyles())this.onStyleRemoved(oe);this.usageCount.clear()}}return pe.\u0275fac=function(oe){return new(oe||pe)},pe.\u0275prov=L.Yz7({token:pe,factory:pe.\u0275fac}),pe})(),It=(()=>{class pe extends pt{constructor(oe){super(),this.doc=oe,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(oe){for(const Re of this.hostNodes)this.addStyleToHost(Re,oe)}onStyleRemoved(oe){const Re=this.styleRef;Re.get(oe)?.forEach(Ut=>Ut.remove()),Re.delete(oe)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(oe){this.hostNodes.add(oe);for(const Re of this.getAllStyles())this.addStyleToHost(oe,Re)}removeHost(oe){this.hostNodes.delete(oe)}addStyleToHost(oe,Re){const rt=this.doc.createElement("style");rt.textContent=Re,oe.appendChild(rt);const Ut=this.styleRef.get(Re);Ut?Ut.push(rt):this.styleRef.set(Re,[rt])}resetHostNodes(){const oe=this.hostNodes;oe.clear(),oe.add(this.doc.head)}}return pe.\u0275fac=function(oe){return new(oe||pe)(L.LFG(_.K0))},pe.\u0275prov=L.Yz7({token:pe,factory:pe.\u0275fac}),pe})();const Oe={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ft=/%COMP%/g,nt=new L.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function xt(pe,he){return he.flat(100).map(oe=>oe.replace(Ft,pe))}function kn(pe){return he=>{if("__ngUnwrap__"===he)return pe;!1===pe(he)&&(he.preventDefault(),he.returnValue=!1)}}let nn=(()=>{class pe{constructor(oe,Re,rt,Ut){this.eventManager=oe,this.sharedStylesHost=Re,this.appId=rt,this.removeStylesOnCompDestory=Ut,this.rendererByCompId=new Map,this.defaultRenderer=new Mr(oe)}createRenderer(oe,Re){if(!oe||!Re)return this.defaultRenderer;const rt=this.getOrCreateRenderer(oe,Re);return rt instanceof st?rt.applyToHost(oe):rt instanceof lt&&rt.applyStyles(),rt}getOrCreateRenderer(oe,Re){const rt=this.rendererByCompId;let Ut=rt.get(Re.id);if(!Ut){const vn=this.eventManager,_r=this.sharedStylesHost,ii=this.removeStylesOnCompDestory;switch(Re.encapsulation){case L.ifc.Emulated:Ut=new st(vn,_r,Re,this.appId,ii);break;case L.ifc.ShadowDom:return new Ze(vn,_r,oe,Re);default:Ut=new lt(vn,_r,Re,ii)}Ut.onDestroy=()=>rt.delete(Re.id),rt.set(Re.id,Ut)}return Ut}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return pe.\u0275fac=function(oe){return new(oe||pe)(L.LFG(Ht),L.LFG(It),L.LFG(L.AFp),L.LFG(nt))},pe.\u0275prov=L.Yz7({token:pe,factory:pe.\u0275fac}),pe})();class Mr{constructor(he){this.eventManager=he,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(he,oe){return oe?document.createElementNS(Oe[oe]||oe,he):document.createElement(he)}createComment(he){return document.createComment(he)}createText(he){return document.createTextNode(he)}appendChild(he,oe){(Qn(he)?he.content:he).appendChild(oe)}insertBefore(he,oe,Re){he&&(Qn(he)?he.content:he).insertBefore(oe,Re)}removeChild(he,oe){he&&he.removeChild(oe)}selectRootElement(he,oe){let Re="string"==typeof he?document.querySelector(he):he;if(!Re)throw new Error(`The selector "${he}" did not match any elements`);return oe||(Re.textContent=""),Re}parentNode(he){return he.parentNode}nextSibling(he){return he.nextSibling}setAttribute(he,oe,Re,rt){if(rt){oe=rt+":"+oe;const Ut=Oe[rt];Ut?he.setAttributeNS(Ut,oe,Re):he.setAttribute(oe,Re)}else he.setAttribute(oe,Re)}removeAttribute(he,oe,Re){if(Re){const rt=Oe[Re];rt?he.removeAttributeNS(rt,oe):he.removeAttribute(`${Re}:${oe}`)}else he.removeAttribute(oe)}addClass(he,oe){he.classList.add(oe)}removeClass(he,oe){he.classList.remove(oe)}setStyle(he,oe,Re,rt){rt&(L.JOm.DashCase|L.JOm.Important)?he.style.setProperty(oe,Re,rt&L.JOm.Important?"important":""):he.style[oe]=Re}removeStyle(he,oe,Re){Re&L.JOm.DashCase?he.style.removeProperty(oe):he.style[oe]=""}setProperty(he,oe,Re){he[oe]=Re}setValue(he,oe){he.nodeValue=oe}listen(he,oe,Re){return"string"==typeof he?this.eventManager.addGlobalEventListener(he,oe,kn(Re)):this.eventManager.addEventListener(he,oe,kn(Re))}}function Qn(pe){return"TEMPLATE"===pe.tagName&&void 0!==pe.content}class Ze extends Mr{constructor(he,oe,Re,rt){super(he),this.sharedStylesHost=oe,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ut=xt(rt.id,rt.styles);for(const vn of Ut){const _r=document.createElement("style");_r.textContent=vn,this.shadowRoot.appendChild(_r)}}nodeOrShadowRoot(he){return he===this.hostEl?this.shadowRoot:he}appendChild(he,oe){return super.appendChild(this.nodeOrShadowRoot(he),oe)}insertBefore(he,oe,Re){return super.insertBefore(this.nodeOrShadowRoot(he),oe,Re)}removeChild(he,oe){return super.removeChild(this.nodeOrShadowRoot(he),oe)}parentNode(he){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(he)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class lt extends Mr{constructor(he,oe,Re,rt,Ut=Re.id){super(he),this.sharedStylesHost=oe,this.removeStylesOnCompDestory=rt,this.rendererUsageCount=0,this.styles=xt(Ut,Re.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class st extends lt{constructor(he,oe,Re,rt,Ut){const vn=rt+"-"+Re.id;super(he,oe,Re,Ut,vn),this.contentAttr=function Ye(pe){return"_ngcontent-%COMP%".replace(Ft,pe)}(vn),this.hostAttr=function zt(pe){return"_nghost-%COMP%".replace(Ft,pe)}(vn)}applyToHost(he){this.applyStyles(),this.setAttribute(he,this.hostAttr,"")}createElement(he,oe){const Re=super.createElement(he,oe);return super.setAttribute(Re,this.contentAttr,""),Re}}let tt=(()=>{class pe extends Kt{constructor(oe){super(oe)}supports(oe){return!0}addEventListener(oe,Re,rt){return oe.addEventListener(Re,rt,!1),()=>this.removeEventListener(oe,Re,rt)}removeEventListener(oe,Re,rt){return oe.removeEventListener(Re,rt)}}return pe.\u0275fac=function(oe){return new(oe||pe)(L.LFG(_.K0))},pe.\u0275prov=L.Yz7({token:pe,factory:pe.\u0275fac}),pe})();const dt=["alt","control","meta","shift"],it={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ln={alt:pe=>pe.altKey,control:pe=>pe.ctrlKey,meta:pe=>pe.metaKey,shift:pe=>pe.shiftKey};let $t=(()=>{class pe extends Kt{constructor(oe){super(oe)}supports(oe){return null!=pe.parseEventName(oe)}addEventListener(oe,Re,rt){const Ut=pe.parseEventName(Re),vn=pe.eventCallback(Ut.fullKey,rt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(oe,Ut.domEventName,vn))}static parseEventName(oe){const Re=oe.toLowerCase().split("."),rt=Re.shift();if(0===Re.length||"keydown"!==rt&&"keyup"!==rt)return null;const Ut=pe._normalizeKey(Re.pop());let vn="",_r=Re.indexOf("code");if(_r>-1&&(Re.splice(_r,1),vn="code."),dt.forEach(Wi=>{const ht=Re.indexOf(Wi);ht>-1&&(Re.splice(ht,1),vn+=Wi+".")}),vn+=Ut,0!=Re.length||0===Ut.length)return null;const ii={};return ii.domEventName=rt,ii.fullKey=vn,ii}static matchEventFullKeyCode(oe,Re){let rt=it[oe.key]||oe.key,Ut="";return Re.indexOf("code.")>-1&&(rt=oe.code,Ut="code."),!(null==rt||!rt)&&(rt=rt.toLowerCase()," "===rt?rt="space":"."===rt&&(rt="dot"),dt.forEach(vn=>{vn!==rt&&(0,ln[vn])(oe)&&(Ut+=vn+".")}),Ut+=rt,Ut===Re)}static eventCallback(oe,Re,rt){return Ut=>{pe.matchEventFullKeyCode(Ut,oe)&&rt.runGuarded(()=>Re(Ut))}}static _normalizeKey(oe){return"esc"===oe?"escape":oe}}return pe.\u0275fac=function(oe){return new(oe||pe)(L.LFG(_.K0))},pe.\u0275prov=L.Yz7({token:pe,factory:pe.\u0275fac}),pe})();const Dr=(0,L.eFA)(L._c5,"browser",[{provide:L.Lbi,useValue:_.bD},{provide:L.g9A,useValue:function Dn(){Fe.makeCurrent()},multi:!0},{provide:_.K0,useFactory:function qn(){return(0,L.RDi)(document),document},deps:[]}]),Tn=new L.OlP(""),on=[{provide:L.rWj,useClass:class ke{addToWindow(he){L.dqk.getAngularTestability=(Re,rt=!0)=>{const Ut=he.findTestabilityInTree(Re,rt);if(null==Ut)throw new Error("Could not find testability for element.");return Ut},L.dqk.getAllAngularTestabilities=()=>he.getAllTestabilities(),L.dqk.getAllAngularRootElements=()=>he.getAllRootElements(),L.dqk.frameworkStabilizers||(L.dqk.frameworkStabilizers=[]),L.dqk.frameworkStabilizers.push(Re=>{const rt=L.dqk.getAllAngularTestabilities();let Ut=rt.length,vn=!1;const _r=function(ii){vn=vn||ii,Ut--,0==Ut&&Re(vn)};rt.forEach(function(ii){ii.whenStable(_r)})})}findTestabilityInTree(he,oe,Re){return null==oe?null:he.getTestability(oe)??(Re?(0,_.q)().isShadowRoot(oe)?this.findTestabilityInTree(he,oe.host,!0):this.findTestabilityInTree(he,oe.parentElement,!0):null)}},deps:[]},{provide:L.lri,useClass:L.dDg,deps:[L.R0b,L.eoX,L.rWj]},{provide:L.dDg,useClass:L.dDg,deps:[L.R0b,L.eoX,L.rWj]}],Cr=[{provide:L.zSh,useValue:"root"},{provide:L.qLn,useFactory:function ur(){return new L.qLn},deps:[]},{provide:ut,useClass:tt,multi:!0,deps:[_.K0,L.R0b,L.Lbi]},{provide:ut,useClass:$t,multi:!0,deps:[_.K0]},{provide:nn,useClass:nn,deps:[Ht,It,L.AFp,nt]},{provide:L.FYo,useExisting:nn},{provide:pt,useExisting:It},{provide:It,useClass:It,deps:[_.K0]},{provide:Ht,useClass:Ht,deps:[ut,L.R0b]},{provide:_.JF,useClass:Tt,deps:[]},[]];let Li=(()=>{class pe{constructor(oe){}static withServerTransition(oe){return{ngModule:pe,providers:[{provide:L.AFp,useValue:oe.appId},{provide:Ve,useExisting:L.AFp},De]}}}return pe.\u0275fac=function(oe){return new(oe||pe)(L.LFG(Tn,12))},pe.\u0275mod=L.oAB({type:pe}),pe.\u0275inj=L.cJS({providers:[...Cr,...on],imports:[_.ez,L.hGG]}),pe})(),ir=(()=>{class pe{constructor(oe){this._doc=oe}getTitle(){return this._doc.title}setTitle(oe){this._doc.title=oe||""}}return pe.\u0275fac=function(oe){return new(oe||pe)(L.LFG(_.K0))},pe.\u0275prov=L.Yz7({token:pe,factory:function(oe){let Re=null;return Re=oe?new oe:function er(){return new ir((0,L.LFG)(_.K0))}(),Re},providedIn:"root"}),pe})();typeof window<"u"&&window},6360:(gn,at,j)=>{j.d(at,{gz:()=>Js,F0:()=>en,rH:()=>Dl,Od:()=>Sn,Bz:()=>Ho,lC:()=>Po});var _=j(4650),L=j(8996),W=j(9646),Fe=j(7579);class Ne extends Fe.x{constructor(A){super(),this._value=A}get value(){return this.getValue()}_subscribe(A){const b=super._subscribe(A);return!b.closed&&A.next(this._value),b}getValue(){const{hasError:A,thrownError:b,_value:N}=this;if(A)throw b;return this._throwIfClosed(),N}next(A){super.next(this._value=A)}}var Ae=j(6805),$e=j(9841),Ge=j(7272),Ve=j(9770),Ie=j(9635),De=j(9751),ke=j(576);function Tt(S,A){const b=(0,ke.m)(S)?S:()=>S,N=K=>K.error(b());return new De.y(A?K=>A.schedule(N,0,K):N)}var ut=j(515),Ht=j(727),Kt=j(4482),pt=j(5403);function It(){return(0,Kt.e)((S,A)=>{let b=null;S._refCount++;const N=(0,pt.x)(A,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(b=null);const K=S._connection,ie=b;b=null,K&&(!ie||K===ie)&&K.unsubscribe(),A.unsubscribe()});S.subscribe(N),N.closed||(b=S.connect())})}class Oe extends De.y{constructor(A,b){super(),this.source=A,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,Kt.A)(A)&&(this.lift=A.lift)}_subscribe(A){return this.getSubject().subscribe(A)}getSubject(){const A=this._subject;return(!A||A.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:A}=this;this._subject=this._connection=null,A?.unsubscribe()}connect(){let A=this._connection;if(!A){A=this._connection=new Ht.w0;const b=this.getSubject();A.add(this.source.subscribe((0,pt.x)(b,void 0,()=>{this._teardown(),b.complete()},N=>{this._teardown(),b.error(N)},()=>this._teardown()))),A.closed&&(this._connection=null,A=Ht.w0.EMPTY)}return A}refCount(){return It()(this)}}var Ft=j(6895),qe=j(4004),Se=j(3900),ze=j(5698),Bt=j(8675),Ot=j(9300),nt=j(5577),Ye=j(590),zt=j(4351),xt=j(8505),kn=j(8421);function nn(S){return(0,Kt.e)((A,b)=>{let ie,N=null,K=!1;N=A.subscribe((0,pt.x)(b,void 0,void 0,ge=>{ie=(0,kn.Xf)(S(ge,nn(S)(A))),N?(N.unsubscribe(),N=null,ie.subscribe(b)):K=!0})),K&&(N.unsubscribe(),N=null,ie.subscribe(b))})}var Mr=j(5026);function _e(S){return S<=0?()=>ut.E:(0,Kt.e)((A,b)=>{let N=[];A.subscribe((0,pt.x)(b,K=>{N.push(K),S<N.length&&N.shift()},()=>{for(const K of N)b.next(K);b.complete()},void 0,()=>{N=null}))})}var Kn=j(8068),Qn=j(6590),Ze=j(4671);function lt(S,A){const b=arguments.length>=2;return N=>N.pipe(S?(0,Ot.h)((K,ie)=>S(K,ie,N)):Ze.y,_e(1),b?(0,Qn.d)(A):(0,Kn.T)(()=>new Ae.K))}var st=j(2529);function dt(S){return(0,Kt.e)((A,b)=>{try{A.subscribe(b)}finally{b.add(S)}})}var it=j(8189),ln=j(1481);const $t="primary",Ln=Symbol("RouteTitle");class Cn{constructor(A){this.params=A||{}}has(A){return Object.prototype.hasOwnProperty.call(this.params,A)}get(A){if(this.has(A)){const b=this.params[A];return Array.isArray(b)?b[0]:b}return null}getAll(A){if(this.has(A)){const b=this.params[A];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function zn(S){return new Cn(S)}function cr(S,A,b){const N=b.path.split("/");if(N.length>S.length||"full"===b.pathMatch&&(A.hasChildren()||N.length<S.length))return null;const K={};for(let ie=0;ie<N.length;ie++){const ge=N[ie],Je=S[ie];if(ge.startsWith(":"))K[ge.substring(1)]=Je;else if(ge!==Je.path)return null}return{consumed:S.slice(0,N.length),posParams:K}}function Dn(S,A){const b=S?Object.keys(S):void 0,N=A?Object.keys(A):void 0;if(!b||!N||b.length!=N.length)return!1;let K;for(let ie=0;ie<b.length;ie++)if(K=b[ie],!ur(S[K],A[K]))return!1;return!0}function ur(S,A){if(Array.isArray(S)&&Array.isArray(A)){if(S.length!==A.length)return!1;const b=[...S].sort(),N=[...A].sort();return b.every((K,ie)=>N[ie]===K)}return S===A}function qn(S){return Array.prototype.concat.apply([],S)}function or(S){return S.length>0?S[S.length-1]:null}function Tn(S,A){for(const b in S)S.hasOwnProperty(b)&&A(S[b],b)}function on(S){return(0,_.CqO)(S)?S:(0,_.QGY)(S)?(0,L.D)(Promise.resolve(S)):(0,W.of)(S)}const Cr=!1,Li={exact:function er(S,A,b){if(!zr(S.segments,A.segments)||!Ar(S.segments,A.segments,b)||S.numberOfChildren!==A.numberOfChildren)return!1;for(const N in A.children)if(!S.children[N]||!er(S.children[N],A.children[N],b))return!1;return!0},subset:cn},jr={exact:function Ri(S,A){return Dn(S,A)},subset:function ir(S,A){return Object.keys(A).length<=Object.keys(S).length&&Object.keys(A).every(b=>ur(S[b],A[b]))},ignored:()=>!0};function ci(S,A,b){return Li[b.paths](S.root,A.root,b.matrixParams)&&jr[b.queryParams](S.queryParams,A.queryParams)&&!("exact"===b.fragment&&S.fragment!==A.fragment)}function cn(S,A,b){return un(S,A,A.segments,b)}function un(S,A,b,N){if(S.segments.length>b.length){const K=S.segments.slice(0,b.length);return!(!zr(K,b)||A.hasChildren()||!Ar(K,b,N))}if(S.segments.length===b.length){if(!zr(S.segments,b)||!Ar(S.segments,b,N))return!1;for(const K in A.children)if(!S.children[K]||!cn(S.children[K],A.children[K],N))return!1;return!0}{const K=b.slice(0,S.segments.length),ie=b.slice(S.segments.length);return!!(zr(S.segments,K)&&Ar(S.segments,K,N)&&S.children[$t])&&un(S.children[$t],A,ie,N)}}function Ar(S,A,b){return A.every((N,K)=>jr[b](S[K].parameters,N.parameters))}class Kr{constructor(A=new An([],{}),b={},N=null){this.root=A,this.queryParams=b,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return At.serialize(this)}}class An{constructor(A,b){this.segments=A,this.children=b,this.parent=null,Tn(b,(N,K)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return an(this)}}class Fr{constructor(A,b){this.path=A,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=zn(this.parameters)),this._parameterMap}toString(){return ve(this)}}function zr(S,A){return S.length===A.length&&S.every((b,N)=>b.path===A[N].path)}let _n=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return new je},providedIn:"root"}),S})();class je{parse(A){const b=new Re(A);return new Kr(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(A){const b=`/${xn(A.root,!0)}`,N=function He(S){const A=Object.keys(S).map(b=>{const N=S[b];return Array.isArray(N)?N.map(K=>`${de(b)}=${de(K)}`).join("&"):`${de(b)}=${de(N)}`}).filter(b=>!!b);return A.length?`?${A.join("&")}`:""}(A.queryParams);return`${b}${N}${"string"==typeof A.fragment?`#${function te(S){return encodeURI(S)}(A.fragment)}`:""}`}}const At=new je;function an(S){return S.segments.map(A=>ve(A)).join("/")}function xn(S,A){if(!S.hasChildren())return an(S);if(A){const b=S.children[$t]?xn(S.children[$t],!1):"",N=[];return Tn(S.children,(K,ie)=>{ie!==$t&&N.push(`${ie}:${xn(K,!1)}`)}),N.length>0?`${b}(${N.join("//")})`:b}{const b=function gt(S,A){let b=[];return Tn(S.children,(N,K)=>{K===$t&&(b=b.concat(A(N,K)))}),Tn(S.children,(N,K)=>{K!==$t&&(b=b.concat(A(N,K)))}),b}(S,(N,K)=>K===$t?[xn(S.children[$t],!1)]:[`${K}:${xn(N,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[$t]?`${an(S)}/${b[0]}`:`${an(S)}/(${b.join("//")})`}}function Et(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function de(S){return Et(S).replace(/%3B/gi,";")}function le(S){return Et(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ct(S){return decodeURIComponent(S)}function vt(S){return ct(S.replace(/\+/g,"%20"))}function ve(S){return`${le(S.path)}${function be(S){return Object.keys(S).map(A=>`;${le(A)}=${le(S[A])}`).join("")}(S.parameters)}`}const we=/^[^\/()?;=#]+/;function re(S){const A=S.match(we);return A?A[0]:""}const ye=/^[^=?&#]+/,he=/^[^&#]+/;class Re{constructor(A){this.url=A,this.remaining=A}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new An([],{}):new An([],this.parseChildren())}parseQueryParams(){const A={};if(this.consumeOptional("?"))do{this.parseQueryParam(A)}while(this.consumeOptional("&"));return A}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const A=[];for(this.peekStartsWith("(")||A.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),A.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(A.length>0||Object.keys(b).length>0)&&(N[$t]=new An(A,b)),N}parseSegment(){const A=re(this.remaining);if(""===A&&this.peekStartsWith(";"))throw new _.vHH(4009,Cr);return this.capture(A),new Fr(ct(A),this.parseMatrixParams())}parseMatrixParams(){const A={};for(;this.consumeOptional(";");)this.parseParam(A);return A}parseParam(A){const b=re(this.remaining);if(!b)return;this.capture(b);let N="";if(this.consumeOptional("=")){const K=re(this.remaining);K&&(N=K,this.capture(N))}A[ct(b)]=ct(N)}parseQueryParam(A){const b=function pe(S){const A=S.match(ye);return A?A[0]:""}(this.remaining);if(!b)return;this.capture(b);let N="";if(this.consumeOptional("=")){const ge=function oe(S){const A=S.match(he);return A?A[0]:""}(this.remaining);ge&&(N=ge,this.capture(N))}const K=vt(b),ie=vt(N);if(A.hasOwnProperty(K)){let ge=A[K];Array.isArray(ge)||(ge=[ge],A[K]=ge),ge.push(ie)}else A[K]=ie}parseParens(A){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=re(this.remaining),K=this.remaining[N.length];if("/"!==K&&")"!==K&&";"!==K)throw new _.vHH(4010,Cr);let ie;N.indexOf(":")>-1?(ie=N.slice(0,N.indexOf(":")),this.capture(ie),this.capture(":")):A&&(ie=$t);const ge=this.parseChildren();b[ie]=1===Object.keys(ge).length?ge[$t]:new An([],ge),this.consumeOptional("//")}return b}peekStartsWith(A){return this.remaining.startsWith(A)}consumeOptional(A){return!!this.peekStartsWith(A)&&(this.remaining=this.remaining.substring(A.length),!0)}capture(A){if(!this.consumeOptional(A))throw new _.vHH(4011,Cr)}}function rt(S){return S.segments.length>0?new An([],{[$t]:S}):S}function Ut(S){const A={};for(const N of Object.keys(S.children)){const ie=Ut(S.children[N]);(ie.segments.length>0||ie.hasChildren())&&(A[N]=ie)}return function vn(S){if(1===S.numberOfChildren&&S.children[$t]){const A=S.children[$t];return new An(S.segments.concat(A.segments),A.children)}return S}(new An(S.segments,A))}function _r(S){return S instanceof Kr}const ii=!1;function Qt(S,A,b,N,K){if(0===b.length)return tr(A.root,A.root,A.root,N,K);const ie=function Rr(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new Sr(!0,0,S);let A=0,b=!1;const N=S.reduce((K,ie,ge)=>{if("object"==typeof ie&&null!=ie){if(ie.outlets){const Je={};return Tn(ie.outlets,(Gt,pn)=>{Je[pn]="string"==typeof Gt?Gt.split("/"):Gt}),[...K,{outlets:Je}]}if(ie.segmentPath)return[...K,ie.segmentPath]}return"string"!=typeof ie?[...K,ie]:0===ge?(ie.split("/").forEach((Je,Gt)=>{0==Gt&&"."===Je||(0==Gt&&""===Je?b=!0:".."===Je?A++:""!=Je&&K.push(Je))}),K):[...K,ie]},[]);return new Sr(b,A,N)}(b);return ie.toRoot()?tr(A.root,A.root,new An([],{}),N,K):function ge(Gt){const pn=function aa(S,A,b,N){if(S.isAbsolute)return new $r(A.root,!0,0);if(-1===N)return new $r(b,b===A.root,0);return function Ao(S,A,b){let N=S,K=A,ie=b;for(;ie>K;){if(ie-=K,N=N.parent,!N)throw new _.vHH(4005,ii&&"Invalid number of '../'");K=N.segments.length}return new $r(N,!1,K-ie)}(b,N+(Nn(S.commands[0])?0:1),S.numberOfDoubleDots)}(ie,A,S.snapshot?._urlSegment,Gt),Zt=pn.processChildren?hn(pn.segmentGroup,pn.index,ie.commands):Bi(pn.segmentGroup,pn.index,ie.commands);return tr(A.root,pn.segmentGroup,Zt,N,K)}(S.snapshot?._lastPathIndex)}function Nn(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function Bn(S){return"object"==typeof S&&null!=S&&S.outlets}function tr(S,A,b,N,K){let ge,ie={};N&&Tn(N,(Gt,pn)=>{ie[pn]=Array.isArray(Gt)?Gt.map(Zt=>`${Zt}`):`${Gt}`}),ge=S===A?b:En(S,A,b);const Je=rt(Ut(ge));return new Kr(Je,ie,K)}function En(S,A,b){const N={};return Tn(S.children,(K,ie)=>{N[ie]=K===A?b:En(K,A,b)}),new An(S.segments,N)}class Sr{constructor(A,b,N){if(this.isAbsolute=A,this.numberOfDoubleDots=b,this.commands=N,A&&N.length>0&&Nn(N[0]))throw new _.vHH(4003,ii&&"Root segment cannot have matrix parameters");const K=N.find(Bn);if(K&&K!==or(N))throw new _.vHH(4004,ii&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class $r{constructor(A,b,N){this.segmentGroup=A,this.processChildren=b,this.index=N}}function Bi(S,A,b){if(S||(S=new An([],{})),0===S.segments.length&&S.hasChildren())return hn(S,A,b);const N=function dr(S,A,b){let N=0,K=A;const ie={match:!1,pathIndex:0,commandIndex:0};for(;K<S.segments.length;){if(N>=b.length)return ie;const ge=S.segments[K],Je=b[N];if(Bn(Je))break;const Gt=`${Je}`,pn=N<b.length-1?b[N+1]:null;if(K>0&&void 0===Gt)break;if(Gt&&pn&&"object"==typeof pn&&void 0===pn.outlets){if(!Lr(Gt,pn,ge))return ie;N+=2}else{if(!Lr(Gt,{},ge))return ie;N++}K++}return{match:!0,pathIndex:K,commandIndex:N}}(S,A,b),K=b.slice(N.commandIndex);if(N.match&&N.pathIndex<S.segments.length){const ie=new An(S.segments.slice(0,N.pathIndex),{});return ie.children[$t]=new An(S.segments.slice(N.pathIndex),S.children),hn(ie,0,K)}return N.match&&0===K.length?new An(S.segments,{}):N.match&&!S.hasChildren()?mi(S,A,b):N.match?hn(S,0,K):mi(S,A,b)}function hn(S,A,b){if(0===b.length)return new An(S.segments,{});{const N=function xo(S){return Bn(S[0])?S[0].outlets:{[$t]:S}}(b),K={};if(!N[$t]&&S.children[$t]&&1===S.numberOfChildren&&0===S.children[$t].segments.length){const ie=hn(S.children[$t],A,b);return new An(S.segments,ie.children)}return Tn(N,(ie,ge)=>{"string"==typeof ie&&(ie=[ie]),null!==ie&&(K[ge]=Bi(S.children[ge],A,ie))}),Tn(S.children,(ie,ge)=>{void 0===N[ge]&&(K[ge]=ie)}),new An(S.segments,K)}}function mi(S,A,b){const N=S.segments.slice(0,A);let K=0;for(;K<b.length;){const ie=b[K];if(Bn(ie)){const Gt=is(ie.outlets);return new An(N,Gt)}if(0===K&&Nn(b[0])){N.push(new Fr(S.segments[A].path,gr(b[0]))),K++;continue}const ge=Bn(ie)?ie.outlets[$t]:`${ie}`,Je=K<b.length-1?b[K+1]:null;ge&&Je&&Nn(Je)?(N.push(new Fr(ge,gr(Je))),K+=2):(N.push(new Fr(ge,{})),K++)}return new An(N,{})}function is(S){const A={};return Tn(S,(b,N)=>{"string"==typeof b&&(b=[b]),null!==b&&(A[N]=mi(new An([],{}),0,b))}),A}function gr(S){const A={};return Tn(S,(b,N)=>A[N]=`${b}`),A}function Lr(S,A,b){return S==b.path&&Dn(A,b.parameters)}const Ai="imperative";class Tr{constructor(A,b){this.id=A,this.url=b}}class Ts extends Tr{constructor(A,b,N="imperative",K=null){super(A,b),this.type=0,this.navigationTrigger=N,this.restoredState=K}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xr extends Tr{constructor(A,b,N){super(A,b),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class nr extends Tr{constructor(A,b,N,K){super(A,b),this.reason=N,this.code=K,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bs extends Tr{constructor(A,b,N,K){super(A,b),this.reason=N,this.code=K,this.type=16}}class lo extends Tr{constructor(A,b,N,K){super(A,b),this.error=N,this.target=K,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class As extends Tr{constructor(A,b,N,K){super(A,b),this.urlAfterRedirects=N,this.state=K,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zs extends Tr{constructor(A,b,N,K){super(A,b),this.urlAfterRedirects=N,this.state=K,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vr extends Tr{constructor(A,b,N,K,ie){super(A,b),this.urlAfterRedirects=N,this.state=K,this.shouldActivate=ie,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Mo extends Tr{constructor(A,b,N,K){super(A,b),this.urlAfterRedirects=N,this.state=K,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Cs extends Tr{constructor(A,b,N,K){super(A,b),this.urlAfterRedirects=N,this.state=K,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ki{constructor(A){this.route=A,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qs{constructor(A){this.route=A,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ei{constructor(A){this.snapshot=A,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class si{constructor(A){this.snapshot=A,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ms{constructor(A){this.snapshot=A,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xs{constructor(A){this.snapshot=A,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qe{constructor(A,b,N){this.routerEvent=A,this.position=b,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Ct=(()=>{class S{createUrlTree(b,N,K,ie,ge,Je){return Qt(b||N.root,K,ie,ge,Je)}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})(),Xn=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:function(A){return Ct.\u0275fac(A)},providedIn:"root"}),S})();class lr{constructor(A){this._root=A}get root(){return this._root.value}parent(A){const b=this.pathFromRoot(A);return b.length>1?b[b.length-2]:null}children(A){const b=fr(A,this._root);return b?b.children.map(N=>N.value):[]}firstChild(A){const b=fr(A,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(A){const b=kr(A,this._root);return b.length<2?[]:b[b.length-2].children.map(K=>K.value).filter(K=>K!==A)}pathFromRoot(A){return kr(A,this._root).map(b=>b.value)}}function fr(S,A){if(S===A.value)return A;for(const b of A.children){const N=fr(S,b);if(N)return N}return null}function kr(S,A){if(S===A.value)return[A];for(const b of A.children){const N=kr(S,b);if(N.length)return N.unshift(A),N}return[]}class Ui{constructor(A,b){this.value=A,this.children=b}toString(){return`TreeNode(${this.value})`}}function $i(S){const A={};return S&&S.children.forEach(b=>A[b.value.outlet]=b),A}class gi extends lr{constructor(A,b){super(A),this.snapshot=b,Ta(this,A)}toString(){return this.snapshot.toString()}}function Sa(S,A){const b=function Bs(S,A){const ge=new Ro([],{},{},"",{},$t,A,null,S.root,-1,{});return new Us("",new Ui(ge,[]))}(S,A),N=new Ne([new Fr("",{})]),K=new Ne({}),ie=new Ne({}),ge=new Ne({}),Je=new Ne(""),Gt=new Js(N,K,ge,Je,ie,$t,A,b.root);return Gt.snapshot=b.root,new gi(new Ui(Gt,[]),b)}class Js{constructor(A,b,N,K,ie,ge,Je,Gt){this.url=A,this.params=b,this.queryParams=N,this.fragment=K,this.data=ie,this.outlet=ge,this.component=Je,this.title=this.data?.pipe((0,qe.U)(pn=>pn[Ln]))??(0,W.of)(void 0),this._futureSnapshot=Gt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,qe.U)(A=>zn(A)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,qe.U)(A=>zn(A)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Eo(S,A="emptyOnly"){const b=S.pathFromRoot;let N=0;if("always"!==A)for(N=b.length-1;N>=1;){const K=b[N],ie=b[N-1];if(K.routeConfig&&""===K.routeConfig.path)N--;else{if(ie.component)break;N--}}return function es(S){return S.reduce((A,b)=>({params:{...A.params,...b.params},data:{...A.data,...b.data},resolve:{...b.data,...A.resolve,...b.routeConfig?.data,...b._resolvedData}}),{params:{},data:{},resolve:{}})}(b.slice(N))}class Ro{get title(){return this.data?.[Ln]}constructor(A,b,N,K,ie,ge,Je,Gt,pn,Zt,$n){this.url=A,this.params=b,this.queryParams=N,this.fragment=K,this.data=ie,this.outlet=ge,this.component=Je,this.routeConfig=Gt,this._urlSegment=pn,this._lastPathIndex=Zt,this._resolve=$n}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Us extends lr{constructor(A,b){super(b),this.url=A,Ta(this,b)}toString(){return gs(this._root)}}function Ta(S,A){A.value._routerState=S,A.children.forEach(b=>Ta(S,b))}function gs(S){const A=S.children.length>0?` { ${S.children.map(gs).join(", ")} } `:"";return`${S.value}${A}`}function Cl(S){if(S.snapshot){const A=S.snapshot,b=S._futureSnapshot;S.snapshot=b,Dn(A.queryParams,b.queryParams)||S.queryParams.next(b.queryParams),A.fragment!==b.fragment&&S.fragment.next(b.fragment),Dn(A.params,b.params)||S.params.next(b.params),function sr(S,A){if(S.length!==A.length)return!1;for(let b=0;b<S.length;++b)if(!Dn(S[b],A[b]))return!1;return!0}(A.url,b.url)||S.url.next(b.url),Dn(A.data,b.data)||S.data.next(b.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function co(S,A){const b=Dn(S.params,A.params)&&function Hr(S,A){return zr(S,A)&&S.every((b,N)=>Dn(b.parameters,A[N].parameters))}(S.url,A.url);return b&&!(!S.parent!=!A.parent)&&(!S.parent||co(S.parent,A.parent))}function xa(S,A,b){if(b&&S.shouldReuseRoute(A.value,b.value.snapshot)){const N=b.value;N._futureSnapshot=A.value;const K=function js(S,A,b){return A.children.map(N=>{for(const K of b.children)if(S.shouldReuseRoute(N.value,K.value.snapshot))return xa(S,N,K);return xa(S,N)})}(S,A,b);return new Ui(N,K)}{if(S.shouldAttach(A.value)){const ie=S.retrieve(A.value);if(null!==ie){const ge=ie.route;return ge.value._futureSnapshot=A.value,ge.children=A.children.map(Je=>xa(S,Je)),ge}}const N=function qi(S){return new Js(new Ne(S.url),new Ne(S.params),new Ne(S.queryParams),new Ne(S.fragment),new Ne(S.data),S.outlet,S.component,S)}(A.value),K=A.children.map(ie=>xa(S,ie));return new Ui(N,K)}}const Ma="ngNavigationCancelingError";function Oo(S,A){const{redirectTo:b,navigationBehaviorOptions:N}=_r(A)?{redirectTo:A,navigationBehaviorOptions:void 0}:A,K=wo(!1,0,A);return K.url=b,K.navigationBehaviorOptions=N,K}function wo(S,A,b){const N=new Error("NavigationCancelingError: "+(S||""));return N[Ma]=!0,N.cancellationCode=A,b&&(N.url=b),N}function Ii(S){return la(S)&&_r(S.url)}function la(S){return S&&S[Ma]}class cs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ss,this.attachRef=null}}let ss=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(b,N){const K=this.getOrCreateContext(b);K.outlet=N,this.contexts.set(b,K)}onChildOutletDestroyed(b){const N=this.getContext(b);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let N=this.getContext(b);return N||(N=new cs,this.contexts.set(b,N)),N}getContext(b){return this.contexts.get(b)||null}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Hs=!1;let Po=(()=>{class S{constructor(){this.activated=null,this._activatedRoute=null,this.name=$t,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(ss),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb)}ngOnChanges(b){if(b.name){const{firstChange:N,previousValue:K}=b.name;if(N)return;this.isTrackedInParentContexts(K)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(K)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(b){return this.parentContexts.getContext(b)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const b=this.parentContexts.getContext(this.name);b?.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,Hs);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,Hs);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,Hs);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,N){this.activated=b,this._activatedRoute=N,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,N){if(this.isActivated)throw new _.vHH(4013,Hs);this._activatedRoute=b;const K=this.location,ge=b.snapshot.component,Je=this.parentContexts.getOrCreateContext(this.name).children,Gt=new ca(b,Je,K.injector);if(N&&function $a(S){return!!S.resolveComponentFactory}(N)){const pn=N.resolveComponentFactory(ge);this.activated=K.createComponent(pn,K.length,Gt)}else this.activated=K.createComponent(ge,{index:K.length,injector:Gt,environmentInjector:N??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275dir=_.lG2({type:S,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]}),S})();class ca{constructor(A,b,N){this.route=A,this.childContexts=b,this.parent=N}get(A,b){return A===Js?this.route:A===ss?this.childContexts:this.parent.get(A,b)}}let ua=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275cmp=_.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(b,N){1&b&&_._UZ(0,"router-outlet")},dependencies:[Po],encapsulation:2}),S})();function zs(S,A){return S.providers&&!S._injector&&(S._injector=(0,_.MMx)(S.providers,A,`Route: ${S.path}`)),S._injector??A}function R(S){const A=S.children&&S.children.map(R),b=A?{...S,children:A}:{...S};return!b.component&&!b.loadComponent&&(A||b.loadChildren)&&b.outlet&&b.outlet!==$t&&(b.component=ua),b}function Y(S){return S.outlet||$t}function me(S,A){const b=S.filter(N=>Y(N)===A);return b.push(...S.filter(N=>Y(N)!==A)),b}function Be(S){if(!S)return null;if(S.routeConfig?._injector)return S.routeConfig._injector;for(let A=S.parent;A;A=A.parent){const b=A.routeConfig;if(b?._loadedInjector)return b._loadedInjector;if(b?._injector)return b._injector}return null}class Xt{constructor(A,b,N,K){this.routeReuseStrategy=A,this.futureState=b,this.currState=N,this.forwardEvent=K}activate(A){const b=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,N,A),Cl(this.futureState.root),this.activateChildRoutes(b,N,A)}deactivateChildRoutes(A,b,N){const K=$i(b);A.children.forEach(ie=>{const ge=ie.value.outlet;this.deactivateRoutes(ie,K[ge],N),delete K[ge]}),Tn(K,(ie,ge)=>{this.deactivateRouteAndItsChildren(ie,N)})}deactivateRoutes(A,b,N){const K=A.value,ie=b?b.value:null;if(K===ie)if(K.component){const ge=N.getContext(K.outlet);ge&&this.deactivateChildRoutes(A,b,ge.children)}else this.deactivateChildRoutes(A,b,N);else ie&&this.deactivateRouteAndItsChildren(b,N)}deactivateRouteAndItsChildren(A,b){A.value.component&&this.routeReuseStrategy.shouldDetach(A.value.snapshot)?this.detachAndStoreRouteSubtree(A,b):this.deactivateRouteAndOutlet(A,b)}detachAndStoreRouteSubtree(A,b){const N=b.getContext(A.value.outlet),K=N&&A.value.component?N.children:b,ie=$i(A);for(const ge of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[ge],K);if(N&&N.outlet){const ge=N.outlet.detach(),Je=N.children.onOutletDeactivated();this.routeReuseStrategy.store(A.value.snapshot,{componentRef:ge,route:A,contexts:Je})}}deactivateRouteAndOutlet(A,b){const N=b.getContext(A.value.outlet),K=N&&A.value.component?N.children:b,ie=$i(A);for(const ge of Object.keys(ie))this.deactivateRouteAndItsChildren(ie[ge],K);N&&(N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated()),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(A,b,N){const K=$i(b);A.children.forEach(ie=>{this.activateRoutes(ie,K[ie.value.outlet],N),this.forwardEvent(new Xs(ie.value.snapshot))}),A.children.length&&this.forwardEvent(new si(A.value.snapshot))}activateRoutes(A,b,N){const K=A.value,ie=b?b.value:null;if(Cl(K),K===ie)if(K.component){const ge=N.getOrCreateContext(K.outlet);this.activateChildRoutes(A,b,ge.children)}else this.activateChildRoutes(A,b,N);else if(K.component){const ge=N.getOrCreateContext(K.outlet);if(this.routeReuseStrategy.shouldAttach(K.snapshot)){const Je=this.routeReuseStrategy.retrieve(K.snapshot);this.routeReuseStrategy.store(K.snapshot,null),ge.children.onOutletReAttached(Je.contexts),ge.attachRef=Je.componentRef,ge.route=Je.route.value,ge.outlet&&ge.outlet.attach(Je.componentRef,Je.route.value),Cl(Je.route.value),this.activateChildRoutes(A,null,ge.children)}else{const Je=Be(K.snapshot),Gt=Je?.get(_._Vd)??null;ge.attachRef=null,ge.route=K,ge.resolver=Gt,ge.injector=Je,ge.outlet&&ge.outlet.activateWith(K,ge.injector),this.activateChildRoutes(A,null,ge.children)}}else this.activateChildRoutes(A,null,N)}}class Jt{constructor(A){this.path=A,this.route=this.path[this.path.length-1]}}class Fn{constructor(A,b){this.component=A,this.route=b}}function Un(S,A,b){const N=S._root;return wi(N,A?A._root:null,b,[N.value])}function ji(S,A){const b=Symbol(),N=A.get(S,b);return N===b?"function"!=typeof S||(0,_.Z0I)(S)?A.get(S):S:N}function wi(S,A,b,N,K={canDeactivateChecks:[],canActivateChecks:[]}){const ie=$i(A);return S.children.forEach(ge=>{(function Hi(S,A,b,N,K={canDeactivateChecks:[],canActivateChecks:[]}){const ie=S.value,ge=A?A.value:null,Je=b?b.getContext(S.value.outlet):null;if(ge&&ie.routeConfig===ge.routeConfig){const Gt=function Vn(S,A,b){if("function"==typeof b)return b(S,A);switch(b){case"pathParamsChange":return!zr(S.url,A.url);case"pathParamsOrQueryParamsChange":return!zr(S.url,A.url)||!Dn(S.queryParams,A.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!co(S,A)||!Dn(S.queryParams,A.queryParams);default:return!co(S,A)}}(ge,ie,ie.routeConfig.runGuardsAndResolvers);Gt?K.canActivateChecks.push(new Jt(N)):(ie.data=ge.data,ie._resolvedData=ge._resolvedData),wi(S,A,ie.component?Je?Je.children:null:b,N,K),Gt&&Je&&Je.outlet&&Je.outlet.isActivated&&K.canDeactivateChecks.push(new Fn(Je.outlet.component,ge))}else ge&&ui(A,Je,K),K.canActivateChecks.push(new Jt(N)),wi(S,null,ie.component?Je?Je.children:null:b,N,K)})(ge,ie[ge.value.outlet],b,N.concat([ge.value]),K),delete ie[ge.value.outlet]}),Tn(ie,(ge,Je)=>ui(ge,b.getContext(Je),K)),K}function ui(S,A,b){const N=$i(S),K=S.value;Tn(N,(ie,ge)=>{ui(ie,K.component?A?A.children.getContext(ge):null:A,b)}),b.canDeactivateChecks.push(new Fn(K.component&&A&&A.outlet&&A.outlet.isActivated?A.outlet.component:null,K))}function q(S){return"function"==typeof S}function ko(S){return S instanceof Ae.K||"EmptyError"===S?.name}const No=Symbol("INITIAL_VALUE");function Zi(){return(0,Se.w)(S=>(0,$e.a)(S.map(A=>A.pipe((0,ze.q)(1),(0,Bt.O)(No)))).pipe((0,qe.U)(A=>{for(const b of A)if(!0!==b){if(b===No)return No;if(!1===b||b instanceof Kr)return b}return!0}),(0,Ot.h)(A=>A!==No),(0,ze.q)(1)))}function to(S){return(0,Ie.z)((0,xt.b)(A=>{if(_r(A))throw Oo(0,A)}),(0,qe.U)(A=>!0===A))}const Co={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uo(S,A,b,N,K){const ie=Ka(S,A,b);return ie.matched?function Fo(S,A,b,N){const K=A.canMatch;if(!K||0===K.length)return(0,W.of)(!0);const ie=K.map(ge=>{const Je=ji(ge,S);return on(function as(S){return S&&q(S.canMatch)}(Je)?Je.canMatch(A,b):S.runInContext(()=>Je(A,b)))});return(0,W.of)(ie).pipe(Zi(),to())}(N=zs(A,N),A,b).pipe((0,qe.U)(ge=>!0===ge?ie:{...Co})):(0,W.of)(ie)}function Ka(S,A,b){if(""===A.path)return"full"===A.pathMatch&&(S.hasChildren()||b.length>0)?{...Co}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const K=(A.matcher||cr)(b,S,A);if(!K)return{...Co};const ie={};Tn(K.posParams,(Je,Gt)=>{ie[Gt]=Je.path});const ge=K.consumed.length>0?{...ie,...K.consumed[K.consumed.length-1].parameters}:ie;return{matched:!0,consumedSegments:K.consumed,remainingSegments:b.slice(K.consumed.length),parameters:ge,positionalParamSegments:K.posParams??{}}}function pa(S,A,b,N){if(b.length>0&&function _s(S,A,b){return b.some(N=>qa(S,A,N)&&Y(N)!==$t)}(S,b,N)){const ie=new An(A,function Ec(S,A,b,N){const K={};K[$t]=N,N._sourceSegment=S,N._segmentIndexShift=A.length;for(const ie of b)if(""===ie.path&&Y(ie)!==$t){const ge=new An([],{});ge._sourceSegment=S,ge._segmentIndexShift=A.length,K[Y(ie)]=ge}return K}(S,A,N,new An(b,S.children)));return ie._sourceSegment=S,ie._segmentIndexShift=A.length,{segmentGroup:ie,slicedSegments:[]}}if(0===b.length&&function hl(S,A,b){return b.some(N=>qa(S,A,N))}(S,b,N)){const ie=new An(S.segments,function Kl(S,A,b,N,K){const ie={};for(const ge of N)if(qa(S,b,ge)&&!K[Y(ge)]){const Je=new An([],{});Je._sourceSegment=S,Je._segmentIndexShift=A.length,ie[Y(ge)]=Je}return{...K,...ie}}(S,A,b,N,S.children));return ie._sourceSegment=S,ie._segmentIndexShift=A.length,{segmentGroup:ie,slicedSegments:b}}const K=new An(S.segments,S.children);return K._sourceSegment=S,K._segmentIndexShift=A.length,{segmentGroup:K,slicedSegments:b}}function qa(S,A,b){return(!(S.hasChildren()||A.length>0)||"full"!==b.pathMatch)&&""===b.path}function fl(S,A,b,N){return!!(Y(S)===N||N!==$t&&qa(A,b,S))&&("**"===S.path||Ka(A,S,b).matched)}function $c(S,A,b){return 0===A.length&&!S.children[b]}const Lo=!1;class Ra{constructor(A){this.segmentGroup=A||null}}class Ya{constructor(A){this.urlTree=A}}function no(S){return Tt(new Ra(S))}function Za(S){return Tt(new Ya(S))}class Io{constructor(A,b,N,K,ie){this.injector=A,this.configLoader=b,this.urlSerializer=N,this.urlTree=K,this.config=ie,this.allowRedirects=!0}apply(){const A=pa(this.urlTree.root,[],[],this.config).segmentGroup,b=new An(A.segments,A.children);return this.expandSegmentGroup(this.injector,this.config,b,$t).pipe((0,qe.U)(ie=>this.createUrlTree(Ut(ie),this.urlTree.queryParams,this.urlTree.fragment))).pipe(nn(ie=>{if(ie instanceof Ya)return this.allowRedirects=!1,this.match(ie.urlTree);throw ie instanceof Ra?this.noMatchError(ie):ie}))}match(A){return this.expandSegmentGroup(this.injector,this.config,A.root,$t).pipe((0,qe.U)(K=>this.createUrlTree(Ut(K),A.queryParams,A.fragment))).pipe(nn(K=>{throw K instanceof Ra?this.noMatchError(K):K}))}noMatchError(A){return new _.vHH(4002,Lo)}createUrlTree(A,b,N){const K=rt(A);return new Kr(K,b,N)}expandSegmentGroup(A,b,N,K){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(A,b,N).pipe((0,qe.U)(ie=>new An([],ie))):this.expandSegment(A,N,b,N.segments,K,!0)}expandChildren(A,b,N){const K=[];for(const ie of Object.keys(N.children))"primary"===ie?K.unshift(ie):K.push(ie);return(0,L.D)(K).pipe((0,zt.b)(ie=>{const ge=N.children[ie],Je=me(b,ie);return this.expandSegmentGroup(A,Je,ge,ie).pipe((0,qe.U)(Gt=>({segment:Gt,outlet:ie})))}),(0,Mr.R)((ie,ge)=>(ie[ge.outlet]=ge.segment,ie),{}),lt())}expandSegment(A,b,N,K,ie,ge){return(0,L.D)(N).pipe((0,zt.b)(Je=>this.expandSegmentAgainstRoute(A,b,N,Je,K,ie,ge).pipe(nn(pn=>{if(pn instanceof Ra)return(0,W.of)(null);throw pn}))),(0,Ye.P)(Je=>!!Je),nn((Je,Gt)=>{if(ko(Je))return $c(b,K,ie)?(0,W.of)(new An([],{})):no(b);throw Je}))}expandSegmentAgainstRoute(A,b,N,K,ie,ge,Je){return fl(K,b,ie,ge)?void 0===K.redirectTo?this.matchSegmentAgainstRoute(A,b,K,ie,ge):Je&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(A,b,N,K,ie,ge):no(b):no(b)}expandSegmentAgainstRouteUsingRedirect(A,b,N,K,ie,ge){return"**"===K.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(A,N,K,ge):this.expandRegularSegmentAgainstRouteUsingRedirect(A,b,N,K,ie,ge)}expandWildCardWithParamsAgainstRouteUsingRedirect(A,b,N,K){const ie=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?Za(ie):this.lineralizeSegments(N,ie).pipe((0,nt.z)(ge=>{const Je=new An(ge,{});return this.expandSegment(A,Je,b,ge,K,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(A,b,N,K,ie,ge){const{matched:Je,consumedSegments:Gt,remainingSegments:pn,positionalParamSegments:Zt}=Ka(b,K,ie);if(!Je)return no(b);const $n=this.applyRedirectCommands(Gt,K.redirectTo,Zt);return K.redirectTo.startsWith("/")?Za($n):this.lineralizeSegments(K,$n).pipe((0,nt.z)(ar=>this.expandSegment(A,b,N,ar.concat(pn),ge,!1)))}matchSegmentAgainstRoute(A,b,N,K,ie){return"**"===N.path?(A=zs(N,A),N.loadChildren?(N._loadedRoutes?(0,W.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):this.configLoader.loadChildren(A,N)).pipe((0,qe.U)(Je=>(N._loadedRoutes=Je.routes,N._loadedInjector=Je.injector,new An(K,{})))):(0,W.of)(new An(K,{}))):uo(b,N,K,A).pipe((0,Se.w)(({matched:ge,consumedSegments:Je,remainingSegments:Gt})=>ge?this.getChildConfig(A=N._injector??A,N,K).pipe((0,nt.z)(Zt=>{const $n=Zt.injector??A,ar=Zt.routes,{segmentGroup:Ci,slicedSegments:oi}=pa(b,Je,Gt,ar),ya=new An(Ci.segments,Ci.children);if(0===oi.length&&ya.hasChildren())return this.expandChildren($n,ar,ya).pipe((0,qe.U)(Vi=>new An(Je,Vi)));if(0===ar.length&&0===oi.length)return(0,W.of)(new An(Je,{}));const xi=Y(N)===ie;return this.expandSegment($n,ya,ar,oi,xi?$t:ie,!0).pipe((0,qe.U)(Na=>new An(Je.concat(Na.segments),Na.children)))})):no(b)))}getChildConfig(A,b,N){return b.children?(0,W.of)({routes:b.children,injector:A}):b.loadChildren?void 0!==b._loadedRoutes?(0,W.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function ts(S,A,b,N){const K=A.canLoad;if(void 0===K||0===K.length)return(0,W.of)(!0);const ie=K.map(ge=>{const Je=ji(ge,S);return on(function H(S){return S&&q(S.canLoad)}(Je)?Je.canLoad(A,b):S.runInContext(()=>Je(A,b)))});return(0,W.of)(ie).pipe(Zi(),to())}(A,b,N).pipe((0,nt.z)(K=>K?this.configLoader.loadChildren(A,b).pipe((0,xt.b)(ie=>{b._loadedRoutes=ie.routes,b._loadedInjector=ie.injector})):function ql(S){return Tt(wo(Lo,3))}())):(0,W.of)({routes:[],injector:A})}lineralizeSegments(A,b){let N=[],K=b.root;for(;;){if(N=N.concat(K.segments),0===K.numberOfChildren)return(0,W.of)(N);if(K.numberOfChildren>1||!K.children[$t])return A.redirectTo,Tt(new _.vHH(4e3,Lo));K=K.children[$t]}}applyRedirectCommands(A,b,N){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),A,N)}applyRedirectCreateUrlTree(A,b,N,K){const ie=this.createSegmentGroup(A,b.root,N,K);return new Kr(ie,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(A,b){const N={};return Tn(A,(K,ie)=>{if("string"==typeof K&&K.startsWith(":")){const Je=K.substring(1);N[ie]=b[Je]}else N[ie]=K}),N}createSegmentGroup(A,b,N,K){const ie=this.createSegments(A,b.segments,N,K);let ge={};return Tn(b.children,(Je,Gt)=>{ge[Gt]=this.createSegmentGroup(A,Je,N,K)}),new An(ie,ge)}createSegments(A,b,N,K){return b.map(ie=>ie.path.startsWith(":")?this.findPosParam(A,ie,K):this.findOrReturn(ie,N))}findPosParam(A,b,N){const K=N[b.path.substring(1)];if(!K)throw new _.vHH(4001,Lo);return K}findOrReturn(A,b){let N=0;for(const K of b){if(K.path===A.path)return b.splice(N),K;N++}return A}}class Gi{}class Qi{constructor(A,b,N,K,ie,ge,Je){this.injector=A,this.rootComponentType=b,this.config=N,this.urlTree=K,this.url=ie,this.paramsInheritanceStrategy=ge,this.urlSerializer=Je}recognize(){const A=pa(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,A,$t).pipe((0,qe.U)(b=>{if(null===b)return null;const N=new Ro([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),K=new Ui(N,b),ie=new Us(this.url,K);return this.inheritParamsAndData(ie._root),ie}))}inheritParamsAndData(A){const b=A.value,N=Eo(b,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data),A.children.forEach(K=>this.inheritParamsAndData(K))}processSegmentGroup(A,b,N,K){return 0===N.segments.length&&N.hasChildren()?this.processChildren(A,b,N):this.processSegment(A,b,N,N.segments,K)}processChildren(A,b,N){return(0,L.D)(Object.keys(N.children)).pipe((0,zt.b)(K=>{const ie=N.children[K],ge=me(b,K);return this.processSegmentGroup(A,ge,ie,K)}),(0,Mr.R)((K,ie)=>K&&ie?(K.push(...ie),K):null),(0,st.o)(K=>null!==K),(0,Qn.d)(null),lt(),(0,qe.U)(K=>{if(null===K)return null;const ie=Xo(K);return function wc(S){S.sort((A,b)=>A.value.outlet===$t?-1:b.value.outlet===$t?1:A.value.outlet.localeCompare(b.value.outlet))}(ie),ie}))}processSegment(A,b,N,K,ie){return(0,L.D)(b).pipe((0,zt.b)(ge=>this.processSegmentAgainstRoute(ge._injector??A,ge,N,K,ie)),(0,Ye.P)(ge=>!!ge),nn(ge=>{if(ko(ge))return $c(N,K,ie)?(0,W.of)([]):(0,W.of)(null);throw ge}))}processSegmentAgainstRoute(A,b,N,K,ie){if(b.redirectTo||!fl(b,N,K,ie))return(0,W.of)(null);let ge;if("**"===b.path){const Je=K.length>0?or(K).parameters:{},Gt=k(N)+K.length,pn=new Ro(K,Je,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U(b),Y(b),b.component??b._loadedComponent??null,b,fo(N),Gt,ae(b));ge=(0,W.of)({snapshot:pn,consumedSegments:[],remainingSegments:[]})}else ge=uo(N,b,K,A).pipe((0,qe.U)(({matched:Je,consumedSegments:Gt,remainingSegments:pn,parameters:Zt})=>{if(!Je)return null;const $n=k(N)+Gt.length;return{snapshot:new Ro(Gt,Zt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,U(b),Y(b),b.component??b._loadedComponent??null,b,fo(N),$n,ae(b)),consumedSegments:Gt,remainingSegments:pn}}));return ge.pipe((0,Se.w)(Je=>{if(null===Je)return(0,W.of)(null);const{snapshot:Gt,consumedSegments:pn,remainingSegments:Zt}=Je;A=b._injector??A;const $n=b._loadedInjector??A,ar=function bi(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(b),{segmentGroup:Ci,slicedSegments:oi}=pa(N,pn,Zt,ar.filter(xi=>void 0===xi.redirectTo));if(0===oi.length&&Ci.hasChildren())return this.processChildren($n,ar,Ci).pipe((0,qe.U)(xi=>null===xi?null:[new Ui(Gt,xi)]));if(0===ar.length&&0===oi.length)return(0,W.of)([new Ui(Gt,[])]);const ya=Y(b)===ie;return this.processSegment($n,ar,Ci,oi,ya?$t:ie).pipe((0,qe.U)(xi=>null===xi?null:[new Ui(Gt,xi)]))}))}}function Ps(S){const A=S.value.routeConfig;return A&&""===A.path&&void 0===A.redirectTo}function Xo(S){const A=[],b=new Set;for(const N of S){if(!Ps(N)){A.push(N);continue}const K=A.find(ie=>N.value.routeConfig===ie.value.routeConfig);void 0!==K?(K.children.push(...N.children),b.add(K)):A.push(N)}for(const N of b){const K=Xo(N.children);A.push(new Ui(N.value,K))}return A.filter(N=>!b.has(N))}function fo(S){let A=S;for(;A._sourceSegment;)A=A._sourceSegment;return A}function k(S){let A=S,b=A._segmentIndexShift??0;for(;A._sourceSegment;)A=A._sourceSegment,b+=A._segmentIndexShift??0;return b-1}function U(S){return S.data||{}}function ae(S){return S.resolve||{}}function Nr(S){return"string"==typeof S.title||null===S.title}function Yn(S){return(0,Se.w)(A=>{const b=S(A);return b?(0,L.D)(b).pipe((0,qe.U)(()=>A)):(0,W.of)(A)})}const di=new _.OlP("ROUTES");let us=(()=>{class S{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.f3M)(_.Sil)}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,W.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const N=on(b.loadComponent()).pipe((0,qe.U)(po),(0,xt.b)(ie=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=ie}),dt(()=>{this.componentLoaders.delete(b)})),K=new Oe(N,()=>new Fe.x).pipe(It());return this.componentLoaders.set(b,K),K}loadChildren(b,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,W.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const ie=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,qe.U)(Je=>{this.onLoadEndListener&&this.onLoadEndListener(N);let Gt,pn,Zt=!1;Array.isArray(Je)?pn=Je:(Gt=Je.create(b).injector,pn=qn(Gt.get(di,[],_.XFs.Self|_.XFs.Optional)));return{routes:pn.map(R),injector:Gt}}),dt(()=>{this.childrenLoaders.delete(N)})),ge=new Oe(ie,()=>new Fe.x).pipe(It());return this.childrenLoaders.set(N,ge),ge}loadModuleFactoryOrRoutes(b){return on(b()).pipe((0,qe.U)(po),(0,nt.z)(N=>N instanceof _.YKP||Array.isArray(N)?(0,W.of)(N):(0,L.D)(this.compiler.compileModuleAsync(N))))}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function po(S){return function Vo(S){return S&&"object"==typeof S&&"default"in S}(S)?S.default:S}let ys=(()=>{class S{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Fe.x,this.configLoader=(0,_.f3M)(us),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(_n),this.rootContexts=(0,_.f3M)(ss),this.navigationId=0,this.afterPreactivation=()=>(0,W.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=K=>this.events.next(new Qs(K)),this.configLoader.onLoadStartListener=K=>this.events.next(new Ki(K))}complete(){this.transitions?.complete()}handleNavigationRequest(b){const N=++this.navigationId;this.transitions?.next({...this.transitions.value,...b,id:N})}setupNavigations(b){return this.transitions=new Ne({id:0,targetPageId:0,currentUrlTree:b.currentUrlTree,currentRawUrl:b.currentUrlTree,extractedUrl:b.urlHandlingStrategy.extract(b.currentUrlTree),urlAfterRedirects:b.urlHandlingStrategy.extract(b.currentUrlTree),rawUrl:b.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ai,restoredState:null,currentSnapshot:b.routerState.snapshot,targetSnapshot:null,currentRouterState:b.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Ot.h)(N=>0!==N.id),(0,qe.U)(N=>({...N,extractedUrl:b.urlHandlingStrategy.extract(N.rawUrl)})),(0,Se.w)(N=>{let K=!1,ie=!1;return(0,W.of)(N).pipe((0,xt.b)(ge=>{this.currentNavigation={id:ge.id,initialUrl:ge.rawUrl,extractedUrl:ge.extractedUrl,trigger:ge.source,extras:ge.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Se.w)(ge=>{const Je=b.browserUrlTree.toString(),Gt=!b.navigated||ge.extractedUrl.toString()!==Je||Je!==b.currentUrlTree.toString();if(!Gt&&"reload"!==(ge.extras.onSameUrlNavigation??b.onSameUrlNavigation)){const Zt="";return this.events.next(new bs(ge.id,b.serializeUrl(N.rawUrl),Zt,0)),b.rawUrlTree=ge.rawUrl,ge.resolve(null),ut.E}if(b.urlHandlingStrategy.shouldProcessUrl(ge.rawUrl))return ro(ge.source)&&(b.browserUrlTree=ge.extractedUrl),(0,W.of)(ge).pipe((0,Se.w)(Zt=>{const $n=this.transitions?.getValue();return this.events.next(new Ts(Zt.id,this.urlSerializer.serialize(Zt.extractedUrl),Zt.source,Zt.restoredState)),$n!==this.transitions?.getValue()?ut.E:Promise.resolve(Zt)}),function Di(S,A,b,N){return(0,Se.w)(K=>function Wc(S,A,b,N,K){return new Io(S,A,b,N,K).apply()}(S,A,b,K.extractedUrl,N).pipe((0,qe.U)(ie=>({...K,urlAfterRedirects:ie}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,b.config),(0,xt.b)(Zt=>{this.currentNavigation={...this.currentNavigation,finalUrl:Zt.urlAfterRedirects},N.urlAfterRedirects=Zt.urlAfterRedirects}),function xe(S,A,b,N,K){return(0,nt.z)(ie=>function Yl(S,A,b,N,K,ie,ge="emptyOnly"){return new Qi(S,A,b,N,K,ge,ie).recognize().pipe((0,Se.w)(Je=>null===Je?function Qo(S){return new De.y(A=>A.error(S))}(new Gi):(0,W.of)(Je)))}(S,A,b,ie.urlAfterRedirects,N.serialize(ie.urlAfterRedirects),N,K).pipe((0,qe.U)(ge=>({...ie,targetSnapshot:ge}))))}(this.environmentInjector,this.rootComponentType,b.config,this.urlSerializer,b.paramsInheritanceStrategy),(0,xt.b)(Zt=>{if(N.targetSnapshot=Zt.targetSnapshot,"eager"===b.urlUpdateStrategy){if(!Zt.extras.skipLocationChange){const ar=b.urlHandlingStrategy.merge(Zt.urlAfterRedirects,Zt.rawUrl);b.setBrowserUrl(ar,Zt)}b.browserUrlTree=Zt.urlAfterRedirects}const $n=new As(Zt.id,this.urlSerializer.serialize(Zt.extractedUrl),this.urlSerializer.serialize(Zt.urlAfterRedirects),Zt.targetSnapshot);this.events.next($n)}));if(Gt&&b.urlHandlingStrategy.shouldProcessUrl(b.rawUrlTree)){const{id:Zt,extractedUrl:$n,source:ar,restoredState:Ci,extras:oi}=ge,ya=new Ts(Zt,this.urlSerializer.serialize($n),ar,Ci);this.events.next(ya);const xi=Sa($n,this.rootComponentType).snapshot;return N={...ge,targetSnapshot:xi,urlAfterRedirects:$n,extras:{...oi,skipLocationChange:!1,replaceUrl:!1}},(0,W.of)(N)}{const Zt="";return this.events.next(new bs(ge.id,b.serializeUrl(N.extractedUrl),Zt,1)),b.rawUrlTree=ge.rawUrl,ge.resolve(null),ut.E}}),(0,xt.b)(ge=>{const Je=new Zs(ge.id,this.urlSerializer.serialize(ge.extractedUrl),this.urlSerializer.serialize(ge.urlAfterRedirects),ge.targetSnapshot);this.events.next(Je)}),(0,qe.U)(ge=>N={...ge,guards:Un(ge.targetSnapshot,ge.currentSnapshot,this.rootContexts)}),function Wa(S,A){return(0,nt.z)(b=>{const{targetSnapshot:N,currentSnapshot:K,guards:{canActivateChecks:ie,canDeactivateChecks:ge}}=b;return 0===ge.length&&0===ie.length?(0,W.of)({...b,guardsResult:!0}):function ul(S,A,b,N){return(0,L.D)(S).pipe((0,nt.z)(K=>function dl(S,A,b,N,K){const ie=A&&A.routeConfig?A.routeConfig.canDeactivate:null;if(!ie||0===ie.length)return(0,W.of)(!0);const ge=ie.map(Je=>{const Gt=Be(A)??K,pn=ji(Je,Gt);return on(function On(S){return S&&q(S.canDeactivate)}(pn)?pn.canDeactivate(S,A,b,N):Gt.runInContext(()=>pn(S,A,b,N))).pipe((0,Ye.P)())});return(0,W.of)(ge).pipe(Zi())}(K.component,K.route,b,A,N)),(0,Ye.P)(K=>!0!==K,!0))}(ge,N,K,S).pipe((0,nt.z)(Je=>Je&&function z(S){return"boolean"==typeof S}(Je)?function eo(S,A,b,N){return(0,L.D)(A).pipe((0,zt.b)(K=>(0,Ge.z)(function vc(S,A){return null!==S&&A&&A(new Ei(S)),(0,W.of)(!0)}(K.route.parent,N),function Zo(S,A){return null!==S&&A&&A(new ms(S)),(0,W.of)(!0)}(K.route,N),function fa(S,A,b){const N=A[A.length-1],ie=A.slice(0,A.length-1).reverse().map(ge=>function Pr(S){const A=S.routeConfig?S.routeConfig.canActivateChild:null;return A&&0!==A.length?{node:S,guards:A}:null}(ge)).filter(ge=>null!==ge).map(ge=>(0,Ve.P)(()=>{const Je=ge.guards.map(Gt=>{const pn=Be(ge.node)??b,Zt=ji(Gt,pn);return on(function Lt(S){return S&&q(S.canActivateChild)}(Zt)?Zt.canActivateChild(N,S):pn.runInContext(()=>Zt(N,S))).pipe((0,Ye.P)())});return(0,W.of)(Je).pipe(Zi())}));return(0,W.of)(ie).pipe(Zi())}(S,K.path,b),function Cd(S,A,b){const N=A.routeConfig?A.routeConfig.canActivate:null;if(!N||0===N.length)return(0,W.of)(!0);const K=N.map(ie=>(0,Ve.P)(()=>{const ge=Be(A)??b,Je=ji(ie,ge);return on(function fe(S){return S&&q(S.canActivate)}(Je)?Je.canActivate(A,S):ge.runInContext(()=>Je(A,S))).pipe((0,Ye.P)())}));return(0,W.of)(K).pipe(Zi())}(S,K.route,b))),(0,Ye.P)(K=>!0!==K,!0))}(N,ie,S,A):(0,W.of)(Je)),(0,qe.U)(Je=>({...b,guardsResult:Je})))})}(this.environmentInjector,ge=>this.events.next(ge)),(0,xt.b)(ge=>{if(N.guardsResult=ge.guardsResult,_r(ge.guardsResult))throw Oo(0,ge.guardsResult);const Je=new Vr(ge.id,this.urlSerializer.serialize(ge.extractedUrl),this.urlSerializer.serialize(ge.urlAfterRedirects),ge.targetSnapshot,!!ge.guardsResult);this.events.next(Je)}),(0,Ot.h)(ge=>!!ge.guardsResult||(b.restoreHistory(ge),this.cancelNavigationTransition(ge,"",3),!1)),Yn(ge=>{if(ge.guards.canActivateChecks.length)return(0,W.of)(ge).pipe((0,xt.b)(Je=>{const Gt=new Mo(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot);this.events.next(Gt)}),(0,Se.w)(Je=>{let Gt=!1;return(0,W.of)(Je).pipe(function wt(S,A){return(0,nt.z)(b=>{const{targetSnapshot:N,guards:{canActivateChecks:K}}=b;if(!K.length)return(0,W.of)(b);let ie=0;return(0,L.D)(K).pipe((0,zt.b)(ge=>function kt(S,A,b,N){const K=S.routeConfig,ie=S._resolve;return void 0!==K?.title&&!Nr(K)&&(ie[Ln]=K.title),function jn(S,A,b,N){const K=function _i(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===K.length)return(0,W.of)({});const ie={};return(0,L.D)(K).pipe((0,nt.z)(ge=>function Jr(S,A,b,N){const K=Be(A)??N,ie=ji(S,K);return on(ie.resolve?ie.resolve(A,b):K.runInContext(()=>ie(A,b)))}(S[ge],A,b,N).pipe((0,Ye.P)(),(0,xt.b)(Je=>{ie[ge]=Je}))),_e(1),function tt(S){return(0,qe.U)(()=>S)}(ie),nn(ge=>ko(ge)?ut.E:Tt(ge)))}(ie,S,A,N).pipe((0,qe.U)(ge=>(S._resolvedData=ge,S.data=Eo(S,b).resolve,K&&Nr(K)&&(S.data[Ln]=K.title),null)))}(ge.route,N,S,A)),(0,xt.b)(()=>ie++),_e(1),(0,nt.z)(ge=>ie===K.length?(0,W.of)(b):ut.E))})}(b.paramsInheritanceStrategy,this.environmentInjector),(0,xt.b)({next:()=>Gt=!0,complete:()=>{Gt||(b.restoreHistory(Je),this.cancelNavigationTransition(Je,"",2))}}))}),(0,xt.b)(Je=>{const Gt=new Cs(Je.id,this.urlSerializer.serialize(Je.extractedUrl),this.urlSerializer.serialize(Je.urlAfterRedirects),Je.targetSnapshot);this.events.next(Gt)}))}),Yn(ge=>{const Je=Gt=>{const pn=[];Gt.routeConfig?.loadComponent&&!Gt.routeConfig._loadedComponent&&pn.push(this.configLoader.loadComponent(Gt.routeConfig).pipe((0,xt.b)(Zt=>{Gt.component=Zt}),(0,qe.U)(()=>{})));for(const Zt of Gt.children)pn.push(...Je(Zt));return pn};return(0,$e.a)(Je(ge.targetSnapshot.root)).pipe((0,Qn.d)(),(0,ze.q)(1))}),Yn(()=>this.afterPreactivation()),(0,qe.U)(ge=>{const Je=function Aa(S,A,b){const N=xa(S,A._root,b?b._root:void 0);return new gi(N,A)}(b.routeReuseStrategy,ge.targetSnapshot,ge.currentRouterState);return N={...ge,targetRouterState:Je}}),(0,xt.b)(ge=>{b.currentUrlTree=ge.urlAfterRedirects,b.rawUrlTree=b.urlHandlingStrategy.merge(ge.urlAfterRedirects,ge.rawUrl),b.routerState=ge.targetRouterState,"deferred"===b.urlUpdateStrategy&&(ge.extras.skipLocationChange||b.setBrowserUrl(b.rawUrlTree,ge),b.browserUrlTree=ge.urlAfterRedirects)}),((S,A,b)=>(0,qe.U)(N=>(new Xt(A,N.targetRouterState,N.currentRouterState,b).activate(S),N)))(this.rootContexts,b.routeReuseStrategy,ge=>this.events.next(ge)),(0,ze.q)(1),(0,xt.b)({next:ge=>{K=!0,this.lastSuccessfulNavigation=this.currentNavigation,b.navigated=!0,this.events.next(new Xr(ge.id,this.urlSerializer.serialize(ge.extractedUrl),this.urlSerializer.serialize(b.currentUrlTree))),b.titleStrategy?.updateTitle(ge.targetRouterState.snapshot),ge.resolve(!0)},complete:()=>{K=!0}}),dt(()=>{K||ie||this.cancelNavigationTransition(N,"",1),this.currentNavigation?.id===N.id&&(this.currentNavigation=null)}),nn(ge=>{if(ie=!0,la(ge)){Ii(ge)||(b.navigated=!0,b.restoreHistory(N,!0));const Je=new nr(N.id,this.urlSerializer.serialize(N.extractedUrl),ge.message,ge.cancellationCode);if(this.events.next(Je),Ii(ge)){const Gt=b.urlHandlingStrategy.merge(ge.url,b.rawUrlTree),pn={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===b.urlUpdateStrategy||ro(N.source)};b.scheduleNavigation(Gt,Ai,null,pn,{resolve:N.resolve,reject:N.reject,promise:N.promise})}else N.resolve(!1)}else{b.restoreHistory(N,!0);const Je=new lo(N.id,this.urlSerializer.serialize(N.extractedUrl),ge,N.targetSnapshot??void 0);this.events.next(Je);try{N.resolve(b.errorHandler(ge))}catch(Gt){N.reject(Gt)}}return ut.E}))}))}cancelNavigationTransition(b,N,K){const ie=new nr(b.id,this.urlSerializer.serialize(b.extractedUrl),N,K);this.events.next(ie),b.resolve(!1)}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function ro(S){return S!==Ai}let ks=(()=>{class S{buildTitle(b){let N,K=b.root;for(;void 0!==K;)N=this.getResolvedTitleForRoute(K)??N,K=K.children.find(ie=>ie.outlet===$t);return N}getResolvedTitleForRoute(b){return b.data[Ln]}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(Bo)},providedIn:"root"}),S})(),Bo=(()=>{class S extends ks{constructor(b){super(),this.title=b}updateTitle(b){const N=this.buildTitle(b);void 0!==N&&this.title.setTitle(N)}}return S.\u0275fac=function(b){return new(b||S)(_.LFG(ln.Dx))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Il=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(Id)},providedIn:"root"}),S})();class pl{shouldDetach(A){return!1}store(A,b){}shouldAttach(A){return!1}retrieve(A){return null}shouldReuseRoute(A,b){return A.routeConfig===b.routeConfig}}let Id=(()=>{class S extends pl{}return S.\u0275fac=function(){let A;return function(N){return(A||(A=_.n5z(S)))(N||S)}}(),S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const ga=new _.OlP("",{providedIn:"root",factory:()=>({})});let Uo=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:function(){return(0,_.f3M)(_a)},providedIn:"root"}),S})(),_a=(()=>{class S{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,N){return b}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();function sn(S){throw S}function Xi(S,A,b){return A.parse("/")}const io={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kc={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let en=(()=>{class S{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this.options=(0,_.f3M)(ga,{optional:!0})||{},this.errorHandler=this.options.errorHandler||sn,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Xi,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(Uo),this.routeReuseStrategy=(0,_.f3M)(Il),this.urlCreationStrategy=(0,_.f3M)(Xn),this.titleStrategy=(0,_.f3M)(ks),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qn((0,_.f3M)(di,{optional:!0})??[]),this.navigationTransitions=(0,_.f3M)(ys),this.urlSerializer=(0,_.f3M)(_n),this.location=(0,_.f3M)(Ft.Ye),this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Kr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Sa(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(b=>{this.lastSuccessfulId=b.id,this.currentPageId=this.browserPageId??0},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}resetRootComponentType(b){this.routerState.root.component=b,this.navigationTransitions.rootComponentType=b}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const b=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Ai,b)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const N="popstate"===b.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{this.navigateToSyncWithBrowser(b.url,N,b.state)},0)}))}navigateToSyncWithBrowser(b,N,K){const ie={replaceUrl:!0},ge=K?.navigationId?K:null;if(K){const Gt={...K};delete Gt.navigationId,delete Gt.\u0275routerPageId,0!==Object.keys(Gt).length&&(ie.state=Gt)}const Je=this.parseUrl(b);this.scheduleNavigation(Je,N,ge,ie)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(b){this.config=b.map(R),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,N={}){const{relativeTo:K,queryParams:ie,fragment:ge,queryParamsHandling:Je,preserveFragment:Gt}=N,pn=Gt?this.currentUrlTree.fragment:ge;let Zt=null;switch(Je){case"merge":Zt={...this.currentUrlTree.queryParams,...ie};break;case"preserve":Zt=this.currentUrlTree.queryParams;break;default:Zt=ie||null}return null!==Zt&&(Zt=this.removeEmptyProps(Zt)),this.urlCreationStrategy.createUrlTree(K,this.routerState,this.currentUrlTree,b,Zt,pn??null)}navigateByUrl(b,N={skipLocationChange:!1}){const K=_r(b)?b:this.parseUrl(b),ie=this.urlHandlingStrategy.merge(K,this.rawUrlTree);return this.scheduleNavigation(ie,Ai,null,N)}navigate(b,N={skipLocationChange:!1}){return function Jn(S){for(let A=0;A<S.length;A++){const b=S[A];if(null==b)throw new _.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,N),N)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let N;try{N=this.urlSerializer.parse(b)}catch(K){N=this.malformedUriErrorHandler(K,this.urlSerializer,b)}return N}isActive(b,N){let K;if(K=!0===N?{...io}:!1===N?{...Kc}:N,_r(b))return ci(this.currentUrlTree,b,K);const ie=this.parseUrl(b);return ci(this.currentUrlTree,ie,K)}removeEmptyProps(b){return Object.keys(b).reduce((N,K)=>{const ie=b[K];return null!=ie&&(N[K]=ie),N},{})}scheduleNavigation(b,N,K,ie,ge){if(this.disposed)return Promise.resolve(!1);let Je,Gt,pn,Zt;return ge?(Je=ge.resolve,Gt=ge.reject,pn=ge.promise):pn=new Promise(($n,ar)=>{Je=$n,Gt=ar}),Zt="computed"===this.canceledNavigationResolution?K&&K.\u0275routerPageId?K.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:Zt,source:N,restoredState:K,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:b,extras:ie,resolve:Je,reject:Gt,promise:pn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),pn.catch($n=>Promise.reject($n))}setBrowserUrl(b,N){const K=this.urlSerializer.serialize(b);if(this.location.isCurrentPathEqualTo(K)||N.extras.replaceUrl){const ge={...N.extras.state,...this.generateNgRouterState(N.id,this.browserPageId)};this.location.replaceState(K,"",ge)}else{const ie={...N.extras.state,...this.generateNgRouterState(N.id,N.targetPageId)};this.location.go(K,"",ie)}}restoreHistory(b,N=!1){if("computed"===this.canceledNavigationResolution){const ie=this.currentPageId-(this.browserPageId??this.currentPageId);0!==ie?this.location.historyGo(ie):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===ie&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(b,N){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:N}:{navigationId:b}}}return S.\u0275fac=function(b){return new(b||S)},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),Dl=(()=>{class S{constructor(b,N,K,ie,ge,Je){this.router=b,this.route=N,this.tabIndexAttribute=K,this.renderer=ie,this.el=ge,this.locationStrategy=Je,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Fe.x;const Gt=ge.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===Gt||"area"===Gt,this.isAnchorElement?this.subscription=b.events.subscribe(pn=>{pn instanceof Xr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,_.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,_.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,_.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",b)}ngOnChanges(b){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(b,N,K,ie,ge){return!!(null===this.urlTree||this.isAnchorElement&&(0!==b||N||K||ie||ge||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const b=null===this.href?null:(0,_.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",b)}applyAttributeValue(b,N){const K=this.renderer,ie=this.el.nativeElement;null!==N?K.setAttribute(ie,b,N):K.removeAttribute(ie,b)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(b){return new(b||S)(_.Y36(en),_.Y36(Js),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(Ft.S$))},S.\u0275dir=_.lG2({type:S,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(b,N){1&b&&_.NdJ("click",function(ie){return N.onClick(ie.button,ie.ctrlKey,ie.shiftKey,ie.altKey,ie.metaKey)}),2&b&&_.uIk("target",N.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[_.TTD]}),S})(),Sn=(()=>{class S{get isActive(){return this._isActive}constructor(b,N,K,ie,ge){this.router=b,this.element=N,this.renderer=K,this.cdr=ie,this.link=ge,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new _.vpe,this.routerEventsSubscription=b.events.subscribe(Je=>{Je instanceof Xr&&this.update()})}ngAfterContentInit(){(0,W.of)(this.links.changes,(0,W.of)(null)).pipe((0,it.J)()).subscribe(b=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const b=[...this.links.toArray(),this.link].filter(N=>!!N).map(N=>N.onChanges);this.linkInputChangesSubscription=(0,L.D)(b).pipe((0,it.J)()).subscribe(N=>{this._isActive!==this.isLinkActive(this.router)(N)&&this.update()})}set routerLinkActive(b){const N=Array.isArray(b)?b:b.split(" ");this.classes=N.filter(K=>!!K)}ngOnChanges(b){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const b=this.hasActiveLinks();this._isActive!==b&&(this._isActive=b,this.cdr.markForCheck(),this.classes.forEach(N=>{b?this.renderer.addClass(this.element.nativeElement,N):this.renderer.removeClass(this.element.nativeElement,N)}),b&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(b))})}isLinkActive(b){const N=function Rt(S){return!!S.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return K=>!!K.urlTree&&b.isActive(K.urlTree,N)}hasActiveLinks(){const b=this.isLinkActive(this.router);return this.link&&b(this.link)||this.links.some(b)}}return S.\u0275fac=function(b){return new(b||S)(_.Y36(en),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.sBO),_.Y36(Dl,8))},S.\u0275dir=_.lG2({type:S,selectors:[["","routerLinkActive",""]],contentQueries:function(b,N,K){if(1&b&&_.Suo(K,Dl,5),2&b){let ie;_.iGM(ie=_.CRH())&&(N.links=ie)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[_.TTD]}),S})();class qt{}let ds=(()=>{class S{constructor(b,N,K,ie,ge){this.router=b,this.injector=K,this.preloadingStrategy=ie,this.loader=ge}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ot.h)(b=>b instanceof Xr),(0,zt.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,N){const K=[];for(const ie of N){ie.providers&&!ie._injector&&(ie._injector=(0,_.MMx)(ie.providers,b,`Route: ${ie.path}`));const ge=ie._injector??b,Je=ie._loadedInjector??ge;(ie.loadChildren&&!ie._loadedRoutes&&void 0===ie.canLoad||ie.loadComponent&&!ie._loadedComponent)&&K.push(this.preloadConfig(ge,ie)),(ie.children||ie._loadedRoutes)&&K.push(this.processRoutes(Je,ie.children??ie._loadedRoutes))}return(0,L.D)(K).pipe((0,it.J)())}preloadConfig(b,N){return this.preloadingStrategy.preload(N,()=>{let K;K=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(b,N):(0,W.of)(null);const ie=K.pipe((0,nt.z)(ge=>null===ge?(0,W.of)(void 0):(N._loadedRoutes=ge.routes,N._loadedInjector=ge.injector,this.processRoutes(ge.injector??b,ge.routes))));if(N.loadComponent&&!N._loadedComponent){const ge=this.loader.loadComponent(N);return(0,L.D)([ie,ge]).pipe((0,it.J)())}return ie})}}return S.\u0275fac=function(b){return new(b||S)(_.LFG(en),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(qt),_.LFG(us))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Sl=new _.OlP("");let qc=(()=>{class S{constructor(b,N,K,ie,ge={}){this.urlSerializer=b,this.transitions=N,this.viewportScroller=K,this.zone=ie,this.options=ge,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ge.scrollPositionRestoration=ge.scrollPositionRestoration||"disabled",ge.anchorScrolling=ge.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Ts?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Xr&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.urlSerializer.parse(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(b=>{b instanceof Qe&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,N){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Qe(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return S.\u0275fac=function(b){_.$Z()},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})();var Gs=(()=>((Gs=Gs||{})[Gs.COMPLETE=0]="COMPLETE",Gs[Gs.FAILED=1]="FAILED",Gs[Gs.REDIRECTING=2]="REDIRECTING",Gs))();const Ql=!1;function Oa(S,A){return{\u0275kind:S,\u0275providers:A}}const Tl=new _.OlP("",{providedIn:"root",factory:()=>!1});function Pi(){const S=(0,_.f3M)(_.zs3);return A=>{const b=S.get(_.z2F);if(A!==b.components[0])return;const N=S.get(en),K=S.get(rr);1===S.get(jo)&&N.initialNavigation(),S.get(tn,null,_.XFs.Optional)?.setUpPreloading(),S.get(Sl,null,_.XFs.Optional)?.init(),N.resetRootComponentType(b.componentTypes[0]),K.closed||(K.next(),K.complete(),K.unsubscribe())}}const rr=new _.OlP(Ql?"bootstrap done indicator":"",{factory:()=>new Fe.x}),jo=new _.OlP(Ql?"initial navigation":"",{providedIn:"root",factory:()=>1});function vs(){let S=[];return S=Ql?[{provide:_.Xts,multi:!0,useFactory:()=>{const A=(0,_.f3M)(en);return()=>A.events.subscribe(b=>{console.group?.(`Router Event: ${b.constructor.name}`),console.log(function We(S){if(!("type"in S))return`Unknown Router Event: ${S.constructor.name}`;switch(S.type){case 14:return`ActivationEnd(path: '${S.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${S.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${S.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${S.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state}, shouldActivate: ${S.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 2:return`NavigationCancel(id: ${S.id}, url: '${S.url}')`;case 16:return`NavigationSkipped(id: ${S.id}, url: '${S.url}')`;case 1:return`NavigationEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${S.id}, url: '${S.url}', error: ${S.error})`;case 0:return`NavigationStart(id: ${S.id}, url: '${S.url}')`;case 6:return`ResolveEnd(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 5:return`ResolveStart(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 10:return`RouteConfigLoadEnd(path: ${S.route.path})`;case 9:return`RouteConfigLoadStart(path: ${S.route.path})`;case 4:return`RoutesRecognized(id: ${S.id}, url: '${S.url}', urlAfterRedirects: '${S.urlAfterRedirects}', state: ${S.state})`;case 15:return`Scroll(anchor: '${S.anchor}', position: '${S.position?`${S.position[0]}, ${S.position[1]}`:null}')`}}(b)),console.log(b),console.groupEnd?.()})}}]:[],Oa(1,S)}const tn=new _.OlP(Ql?"router preloader":"");function Uu(S){return Oa(0,[{provide:tn,useExisting:ds},{provide:qt,useExisting:S}])}const Xl=!1,Ja=new _.OlP(Xl?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),ml=[Ft.Ye,{provide:_n,useClass:je},en,ss,{provide:Js,useFactory:function bc(S){return S.routerState.root},deps:[en]},us,Xl?{provide:Tl,useValue:!0}:[]];function hh(){return new _.PXZ("Router",en)}let Ho=(()=>{class S{constructor(b){}static forRoot(b,N){return{ngModule:S,providers:[ml,Xl&&N?.enableTracing?vs().\u0275providers:[],{provide:di,multi:!0,useValue:b},{provide:Ja,useFactory:ka,deps:[[en,new _.FiY,new _.tp0]]},{provide:ga,useValue:N||{}},N?.useHash?{provide:Ft.S$,useClass:Ft.Do}:{provide:Ft.S$,useClass:Ft.b0},{provide:Sl,useFactory:()=>{const S=(0,_.f3M)(Ft.EM),A=(0,_.f3M)(_.R0b),b=(0,_.f3M)(ga),N=(0,_.f3M)(ys),K=(0,_.f3M)(_n);return b.scrollOffset&&S.setOffset(b.scrollOffset),new qc(K,N,S,A,b)}},N?.preloadingStrategy?Uu(N.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:hh},N?.initialNavigation?zo(N):[],[{provide:_t,useFactory:Pi},{provide:_.tb,multi:!0,useExisting:_t}]]}}static forChild(b){return{ngModule:S,providers:[{provide:di,multi:!0,useValue:b}]}}}return S.\u0275fac=function(b){return new(b||S)(_.LFG(Ja,8))},S.\u0275mod=_.oAB({type:S}),S.\u0275inj=_.cJS({imports:[ua]}),S})();function ka(S){if(Xl&&S)throw new _.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function zo(S){return["disabled"===S.initialNavigation?Oa(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const A=(0,_.f3M)(en);return()=>{A.setUpLocationChangeListener()}}},{provide:jo,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?Oa(2,[{provide:jo,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:A=>{const b=A.get(Ft.V_,Promise.resolve());return()=>b.then(()=>new Promise(N=>{const K=A.get(en),ie=A.get(rr);(function Xa(S,A){S.events.pipe((0,Ot.h)(b=>b instanceof Xr||b instanceof nr||b instanceof lo||b instanceof bs),(0,qe.U)(b=>b instanceof Xr||b instanceof bs?Gs.COMPLETE:b instanceof nr&&(0===b.code||1===b.code)?Gs.REDIRECTING:Gs.FAILED),(0,Ot.h)(b=>b!==Gs.REDIRECTING),(0,ze.q)(1)).subscribe(()=>{A()})})(K,()=>{N(!0)}),A.get(ys).afterPreactivation=()=>(N(!0),ie.closed?(0,W.of)(void 0):ie),K.initialNavigation()}))}}]).\u0275providers:[]]}const _t=new _.OlP(Xl?"Router Initializer":"")},3942:(gn,at,j)=>{j.d(at,{Z:()=>Ht});var _=j(2090),L=j(4859),W=j(6881),Fe=j(1877);class Ne{constructor(pt,It){this._delegate=pt,this.firebase=It,(0,W._addComponent)(pt,new L.wA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(pt,It=W._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const Ft=this._delegate.container.getProvider(pt);return!Ft.isInitialized()&&"EXPLICIT"===(null===(Oe=Ft.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&Ft.initialize(),Ft.getImmediate({identifier:It})}_removeServiceInstance(pt,It=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(It)}_addComponent(pt){(0,W._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,W._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const $e=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ie=function Ve(){const Kt=function Ge(Kt){const pt={},It={__esModule:!0,initializeApp:function qe(Ot,nt={}){const Ye=W.initializeApp(Ot,nt);if((0,_.r3)(pt,Ye.name))return pt[Ye.name];const zt=new Kt(Ye,It);return pt[Ye.name]=zt,zt},app:Ft,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function ze(Ot){const nt=Ot.name,Ye=nt.replace("-compat","");if(W._registerComponent(Ot)&&"PUBLIC"===Ot.type){const zt=(xt=Ft())=>{if("function"!=typeof xt[Ye])throw $e.create("invalid-app-argument",{appName:nt});return xt[Ye]()};void 0!==Ot.serviceProps&&(0,_.ZB)(zt,Ot.serviceProps),It[Ye]=zt,Kt.prototype[Ye]=function(...xt){return this._getService.bind(this,nt).apply(this,Ot.multipleInstances?xt:[])}}return"PUBLIC"===Ot.type?It[Ye]:null},removeApp:function Oe(Ot){delete pt[Ot]},useAsService:function Bt(Ot,nt){return"serverAuth"===nt?null:nt},modularAPIs:W}};function Ft(Ot){if(!(0,_.r3)(pt,Ot=Ot||W._DEFAULT_ENTRY_NAME))throw $e.create("no-app",{appName:Ot});return pt[Ot]}return It.default=It,Object.defineProperty(It,"apps",{get:function Se(){return Object.keys(pt).map(Ot=>pt[Ot])}}),Ft.App=Kt,It}(Ne);return Kt.INTERNAL=Object.assign(Object.assign({},Kt.INTERNAL),{createFirebaseNamespace:Ve,extendNamespace:function pt(It){(0,_.ZB)(Kt,It)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Kt}(),De=new Fe.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){De.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Kt=self.firebase.SDK_VERSION;Kt&&Kt.indexOf("LITE")>=0&&De.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ht=Ie;!function ut(Kt){(0,W.registerVersion)("@firebase/app-compat","0.2.13",Kt)}()},6881:(gn,at,j)=>{j.r(at),j.d(at,{FirebaseError:()=>Fe.ZR,SDK_VERSION:()=>_n,_DEFAULT_ENTRY_NAME:()=>ci,_addComponent:()=>cn,_addOrOverwriteComponent:()=>un,_apps:()=>er,_clearComponents:()=>Fr,_components:()=>ir,_getProvider:()=>Kr,_registerComponent:()=>Ar,_removeServiceInstance:()=>An,deleteApp:()=>xn,getApp:()=>At,getApps:()=>an,initializeApp:()=>je,onLog:()=>te,registerVersion:()=>de,setLogLevel:()=>le});var _=j(5861),L=j(4859),W=j(1877),Fe=j(2090);const Ne=(ht,mt)=>mt.some(Qt=>ht instanceof Qt);let Ae,$e;const Ie=new WeakMap,De=new WeakMap,ke=new WeakMap,Tt=new WeakMap,ut=new WeakMap;let pt={get(ht,mt,Qt){if(ht instanceof IDBTransaction){if("done"===mt)return De.get(ht);if("objectStoreNames"===mt)return ht.objectStoreNames||ke.get(ht);if("store"===mt)return Qt.objectStoreNames[1]?void 0:Qt.objectStore(Qt.objectStoreNames[0])}return qe(ht[mt])},set:(ht,mt,Qt)=>(ht[mt]=Qt,!0),has:(ht,mt)=>ht instanceof IDBTransaction&&("done"===mt||"store"===mt)||mt in ht};function Ft(ht){return"function"==typeof ht?function Oe(ht){return ht!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ve(){return $e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ht)?function(...mt){return ht.apply(Se(this),mt),qe(Ie.get(this))}:function(...mt){return qe(ht.apply(Se(this),mt))}:function(mt,...Qt){const Nn=ht.call(Se(this),mt,...Qt);return ke.set(Nn,mt.sort?mt.sort():[mt]),qe(Nn)}}(ht):(ht instanceof IDBTransaction&&function Kt(ht){if(De.has(ht))return;const mt=new Promise((Qt,Nn)=>{const Bn=()=>{ht.removeEventListener("complete",tr),ht.removeEventListener("error",En),ht.removeEventListener("abort",En)},tr=()=>{Qt(),Bn()},En=()=>{Nn(ht.error||new DOMException("AbortError","AbortError")),Bn()};ht.addEventListener("complete",tr),ht.addEventListener("error",En),ht.addEventListener("abort",En)});De.set(ht,mt)}(ht),Ne(ht,function Ge(){return Ae||(Ae=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ht,pt):ht)}function qe(ht){if(ht instanceof IDBRequest)return function Ht(ht){const mt=new Promise((Qt,Nn)=>{const Bn=()=>{ht.removeEventListener("success",tr),ht.removeEventListener("error",En)},tr=()=>{Qt(qe(ht.result)),Bn()},En=()=>{Nn(ht.error),Bn()};ht.addEventListener("success",tr),ht.addEventListener("error",En)});return mt.then(Qt=>{Qt instanceof IDBCursor&&Ie.set(Qt,ht)}).catch(()=>{}),ut.set(mt,ht),mt}(ht);if(Tt.has(ht))return Tt.get(ht);const mt=Ft(ht);return mt!==ht&&(Tt.set(ht,mt),ut.set(mt,ht)),mt}const Se=ht=>ut.get(ht),Ot=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],Ye=new Map;function zt(ht,mt){if(!(ht instanceof IDBDatabase)||mt in ht||"string"!=typeof mt)return;if(Ye.get(mt))return Ye.get(mt);const Qt=mt.replace(/FromIndex$/,""),Nn=mt!==Qt,Bn=nt.includes(Qt);if(!(Qt in(Nn?IDBIndex:IDBObjectStore).prototype)||!Bn&&!Ot.includes(Qt))return;const tr=function(){var En=(0,_.Z)(function*(Sr,...Rr){const $r=this.transaction(Sr,Bn?"readwrite":"readonly");let Ti=$r.store;return Nn&&(Ti=Ti.index(Rr.shift())),(yield Promise.all([Ti[Qt](...Rr),Bn&&$r.done]))[0]});return function(Rr){return En.apply(this,arguments)}}();return Ye.set(mt,tr),tr}!function It(ht){pt=ht(pt)}(ht=>({...ht,get:(mt,Qt,Nn)=>zt(mt,Qt)||ht.get(mt,Qt,Nn),has:(mt,Qt)=>!!zt(mt,Qt)||ht.has(mt,Qt)}));class xt{constructor(mt){this.container=mt}getPlatformInfoString(){return this.container.getProviders().map(Qt=>{if(function kn(ht){return"VERSION"===ht.getComponent()?.type}(Qt)){const Nn=Qt.getImmediate();return`${Nn.library}/${Nn.version}`}return null}).filter(Qt=>Qt).join(" ")}}const nn="@firebase/app",_e=new W.Yd("@firebase/app"),ci="[DEFAULT]",Ri={[nn]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},er=new Map,ir=new Map;function cn(ht,mt){try{ht.container.addComponent(mt)}catch(Qt){_e.debug(`Component ${mt.name} failed to register with FirebaseApp ${ht.name}`,Qt)}}function un(ht,mt){ht.container.addOrOverwriteComponent(mt)}function Ar(ht){const mt=ht.name;if(ir.has(mt))return _e.debug(`There were multiple attempts to register component ${mt}.`),!1;ir.set(mt,ht);for(const Qt of er.values())cn(Qt,ht);return!0}function Kr(ht,mt){const Qt=ht.container.getProvider("heartbeat").getImmediate({optional:!0});return Qt&&Qt.triggerHeartbeat(),ht.container.getProvider(mt)}function An(ht,mt,Qt=ci){Kr(ht,mt).clearInstance(Qt)}function Fr(){ir.clear()}const zr=new Fe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class gt{constructor(mt,Qt,Nn){this._isDeleted=!1,this._options=Object.assign({},mt),this._config=Object.assign({},Qt),this._name=Qt.name,this._automaticDataCollectionEnabled=Qt.automaticDataCollectionEnabled,this._container=Nn,this.container.addComponent(new L.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(mt){this.checkDestroyed(),this._automaticDataCollectionEnabled=mt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(mt){this._isDeleted=mt}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}const _n="9.23.0";function je(ht,mt={}){let Qt=ht;"object"!=typeof mt&&(mt={name:mt});const Nn=Object.assign({name:ci,automaticDataCollectionEnabled:!1},mt),Bn=Nn.name;if("string"!=typeof Bn||!Bn)throw zr.create("bad-app-name",{appName:String(Bn)});if(Qt||(Qt=(0,Fe.aH)()),!Qt)throw zr.create("no-options");const tr=er.get(Bn);if(tr){if((0,Fe.vZ)(Qt,tr.options)&&(0,Fe.vZ)(Nn,tr.config))return tr;throw zr.create("duplicate-app",{appName:Bn})}const En=new L.H0(Bn);for(const Rr of ir.values())En.addComponent(Rr);const Sr=new gt(Qt,Nn,En);return er.set(Bn,Sr),Sr}function At(ht=ci){const mt=er.get(ht);if(!mt&&ht===ci&&(0,Fe.aH)())return je();if(!mt)throw zr.create("no-app",{appName:ht});return mt}function an(){return Array.from(er.values())}function xn(ht){return Et.apply(this,arguments)}function Et(){return(Et=(0,_.Z)(function*(ht){const mt=ht.name;er.has(mt)&&(er.delete(mt),yield Promise.all(ht.container.getProviders().map(Qt=>Qt.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function de(ht,mt,Qt){var Nn;let Bn=null!==(Nn=Ri[ht])&&void 0!==Nn?Nn:ht;Qt&&(Bn+=`-${Qt}`);const tr=Bn.match(/\s|\//),En=mt.match(/\s|\//);if(tr||En){const Sr=[`Unable to register library "${Bn}" with version "${mt}":`];return tr&&Sr.push(`library name "${Bn}" contains illegal characters (whitespace or "/")`),tr&&En&&Sr.push("and"),En&&Sr.push(`version name "${mt}" contains illegal characters (whitespace or "/")`),void _e.warn(Sr.join(" "))}Ar(new L.wA(`${Bn}-version`,()=>({library:Bn,version:mt}),"VERSION"))}function te(ht,mt){if(null!==ht&&"function"!=typeof ht)throw zr.create("invalid-log-argument");(0,W.Am)(ht,mt)}function le(ht){(0,W.Ub)(ht)}const ct="firebase-heartbeat-database",vt=1,ve="firebase-heartbeat-store";let be=null;function He(){return be||(be=function ze(ht,mt,{blocked:Qt,upgrade:Nn,blocking:Bn,terminated:tr}={}){const En=indexedDB.open(ht,mt),Sr=qe(En);return Nn&&En.addEventListener("upgradeneeded",Rr=>{Nn(qe(En.result),Rr.oldVersion,Rr.newVersion,qe(En.transaction),Rr)}),Qt&&En.addEventListener("blocked",Rr=>Qt(Rr.oldVersion,Rr.newVersion,Rr)),Sr.then(Rr=>{tr&&Rr.addEventListener("close",()=>tr()),Bn&&Rr.addEventListener("versionchange",$r=>Bn($r.oldVersion,$r.newVersion,$r))}).catch(()=>{}),Sr}(ct,vt,{upgrade:(ht,mt)=>{0===mt&&ht.createObjectStore(ve)}}).catch(ht=>{throw zr.create("idb-open",{originalErrorMessage:ht.message})})),be}function re(){return(re=(0,_.Z)(function*(ht){try{return yield(yield He()).transaction(ve).objectStore(ve).get(he(ht))}catch(mt){if(mt instanceof Fe.ZR)_e.warn(mt.message);else{const Qt=zr.create("idb-get",{originalErrorMessage:mt?.message});_e.warn(Qt.message)}}})).apply(this,arguments)}function ye(ht,mt){return pe.apply(this,arguments)}function pe(){return(pe=(0,_.Z)(function*(ht,mt){try{const Nn=(yield He()).transaction(ve,"readwrite");yield Nn.objectStore(ve).put(mt,he(ht)),yield Nn.done}catch(Qt){if(Qt instanceof Fe.ZR)_e.warn(Qt.message);else{const Nn=zr.create("idb-set",{originalErrorMessage:Qt?.message});_e.warn(Nn.message)}}})).apply(this,arguments)}function he(ht){return`${ht.name}!${ht.options.appId}`}class rt{constructor(mt){this.container=mt,this._heartbeatsCache=null;const Qt=this.container.getProvider("app").getImmediate();this._storage=new _r(Qt),this._heartbeatsCachePromise=this._storage.read().then(Nn=>(this._heartbeatsCache=Nn,Nn))}triggerHeartbeat(){var mt=this;return(0,_.Z)(function*(){const Nn=mt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Bn=Ut();if(null===mt._heartbeatsCache&&(mt._heartbeatsCache=yield mt._heartbeatsCachePromise),mt._heartbeatsCache.lastSentHeartbeatDate!==Bn&&!mt._heartbeatsCache.heartbeats.some(tr=>tr.date===Bn))return mt._heartbeatsCache.heartbeats.push({date:Bn,agent:Nn}),mt._heartbeatsCache.heartbeats=mt._heartbeatsCache.heartbeats.filter(tr=>{const En=new Date(tr.date).valueOf();return Date.now()-En<=2592e6}),mt._storage.overwrite(mt._heartbeatsCache)})()}getHeartbeatsHeader(){var mt=this;return(0,_.Z)(function*(){if(null===mt._heartbeatsCache&&(yield mt._heartbeatsCachePromise),null===mt._heartbeatsCache||0===mt._heartbeatsCache.heartbeats.length)return"";const Qt=Ut(),{heartbeatsToSend:Nn,unsentEntries:Bn}=function vn(ht,mt=1024){const Qt=[];let Nn=ht.slice();for(const Bn of ht){const tr=Qt.find(En=>En.agent===Bn.agent);if(tr){if(tr.dates.push(Bn.date),ii(Qt)>mt){tr.dates.pop();break}}else if(Qt.push({agent:Bn.agent,dates:[Bn.date]}),ii(Qt)>mt){Qt.pop();break}Nn=Nn.slice(1)}return{heartbeatsToSend:Qt,unsentEntries:Nn}}(mt._heartbeatsCache.heartbeats),tr=(0,Fe.L)(JSON.stringify({version:2,heartbeats:Nn}));return mt._heartbeatsCache.lastSentHeartbeatDate=Qt,Bn.length>0?(mt._heartbeatsCache.heartbeats=Bn,yield mt._storage.overwrite(mt._heartbeatsCache)):(mt._heartbeatsCache.heartbeats=[],mt._storage.overwrite(mt._heartbeatsCache)),tr})()}}function Ut(){return(new Date).toISOString().substring(0,10)}class _r{constructor(mt){this.app=mt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,Fe.hl)()&&(0,Fe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var mt=this;return(0,_.Z)(function*(){return(yield mt._canUseIndexedDBPromise)&&(yield function we(ht){return re.apply(this,arguments)}(mt.app))||{heartbeats:[]}})()}overwrite(mt){var Qt=this;return(0,_.Z)(function*(){var Nn;if(yield Qt._canUseIndexedDBPromise){const tr=yield Qt.read();return ye(Qt.app,{lastSentHeartbeatDate:null!==(Nn=mt.lastSentHeartbeatDate)&&void 0!==Nn?Nn:tr.lastSentHeartbeatDate,heartbeats:mt.heartbeats})}})()}add(mt){var Qt=this;return(0,_.Z)(function*(){var Nn;if(yield Qt._canUseIndexedDBPromise){const tr=yield Qt.read();return ye(Qt.app,{lastSentHeartbeatDate:null!==(Nn=mt.lastSentHeartbeatDate)&&void 0!==Nn?Nn:tr.lastSentHeartbeatDate,heartbeats:[...tr.heartbeats,...mt.heartbeats]})}})()}}function ii(ht){return(0,Fe.L)(JSON.stringify({version:2,heartbeats:ht})).length}!function Wi(ht){Ar(new L.wA("platform-logger",mt=>new xt(mt),"PRIVATE")),Ar(new L.wA("heartbeat",mt=>new rt(mt),"PRIVATE")),de(nn,"0.9.13",ht),de(nn,"0.9.13","esm2017"),de("fire-js","")}("")},4859:(gn,at,j)=>{j.d(at,{H0:()=>Ge,wA:()=>W,zt:()=>Ne});var _=j(5861),L=j(2090);class W{constructor(Ie,De,ke){this.name=Ie,this.instanceFactory=De,this.type=ke,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ie){return this.instantiationMode=Ie,this}setMultipleInstances(Ie){return this.multipleInstances=Ie,this}setServiceProps(Ie){return this.serviceProps=Ie,this}setInstanceCreatedCallback(Ie){return this.onInstanceCreated=Ie,this}}const Fe="[DEFAULT]";class Ne{constructor(Ie,De){this.name=Ie,this.container=De,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ie){const De=this.normalizeInstanceIdentifier(Ie);if(!this.instancesDeferred.has(De)){const ke=new L.BH;if(this.instancesDeferred.set(De,ke),this.isInitialized(De)||this.shouldAutoInitialize())try{const Tt=this.getOrInitializeService({instanceIdentifier:De});Tt&&ke.resolve(Tt)}catch{}}return this.instancesDeferred.get(De).promise}getImmediate(Ie){var De;const ke=this.normalizeInstanceIdentifier(Ie?.identifier),Tt=null!==(De=Ie?.optional)&&void 0!==De&&De;if(!this.isInitialized(ke)&&!this.shouldAutoInitialize()){if(Tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ke})}catch(ut){if(Tt)return null;throw ut}}getComponent(){return this.component}setComponent(Ie){if(Ie.name!==this.name)throw Error(`Mismatching Component ${Ie.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ie,this.shouldAutoInitialize()){if(function $e(Ve){return"EAGER"===Ve.instantiationMode}(Ie))try{this.getOrInitializeService({instanceIdentifier:Fe})}catch{}for(const[De,ke]of this.instancesDeferred.entries()){const Tt=this.normalizeInstanceIdentifier(De);try{const ut=this.getOrInitializeService({instanceIdentifier:Tt});ke.resolve(ut)}catch{}}}}clearInstance(Ie=Fe){this.instancesDeferred.delete(Ie),this.instancesOptions.delete(Ie),this.instances.delete(Ie)}delete(){var Ie=this;return(0,_.Z)(function*(){const De=Array.from(Ie.instances.values());yield Promise.all([...De.filter(ke=>"INTERNAL"in ke).map(ke=>ke.INTERNAL.delete()),...De.filter(ke=>"_delete"in ke).map(ke=>ke._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ie=Fe){return this.instances.has(Ie)}getOptions(Ie=Fe){return this.instancesOptions.get(Ie)||{}}initialize(Ie={}){const{options:De={}}=Ie,ke=this.normalizeInstanceIdentifier(Ie.instanceIdentifier);if(this.isInitialized(ke))throw Error(`${this.name}(${ke}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Tt=this.getOrInitializeService({instanceIdentifier:ke,options:De});for(const[ut,Ht]of this.instancesDeferred.entries())ke===this.normalizeInstanceIdentifier(ut)&&Ht.resolve(Tt);return Tt}onInit(Ie,De){var ke;const Tt=this.normalizeInstanceIdentifier(De),ut=null!==(ke=this.onInitCallbacks.get(Tt))&&void 0!==ke?ke:new Set;ut.add(Ie),this.onInitCallbacks.set(Tt,ut);const Ht=this.instances.get(Tt);return Ht&&Ie(Ht,Tt),()=>{ut.delete(Ie)}}invokeOnInitCallbacks(Ie,De){const ke=this.onInitCallbacks.get(De);if(ke)for(const Tt of ke)try{Tt(Ie,De)}catch{}}getOrInitializeService({instanceIdentifier:Ie,options:De={}}){let ke=this.instances.get(Ie);if(!ke&&this.component&&(ke=this.component.instanceFactory(this.container,{instanceIdentifier:(Ve=Ie,Ve===Fe?void 0:Ve),options:De}),this.instances.set(Ie,ke),this.instancesOptions.set(Ie,De),this.invokeOnInitCallbacks(ke,Ie),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ie,ke)}catch{}var Ve;return ke||null}normalizeInstanceIdentifier(Ie=Fe){return this.component?this.component.multipleInstances?Ie:Fe:Ie}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ge{constructor(Ie){this.name=Ie,this.providers=new Map}addComponent(Ie){const De=this.getProvider(Ie.name);if(De.isComponentSet())throw new Error(`Component ${Ie.name} has already been registered with ${this.name}`);De.setComponent(Ie)}addOrOverwriteComponent(Ie){this.getProvider(Ie.name).isComponentSet()&&this.providers.delete(Ie.name),this.addComponent(Ie)}getProvider(Ie){if(this.providers.has(Ie))return this.providers.get(Ie);const De=new Ne(Ie,this);return this.providers.set(Ie,De),De}getProviders(){return Array.from(this.providers.values())}}},1877:(gn,at,j)=>{j.d(at,{Am:()=>Ve,Ub:()=>Ge,Yd:()=>$e,in:()=>L});const _=[];var L=(()=>{return(Ie=L||(L={}))[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT",L;var Ie})();const W={debug:L.DEBUG,verbose:L.VERBOSE,info:L.INFO,warn:L.WARN,error:L.ERROR,silent:L.SILENT},Fe=L.INFO,Ne={[L.DEBUG]:"log",[L.VERBOSE]:"log",[L.INFO]:"info",[L.WARN]:"warn",[L.ERROR]:"error"},Ae=(Ie,De,...ke)=>{if(De<Ie.logLevel)return;const Tt=(new Date).toISOString(),ut=Ne[De];if(!ut)throw new Error(`Attempted to log a message with an invalid logType (value: ${De})`);console[ut](`[${Tt}]  ${Ie.name}:`,...ke)};class $e{constructor(De){this.name=De,this._logLevel=Fe,this._logHandler=Ae,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(De){if(!(De in L))throw new TypeError(`Invalid value "${De}" assigned to \`logLevel\``);this._logLevel=De}setLogLevel(De){this._logLevel="string"==typeof De?W[De]:De}get logHandler(){return this._logHandler}set logHandler(De){if("function"!=typeof De)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=De}get userLogHandler(){return this._userLogHandler}set userLogHandler(De){this._userLogHandler=De}debug(...De){this._userLogHandler&&this._userLogHandler(this,L.DEBUG,...De),this._logHandler(this,L.DEBUG,...De)}log(...De){this._userLogHandler&&this._userLogHandler(this,L.VERBOSE,...De),this._logHandler(this,L.VERBOSE,...De)}info(...De){this._userLogHandler&&this._userLogHandler(this,L.INFO,...De),this._logHandler(this,L.INFO,...De)}warn(...De){this._userLogHandler&&this._userLogHandler(this,L.WARN,...De),this._logHandler(this,L.WARN,...De)}error(...De){this._userLogHandler&&this._userLogHandler(this,L.ERROR,...De),this._logHandler(this,L.ERROR,...De)}}function Ge(Ie){_.forEach(De=>{De.setLogLevel(Ie)})}function Ve(Ie,De){for(const ke of _){let Tt=null;De&&De.level&&(Tt=W[De.level]),ke.userLogHandler=null===Ie?null:(ut,Ht,...Kt)=>{const pt=Kt.map(It=>{if(null==It)return null;if("string"==typeof It)return It;if("number"==typeof It||"boolean"==typeof It)return It.toString();if(It instanceof Error)return It.message;try{return JSON.stringify(It)}catch{return null}}).filter(It=>It).join(" ");Ht>=(Tt??ut.logLevel)&&Ie({level:L[Ht].toLowerCase(),message:pt,args:Kt,type:ut.name})}}}},259:(gn,at,j)=>{j.d(at,{C6:()=>_.getApps,Mq:()=>_.getApp});var _=j(6881);(0,_.registerVersion)("firebase","9.23.0","app")},9260:(gn,at,j)=>{j.d(at,{Z:()=>_.Z});var _=j(3942);_.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(gn,at,j)=>{j.r(at);var _=j(5861),L=j(3942),W=j(2090),Fe=j(6881),Ne=j(7582),Ae=j(1877),$e=j(4859);const Ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ke_EMAIL_SIGNIN="EMAIL_SIGNIN",ke_PASSWORD_RESET="PASSWORD_RESET",ke_RECOVER_EMAIL="RECOVER_EMAIL",ke_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",ke_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",ke_VERIFY_EMAIL="VERIFY_EMAIL";const Ht=function Tt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},Kt=function ut(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new Ae.Yd("@firebase/auth");function qe(C,...g){Oe.logLevel<=Ae.in.ERROR&&Oe.error(`Auth (${Fe.SDK_VERSION}): ${C}`,...g)}function Se(C,...g){throw nt(C,...g)}function ze(C,...g){return nt(C,...g)}function Bt(C,g,y){const T=Object.assign(Object.assign({},Kt()),{[g]:y});return new W.LL("auth","Firebase",T).create(g,{appName:C.name})}function Ot(C,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Se(C,"argument-error"),Bt(C,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(C,...g){if("string"!=typeof C){const y=g[0],T=[...g.slice(1)];return T[0]&&(T[0].appName=C.name),C._errorFactory.create(y,...T)}return pt.create(C,...g)}function Ye(C,g,...y){if(!C)throw nt(g,...y)}function zt(C){const g="INTERNAL ASSERTION FAILED: "+C;throw qe(g),new Error(g)}function xt(C,g){C||zt(g)}function kn(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function nn(){return"http:"===Mr()||"https:"===Mr()}function Mr(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class Qn{constructor(g,y){this.shortDelay=g,this.longDelay=y,xt(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function _e(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(nn()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ze(C,g){xt(C.emulator,"Emulator should always be set here");const{url:y}=C.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class lt{static initialize(g,y,T){this.fetchImpl=g,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void zt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void zt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void zt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const st={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tt=new Qn(3e4,6e4);function dt(C,g){return C.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:C.tenantId}):g}function it(C,g,y,T){return ln.apply(this,arguments)}function ln(){return(ln=(0,_.Z)(function*(C,g,y,T,Z={}){return $t(C,Z,(0,_.Z)(function*(){let se={},Pe={};T&&("GET"===g?Pe=T:se={body:JSON.stringify(T)});const yt=(0,W.xO)(Object.assign({key:C.config.apiKey},Pe)).slice(1),rn=yield C._getAdditionalHeaders();return rn["Content-Type"]="application/json",C.languageCode&&(rn["X-Firebase-Locale"]=C.languageCode),lt.fetch()(cr(C,C.config.apiHost,y,yt),Object.assign({method:g,headers:rn,referrerPolicy:"no-referrer"},se))}))})).apply(this,arguments)}function $t(C,g,y){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,_.Z)(function*(C,g,y){C._canInitEmulator=!1;const T=Object.assign(Object.assign({},st),g);try{const Z=new sr(C),se=yield Promise.race([y(),Z.promise]);Z.clearNetworkTimeout();const Pe=yield se.json();if("needConfirmation"in Pe)throw Dn(C,"account-exists-with-different-credential",Pe);if(se.ok&&!("errorMessage"in Pe))return Pe;{const yt=se.ok?Pe.errorMessage:Pe.error.message,[rn,wn]=yt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rn)throw Dn(C,"credential-already-in-use",Pe);if("EMAIL_EXISTS"===rn)throw Dn(C,"email-already-in-use",Pe);if("USER_DISABLED"===rn)throw Dn(C,"user-disabled",Pe);const Hn=T[rn]||rn.toLowerCase().replace(/[_\s]+/g,"-");if(wn)throw Bt(C,Hn,wn);Se(C,Hn)}}catch(Z){if(Z instanceof W.ZR)throw Z;Se(C,"network-request-failed",{message:String(Z)})}})).apply(this,arguments)}function Cn(C,g,y,T){return zn.apply(this,arguments)}function zn(){return(zn=(0,_.Z)(function*(C,g,y,T,Z={}){const se=yield it(C,g,y,T,Z);return"mfaPendingCredential"in se&&Se(C,"multi-factor-auth-required",{_serverResponse:se}),se})).apply(this,arguments)}function cr(C,g,y,T){const Z=`${g}${y}?${T}`;return C.config.emulator?Ze(C.config,Z):`${C.config.apiScheme}://${Z}`}class sr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T(ze(this.auth,"network-request-failed")),tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dn(C,g,y){const T={appName:C.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const Z=ze(C,g,T);return Z.customData._tokenResponse=y,Z}function qn(){return(qn=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Dr(){return(Dr=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function on(){return(on=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Cr(C){if(C)try{const g=new Date(Number(C));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function ci(){return(ci=(0,_.Z)(function*(C,g=!1){const y=(0,W.m9)(C),T=yield y.getIdToken(g),Z=er(T);Ye(Z&&Z.exp&&Z.auth_time&&Z.iat,y.auth,"internal-error");const se="object"==typeof Z.firebase?Z.firebase:void 0,Pe=se?.sign_in_provider;return{claims:Z,token:T,authTime:Cr(Ri(Z.auth_time)),issuedAtTime:Cr(Ri(Z.iat)),expirationTime:Cr(Ri(Z.exp)),signInProvider:Pe||null,signInSecondFactor:se?.sign_in_second_factor||null}})).apply(this,arguments)}function Ri(C){return 1e3*Number(C)}function er(C){const[g,y,T]=C.split(".");if(void 0===g||void 0===y||void 0===T)return qe("JWT malformed, contained fewer than 3 sections"),null;try{const Z=(0,W.tV)(y);return Z?JSON.parse(Z):(qe("Failed to decode base64 JWT payload"),null)}catch(Z){return qe("Caught error parsing JWT payload as JSON",Z?.toString()),null}}function cn(C,g){return un.apply(this,arguments)}function un(){return(un=(0,_.Z)(function*(C,g,y=!1){if(y)return g;try{return yield g}catch(T){throw T instanceof W.ZR&&function Ar({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}(T)&&C.auth.currentUser===C&&(yield C.auth.signOut()),T}})).apply(this,arguments)}class Kr{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const Z=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,Z)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(g);this.timerId=setTimeout((0,_.Z)(function*(){yield y.iteration()}),T)}iteration(){var g=this;return(0,_.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&g.schedule(!0))}g.schedule()})()}}class An{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fr(C){return Hr.apply(this,arguments)}function Hr(){return Hr=(0,_.Z)(function*(C){var g;const y=C.auth,T=yield C.getIdToken(),Z=yield cn(C,function Tn(C,g){return on.apply(this,arguments)}(y,{idToken:T}));Ye(Z?.users.length,y,"internal-error");const se=Z.users[0];C._notifyReloadListener(se);const Pe=null!==(g=se.providerUserInfo)&&void 0!==g&&g.length?function je(C){return C.map(g=>{var{providerId:y}=g,T=(0,Ne._T)(g,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}(se.providerUserInfo):[],yt=function _n(C,g){return[...C.filter(T=>!g.some(Z=>Z.providerId===T.providerId)),...g]}(C.providerData,Pe),Hn=!!C.isAnonymous&&!(C.email&&se.passwordHash||yt?.length),Wn={uid:se.localId,displayName:se.displayName||null,photoURL:se.photoUrl||null,email:se.email||null,emailVerified:se.emailVerified||!1,phoneNumber:se.phoneNumber||null,tenantId:se.tenantId||null,providerData:yt,metadata:new An(se.createdAt,se.lastLoginAt),isAnonymous:Hn};Object.assign(C,Wn)}),Hr.apply(this,arguments)}function gt(){return(gt=(0,_.Z)(function*(C){const g=(0,W.m9)(C);yield Fr(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function an(){return(an=(0,_.Z)(function*(C,g){const y=yield $t(C,{},(0,_.Z)(function*(){const T=(0,W.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:Z,apiKey:se}=C.config,Pe=cr(C,Z,"/v1/token",`key=${se}`),yt=yield C._getAdditionalHeaders();return yt["Content-Type"]="application/x-www-form-urlencoded",lt.fetch()(Pe,{method:"POST",headers:yt,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class xn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ye(g.idToken,"internal-error"),Ye(typeof g.idToken<"u","internal-error"),Ye(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function ir(C){const g=er(C);return Ye(g,"internal-error"),Ye(typeof g.exp<"u","internal-error"),Ye(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var T=this;return(0,_.Z)(function*(){return Ye(!T.accessToken||T.refreshToken,g,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(g,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var T=this;return(0,_.Z)(function*(){const{accessToken:Z,refreshToken:se,expiresIn:Pe}=yield function At(C,g){return an.apply(this,arguments)}(g,y);T.updateTokensAndExpiration(Z,se,Number(Pe))})()}updateTokensAndExpiration(g,y,T){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(g,y){const{refreshToken:T,accessToken:Z,expirationTime:se}=y,Pe=new xn;return T&&(Ye("string"==typeof T,"internal-error",{appName:g}),Pe.refreshToken=T),Z&&(Ye("string"==typeof Z,"internal-error",{appName:g}),Pe.accessToken=Z),se&&(Ye("number"==typeof se,"internal-error",{appName:g}),Pe.expirationTime=se),Pe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new xn,this.toJSON())}_performRefresh(){return zt("not implemented")}}function Et(C,g){Ye("string"==typeof C||typeof C>"u","internal-error",{appName:g})}class de{constructor(g){var{uid:y,auth:T,stsTokenManager:Z}=g,se=(0,Ne._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Kr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=Z,this.accessToken=Z.accessToken,this.displayName=se.displayName||null,this.email=se.email||null,this.emailVerified=se.emailVerified||!1,this.phoneNumber=se.phoneNumber||null,this.photoURL=se.photoURL||null,this.isAnonymous=se.isAnonymous||!1,this.tenantId=se.tenantId||null,this.providerData=se.providerData?[...se.providerData]:[],this.metadata=new An(se.createdAt||void 0,se.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,_.Z)(function*(){const T=yield cn(y,y.stsTokenManager.getToken(y.auth,g));return Ye(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(g){return function jr(C){return ci.apply(this,arguments)}(this,g)}reload(){return function zr(C){return gt.apply(this,arguments)}(this)}_assign(g){this!==g&&(Ye(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const y=new de(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(g){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var T=this;return(0,_.Z)(function*(){let Z=!1;g.idToken&&g.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(g),Z=!0),y&&(yield Fr(T)),yield T.auth._persistUserIfCurrent(T),Z&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var g=this;return(0,_.Z)(function*(){const y=yield g.getIdToken();return yield cn(g,function ur(C,g){return qn.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var T,Z,se,Pe,yt,rn,wn,Hn;const Wn=null!==(T=y.displayName)&&void 0!==T?T:void 0,ls=null!==(Z=y.email)&&void 0!==Z?Z:void 0,El=null!==(se=y.phoneNumber)&&void 0!==se?se:void 0,Qu=null!==(Pe=y.photoURL)&&void 0!==Pe?Pe:void 0,Tf=null!==(yt=y.tenantId)&&void 0!==yt?yt:void 0,hs=null!==(rn=y._redirectEventId)&&void 0!==rn?rn:void 0,sl=null!==(wn=y.createdAt)&&void 0!==wn?wn:void 0,Xu=null!==(Hn=y.lastLoginAt)&&void 0!==Hn?Hn:void 0,{uid:Su,emailVerified:ac,isAnonymous:Nd,providerData:Ju,stsTokenManager:Pm}=y;Ye(Su&&Pm,g,"internal-error");const km=xn.fromJSON(this.name,Pm);Ye("string"==typeof Su,g,"internal-error"),Et(Wn,g.name),Et(ls,g.name),Ye("boolean"==typeof ac,g,"internal-error"),Ye("boolean"==typeof Nd,g,"internal-error"),Et(El,g.name),Et(Qu,g.name),Et(Tf,g.name),Et(hs,g.name),Et(sl,g.name),Et(Xu,g.name);const Th=new de({uid:Su,auth:g,email:ls,emailVerified:ac,displayName:Wn,isAnonymous:Nd,photoURL:Qu,phoneNumber:El,tenantId:Tf,stsTokenManager:km,createdAt:sl,lastLoginAt:Xu});return Ju&&Array.isArray(Ju)&&(Th.providerData=Ju.map(i_=>Object.assign({},i_))),hs&&(Th._redirectEventId=hs),Th}static _fromIdTokenResponse(g,y,T=!1){return(0,_.Z)(function*(){const Z=new xn;Z.updateFromServerResponse(y);const se=new de({uid:y.localId,auth:g,stsTokenManager:Z,isAnonymous:T});return yield Fr(se),se})()}}const te=new Map;function le(C){xt(C instanceof Function,"Expected a class definition");let g=te.get(C);return g?(xt(g instanceof C,"Instance stored in cache mismatched with class"),g):(g=new C,te.set(C,g),g)}const vt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(y,T){var Z=this;return(0,_.Z)(function*(){Z.storage[y]=T})()}_get(y){var T=this;return(0,_.Z)(function*(){const Z=T.storage[y];return void 0===Z?null:Z})()}_remove(y){var T=this;return(0,_.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return C.type="NONE",C})();function ve(C,g,y){return`firebase:${C}:${g}:${y}`}class be{constructor(g,y,T){this.persistence=g,this.auth=y,this.userKey=T;const{config:Z,name:se}=this.auth;this.fullUserKey=ve(this.userKey,Z.apiKey,se),this.fullPersistenceKey=ve("persistence",Z.apiKey,se),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,_.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?de._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,_.Z)(function*(){if(y.persistence===g)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,T="authUser"){return(0,_.Z)(function*(){if(!y.length)return new be(le(vt),g,T);const Z=(yield Promise.all(y.map(function(){var wn=(0,_.Z)(function*(Hn){if(yield Hn._isAvailable())return Hn});return function(Hn){return wn.apply(this,arguments)}}()))).filter(wn=>wn);let se=Z[0]||le(vt);const Pe=ve(T,g.config.apiKey,g.name);let yt=null;for(const wn of y)try{const Hn=yield wn._get(Pe);if(Hn){const Wn=de._fromJSON(g,Hn);wn!==se&&(yt=Wn),se=wn;break}}catch{}const rn=Z.filter(wn=>wn._shouldAllowMigration);return se._shouldAllowMigration&&rn.length?(se=rn[0],yt&&(yield se._set(Pe,yt.toJSON())),yield Promise.all(y.map(function(){var wn=(0,_.Z)(function*(Hn){if(Hn!==se)try{yield Hn._remove(Pe)}catch{}});return function(Hn){return wn.apply(this,arguments)}}())),new be(se,g,T)):new be(se,g,T)})()}}function He(C){const g=C.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(pe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(we(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(oe(g))return"Blackberry";if(Re(g))return"Webos";if(re(g))return"Safari";if((g.includes("chrome/")||ye(g))&&!g.includes("edge/"))return"Chrome";if(he(g))return"Android";{const T=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function we(C=(0,W.z$)()){return/firefox\//i.test(C)}function re(C=(0,W.z$)()){const g=C.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function ye(C=(0,W.z$)()){return/crios\//i.test(C)}function pe(C=(0,W.z$)()){return/iemobile/i.test(C)}function he(C=(0,W.z$)()){return/android/i.test(C)}function oe(C=(0,W.z$)()){return/blackberry/i.test(C)}function Re(C=(0,W.z$)()){return/webos/i.test(C)}function rt(C=(0,W.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function ii(C=(0,W.z$)()){return rt(C)||he(C)||Re(C)||oe(C)||/windows phone/i.test(C)||pe(C)}function ht(C,g=[]){let y;switch(C){case"Browser":y=He((0,W.z$)());break;case"Worker":y=`${He((0,W.z$)())}-${C}`;break;default:y=C}const T=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${Fe.SDK_VERSION}/${T}`}function Qt(){return(Qt=(0,_.Z)(function*(C){return(yield it(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Nn(C,g){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,_.Z)(function*(C,g){return it(C,"GET","/v2/recaptchaConfig",dt(C,g))})).apply(this,arguments)}function tr(C){return void 0!==C&&void 0!==C.getResponse}function En(C){return void 0!==C&&void 0!==C.enterprise}class Sr{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function $r(C){return new Promise((g,y)=>{const T=document.createElement("script");T.setAttribute("src",C),T.onload=g,T.onerror=Z=>{const se=ze("internal-error");se.customData=Z,y(se)},T.type="text/javascript",T.charset="UTF-8",function Rr(){var C,g;return null!==(g=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==g?g:document}().appendChild(T)})}function Ti(C){return`__${C}${Math.floor(1e6*Math.random())}`}const xo="NO_RECAPTCHA";class Bi{constructor(g){this.type="recaptcha-enterprise",this.auth=gr(g)}verify(g="verify",y=!1){var T=this;return(0,_.Z)(function*(){function se(){return se=(0,_.Z)(function*(yt){if(!y){if(null==yt.tenantId&&null!=yt._agentRecaptchaConfig)return yt._agentRecaptchaConfig.siteKey;if(null!=yt.tenantId&&void 0!==yt._tenantRecaptchaConfigs[yt.tenantId])return yt._tenantRecaptchaConfigs[yt.tenantId].siteKey}return new Promise(function(){var rn=(0,_.Z)(function*(wn,Hn){Nn(yt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Wn=>{if(void 0!==Wn.recaptchaKey){const ls=new Sr(Wn);return null==yt.tenantId?yt._agentRecaptchaConfig=ls:yt._tenantRecaptchaConfigs[yt.tenantId]=ls,wn(ls.siteKey)}Hn(new Error("recaptcha Enterprise site key undefined"))}).catch(Wn=>{Hn(Wn)})});return function(wn,Hn){return rn.apply(this,arguments)}}())}),se.apply(this,arguments)}function Pe(yt,rn,wn){const Hn=window.grecaptcha;En(Hn)?Hn.enterprise.ready(()=>{Hn.enterprise.execute(yt,{action:g}).then(Wn=>{rn(Wn)}).catch(()=>{rn(xo)})}):wn(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((yt,rn)=>{(function Z(yt){return se.apply(this,arguments)})(T.auth).then(wn=>{if(!y&&En(window.grecaptcha))Pe(wn,yt,rn);else{if(typeof window>"u")return void rn(new Error("RecaptchaVerifier is only supported in browser"));$r("https://www.google.com/recaptcha/enterprise.js?render="+wn).then(()=>{Pe(wn,yt,rn)}).catch(Hn=>{rn(Hn)})}}).catch(wn=>{rn(wn)})})})()}}function hn(C,g,y){return dr.apply(this,arguments)}function dr(){return(dr=(0,_.Z)(function*(C,g,y,T=!1){const Z=new Bi(C);let se;try{se=yield Z.verify(y)}catch{se=yield Z.verify(y,!0)}const Pe=Object.assign({},g);return Object.assign(Pe,T?{captchaResp:se}:{captchaResponse:se}),Object.assign(Pe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(Pe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),Pe})).apply(this,arguments)}class mi{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const T=se=>new Promise((Pe,yt)=>{try{Pe(g(se))}catch(rn){yt(rn)}});T.onAbort=y,this.queue.push(T);const Z=this.queue.length-1;return()=>{this.queue[Z]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,_.Z)(function*(){if(y.auth.currentUser===g)return;const T=[];try{for(const Z of y.queue)yield Z(g),Z.onAbort&&T.push(Z.onAbort)}catch(Z){T.reverse();for(const se of T)try{se()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:Z?.message})}})()}}class is{constructor(g,y,T,Z){this.app=g,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=T,this.config=Z,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lr(this),this.idTokenSubscription=new Lr(this),this.beforeStateQueue=new mi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=Z.sdkClientVersion}_initializeWithPersistence(g,y){var T=this;return y&&(this._popupRedirectResolver=le(y)),this._initializationPromise=this.queue((0,_.Z)(function*(){var Z,se;if(!T._deleted&&(T.persistenceManager=yield be.create(T,g),!T._deleted)){if(null!==(Z=T._popupRedirectResolver)&&void 0!==Z&&Z._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(se=T.currentUser)||void 0===se?void 0:se.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,_.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,_.Z)(function*(){var T;const Z=yield y.assertedPersistence.getCurrentUser();let se=Z,Pe=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const yt=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,rn=se?._redirectEventId,wn=yield y.tryRedirectSignIn(g);(!yt||yt===rn)&&wn?.user&&(se=wn.user,Pe=!0)}if(!se)return y.directlySetCurrentUser(null);if(!se._redirectEventId){if(Pe)try{yield y.beforeStateQueue.runMiddleware(se)}catch(yt){se=Z,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(yt))}return se?y.reloadAndSetCurrentUserOrClear(se):y.directlySetCurrentUser(null)}return Ye(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===se._redirectEventId?y.directlySetCurrentUser(se):y.reloadAndSetCurrentUserOrClear(se)})()}tryRedirectSignIn(g){var y=this;return(0,_.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,_.Z)(function*(){try{yield Fr(g)}catch(T){if("auth/network-request-failed"!==T?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Kn(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var g=this;return(0,_.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,_.Z)(function*(){const T=g?(0,W.m9)(g):null;return T&&Ye(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(g,y=!1){var T=this;return(0,_.Z)(function*(){if(!T._deleted)return g&&Ye(T.tenantId===g.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(g)),T.queue((0,_.Z)(function*(){yield T.directlySetCurrentUser(g),T.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,_.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,_.Z)(function*(){yield y.assertedPersistence.setPersistence(le(g))}))}initializeRecaptchaConfig(){var g=this;return(0,_.Z)(function*(){const y=yield Nn(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new Sr(y);null==g.tenantId?g._agentRecaptchaConfig=T:g._tenantRecaptchaConfigs[g.tenantId]=T,T.emailPasswordEnabled&&new Bi(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new W.LL("auth","Firebase",g())}onAuthStateChanged(g,y,T){return this.registerStateListener(this.authStateSubscription,g,y,T)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,T){return this.registerStateListener(this.idTokenSubscription,g,y,T)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var T=this;return(0,_.Z)(function*(){const Z=yield T.getOrInitRedirectPersistenceManager(y);return null===g?Z.removeCurrentUser():Z.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,_.Z)(function*(){if(!y.redirectPersistenceManager){const T=g&&le(g)||y._popupRedirectResolver;Ye(T,y,"argument-error"),y.redirectPersistenceManager=yield be.create(y,[le(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,_.Z)(function*(){var T,Z;return y._isInitialized&&(yield y.queue((0,_.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===g?y._currentUser:(null===(Z=y.redirectUser)||void 0===Z?void 0:Z._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,_.Z)(function*(){if(g===y.currentUser)return y.queue((0,_.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,T,Z){if(this._deleted)return()=>{};const se="function"==typeof y?y:y.next.bind(y),Pe=this._isInitialized?Promise.resolve():this._initializationPromise;return Ye(Pe,this,"internal-error"),Pe.then(()=>se(this.currentUser)),"function"==typeof y?g.addObserver(y,T,Z):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,_.Z)(function*(){y.currentUser&&y.currentUser!==g&&y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh(),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ht(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,_.Z)(function*(){var y;const T={"X-Client-Version":g.clientVersion};g.app.options.appId&&(T["X-Firebase-gmpid"]=g.app.options.appId);const Z=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();Z&&(T["X-Firebase-Client"]=Z);const se=yield g._getAppCheckToken();return se&&(T["X-Firebase-AppCheck"]=se),T})()}_getAppCheckToken(){var g=this;return(0,_.Z)(function*(){var y;const T=yield null===(y=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return T?.error&&function Ft(C,...g){Oe.logLevel<=Ae.in.WARN&&Oe.warn(`Auth (${Fe.SDK_VERSION}): ${C}`,...g)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function gr(C){return(0,W.m9)(C)}class Lr{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,W.ne)(y=>this.observer=y)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xr(C){const g=C.indexOf(":");return g<0?"":C.substr(0,g+1)}function bs(C){if(!C)return null;const g=Number(C);return isNaN(g)?null:g}class As{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return zt("not implemented")}_getIdTokenResponse(g){return zt("not implemented")}_linkToIdToken(g,y){return zt("not implemented")}_getReauthenticationResolver(g){return zt("not implemented")}}function Zs(C,g){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:resetPassword",dt(C,g))})).apply(this,arguments)}function Mo(C,g){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Qs(){return(Qs=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:update",dt(C,g))})).apply(this,arguments)}function Ei(C,g){return si.apply(this,arguments)}function si(){return(si=(0,_.Z)(function*(C,g){return Cn(C,"POST","/v1/accounts:signInWithPassword",dt(C,g))})).apply(this,arguments)}function ms(C,g){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:sendOobCode",dt(C,g))})).apply(this,arguments)}function We(){return(We=(0,_.Z)(function*(C,g){return ms(C,g)})).apply(this,arguments)}function ft(C,g){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,_.Z)(function*(C,g){return ms(C,g)})).apply(this,arguments)}function Wt(C,g){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,_.Z)(function*(C,g){return ms(C,g)})).apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(C,g){return ms(C,g)})).apply(this,arguments)}function Ui(){return(Ui=(0,_.Z)(function*(C,g){return Cn(C,"POST","/v1/accounts:signInWithEmailLink",dt(C,g))})).apply(this,arguments)}function gi(){return(gi=(0,_.Z)(function*(C,g){return Cn(C,"POST","/v1/accounts:signInWithEmailLink",dt(C,g))})).apply(this,arguments)}class Sa extends As{constructor(g,y,T,Z=null){super("password",T),this._email=g,this._password=y,this._tenantId=Z}static _fromEmailAndPassword(g,y){return new Sa(g,y,"password")}static _fromEmailAndCode(g,y,T=null){return new Sa(g,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,_.Z)(function*(){var T;switch(y.signInMethod){case"password":const Z={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=g._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const se=yield hn(g,Z,"signInWithPassword");return Ei(g,se)}return Ei(g,Z).catch(function(){var se=(0,_.Z)(function*(Pe){if("auth/missing-recaptcha-token"===Pe.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const yt=yield hn(g,Z,"signInWithPassword");return Ei(g,yt)}return Promise.reject(Pe)});return function(Pe){return se.apply(this,arguments)}}());case"emailLink":return function kr(C,g){return Ui.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Se(g,"internal-error")}})()}_linkToIdToken(g,y){var T=this;return(0,_.Z)(function*(){switch(T.signInMethod){case"password":return Mo(g,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function $i(C,g){return gi.apply(this,arguments)}(g,{idToken:y,email:T._email,oobCode:T._password});default:Se(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Bs(C,g){return Js.apply(this,arguments)}function Js(){return(Js=(0,_.Z)(function*(C,g){return Cn(C,"POST","/v1/accounts:signInWithIdp",dt(C,g))})).apply(this,arguments)}class es extends As{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new es(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Se("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:Z}=y,se=(0,Ne._T)(y,["providerId","signInMethod"]);if(!T||!Z)return null;const Pe=new es(T,Z);return Pe.idToken=se.idToken||void 0,Pe.accessToken=se.accessToken||void 0,Pe.secret=se.secret,Pe.nonce=se.nonce,Pe.pendingToken=se.pendingToken||null,Pe}_getIdTokenResponse(g){return Bs(g,this.buildRequest())}_linkToIdToken(g,y){const T=this.buildRequest();return T.idToken=y,Bs(g,T)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Bs(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,W.xO)(y)}return g}}function Us(){return(Us=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:sendVerificationCode",dt(C,g))})).apply(this,arguments)}function gs(){return(gs=(0,_.Z)(function*(C,g){return Cn(C,"POST","/v1/accounts:signInWithPhoneNumber",dt(C,g))})).apply(this,arguments)}function co(){return(co=(0,_.Z)(function*(C,g){const y=yield Cn(C,"POST","/v1/accounts:signInWithPhoneNumber",dt(C,g));if(y.temporaryProof)throw Dn(C,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Aa={USER_NOT_FOUND:"user-not-found"};function js(){return(js=(0,_.Z)(function*(C,g){return Cn(C,"POST","/v1/accounts:signInWithPhoneNumber",dt(C,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Aa)})).apply(this,arguments)}class qi extends As{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new qi({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new qi({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function Ta(C,g){return gs.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function Cl(C,g){return co.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function xa(C,g){return js.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:T,verificationCode:Z}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:T,code:Z}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:T,phoneNumber:Z,temporaryProof:se}=g;return T||y||Z||se?new qi({verificationId:y,verificationCode:T,phoneNumber:Z,temporaryProof:se}):null}}class wo{constructor(g){var y,T,Z,se,Pe,yt;const rn=(0,W.zd)((0,W.pd)(g)),wn=null!==(y=rn.apiKey)&&void 0!==y?y:null,Hn=null!==(T=rn.oobCode)&&void 0!==T?T:null,Wn=function Ma(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Z=rn.mode)&&void 0!==Z?Z:null);Ye(wn&&Hn&&Wn,"argument-error"),this.apiKey=wn,this.operation=Wn,this.code=Hn,this.continueUrl=null!==(se=rn.continueUrl)&&void 0!==se?se:null,this.languageCode=null!==(Pe=rn.languageCode)&&void 0!==Pe?Pe:null,this.tenantId=null!==(yt=rn.tenantId)&&void 0!==yt?yt:null}static parseLink(g){const y=function Oo(C){const g=(0,W.zd)((0,W.pd)(C)).link,y=g?(0,W.zd)((0,W.pd)(g)).deep_link_id:null,T=(0,W.zd)((0,W.pd)(C)).deep_link_id;return(T?(0,W.zd)((0,W.pd)(T)).link:null)||T||y||g||C}(g);try{return new wo(y)}catch{return null}}}let la=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(y,T){return Sa._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const Z=wo.parseLink(T);return Ye(Z,"argument-error"),Sa._fromEmailAndCode(y,Z.code,Z.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class cs{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ss extends cs{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Hs extends ss{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return Ye("providerId"in y&&"signInMethod"in y,"argument-error"),es._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ye(g.idToken||g.accessToken,"argument-error"),es._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Hs.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Hs.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:Z,pendingToken:se,nonce:Pe,providerId:yt}=g;if(!T&&!Z&&!y&&!se||!yt)return null;try{return new Hs(yt)._credential({idToken:y,accessToken:T,nonce:Pe,pendingToken:se})}catch{return null}}}let Po=(()=>{class C extends ss{constructor(){super("facebook.com")}static credential(y){return es._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return C.credential(y.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),ca=(()=>{class C extends ss{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return es._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:Z}=y;if(!T&&!Z)return null;try{return C.credential(T,Z)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),$a=(()=>{class C extends ss{constructor(){super("github.com")}static credential(y){return es._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return C.credential(y.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class zs extends As{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return Bs(g,this.buildRequest())}_linkToIdToken(g,y){const T=this.buildRequest();return T.idToken=y,Bs(g,T)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,Bs(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:T,signInMethod:Z,pendingToken:se}=y;return T&&Z&&se&&T===Z?new zs(T,se):null}static _create(g,y){return new zs(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class bo extends cs{constructor(g){Ye(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return bo.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return bo.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=zs.fromJSON(g);return Ye(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:T}=g;if(!y||!T)return null;try{return zs._create(T,y)}catch{return null}}}let Ga=(()=>{class C extends ss{constructor(){super("twitter.com")}static credential(y,T){return es._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:Z}=y;if(!T||!Z)return null;try{return C.credential(T,Z)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function ha(C,g){return os.apply(this,arguments)}function os(){return(os=(0,_.Z)(function*(C,g){return Cn(C,"POST","/v1/accounts:signUp",dt(C,g))})).apply(this,arguments)}class Yi{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,T,Z=!1){return(0,_.Z)(function*(){const se=yield de._fromIdTokenResponse(g,T,Z),Pe=Ee(T);return new Yi({user:se,providerId:Pe,_tokenResponse:T,operationType:y})})()}static _forOperation(g,y,T){return(0,_.Z)(function*(){yield g._updateTokensIfNecessary(T,!0);const Z=Ee(T);return new Yi({user:g,providerId:Z,_tokenResponse:T,operationType:y})})()}}function Ee(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function R(){return(R=(0,_.Z)(function*(C){var g;const y=gr(C);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new Yi({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield ha(y,{returnSecureToken:!0}),Z=yield Yi._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser(Z.user),Z})).apply(this,arguments)}class Y extends W.ZR{constructor(g,y,T,Z){var se;super(y.code,y.message),this.operationType=T,this.user=Z,Object.setPrototypeOf(this,Y.prototype),this.customData={appName:g.name,tenantId:null!==(se=g.tenantId)&&void 0!==se?se:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(g,y,T,Z){return new Y(g,y,T,Z)}}function me(C,g,y,T){return("reauthenticate"===g?y._getReauthenticationResolver(C):y._getIdTokenResponse(C)).catch(se=>{throw"auth/multi-factor-auth-required"===se.code?Y._fromErrorAndOperation(C,se,g,T):se})}function Be(C){return new Set(C.map(({providerId:g})=>g).filter(g=>!!g))}function Xt(){return Xt=(0,_.Z)(function*(C,g){const y=(0,W.m9)(C);yield Un(!0,y,g);const{providerUserInfo:T}=yield function or(C,g){return Dr.apply(this,arguments)}(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),Z=Be(T||[]);return y.providerData=y.providerData.filter(se=>Z.has(se.providerId)),Z.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y}),Xt.apply(this,arguments)}function Jt(C,g){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,_.Z)(function*(C,g,y=!1){const T=yield cn(C,g._linkToIdToken(C.auth,yield C.getIdToken()),y);return Yi._forOperation(C,"link",T)})).apply(this,arguments)}function Un(C,g,y){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,_.Z)(function*(C,g,y){yield Fr(g);const Z=!1===C?"provider-already-linked":"no-such-provider";Ye(Be(g.providerData).has(y)===C,g.auth,Z)})).apply(this,arguments)}function ji(C,g){return wi.apply(this,arguments)}function wi(){return(wi=(0,_.Z)(function*(C,g,y=!1){const{auth:T}=C,Z="reauthenticate";try{const se=yield cn(C,me(T,Z,g,C),y);Ye(se.idToken,T,"internal-error");const Pe=er(se.idToken);Ye(Pe,T,"internal-error");const{sub:yt}=Pe;return Ye(C.uid===yt,T,"user-mismatch"),Yi._forOperation(C,Z,se)}catch(se){throw"auth/user-not-found"===se?.code&&Se(T,"user-mismatch"),se}})).apply(this,arguments)}function Hi(C,g){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,_.Z)(function*(C,g,y=!1){const T="signIn",Z=yield me(C,T,g),se=yield Yi._fromIdTokenResponse(C,T,Z);return y||(yield C._updateCurrentUser(se.user)),se})).apply(this,arguments)}function ui(C,g){return q.apply(this,arguments)}function q(){return(q=(0,_.Z)(function*(C,g){return Hi(gr(C),g)})).apply(this,arguments)}function z(C,g){return H.apply(this,arguments)}function H(){return(H=(0,_.Z)(function*(C,g){const y=(0,W.m9)(C);return yield Un(!1,y,g.providerId),Jt(y,g)})).apply(this,arguments)}function fe(C,g){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,_.Z)(function*(C,g){return ji((0,W.m9)(C),g)})).apply(this,arguments)}function as(){return(as=(0,_.Z)(function*(C,g){return Cn(C,"POST","/v1/accounts:signInWithCustomToken",dt(C,g))})).apply(this,arguments)}function Er(){return Er=(0,_.Z)(function*(C,g){const y=gr(C),T=yield function On(C,g){return as.apply(this,arguments)}(y,{token:g,returnSecureToken:!0}),Z=yield Yi._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser(Z.user),Z}),Er.apply(this,arguments)}class ko{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?No._fromServerResponse(g,y):"totpInfo"in y?Zi._fromServerResponse(g,y):Se(g,"internal-error")}}class No extends ko{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new No(y)}}class Zi extends ko{constructor(g){super("totp",g)}static _fromServerResponse(g,y){return new Zi(y)}}function Wa(C,g,y){var T;Ye((null===(T=y.url)||void 0===T?void 0:T.length)>0,C,"invalid-continue-uri"),Ye(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Ye(y.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(Ye(y.android.packageName.length>0,C,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function eo(){return eo=(0,_.Z)(function*(C,g,y){var T;const Z=gr(C),se={requestType:"PASSWORD_RESET",email:g,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=Z._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const Pe=yield hn(Z,se,"getOobCode",!0);y&&Wa(Z,Pe,y),yield ft(Z,Pe)}else y&&Wa(Z,se,y),yield ft(Z,se).catch(function(){var Pe=(0,_.Z)(function*(yt){if("auth/missing-recaptcha-token"!==yt.code)return Promise.reject(yt);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const rn=yield hn(Z,se,"getOobCode",!0);y&&Wa(Z,rn,y),yield ft(Z,rn)}});return function(yt){return Pe.apply(this,arguments)}}())}),eo.apply(this,arguments)}function vc(){return(vc=(0,_.Z)(function*(C,g,y){yield Zs((0,W.m9)(C),{oobCode:g,newPassword:y})})).apply(this,arguments)}function fa(){return fa=(0,_.Z)(function*(C,g){yield function Ki(C,g){return Qs.apply(this,arguments)}((0,W.m9)(C),{oobCode:g})}),fa.apply(this,arguments)}function dl(C,g){return ts.apply(this,arguments)}function ts(){return(ts=(0,_.Z)(function*(C,g){const y=(0,W.m9)(C),T=yield Zs(y,{oobCode:g}),Z=T.requestType;switch(Ye(Z,y,"internal-error"),Z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ye(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ye(T.mfaInfo,y,"internal-error");default:Ye(T.email,y,"internal-error")}let se=null;return T.mfaInfo&&(se=ko._fromServerResponse(gr(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:se},operation:Z}})).apply(this,arguments)}function Fo(){return(Fo=(0,_.Z)(function*(C,g){const{data:y}=yield dl((0,W.m9)(C),g);return y.email})).apply(this,arguments)}function uo(){return uo=(0,_.Z)(function*(C,g,y){var T;const Z=gr(C),se={returnSecureToken:!0,email:g,password:y,clientType:"CLIENT_TYPE_WEB"};let Pe;if(null!==(T=Z._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const wn=yield hn(Z,se,"signUpPassword");Pe=ha(Z,wn)}else Pe=ha(Z,se).catch(function(){var wn=(0,_.Z)(function*(Hn){if("auth/missing-recaptcha-token"===Hn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Wn=yield hn(Z,se,"signUpPassword");return ha(Z,Wn)}return Promise.reject(Hn)});return function(Hn){return wn.apply(this,arguments)}}());const yt=yield Pe.catch(wn=>Promise.reject(wn)),rn=yield Yi._fromIdTokenResponse(Z,"signIn",yt);return yield Z._updateCurrentUser(rn.user),rn}),uo.apply(this,arguments)}function Kl(){return Kl=(0,_.Z)(function*(C,g,y){var T;const Z=gr(C),se={requestType:"EMAIL_SIGNIN",email:g,clientType:"CLIENT_TYPE_WEB"};function Pe(yt,rn){Ye(rn.handleCodeInApp,Z,"argument-error"),rn&&Wa(Z,yt,rn)}if(null!==(T=Z._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const yt=yield hn(Z,se,"getOobCode",!0);Pe(yt,y),yield Wt(Z,yt)}else Pe(se,y),yield Wt(Z,se).catch(function(){var yt=(0,_.Z)(function*(rn){if("auth/missing-recaptcha-token"!==rn.code)return Promise.reject(rn);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const wn=yield hn(Z,se,"getOobCode",!0);Pe(wn,y),yield Wt(Z,wn)}});return function(rn){return yt.apply(this,arguments)}}())}),Kl.apply(this,arguments)}function hl(){return(hl=(0,_.Z)(function*(C,g,y){const T=(0,W.m9)(C),Z=la.credentialWithLink(g,y||kn());return Ye(Z._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),ui(T,Z)})).apply(this,arguments)}function fl(){return(fl=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:createAuthUri",dt(C,g))})).apply(this,arguments)}function Lo(){return Lo=(0,_.Z)(function*(C,g){const T={identifier:g,continueUri:nn()?kn():"http://localhost"},{signinMethods:Z}=yield function qa(C,g){return fl.apply(this,arguments)}((0,W.m9)(C),T);return Z||[]}),Lo.apply(this,arguments)}function Ya(){return Ya=(0,_.Z)(function*(C,g){const y=(0,W.m9)(C),Z={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};g&&Wa(y.auth,Z,g);const{email:se}=yield function Qe(C,g){return We.apply(this,arguments)}(y.auth,Z);se!==C.email&&(yield C.reload())}),Ya.apply(this,arguments)}function Za(){return Za=(0,_.Z)(function*(C,g,y){const T=(0,W.m9)(C),se={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:g};y&&Wa(T.auth,se,y);const{email:Pe}=yield function lr(C,g){return fr.apply(this,arguments)}(T.auth,se);Pe!==C.email&&(yield C.reload())}),Za.apply(this,arguments)}function ql(){return(ql=(0,_.Z)(function*(C,g){return it(C,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Io(){return Io=(0,_.Z)(function*(C,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const T=(0,W.m9)(C),se={idToken:yield T.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},Pe=yield cn(T,function Gc(C,g){return ql.apply(this,arguments)}(T.auth,se));T.displayName=Pe.displayName||null,T.photoURL=Pe.photoUrl||null;const yt=T.providerData.find(({providerId:rn})=>"password"===rn);yt&&(yt.displayName=T.displayName,yt.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Pe)}),Io.apply(this,arguments)}function Gi(C,g,y){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,_.Z)(function*(C,g,y){const{auth:T}=C,se={idToken:yield C.getIdToken(),returnSecureToken:!0};g&&(se.email=g),y&&(se.password=y);const Pe=yield cn(C,Mo(T,se));yield C._updateTokensIfNecessary(Pe,!0)})).apply(this,arguments)}class Qi{constructor(g,y,T={}){this.isNewUser=g,this.providerId=y,this.profile=T}}class wc extends Qi{constructor(g,y,T,Z){super(g,y,T),this.username=Z}}class bi extends Qi{constructor(g,y){super(g,"facebook.com",y)}}class Ps extends wc{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Xo extends Qi{constructor(g,y){super(g,"google.com",y)}}class ho extends wc{constructor(g,y,T){super(g,"twitter.com",y,T)}}function fo(C){const{user:g,_tokenResponse:y}=C;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function Yl(C){var g,y;if(!C)return null;const{providerId:T}=C,Z=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},se=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!T&&C?.idToken){const Pe=null===(y=null===(g=er(C.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(Pe)return new Qi(se,"anonymous"!==Pe&&"custom"!==Pe?Pe:null)}if(!T)return null;switch(T){case"facebook.com":return new bi(se,Z);case"github.com":return new Ps(se,Z);case"google.com":return new Xo(se,Z);case"twitter.com":return new ho(se,Z,C.screenName||null);case"custom":case"anonymous":return new Qi(se,null);default:return new Qi(se,T,Z)}}(y)}class Nr{constructor(g,y,T){this.type=g,this.credential=y,this.auth=T}static _fromIdtoken(g,y){return new Nr("enroll",g,y)}static _fromMfaPendingCredential(g){return new Nr("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,T;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Nr._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(T=g.multiFactorSession)&&void 0!==T&&T.idToken)return Nr._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Yn{constructor(g,y,T){this.session=g,this.hints=y,this.signInResolver=T}static _fromError(g,y){const T=gr(g),Z=y.customData._serverResponse,se=(Z.mfaInfo||[]).map(yt=>ko._fromServerResponse(T,yt));Ye(Z.mfaPendingCredential,T,"internal-error");const Pe=Nr._fromMfaPendingCredential(Z.mfaPendingCredential);return new Yn(Pe,se,function(){var yt=(0,_.Z)(function*(rn){const wn=yield rn._process(T,Pe);delete Z.mfaInfo,delete Z.mfaPendingCredential;const Hn=Object.assign(Object.assign({},Z),{idToken:wn.idToken,refreshToken:wn.refreshToken});switch(y.operationType){case"signIn":const Wn=yield Yi._fromIdTokenResponse(T,y.operationType,Hn);return yield T._updateCurrentUser(Wn.user),Wn;case"reauthenticate":return Ye(y.user,T,"internal-error"),Yi._forOperation(y.user,y.operationType,Hn);default:Se(T,"internal-error")}});return function(rn){return yt.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,_.Z)(function*(){return y.signInResolver(g)})()}}class ys{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>ko._fromServerResponse(g.auth,T)))})}static _fromUser(g){return new ys(g)}getSession(){var g=this;return(0,_.Z)(function*(){return Nr._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,y){var T=this;return(0,_.Z)(function*(){const Z=g,se=yield T.getSession(),Pe=yield cn(T.user,Z._process(T.user.auth,se,y));return yield T.user._updateTokensIfNecessary(Pe),T.user.reload()})()}unenroll(g){var y=this;return(0,_.Z)(function*(){const T="string"==typeof g?g:g.uid,Z=yield y.user.getIdToken();try{const se=yield cn(y.user,function ma(C,g){return it(C,"POST","/v2/accounts/mfaEnrollment:withdraw",dt(C,g))}(y.user.auth,{idToken:Z,mfaEnrollmentId:T}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Pe})=>Pe!==T),yield y.user._updateTokensIfNecessary(se),yield y.user.reload()}catch(se){throw se}})()}}const ro=new WeakMap,Bo="__sak";class Il{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(Bo,"1"),this.storage.removeItem(Bo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Uo=(()=>{class C extends Il{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pl(){const C=(0,W.z$)();return re(C)||rt(C)}()&&function Wi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ii(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const Z=this.storage.getItem(T),se=this.localCache[T];Z!==se&&y(T,se,Z)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((yt,rn,wn)=>{this.notifyListeners(yt,wn)});const Z=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const yt=this.storage.getItem(Z);if(y.newValue!==yt)null!==y.newValue?this.storage.setItem(Z,y.newValue):this.storage.removeItem(Z);else if(this.localCache[Z]===y.newValue&&!T)return}const se=()=>{const yt=this.storage.getItem(Z);!T&&this.localCache[Z]===yt||this.notifyListeners(Z,yt)},Pe=this.storage.getItem(Z);!function _r(){return(0,W.w1)()&&10===document.documentMode}()||Pe===y.newValue||y.newValue===y.oldValue?se():setTimeout(se,10)}notifyListeners(y,T){this.localCache[y]=T;const Z=this.listeners[y];if(Z)for(const se of Array.from(Z))se(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,Z)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:Z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var Z=()=>super._set,se=this;return(0,_.Z)(function*(){yield Z().call(se,y,T),se.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,Z=this;return(0,_.Z)(function*(){const se=yield T().call(Z,y);return Z.localCache[y]=JSON.stringify(se),se})()}_remove(y){var T=()=>super._remove,Z=this;return(0,_.Z)(function*(){yield T().call(Z,y),delete Z.localCache[y]})()}}return C.type="LOCAL",C})(),Qa=(()=>{class C extends Il{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return C.type="SESSION",C})();let Xi=(()=>{class C{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(se=>se.isListeningto(y));if(T)return T;const Z=new C(y);return this.receivers.push(Z),Z}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,_.Z)(function*(){const Z=y,{eventId:se,eventType:Pe,data:yt}=Z.data,rn=T.handlersMap[Pe];if(!rn?.size)return;Z.ports[0].postMessage({status:"ack",eventId:se,eventType:Pe});const wn=Array.from(rn).map(function(){var Wn=(0,_.Z)(function*(ls){return ls(Z.origin,yt)});return function(ls){return Wn.apply(this,arguments)}}()),Hn=yield function sn(C){return Promise.all(C.map(function(){var g=(0,_.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return g.apply(this,arguments)}}()))}(wn);Z.ports[0].postMessage({status:"done",eventId:se,eventType:Pe,response:Hn})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function io(C="",g=10){let y="";for(let T=0;T<g;T++)y+=Math.floor(10*Math.random());return C+y}class Kc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,T=50){var Z=this;return(0,_.Z)(function*(){const se=typeof MessageChannel<"u"?new MessageChannel:null;if(!se)throw new Error("connection_unavailable");let Pe,yt;return new Promise((rn,wn)=>{const Hn=io("",20);se.port1.start();const Wn=setTimeout(()=>{wn(new Error("unsupported_event"))},T);yt={messageChannel:se,onMessage(ls){const El=ls;if(El.data.eventId===Hn)switch(El.data.status){case"ack":clearTimeout(Wn),Pe=setTimeout(()=>{wn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Pe),rn(El.data.response);break;default:clearTimeout(Wn),clearTimeout(Pe),wn(new Error("invalid_response"))}}},Z.handlers.add(yt),se.port1.addEventListener("message",yt.onMessage),Z.target.postMessage({eventType:g,eventId:Hn,data:y},[se.port2])}).finally(()=>{yt&&Z.removeMessageHandler(yt)})})()}}function en(){return window}function Dl(){return typeof en().WorkerGlobalScope<"u"&&"function"==typeof en().importScripts}function Rt(){return(Rt=(0,_.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zl="firebaseLocalStorageDb",ds=1,Sl="firebaseLocalStorage",qc="fbase_key";class Gs{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Xa(C,g){return C.transaction([Sl],g?"readwrite":"readonly").objectStore(Sl)}function Bu(){const C=indexedDB.open(Zl,ds);return new Promise((g,y)=>{C.addEventListener("error",()=>{y(C.error)}),C.addEventListener("upgradeneeded",()=>{const T=C.result;try{T.createObjectStore(Sl,{keyPath:qc})}catch(Z){y(Z)}}),C.addEventListener("success",(0,_.Z)(function*(){const T=C.result;T.objectStoreNames.contains(Sl)?g(T):(T.close(),yield function Ql(){const C=indexedDB.deleteDatabase(Zl);return new Gs(C).toPromise()}(),g(yield Bu()))}))})}function bc(C,g,y){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,_.Z)(function*(C,g,y){const T=Xa(C,!0).put({[qc]:g,value:y});return new Gs(T).toPromise()})).apply(this,arguments)}function vr(){return(vr=(0,_.Z)(function*(C,g){const y=Xa(C,!1).get(g),T=yield new Gs(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Pa(C,g){const y=Xa(C,!0).delete(g);return new Gs(y).toPromise()}const jo=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,_.Z)(function*(){return y.db||(y.db=yield Bu()),y.db})()}_withRetries(y){var T=this;return(0,_.Z)(function*(){let Z=0;for(;;)try{const se=yield T._openDb();return yield y(se)}catch(se){if(Z++>3)throw se;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,_.Z)(function*(){return Dl()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,_.Z)(function*(){y.receiver=Xi._getInstance(function fi(){return Dl()?self:null}()),y.receiver._subscribe("keyChanged",function(){var T=(0,_.Z)(function*(Z,se){return{keyProcessed:(yield y._poll()).includes(se.key)}});return function(Z,se){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,_.Z)(function*(Z,se){return["keyChanged"]});return function(Z,se){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,_.Z)(function*(){var T,Z;if(y.activeServiceWorker=yield function Sn(){return Rt.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Kc(y.activeServiceWorker);const se=yield y.sender._send("ping",{},800);se&&null!==(T=se[0])&&void 0!==T&&T.fulfilled&&null!==(Z=se[0])&&void 0!==Z&&Z.value.includes("keyChanged")&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,_.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function qt(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Bu();return yield bc(y,Bo,"1"),yield Pa(y,Bo),!0}catch{}return!1})()}_withPendingWrite(y){var T=this;return(0,_.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var Z=this;return(0,_.Z)(function*(){return Z._withPendingWrite((0,_.Z)(function*(){return yield Z._withRetries(se=>bc(se,y,T)),Z.localCache[y]=T,Z.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,_.Z)(function*(){const Z=yield T._withRetries(se=>function Tl(C,g){return vr.apply(this,arguments)}(se,y));return T.localCache[y]=Z,Z})()}_remove(y){var T=this;return(0,_.Z)(function*(){return T._withPendingWrite((0,_.Z)(function*(){return yield T._withRetries(Z=>Pa(Z,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,_.Z)(function*(){const T=yield y._withRetries(Pe=>{const yt=Xa(Pe,!1).getAll();return new Gs(yt).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const Z=[],se=new Set;for(const{fbase_key:Pe,value:yt}of T)se.add(Pe),JSON.stringify(y.localCache[Pe])!==JSON.stringify(yt)&&(y.notifyListeners(Pe,yt),Z.push(Pe));for(const Pe of Object.keys(y.localCache))y.localCache[Pe]&&!se.has(Pe)&&(y.notifyListeners(Pe,null),Z.push(Pe));return Z})()}notifyListeners(y,T){this.localCache[y]=T;const Z=this.listeners[y];if(Z)for(const se of Array.from(Z))se(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})(),Jo=1e12;class Al{constructor(g){this.auth=g,this.counter=Jo,this._widgets=new Map}render(g,y){const T=this.counter;return this._widgets.set(T,new dh(g,this.auth.name,y||{})),this.counter++,T}reset(g){var y;const T=g||Jo;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Jo))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,_.Z)(function*(){var T;return null===(T=y._widgets.get(g||Jo))||void 0===T||T.execute(),""})()}}class dh{constructor(g,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Z="string"==typeof g?document.getElementById(g):g;Ye(Z,"argument-error",{appName:y}),this.container=Z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xl(C){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<C;T++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const pu=Ti("rcb"),Ja=new Qn(3e4,6e4);class hh{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=en().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return Ye(function Ho(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(y),g,"argument-error"),this.shouldResolveImmediately(y)&&tr(en().grecaptcha)?Promise.resolve(en().grecaptcha):new Promise((T,Z)=>{const se=en().setTimeout(()=>{Z(ze(g,"network-request-failed"))},Ja.get());en()[pu]=()=>{en().clearTimeout(se),delete en()[pu];const yt=en().grecaptcha;if(!yt||!tr(yt))return void Z(ze(g,"internal-error"));const rn=yt.render;yt.render=(wn,Hn)=>{const Wn=rn(wn,Hn);return this.counter++,Wn},this.hostLanguage=y,T(yt)},$r(`https://www.google.com/recaptcha/api.js??${(0,W.xO)({onload:pu,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(se),Z(ze(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=en().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Is{load(g){return(0,_.Z)(function*(){return new Al(g)})()}clearedOneInstance(){}}const Jl="recaptcha",xl={theme:"light",type:"image"};class ka{constructor(g,y=Object.assign({},xl),T){this.parameters=y,this.type=Jl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gr(T),this.isInvisible="invisible"===this.parameters.size,Ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const Z="string"==typeof g?document.getElementById(g):g;Ye(Z,this.auth,"argument-error"),this.container=Z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Is:new hh,this.validateStartingState()}verify(){var g=this;return(0,_.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),T=g.getAssertedRecaptcha();return T.getResponse(y)||new Promise(se=>{const Pe=yt=>{yt&&(g.tokenChangeListeners.delete(Pe),se(yt))};g.tokenChangeListeners.add(Pe),g.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ye(!this.parameters.sitekey,this.auth,"argument-error"),Ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof g)g(y);else if("string"==typeof g){const T=en()[g];"function"==typeof T&&T(y)}}}assertNotDestroyed(){Ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,_.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,_.Z)(function*(){Ye(nn()&&!Dl(),g.auth,"internal-error"),yield function zo(){let C=null;return new Promise(g=>{"complete"!==document.readyState?(C=()=>g(),window.addEventListener("load",C)):g()}).catch(g=>{throw C&&window.removeEventListener("load",C),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function mt(C){return Qt.apply(this,arguments)}(g.auth);Ye(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return Ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _t{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=qi._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Ws(){return(Ws=(0,_.Z)(function*(C,g,y){const T=gr(C),Z=yield K(T,g,(0,W.m9)(y));return new _t(Z,se=>ui(T,se))})).apply(this,arguments)}function A(){return(A=(0,_.Z)(function*(C,g,y){const T=(0,W.m9)(C);yield Un(!1,T,"phone");const Z=yield K(T.auth,g,(0,W.m9)(y));return new _t(Z,se=>z(T,se))})).apply(this,arguments)}function N(){return(N=(0,_.Z)(function*(C,g,y){const T=(0,W.m9)(C),Z=yield K(T.auth,g,(0,W.m9)(y));return new _t(Z,se=>fe(T,se))})).apply(this,arguments)}function K(C,g,y){return ie.apply(this,arguments)}function ie(){return ie=(0,_.Z)(function*(C,g,y){var T;const Z=yield y.verify();try{let se;if(Ye("string"==typeof Z,C,"argument-error"),Ye(y.type===Jl,C,"argument-error"),se="string"==typeof g?{phoneNumber:g}:g,"session"in se){const Pe=se.session;if("phoneNumber"in se)return Ye("enroll"===Pe.type,C,"internal-error"),(yield function di(C,g){return it(C,"POST","/v2/accounts/mfaEnrollment:start",dt(C,g))}(C,{idToken:Pe.credential,phoneEnrollmentInfo:{phoneNumber:se.phoneNumber,recaptchaToken:Z}})).phoneSessionInfo.sessionInfo;{Ye("signin"===Pe.type,C,"internal-error");const yt=(null===(T=se.multiFactorHint)||void 0===T?void 0:T.uid)||se.multiFactorUid;return Ye(yt,C,"missing-multi-factor-info"),(yield function Gr(C,g){return it(C,"POST","/v2/accounts/mfaSignIn:start",dt(C,g))}(C,{mfaPendingCredential:Pe.credential,mfaEnrollmentId:yt,phoneSignInInfo:{recaptchaToken:Z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Pe}=yield function Ro(C,g){return Us.apply(this,arguments)}(C,{phoneNumber:se.phoneNumber,recaptchaToken:Z});return Pe}}finally{y._reset()}}),ie.apply(this,arguments)}function Je(){return(Je=(0,_.Z)(function*(C,g){yield Jt((0,W.m9)(C),g)})).apply(this,arguments)}let Gt=(()=>{class C{constructor(y){this.providerId=C.PROVIDER_ID,this.auth=gr(y)}verifyPhoneNumber(y,T){return K(this.auth,y,(0,W.m9)(T))}static credential(y,T){return qi._fromVerification(y,T)}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:Z}=y;return T&&Z?qi._fromTokenResponse(T,Z):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function pn(C,g){return g?le(g):(Ye(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class Zt extends As{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Bs(g,this._buildIdpRequest())}_linkToIdToken(g,y){return Bs(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return Bs(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function $n(C){return Hi(C.auth,new Zt(C),C.bypassAuthState)}function ar(C){const{auth:g,user:y}=C;return Ye(y,g,"internal-error"),ji(y,new Zt(C),C.bypassAuthState)}function Ci(C){return oi.apply(this,arguments)}function oi(){return(oi=(0,_.Z)(function*(C){const{auth:g,user:y}=C;return Ye(y,g,"internal-error"),Jt(y,new Zt(C),C.bypassAuthState)})).apply(this,arguments)}class ya{constructor(g,y,T,Z,se=!1){this.auth=g,this.resolver=T,this.user=Z,this.bypassAuthState=se,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,_.Z)(function*(T,Z){g.pendingPromise={resolve:T,reject:Z};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(se){g.reject(se)}});return function(T,Z){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,_.Z)(function*(){const{urlResponse:T,sessionId:Z,postBody:se,tenantId:Pe,error:yt,type:rn}=g;if(yt)return void y.reject(yt);const wn={auth:y.auth,requestUri:T,sessionId:Z,tenantId:Pe||void 0,postBody:se||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(rn)(wn))}catch(Hn){y.reject(Hn)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return $n;case"linkViaPopup":case"linkViaRedirect":return Ci;case"reauthViaPopup":case"reauthViaRedirect":return ar;default:Se(this.auth,"internal-error")}}resolve(g){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){xt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xi=new Qn(2e3,1e4);function Na(){return(Na=(0,_.Z)(function*(C,g,y){const T=gr(C);Ot(C,g,cs);const Z=pn(T,y);return new mu(T,"signInViaPopup",g,Z).executeNotNull()})).apply(this,arguments)}function qr(){return(qr=(0,_.Z)(function*(C,g,y){const T=(0,W.m9)(C);Ot(T.auth,g,cs);const Z=pn(T.auth,y);return new mu(T.auth,"reauthViaPopup",g,Z,T).executeNotNull()})).apply(this,arguments)}function fh(){return(fh=(0,_.Z)(function*(C,g,y){const T=(0,W.m9)(C);Ot(T.auth,g,cs);const Z=pn(T.auth,y);return new mu(T.auth,"linkViaPopup",g,Z,T).executeNotNull()})).apply(this,arguments)}let mu=(()=>{class C extends ya{constructor(y,T,Z,se,Pe){super(y,T,se,Pe),this.provider=Z,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var y=this;return(0,_.Z)(function*(){const T=yield y.execute();return Ye(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,_.Z)(function*(){xt(1===y.filter.length,"Popup operations only handle one event");const T=io();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch(Z=>{y.reject(Z)}),y.resolver._isIframeWebStorageSupported(y.auth,Z=>{Z||y.reject(ze(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(ze(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,Z;this.pollId=null!==(Z=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==Z&&Z.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ze(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,xi.get())};y()}}return C.currentPopupAction=null,C})();const go="pendingRedirect",Zc=new Map;class gp extends ya{constructor(g,y,T=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,_.Z)(function*(){let T=Zc.get(y.auth._key());if(!T){try{const se=(yield function ph(C,g){return mh.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;T=()=>Promise.resolve(se)}catch(Z){T=()=>Promise.reject(Z)}Zc.set(y.auth._key(),T)}return y.bypassAuthState||Zc.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,T=this;return(0,_.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(T,g);if("unknown"!==g.type){if(g.eventId){const Z=yield T.auth._redirectUserForId(g.eventId);if(Z)return T.user=Z,y().call(T,g);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function mh(){return(mh=(0,_.Z)(function*(C,g){const y=_h(g),T=gh(C);if(!(yield T._isAvailable()))return!1;const Z="true"===(yield T._get(y));return yield T._remove(y),Z})).apply(this,arguments)}function Fa(C,g){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,_.Z)(function*(C,g){return gh(C)._set(_h(g),"true")})).apply(this,arguments)}function gf(C,g){Zc.set(C._key(),g)}function gh(C){return le(C._redirectPersistence)}function _h(C){return ve(go,C.config.apiKey,C.name)}function _f(C,g,y){return function _p(C,g,y){return ju.apply(this,arguments)}(C,g,y)}function ju(){return(ju=(0,_.Z)(function*(C,g,y){const T=gr(C);Ot(C,g,cs),yield T._initializationPromise;const Z=pn(T,y);return yield Fa(Z,T),Z._openRedirect(T,g,"signInViaRedirect")})).apply(this,arguments)}function Dc(C,g,y){return function ei(C,g,y){return ec.apply(this,arguments)}(C,g,y)}function ec(){return(ec=(0,_.Z)(function*(C,g,y){const T=(0,W.m9)(C);Ot(T.auth,g,cs),yield T.auth._initializationPromise;const Z=pn(T.auth,y);yield Fa(Z,T.auth);const se=yield zi(T);return Z._openRedirect(T.auth,g,"reauthViaRedirect",se)})).apply(this,arguments)}function Ns(C,g,y){return function yh(C,g,y){return _o.apply(this,arguments)}(C,g,y)}function _o(){return(_o=(0,_.Z)(function*(C,g,y){const T=(0,W.m9)(C);Ot(T.auth,g,cs),yield T.auth._initializationPromise;const Z=pn(T.auth,y);yield Un(!1,T,g.providerId),yield Fa(Z,T.auth);const se=yield zi(T);return Z._openRedirect(T.auth,g,"linkViaRedirect",se)})).apply(this,arguments)}function hi(){return(hi=(0,_.Z)(function*(C,g){return yield gr(C)._initializationPromise,Qc(C,g,!1)})).apply(this,arguments)}function Qc(C,g){return ki.apply(this,arguments)}function ki(){return(ki=(0,_.Z)(function*(C,g,y=!1){const T=gr(C),Z=pn(T,g),Pe=yield new gp(T,Z,y).execute();return Pe&&!y&&(delete Pe.user._redirectEventId,yield T._persistUserIfCurrent(Pe.user),yield T._setRedirectUser(null,g)),Pe})).apply(this,arguments)}function zi(C){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,_.Z)(function*(C){const g=io(`${C.uid}:::`);return C._redirectEventId=g,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),g})).apply(this,arguments)}class so{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(g,T)&&(y=!0,this.sendToConsumer(g,T),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Fs(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sd(C);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var T;if(g.error&&!Sd(g)){const Z=(null===(T=g.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError(ze(this.auth,Z))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const T=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&T}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hu(g))}saveEventToCache(g){this.cachedEventUids.add(Hu(g)),this.lastProcessedEventTime=Date.now()}}function Hu(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(g=>g).join("-")}function Sd({type:C,error:g}){return"unknown"===C&&"auth/no-auth-event"===g?.code}function zu(C){return nc.apply(this,arguments)}function nc(){return(nc=(0,_.Z)(function*(C,g={}){return it(C,"GET","/v1/projects",g)})).apply(this,arguments)}const xs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ml=/^https?/;function tl(){return(tl=(0,_.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:g}=yield zu(C);for(const y of g)try{if(Ni(y))return}catch{}Se(C,"unauthorized-domain")})).apply(this,arguments)}function Ni(C){const g=kn(),{protocol:y,hostname:T}=new URL(g);if(C.startsWith("chrome-extension://")){const Pe=new URL(C);return""===Pe.hostname&&""===T?"chrome-extension:"===y&&C.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&Pe.hostname===T}if(!Ml.test(y))return!1;if(xs.test(C))return T===C;const Z=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Z+"|"+Z+")$","i").test(T)}const yf=new Qn(3e4,6e4);function yo(){const C=en().___jsl;if(C?.H)for(const g of Object.keys(C.H))if(C.H[g].r=C.H[g].r||[],C.H[g].L=C.H[g].L||[],C.H[g].r=[...C.H[g].L],C.CP)for(let y=0;y<C.CP.length;y++)C.CP[y]=null}let rc=null;const ao=new Qn(5e3,15e3),Rl="__/auth/iframe",wr="emulator/auth/iframe",vf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ol=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vh(C){const g=C.config;Ye(g.authDomain,C,"auth-domain-config-required");const y=g.emulator?Ze(g,wr):`https://${C.config.authDomain}/${Rl}`,T={apiKey:g.apiKey,appName:C.name,v:Fe.SDK_VERSION},Z=Ol.get(C.config.apiHost);Z&&(T.eid=Z);const se=C._getFrameworks();return se.length&&(T.fw=se.join(",")),`${y}?${(0,W.xO)(T).slice(1)}`}function F(){return F=(0,_.Z)(function*(C){const g=yield function oo(C){return rc=rc||function Do(C){return new Promise((g,y)=>{var T,Z,se;function Pe(){yo(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{yo(),y(ze(C,"network-request-failed"))},timeout:yf.get()})}if(null!==(Z=null===(T=en().gapi)||void 0===T?void 0:T.iframes)&&void 0!==Z&&Z.Iframe)g(gapi.iframes.getContext());else{if(null===(se=en().gapi)||void 0===se||!se.load){const yt=Ti("iframefcb");return en()[yt]=()=>{gapi.load?Pe():y(ze(C,"network-request-failed"))},$r(`https://apis.google.com/js/api.js?onload=${yt}`).catch(rn=>y(rn))}Pe()}}).catch(g=>{throw rc=null,g})}(C),rc}(C),y=en().gapi;return Ye(y,C,"internal-error"),g.open({where:document.body,url:vh(C),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vf,dontclear:!0},T=>new Promise(function(){var Z=(0,_.Z)(function*(se,Pe){yield T.restyle({setHideOnLeave:!1});const yt=ze(C,"network-request-failed"),rn=en().setTimeout(()=>{Pe(yt)},ao.get());function wn(){en().clearTimeout(rn),se(T)}T.ping(wn).then(wn,()=>{Pe(yt)})});return function(se,Pe){return Z.apply(this,arguments)}}()))}),F.apply(this,arguments)}const X={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ce=500,Ke=600,ot="_blank",Dt="http://localhost";class yn{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Ir="__/auth/handler",Or="emulator/auth/handler",$o=encodeURIComponent("fac");function yi(C,g,y,T,Z,se){return Jc.apply(this,arguments)}function Jc(){return(Jc=(0,_.Z)(function*(C,g,y,T,Z,se){Ye(C.config.authDomain,C,"auth-domain-config-required"),Ye(C.config.apiKey,C,"invalid-api-key");const Pe={apiKey:C.config.apiKey,appName:C.name,authType:y,redirectUrl:T,v:Fe.SDK_VERSION,eventId:Z};if(g instanceof cs){g.setDefaultLanguage(C.languageCode),Pe.providerId=g.providerId||"",(0,W.xb)(g.getCustomParameters())||(Pe.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Hn,Wn]of Object.entries(se||{}))Pe[Hn]=Wn}if(g instanceof ss){const Hn=g.getScopes().filter(Wn=>""!==Wn);Hn.length>0&&(Pe.scopes=Hn.join(","))}C.tenantId&&(Pe.tid=C.tenantId);const yt=Pe;for(const Hn of Object.keys(yt))void 0===yt[Hn]&&delete yt[Hn];const rn=yield C._getAppCheckToken(),wn=rn?`#${$o}=${encodeURIComponent(rn)}`:"";return`${function Ji({config:C}){return C.emulator?Ze(C,Or):`https://${C.authDomain}/${Ir}`}(C)}?${(0,W.xO)(yt).slice(1)}${wn}`})).apply(this,arguments)}const Go="webStorageSupport",va=class nl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qa,this._completeRedirectFn=Qc,this._overrideRedirectResult=gf}_openPopup(g,y,T,Z){var se=this;return(0,_.Z)(function*(){var Pe;xt(null===(Pe=se.eventManagers[g._key()])||void 0===Pe?void 0:Pe.manager,"_initialize() not called before _openPopup()");const yt=yield yi(g,y,T,kn(),Z);return function bn(C,g,y,T=Ce,Z=Ke){const se=Math.max((window.screen.availHeight-Z)/2,0).toString(),Pe=Math.max((window.screen.availWidth-T)/2,0).toString();let yt="";const rn=Object.assign(Object.assign({},X),{width:T.toString(),height:Z.toString(),top:se,left:Pe}),wn=(0,W.z$)().toLowerCase();y&&(yt=ye(wn)?ot:y),we(wn)&&(g=g||Dt,rn.scrollbars="yes");const Hn=Object.entries(rn).reduce((ls,[El,Qu])=>`${ls}${El}=${Qu},`,"");if(function vn(C=(0,W.z$)()){var g;return rt(C)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(wn)&&"_self"!==yt)return function Zn(C,g){const y=document.createElement("a");y.href=C,y.target=g;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(g||"",yt),new yn(null);const Wn=window.open(g||"",yt,Hn);Ye(Wn,C,"popup-blocked");try{Wn.focus()}catch{}return new yn(Wn)}(g,yt,io())})()}_openRedirect(g,y,T,Z){var se=this;return(0,_.Z)(function*(){return yield se._originValidation(g),function Jn(C){en().location.href=C}(yield yi(g,y,T,kn(),Z)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:Z,promise:se}=this.eventManagers[y];return Z?Promise.resolve(Z):(xt(se,"If manager is not set, promise should be"),se)}const T=this.initAndGetManager(g);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(g){var y=this;return(0,_.Z)(function*(){const T=yield function x(C){return F.apply(this,arguments)}(g),Z=new so(g);return T.register("authEvent",se=>(Ye(se?.authEvent,g,"invalid-auth-event"),{status:Z.onEvent(se.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:Z},y.iframes[g._key()]=T,Z})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Go,{type:Go},Z=>{var se;const Pe=null===(se=Z?.[0])||void 0===se?void 0:se[Go];void 0!==Pe&&y(!!Pe),Se(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function _u(C){return tl.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return ii()||re()||rt()}};class ic{constructor(g){this.factorId=g}_process(g,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,T);case"signin":return this._finalizeSignIn(g,y.credential);default:return zt("unexpected MultiFactorSessionType")}}}class Td extends ic{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Td(g)}_finalizeEnroll(g,y,T){return function us(C,g){return it(C,"POST","/v2/accounts/mfaEnrollment:finalize",dt(C,g))}(g,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function uh(C,g){return it(C,"POST","/v2/accounts/mfaSignIn:finalize",dt(C,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $u=(()=>{class C{constructor(){}static assertion(y){return Td._fromCredential(y)}}return C.FACTOR_ID="phone",C})();var Sc="@firebase/auth";class Gu{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,_.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(T=>{g(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);y&&(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tu(){return window}(0,W.Pz)("authIdTokenMaxAge"),function Tm(C){(0,Fe._registerComponent)(new $e.wA("auth",(g,{options:y})=>{const T=g.getProvider("app").getImmediate(),Z=g.getProvider("heartbeat"),se=g.getProvider("app-check-internal"),{apiKey:Pe,authDomain:yt}=T.options;Ye(Pe&&!Pe.includes(":"),"invalid-api-key",{appName:T.name});const rn={apiKey:Pe,authDomain:yt,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ht(C)},wn=new is(T,Z,se,rn);return function Tr(C,g){const y=g?.persistence||[],T=(Array.isArray(y)?y:[y]).map(le);g?.errorMap&&C._updateErrorMap(g.errorMap),C._initializeWithPersistence(T,g?.popupRedirectResolver)}(wn,y),wn},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,T)=>{g.getProvider("auth-internal").initialize()})),(0,Fe._registerComponent)(new $e.wA("auth-internal",g=>{const y=gr(g.getProvider("auth").getImmediate());return new Gu(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Fe.registerVersion)(Sc,"0.23.2",function yp(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,Fe.registerVersion)(Sc,"0.23.2","esm2017")}("Browser");const Ef=2e3;function yu(){return yu=(0,_.Z)(function*(C,g,y){var T;const{BuildInfo:Z}=tu();xt(g.sessionId,"AuthEvent did not contain a session ID");const se=yield function Fl(C){return bh.apply(this,arguments)}(g.sessionId),Pe={};return rt()?Pe.ibi=Z.packageName:he()?Pe.apn=Z.packageName:Se(C,"operation-not-supported-in-this-environment"),Z.displayName&&(Pe.appDisplayName=Z.displayName),Pe.sessionId=se,yi(C,y,g.type,void 0,null!==(T=g.eventId)&&void 0!==T?T:void 0,Pe)}),yu.apply(this,arguments)}function gl(){return(gl=(0,_.Z)(function*(C){const{BuildInfo:g}=tu(),y={};rt()?y.iosBundleId=g.packageName:he()?y.androidPackageName=g.packageName:Se(C,"operation-not-supported-in-this-environment"),yield zu(C,y)})).apply(this,arguments)}function Wu(){return(Wu=(0,_.Z)(function*(C,g,y){const{cordova:T}=tu();let Z=()=>{};try{yield new Promise((se,Pe)=>{let yt=null;function rn(){var Wn;se();const ls=null===(Wn=T.plugins.browsertab)||void 0===Wn?void 0:Wn.close;"function"==typeof ls&&ls(),"function"==typeof y?.close&&y.close()}function wn(){yt||(yt=window.setTimeout(()=>{Pe(ze(C,"redirect-cancelled-by-user"))},Ef))}function Hn(){"visible"===document?.visibilityState&&wn()}g.addPassiveListener(rn),document.addEventListener("resume",wn,!1),he()&&document.addEventListener("visibilitychange",Hn,!1),Z=()=>{g.removePassiveListener(rn),document.removeEventListener("resume",wn,!1),document.removeEventListener("visibilitychange",Hn,!1),yt&&window.clearTimeout(yt)}})}finally{Z()}})).apply(this,arguments)}function bh(){return(bh=(0,_.Z)(function*(C){const g=function Ac(C){if(xt(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const g=new ArrayBuffer(C.length),y=new Uint8Array(g);for(let T=0;T<C.length;T++)y[T]=C.charCodeAt(T);return y}(C),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(Z=>Z.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Ch=20;class nu extends so{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,_.Z)(function*(){yield g.initPromise})()}}function Ll(C){return vu.apply(this,arguments)}function vu(){return(vu=(0,_.Z)(function*(C){const g=yield Ea()._get(_l(C));return g&&(yield Ea()._remove(_l(C))),g})).apply(this,arguments)}function ai(){const C=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<Ch;y++){const T=Math.floor(Math.random()*g.length);C.push(g.charAt(T))}return C.join("")}function Ea(){return le(Uo)}function _l(C){return ve("authEvent",C.config.apiKey,C.name)}function Mc(C){if(!C?.includes("?"))return{};const[g,...y]=C.split("?");return(0,W.zd)(y.join("?"))}const vl=class Ih{constructor(){this._redirectPersistence=Qa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Qc,this._overrideRedirectResult=gf}_initialize(g){var y=this;return(0,_.Z)(function*(){const T=g._key();let Z=y.eventManagers.get(T);return Z||(Z=new nu(g),y.eventManagers.set(T,Z),y.attachCallbackListeners(g,Z)),Z})()}_openPopup(g){Se(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,T,Z){var se=this;return(0,_.Z)(function*(){!function wh(C){var g,y,T,Z,se,Pe,yt,rn,wn,Hn;const Wn=tu();Ye("function"==typeof(null===(g=Wn?.universalLinks)||void 0===g?void 0:g.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ye(typeof(null===(y=Wn?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ye("function"==typeof(null===(se=null===(Z=null===(T=Wn?.cordova)||void 0===T?void 0:T.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===se?void 0:se.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ye("function"==typeof(null===(rn=null===(yt=null===(Pe=Wn?.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===yt?void 0:yt.browsertab)||void 0===rn?void 0:rn.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ye("function"==typeof(null===(Hn=null===(wn=Wn?.cordova)||void 0===wn?void 0:wn.InAppBrowser)||void 0===Hn?void 0:Hn.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Pe=yield se._initialize(g);yield Pe.initialized(),Pe.resetRedirect(),function Dd(){Zc.clear()}(),yield se._originValidation(g);const yt=function xd(C,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:ai(),postBody:null,tenantId:C.tenantId,error:ze(C,"no-auth-event")}}(g,T,Z);yield function Md(C,g){return Ea()._set(_l(C),g)}(g,yt);const rn=yield function wf(C,g,y){return yu.apply(this,arguments)}(g,yt,y),wn=yield function kl(C){const{cordova:g}=tu();return new Promise(y=>{g.plugins.browsertab.isAvailable(T=>{let Z=null;T?g.plugins.browsertab.openUrl(C):Z=g.InAppBrowser.open(C,function Ut(C=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),y(Z)})})}(rn);return function Nl(C,g,y){return Wu.apply(this,arguments)}(g,Pe,wn)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ad(C){return gl.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:T,handleOpenURL:Z,BuildInfo:se}=tu(),Pe=setTimeout((0,_.Z)(function*(){yield Ll(g),y.onEvent(Cf())}),500),yt=function(){var Hn=(0,_.Z)(function*(Wn){clearTimeout(Pe);const ls=yield Ll(g);let El=null;ls&&Wn?.url&&(El=function Eu(C,g){var y,T;const Z=function bf(C){const g=Mc(C),y=g.link?decodeURIComponent(g.link):void 0,T=Mc(y).link,Z=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return Mc(Z).link||Z||T||y||C}(g);if(Z.includes("/__/auth/callback")){const se=Mc(Z),Pe=se.firebaseError?function xc(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(se.firebaseError)):null,yt=null===(T=null===(y=Pe?.code)||void 0===y?void 0:y.split("auth/"))||void 0===T?void 0:T[1],rn=yt?ze(yt):null;return rn?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:rn,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:Z,postBody:null}}return null}(ls,Wn.url)),y.onEvent(El||Cf())});return function(ls){return Hn.apply(this,arguments)}}();typeof T<"u"&&"function"==typeof T.subscribe&&T.subscribe(null,yt);const rn=Z,wn=`${se.packageName.toLowerCase()}://`;tu().handleOpenURL=function(){var Hn=(0,_.Z)(function*(Wn){if(Wn.toLowerCase().startsWith(wn)&&yt({url:Wn}),"function"==typeof rn)try{rn(Wn)}catch(ls){console.error(ls)}});return function(Wn){return Hn.apply(this,arguments)}}()}};function Cf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ze("no-auth-event")}}const Mm=1e3;function Rc(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function rl(C=(0,W.z$)()){return!("file:"!==Rc()&&"ionic:"!==Rc()&&"capacitor:"!==Rc()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function ti(){try{const C=self.localStorage,g=io();if(C)return C.setItem(g,"1"),C.removeItem(g),!function Rm(C=(0,W.z$)()){return function Oc(){return(0,W.w1)()&&11===document?.documentMode}()||function r_(C=(0,W.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,W.hl)()}catch{return Ep()&&(0,W.hl)()}return!1}function Ep(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ku(){return(function vp(){return"http:"===Rc()||"https:"===Rc()}()||(0,W.ru)()||rl())&&!function If(){return(0,W.b$)()||(0,W.UG)()}()&&ti()&&!Ep()}function wp(){return rl()&&typeof document<"u"}function qu(){return(qu=(0,_.Z)(function*(){return!!wp()&&new Promise(C=>{const g=setTimeout(()=>{C(!1)},Mm);document.addEventListener("deviceready",()=>{clearTimeout(g),C(!0)})})})).apply(this,arguments)}const ta={LOCAL:"local",NONE:"none",SESSION:"session"},wu=Ye,Dh="persistence";function ru(C){return Od.apply(this,arguments)}function Od(){return(Od=(0,_.Z)(function*(C){yield C._initializationPromise;const g=Df(),y=ve(Dh,C.config.apiKey,C.name);g&&g.setItem(y,C._getPersistence())})).apply(this,arguments)}function Df(){var C;try{return(null===(C=function Rd(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const Pd=Ye;class wa{constructor(){this.browserResolver=le(va),this.cordovaResolver=le(vl),this.underlyingResolver=null,this._redirectPersistence=Qa,this._completeRedirectFn=Qc,this._overrideRedirectResult=gf}_initialize(g){var y=this;return(0,_.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,T,Z){var se=this;return(0,_.Z)(function*(){return yield se.selectUnderlyingResolver(),se.assertedUnderlyingResolver._openPopup(g,y,T,Z)})()}_openRedirect(g,y,T,Z){var se=this;return(0,_.Z)(function*(){return yield se.selectUnderlyingResolver(),se.assertedUnderlyingResolver._openRedirect(g,y,T,Z)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return wp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,_.Z)(function*(){if(g.underlyingResolver)return;const y=yield function bp(){return qu.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function Cu(C){return C.unwrap()}function Zy(C){return Ms(C)}function Ms(C){const{_tokenResponse:g}=C instanceof W.ZR?C.customData:C;if(!g)return null;if(!(C instanceof W.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Gt.credentialFromResult(C);const y=g.providerId;if(!y||y===Ve.PASSWORD)return null;let T;switch(y){case Ve.GOOGLE:T=ca;break;case Ve.FACEBOOK:T=Po;break;case Ve.GITHUB:T=$a;break;case Ve.TWITTER:T=Ga;break;default:const{oauthIdToken:Z,oauthAccessToken:se,oauthTokenSecret:Pe,pendingToken:yt,nonce:rn}=g;return se||Pe||Z||yt?yt?y.startsWith("saml.")?zs._create(y,yt):es._fromParams({providerId:y,signInMethod:y,pendingToken:yt,idToken:Z,accessToken:se}):new Hs(y).credential({idToken:Z,accessToken:se,rawNonce:rn}):null}return C instanceof W.ZR?T.credentialFromError(C):T.credentialFromResult(C)}function ba(C,g){return g.catch(y=>{throw y instanceof W.ZR&&function Qy(C,g){var y;const T=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Cp(C,function Oi(C,g){var y;const T=(0,W.m9)(C),Z=g;return Ye(g.customData.operationType,T,"argument-error"),Ye(null===(y=Z.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),Yn._fromError(T,Z)}(C,g));else if(T){const Z=Ms(g),se=g;Z&&(se.credential=Z,se.tenantId=T.tenantId||void 0,se.email=T.email||void 0,se.phoneNumber=T.phoneNumber||void 0)}}(C,y),y}).then(y=>{const Z=y.user;return{operationType:y.operationType,credential:Zy(y),additionalUserInfo:fo(y),user:il.getOrCreate(Z)}})}function kd(C,g){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,_.Z)(function*(C,g){const y=yield g;return{verificationId:y.verificationId,confirm:T=>ba(C,y.confirm(T))}})).apply(this,arguments)}class Cp{constructor(g,y){this.resolver=y,this.auth=function Yu(C){return C.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return ba(Cu(this.auth),this.resolver.resolveSignIn(g))}}class il{constructor(g){this._delegate=g,this.multiFactor=function ks(C){const g=(0,W.m9)(C);return ro.has(g)||ro.set(g,ys._fromUser(g)),ro.get(g)}(g)}static getOrCreate(g){return il.USER_MAP.has(g)||il.USER_MAP.set(g,new il(g)),il.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,_.Z)(function*(){return ba(y.auth,z(y._delegate,g))})()}linkWithPhoneNumber(g,y){var T=this;return(0,_.Z)(function*(){return kd(T.auth,function S(C,g,y){return A.apply(this,arguments)}(T._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,_.Z)(function*(){return ba(y.auth,function mo(C,g,y){return fh.apply(this,arguments)}(y._delegate,g,wa))})()}linkWithRedirect(g){var y=this;return(0,_.Z)(function*(){return yield ru(gr(y.auth)),Ns(y._delegate,g,wa)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,_.Z)(function*(){return ba(y.auth,fe(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return kd(this.auth,function b(C,g,y){return N.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return ba(this.auth,function Vi(C,g,y){return qr.apply(this,arguments)}(this._delegate,g,wa))}reauthenticateWithRedirect(g){var y=this;return(0,_.Z)(function*(){return yield ru(gr(y.auth)),Dc(y._delegate,g,wa)})()}sendEmailVerification(g){return function Ra(C,g){return Ya.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,_.Z)(function*(){return yield function Mt(C,g){return Xt.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function Di(C,g){return Gi((0,W.m9)(C),g,null)}(this._delegate,g)}updatePassword(g){return function $s(C,g){return Gi((0,W.m9)(C),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function ge(C,g){return Je.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Wc(C,g){return Io.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function no(C,g,y){return Za.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}il.USER_MAP=new WeakMap;const Sh=Ye;let Sf=(()=>{class C{constructor(y,T){if(this.app=y,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Z}=y.options;Sh(Z,"invalid-api-key",{appName:y.name}),Sh(Z,"invalid-api-key",{appName:y.name});const se=typeof window<"u"?wa:void 0;this._delegate=T.initialize({options:{persistence:na(Z,y.name),popupRedirectResolver:se}}),this._delegate._updateErrorMap(Ht),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?il.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,T){!function Ts(C,g,y){const T=gr(C);Ye(T._canInitEmulator,T,"emulator-config-failed"),Ye(/^https?:\/\//.test(g),T,"invalid-emulator-scheme");const Z=!!y?.disableWarnings,se=Xr(g),{host:Pe,port:yt}=function nr(C){const g=Xr(C),y=/(\/\/)?([^?#/]+)/.exec(C.substr(g.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",Z=/^(\[[^\]]+\])(:|$)/.exec(T);if(Z){const se=Z[1];return{host:se,port:bs(T.substr(se.length+1))}}{const[se,Pe]=T.split(":");return{host:se,port:bs(Pe)}}}(g);T.config.emulator={url:`${se}//${Pe}${null===yt?"":`:${yt}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Pe,port:yt,protocol:se.replace(":",""),options:Object.freeze({disableWarnings:Z})}),Z||function lo(){function C(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,y,T)}applyActionCode(y){return function Cd(C,g){return fa.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return dl(this._delegate,y)}confirmPasswordReset(y,T){return function Zo(C,g,y){return vc.apply(this,arguments)}(this._delegate,y,T)}createUserWithEmailAndPassword(y,T){var Z=this;return(0,_.Z)(function*(){return ba(Z._delegate,function Co(C,g,y){return uo.apply(this,arguments)}(Z._delegate,y,T))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function $c(C,g){return Lo.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Ec(C,g){return"EMAIL_SIGNIN"===wo.parseLink(g)?.operation}(0,y)}getRedirectResult(){var y=this;return(0,_.Z)(function*(){Sh(Ku(),y._delegate,"operation-not-supported-in-this-environment");const T=yield function gu(C,g){return hi.apply(this,arguments)}(y._delegate,wa);return T?ba(y._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function La(C,g){gr(C)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,T,Z){const{next:se,error:Pe,complete:yt}=oc(y,T,Z);return this._delegate.onAuthStateChanged(se,Pe,yt)}onIdTokenChanged(y,T,Z){const{next:se,error:Pe,complete:yt}=oc(y,T,Z);return this._delegate.onIdTokenChanged(se,Pe,yt)}sendSignInLinkToEmail(y,T){return function pa(C,g,y){return Kl.apply(this,arguments)}(this._delegate,y,T)}sendPasswordResetEmail(y,T){return function ul(C,g,y){return eo.apply(this,arguments)}(this._delegate,y,T||void 0)}setPersistence(y){var T=this;return(0,_.Z)(function*(){let Z;switch(function Pc(C,g){wu(Object.values(ta).includes(g),C,"invalid-persistence-type"),(0,W.b$)()?wu(g!==ta.SESSION,C,"unsupported-persistence-type"):(0,W.UG)()?wu(g===ta.NONE,C,"unsupported-persistence-type"):Ep()?wu(g===ta.NONE||g===ta.LOCAL&&(0,W.hl)(),C,"unsupported-persistence-type"):wu(g===ta.NONE||ti(),C,"unsupported-persistence-type")}(T._delegate,y),y){case ta.SESSION:Z=Qa;break;case ta.LOCAL:Z=(yield le(jo)._isAvailable())?jo:Uo;break;case ta.NONE:Z=vt;break;default:return Se("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(Z)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return ba(this._delegate,function V(C){return R.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return ba(this._delegate,ui(this._delegate,y))}signInWithCustomToken(y){return ba(this._delegate,function Pt(C,g){return Er.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,T){return ba(this._delegate,function Ka(C,g,y){return ui((0,W.m9)(C),la.credential(g,y))}(this._delegate,y,T))}signInWithEmailLink(y,T){return ba(this._delegate,function _s(C,g,y){return hl.apply(this,arguments)}(this._delegate,y,T))}signInWithPhoneNumber(y,T){return kd(this._delegate,function Yc(C,g,y){return Ws.apply(this,arguments)}(this._delegate,y,T))}signInWithPopup(y){var T=this;return(0,_.Z)(function*(){return Sh(Ku(),T._delegate,"operation-not-supported-in-this-environment"),ba(T._delegate,function el(C,g,y){return Na.apply(this,arguments)}(T._delegate,y,wa))})()}signInWithRedirect(y){var T=this;return(0,_.Z)(function*(){return Sh(Ku(),T._delegate,"operation-not-supported-in-this-environment"),yield ru(T._delegate),_f(T._delegate,y,wa)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function to(C,g){return Fo.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=ta,C})();function oc(C,g,y){let T=C;"function"!=typeof C&&({next:T,error:g,complete:y}=C);const Z=T;return{next:Pe=>Z(Pe&&il.getOrCreate(Pe)),error:g,complete:y}}function na(C,g){const y=function bu(C,g){const y=Df();if(!y)return[];const T=ve(Dh,C,g);switch(y.getItem(T)){case ta.NONE:return[vt];case ta.LOCAL:return[jo,Qa];case ta.SESSION:return[Qa];default:return[]}}(C,g);if(typeof self<"u"&&!y.includes(jo)&&y.push(jo),typeof window<"u")for(const T of[Uo,Qa])y.includes(T)||y.push(T);return y.includes(vt)||y.push(vt),y}class Du{constructor(){this.providerId="phone",this._delegate=new Gt(Cu(L.Z.auth()))}static credential(g,y){return Gt.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}Du.PHONE_SIGN_IN_METHOD=Gt.PHONE_SIGN_IN_METHOD,Du.PROVIDER_ID=Gt.PROVIDER_ID;const Ip=Ye;class Dp{constructor(g,y,T=L.Z.app()){var Z;Ip(null===(Z=T.options)||void 0===Z?void 0:Z.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new ka(g,y,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Om(C){C.INTERNAL.registerComponent(new $e.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),T=g.getProvider("auth");return new Sf(y,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ke_EMAIL_SIGNIN,PASSWORD_RESET:ke_PASSWORD_RESET,RECOVER_EMAIL:ke_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ke_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ke_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ke_VERIFY_EMAIL}},EmailAuthProvider:la,FacebookAuthProvider:Po,GithubAuthProvider:$a,GoogleAuthProvider:ca,OAuthProvider:Hs,SAMLAuthProvider:bo,PhoneAuthProvider:Du,PhoneMultiFactorGenerator:$u,RecaptchaVerifier:Dp,TwitterAuthProvider:Ga,Auth:Sf,AuthCredential:As,Error:W.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.4.2")}(L.Z)},5861:(gn,at,j)=>{function _(W,Fe,Ne,Ae,$e,Ge,Ve){try{var Ie=W[Ge](Ve),De=Ie.value}catch(ke){return void Ne(ke)}Ie.done?Fe(De):Promise.resolve(De).then(Ae,$e)}function L(W){return function(){var Fe=this,Ne=arguments;return new Promise(function(Ae,$e){var Ge=W.apply(Fe,Ne);function Ve(De){_(Ge,Ae,$e,Ve,Ie,"next",De)}function Ie(De){_(Ge,Ae,$e,Ve,Ie,"throw",De)}Ve(void 0)})}}j.d(at,{Z:()=>L})},7582:(gn,at,j)=>{function Fe(Ze,lt){var st={};for(var tt in Ze)Object.prototype.hasOwnProperty.call(Ze,tt)&&lt.indexOf(tt)<0&&(st[tt]=Ze[tt]);if(null!=Ze&&"function"==typeof Object.getOwnPropertySymbols){var dt=0;for(tt=Object.getOwnPropertySymbols(Ze);dt<tt.length;dt++)lt.indexOf(tt[dt])<0&&Object.prototype.propertyIsEnumerable.call(Ze,tt[dt])&&(st[tt[dt]]=Ze[tt[dt]])}return st}function ke(Ze,lt,st,tt){return new(st||(st=Promise))(function(it,ln){function $t(zn){try{Cn(tt.next(zn))}catch(cr){ln(cr)}}function Ln(zn){try{Cn(tt.throw(zn))}catch(cr){ln(cr)}}function Cn(zn){zn.done?it(zn.value):function dt(it){return it instanceof st?it:new st(function(ln){ln(it)})}(zn.value).then($t,Ln)}Cn((tt=tt.apply(Ze,lt||[])).next())})}function qe(Ze){return this instanceof qe?(this.v=Ze,this):new qe(Ze)}function Se(Ze,lt,st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var dt,tt=st.apply(Ze,lt||[]),it=[];return dt={},ln("next"),ln("throw"),ln("return"),dt[Symbol.asyncIterator]=function(){return this},dt;function ln(sr){tt[sr]&&(dt[sr]=function(Dn){return new Promise(function(ur,qn){it.push([sr,Dn,ur,qn])>1||$t(sr,Dn)})})}function $t(sr,Dn){try{!function Ln(sr){sr.value instanceof qe?Promise.resolve(sr.value.v).then(Cn,zn):cr(it[0][2],sr)}(tt[sr](Dn))}catch(ur){cr(it[0][3],ur)}}function Cn(sr){$t("next",sr)}function zn(sr){$t("throw",sr)}function cr(sr,Dn){sr(Dn),it.shift(),it.length&&$t(it[0][0],it[0][1])}}function Bt(Ze){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st,lt=Ze[Symbol.asyncIterator];return lt?lt.call(Ze):(Ze=function Kt(Ze){var lt="function"==typeof Symbol&&Symbol.iterator,st=lt&&Ze[lt],tt=0;if(st)return st.call(Ze);if(Ze&&"number"==typeof Ze.length)return{next:function(){return Ze&&tt>=Ze.length&&(Ze=void 0),{value:Ze&&Ze[tt++],done:!Ze}}};throw new TypeError(lt?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ze),st={},tt("next"),tt("throw"),tt("return"),st[Symbol.asyncIterator]=function(){return this},st);function tt(it){st[it]=Ze[it]&&function(ln){return new Promise(function($t,Ln){!function dt(it,ln,$t,Ln){Promise.resolve(Ln).then(function(Cn){it({value:Cn,done:$t})},ln)}($t,Ln,(ln=Ze[it](ln)).done,ln.value)})}}}j.d(at,{FC:()=>Se,KL:()=>Bt,_T:()=>Fe,mG:()=>ke,qq:()=>qe}),"function"==typeof SuppressedError&&SuppressedError}},gn=>{gn(gn.s=5756)}]);