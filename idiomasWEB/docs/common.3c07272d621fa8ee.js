"use strict";(self.webpackChunkidiomasWEB=self.webpackChunkidiomasWEB||[]).push([[592],{1184:(D,f,n)=>{n.d(f,{I:()=>c});var u=n(5861),l=n(4650),h=n(6895),v=n(5602),p=n(1457),E=n(2786),m=n(529);let c=(()=>{class g{constructor(e,r,a,o,s){this.locale=e,this.idiomaSV=r,this.gvSV=a,this.palabraSV=o,this.http=s}importDataFromFile(e,r){var a=this;return(0,u.Z)(function*(){const o=yield a.readFileContent(e),s=JSON.parse(o);let i=String((0,h.p6)(Date.now(),"yyyy-MM-dd mm:ss",a.locale));yield a.idiomaSV.createIdiomaWithID(i,r,s.idioma.nombre,s.idioma.lenguaje,s.idioma.pribate);for(const d of s.idioma.gv){yield a.delay(1e3);let _=String((0,h.p6)(Date.now(),"yyyy-MM-dd mm:ss",a.locale));yield a.gvSV.createGrupoVocabularioWithID(_,i,d.nombre,d.nombre_col1,d.nombre_col2);for(const b of d.palabras)yield a.delay(1e3),yield a.createPalabras(_,b)}})()}readFileContent(e){return new Promise((r,a)=>{const o=new FileReader;o.onload=s=>r(o.result),o.onerror=s=>a(o.error),o.readAsText(e)})}delay(e){return new Promise(r=>setTimeout(r,e))}createPalabras(e,r){var a=this;return(0,u.Z)(function*(){yield a.palabraSV.createPalabra(e,r.col1,r.col2)})()}getIdioma(e){var r=this;return(0,u.Z)(function*(){return yield r.idiomaSV.getIdioma(e)})()}getData(e){var r=this;return(0,u.Z)(function*(){let a={idioma:{nombre:"",lenguaje:"",pribate:!1,gv:[]}},o=0,s=0,i=yield r.getIdioma(e);r.gvSV.getListGrupoVocabulariobyIdiomaId(e).subscribe(d=>{a.idioma.nombre=i.nombre,a.idioma.lenguaje=i.lenguaje,a.idioma.pribate=i.private,o=d.length;for(const _ of d){let b={nombre:_.nombre,nombre_col1:_.nombre_col1,nombre_col2:_.nombre_col2,palabras:[]};r.palabraSV.getListPalabrabyGvId(_.id).subscribe(L=>{L.forEach(y=>{b.palabras.push({col1:y.col1,col2:y.col2})}),a.idioma.gv.push(b),s+=1,o==s&&r.exportDataToFile(a)})}})})()}exportDataToFile(e){return(0,u.Z)(function*(){try{const r=JSON.stringify(e),a=(new Date).toLocaleString().replace(/[,:\s\/]/g,"-"),o=`${e.idioma.nombre}-${a}.json`,s=new Blob([r],{type:"application/json"}),i=window.URL.createObjectURL(s),d=document.createElement("a");d.href=i,d.download=o,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(i),console.log("Archivo JSON guardado exitosamente.")}catch(r){console.error("Error al guardar el archivo JSON:",r)}})()}static#e=this.\u0275fac=function(r){return new(r||g)(l.LFG(l.soG),l.LFG(v.Rb),l.LFG(p.r),l.LFG(E.f),l.LFG(m.eN))};static#t=this.\u0275prov=l.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}return g})()},6700:(D,f,n)=>{n.d(f,{K:()=>E,n:()=>m});var u=n(5861),l=n(4650),h=n(1762),v=n(1205),p=n(6360);let E=(()=>{class c{constructor(t,e,r,a,o){this.afStore=t,this.ngFireAuth=e,this.router=r,this.ngZone=a,this.dbf=o,this.ngFireAuth.authState.subscribe(s=>{s?(this.userData=s,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}getListUsersBloq(){return this.dbf.collection("/users",e=>e.where("bloqued","==",1)).valueChanges()}getListUsersNoBloq(){return this.dbf.collection("/users",e=>e.where("bloqued","==",0)).valueChanges()}getListUsersAdmin(){return this.dbf.collection("/users",e=>e.where("role_id","==","1")).valueChanges()}getListUsersNoAdmin(){return this.dbf.collection("/users",e=>e.where("role_id","==","2")).valueChanges()}getUserByEmailandPass(t,e){return this.dbf.collection("/users",a=>a.where("email","==",t).where("password","==",e).limit(1)).valueChanges()}getUser(t){let e=new m;return this.dbf.doc(`users/${t}`).snapshotChanges().subscribe(a=>{e.id=a.payload.data().id,e.email=a.payload.data().email,e.password=a.payload.data().password,e.bloqued=a.payload.data().bloqued,e.role_id=a.payload.data().role_id}),e}getLoggedUser(){return this.ngFireAuth.currentUser}login(t,e){return this.ngFireAuth.signInWithEmailAndPassword(t,e)}ForgotPassword(t){return this.ngFireAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(e=>{window.alert(e)})}changePass(t){var e=this;return(0,u.Z)(function*(){(yield e.ngFireAuth.currentUser).updatePassword(t)})()}bloquearUser(t,e){this.dbf.doc(`users/${t}`).set({bloqued:e},{merge:!0})}AdminUser(t,e){this.dbf.doc(`users/${t}`).set({role_id:e},{merge:!0})}editUser(t,e,r){this.dbf.doc(`users/${t}`).set({password:e,email:r},{merge:!0})}deleteUser(t){var e=this;return(0,u.Z)(function*(){(yield e.ngFireAuth.currentUser).delete(),e.dbf.doc(`users/${t}`).delete()})()}createUser(t,e,r){var a=this;return(0,u.Z)(function*(){const o=yield a.ngFireAuth.createUserWithEmailAndPassword(e,t);var s={password:t,email:o.user.email,id:o.user.uid,role_id:r};let i=new m;return i.email=e,i.password=t,i.id=o.user.uid,i.bloqued=0,i.role_id=r,a.SetUserData(s),i})()}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}AuthLogin(t){return this.ngFireAuth.signInWithPopup(t).then(e=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(e.user)}).catch(e=>{window.alert(e)})}SetUserData(t){return this.afStore.doc(`users/${t.id}`).set({id:t.id,email:t.email,password:t.password,bloqued:0,role_id:t.role_id},{merge:!0})}SignOut(){return this.ngFireAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("isLoginRegister"),localStorage.removeItem("rol_Id"),this.router.navigate(["login"])})}static#e=this.\u0275fac=function(e){return new(e||c)(l.LFG(h.ST),l.LFG(v.zQ),l.LFG(p.F0),l.LFG(l.R0b),l.LFG(h.ST))};static#t=this.\u0275prov=l.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})();class m{}}}]);